LavaPack.loadBundle([[2032,{"./assert.cjs":2027,"./bytes.cjs":2029,"./hex.cjs":2036,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./bytes.cjs"),i=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),i.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),l=(0,r.coerce)((0,r.bigint)(),o,BigInt),u=((0,r.union)([i.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([i.StrictHexStruct]),a.hexToBytes)),d=(0,r.coerce)(i.StrictHexStruct,(0,r.instance)(Uint8Array),a.bytesToHex);s.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[2033,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r,n,a=this&&this.__classPrivateFieldGet||function(e,t,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,s,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,s):n?n.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),i(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}get(e){return a(this,r,"f").get(e)}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return a(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return a(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),i(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return a(this,n,"f").entries()}forEach(e,t){return a(this,n,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}has(e){return a(this,n,"f").has(e)}keys(){return a(this,n,"f").keys()}values(){return a(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[2034,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2035,{"./misc.cjs":2041,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const r=e("pony-cause"),n=e("./misc.cjs");function a(e){return"object"==typeof e&&null!==e&&"code"in e}function i(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=a,s.isErrorWithMessage=i,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return i(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,n.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),a(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[2036,{"./assert.cjs":2027,"./bytes.cjs":2029,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const r=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),a=e("./assert.cjs"),i=e("./bytes.cjs");function o(e){return(0,r.is)(e,s.HexStruct)}function c(e){return(0,r.is)(e,s.StrictHexStruct)}function l(e){(0,a.assert)((0,r.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,i.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,a.assert)((0,r.is)(s,(0,r.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,r.is)(e,s.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,r.pattern)((0,r.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,a.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,a.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,r.is)(e,s.HexAddressStruct)||u(e)},s.getChecksumAddress=l,s.isValidChecksumAddress=u,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=d}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[2037,{"./assert.cjs":2027,"./base64.cjs":2028,"./bytes.cjs":2029,"./caip-types.cjs":2030,"./checksum.cjs":2031,"./coercers.cjs":2032,"./collections.cjs":2033,"./encryption-types.cjs":2034,"./errors.cjs":2035,"./hex.cjs":2036,"./json.cjs":2038,"./keyring.cjs":2039,"./logging.cjs":2040,"./misc.cjs":2041,"./number.cjs":2042,"./opaque.cjs":2043,"./promise.cjs":2044,"./time.cjs":2045,"./transaction-types.cjs":2046,"./versions.cjs":2047},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),n(e("./assert.cjs"),s),n(e("./base64.cjs"),s),n(e("./bytes.cjs"),s),n(e("./caip-types.cjs"),s),n(e("./checksum.cjs"),s),n(e("./coercers.cjs"),s),n(e("./collections.cjs"),s),n(e("./encryption-types.cjs"),s),n(e("./errors.cjs"),s),n(e("./hex.cjs"),s),n(e("./json.cjs"),s),n(e("./keyring.cjs"),s),n(e("./logging.cjs"),s),n(e("./misc.cjs"),s),n(e("./number.cjs"),s),n(e("./opaque.cjs"),s),n(e("./promise.cjs"),s),n(e("./time.cjs"),s),n(e("./transaction-types.cjs"),s),n(e("./versions.cjs"),s)}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/index.cjs"}],[2038,{"./assert.cjs":2027,"./misc.cjs":2041,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./misc.cjs");function i({path:e,branch:t}){const s=e[e.length-1];return(0,a.hasProperty)(t[t.length-2],s)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!i(s)||e.validator(t,s),refiner:(t,s)=>!i(s)||e.refiner(t,s)})}s.object=e=>(0,r.object)(e),s.exactOptional=o;function c(e){return(0,r.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,r.union)([(0,r.literal)(null),(0,r.boolean)(),(0,r.define)("finite number",(e=>(0,r.is)(e,(0,r.number)())&&Number.isFinite(e))),(0,r.string)(),(0,r.array)((0,r.lazy)((()=>s.UnsafeJsonStruct))),(0,r.record)((0,r.string)(),(0,r.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,r.coerce)(s.UnsafeJsonStruct,(0,r.any)(),(e=>((0,n.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,n.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,r.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(s.JsonStruct),stack:o((0,r.string)())}),s.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),s.JsonStruct),(0,r.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,r.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,r.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,r.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,r.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,r.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,r.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,r.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,r.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/json.cjs"}],[2039,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[204,{"@metamask/permission-controller":1796,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("@metamask/permission-controller"),n=e("lodash");s.default={version:69,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=69;const s=function(e){var t;if("object"==typeof(null==e||null===(t=e.SubjectMetadataController)||void 0===t?void 0:t.subjectMetadata)){const{SubjectMetadataController:{subjectMetadata:t}}=e;Object.values(t).forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(e.subjectType=e.extensionId?r.SubjectType.Extension:r.SubjectType.Website)}))}return e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/069.js"}],[2040,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const n=(0,r(e("debug")).default)("metamask");s.createProjectLogger=function(e){return n.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[2041,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=r,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[2042,{"./assert.cjs":2027,"./hex.cjs":2036},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const r=e("./assert.cjs"),n=e("./hex.cjs");s.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/number.cjs"}],[2043,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[2044,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const r=new Promise(((e,r)=>{t=e,s=r}));return e&&r.catch((e=>{})),{promise:r,resolve:t,reject:s}}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[2045,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return r(e,"count"),e*t},s.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/time.cjs"}],[2046,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2047,{"./assert.cjs":2027,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const r=e("@metamask/superstruct"),n=e("semver"),a=e("./assert.cjs");s.VersionStruct=(0,r.refine)((0,r.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,r.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,r.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,n.gt)(e,t)},s.gtRange=function(e,t){return(0,n.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/smart-transactions-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[2048,{"./has-tx-object":2049,"@babel/runtime/helpers/asyncToGenerator":1949,"@babel/runtime/helpers/interopRequireDefault":1950,"@babel/runtime/regenerator":1953,"@metamask/ethjs-filter":2051,"@metamask/ethjs-util":2055,"ethjs-abi":3811,"js-sha3":4159,"promise-to-callback":4465},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=e("@babel/runtime/helpers/interopRequireDefault"),n=r(e("@babel/runtime/regenerator")),a=r(e("@babel/runtime/helpers/asyncToGenerator")),i=e("ethjs-abi"),o=e("@metamask/ethjs-filter"),c=e("@metamask/ethjs-util").getKeys,l=e("js-sha3").keccak_256,u=e("promise-to-callback"),d=e("./has-tx-object");t.exports=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=this;function s(e){return function(){var t,s=[].slice.call(arguments);"function"==typeof s[s.length-1]&&(t=s.pop());var n=function(e){return r.apply(this,arguments)}({methodObject:e,methodArgs:s});return t?u(n)(t):n}}function r(){return(r=(0,a.default)(n.default.mark((function e(s){var r,a,o,c,l,u,h;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.methodObject,a=s.methodArgs,o="call",c={},d(a)&&(c=a.pop()),(l=Object.assign({},t.defaultTxObject,c,{to:t.address})).data=i.encodeMethod(r,a),!1===r.constant&&(o="sendTransaction"),e.next=9,t.query[o](l);case 9:if(u=e.sent,"call"!==o){e.next=20;break}return e.prev=11,h=i.decodeMethod(r,u),e.abrupt("return",h);case 16:throw e.prev=16,e.t0=e.catch(11),new Error("[ethjs-contract] while formatting incoming raw call data "+JSON.stringify(u)+" "+e.t0);case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,null,[[11,16]])})))).apply(this,arguments)}t.abi=e.contractABI||[],t.query=e.query,t.address=e.address||"0x",t.bytecode=e.contractBytecode||"0x",t.defaultTxObject=e.contractDefaultTxObject||{},t.filters=new o(t.query),(h=t.abi,h.filter((function(e){return("function"===e.type||"event"===e.type)&&e.name.length>0}))).forEach((function(e){"function"===e.type?t[e.name]=s(e):"event"===e.type&&(t[e.name]=function(e){return function(){var s=[].slice.call(arguments),r=c(e.inputs,"type",!1),n=["0x"+l(e.name+"("+r.join(",")+")")],a=Object.assign({},s[0])||{},o=Object.assign({},s[0]||{},{to:t.address,topics:n}),u=Object.assign({},a,{decoder:function(t){return i.decodeEvent(e,t,n)},defaultFilterObject:o});return new t.filters.Filter(u)}}(e))}));var h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/contract.js"}],[2049,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=["from","to","data","value","gasPrice","gas"];t.exports=function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=e[e.length-1];if(!t)return!1;if("object"!=typeof t)return!1;if(0===Object.keys(t).length)return!0;var s=Object.keys(t);if(r.some((function(e){return s.includes(e)})))return!0;return!1}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/has-tx-object.js"}],[205,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:70,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=70;const s=function(e){var t;if(Array.isArray(null==e||null===(t=e.PermissionLogController)||void 0===t?void 0:t.permissionActivityLog)){const{PermissionLogController:{permissionActivityLog:t}}=e;t.forEach((e=>{e&&"object"==typeof e&&!Array.isArray(e)&&(delete e.request,delete e.response)}))}return e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/070.js"}],[2050,{"./contract":2048,"./has-tx-object":2049,"@metamask/ethjs-filter":2051,"@metamask/ethjs-util":2055,"ethjs-abi":3811,"js-sha3":4159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=e("ethjs-abi"),n=(e("js-sha3").keccak_256,e("@metamask/ethjs-filter"),e("@metamask/ethjs-util").getKeys),a=e("./contract"),i=e("./has-tx-object");t.exports=function(e){return function(t,s,o){if(!Array.isArray(t))throw new Error("[ethjs-contract] Contract ABI must be type Array, got type "+typeof t);if(void 0!==s&&"string"!=typeof s)throw new Error("[ethjs-contract] Contract bytecode must be type String, got type "+typeof s);if(void 0!==o&&"object"!=typeof o)throw new Error("[ethjs-contract] Contract default tx object must be type Object, got type "+typeof t);var c={at:function(r){return new a({address:r,query:e,contractBytecode:s,contractDefaultTxObject:o,contractABI:t})},new:function(){var a={},c=null,l=[].slice.call(arguments);"function"==typeof l[l.length-1]&&(c=l.pop()),i(l)&&(a=l.pop());var u=function(e){return e.filter((function(e){return"constructor"===e.type}))[0]}(t),d=Object.assign({},o,a);if(s&&(d.data=s),u){var h=r.encodeParams(n(u.inputs,"type"),l).substring(2);d.data=""+d.data+h}return c?e.sendTransaction(d,c):e.sendTransaction(d)}};return c}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-contract/lib/index.js"}],[2051,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function r(e,t){function s(e){var s=this;s.filterId=null,s.options=Object.assign({delay:300,decoder:function(e){return e},defaultFilterObject:{}},e||{}),s.watchers={},s.interval=setInterval((function(){null!==s.filterId&&Object.keys(s.watchers).length>0&&t.getFilterChanges(s.filterId,(function(e,t){var r=[],n=null;if(!e)try{t.forEach((function(e,n){r[n]=t[n],"object"==typeof t[n]&&(r[n].data=s.options.decoder(r[n].data))}))}catch(e){n=new Error("[ethjs-filter] while decoding filter change event data from RPC '"+JSON.stringify(r)+"': "+e)}Object.keys(s.watchers).forEach((function(a){var i=s.watchers[a];!0!==i.stop?n?i.callback(n,null):e?i.callback(e,null):Array.isArray(r)&&t.length>0&&i.callback(e,r):delete s.watchers[a]}))}))}),s.options.delay)}return s.prototype.at=function(e){this.filterId=e},s.prototype.watch=function(e){var t=e||function(){},s=this,r=Math.random().toString(36).substring(7);return s.watchers[r]={callback:t,stop:!1,stopWatching:function(){s.watchers[r].stop=!0}},s.watchers[r]},s.prototype.uninstall=function(e){var s=this,r=e||null;s.watchers=Object.assign({}),clearInterval(s.interval);var n=new Promise((function(e,r){t.uninstallFilter(s.filterId,(function(t,s){t?r(t):e(s)}))}));return r&&n.then((function(e){return r(null,e)})).catch((function(e){return r(e,null)})),r?null:n},s.prototype.new=function(){var s=null,r=this,n=[],a=[].slice.call(arguments);"function"==typeof a[a.length-1]&&(s=a.pop()),"Filter"===e&&n.push(Object.assign(r.options.defaultFilterObject,a[a.length-1]||{}));var i=new Promise((function(s,a){n.push((function(e,t){e?a(e):(r.filterId=t,s(t))})),t["new"+e].apply(t,n)}));return s&&i.then((function(e){return s(null,e)})).catch((function(e){return s(e,null)})),s?null:i},s}t.exports=function e(t){var s=this;if(!(s instanceof e))throw new Error("the EthFilter object must be instantiated with `new` flag.. (e.g. `const filters = new EthFilter(query);`)");if("object"!=typeof t)throw new Error("the EthFilter object must be instantiated with an EthQuery instance (e.g. `const filters = new EthFilter(new EthQuery(provider));`). See github.com/ethjs/ethjs-query for more details..");s.Filter=r("Filter",t),s.BlockFilter=r("BlockFilter",t),s.PendingTransactionFilter=r("PendingTransactionFilter",t)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract>@metamask/ethjs-filter",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-filter/lib/index.js"}],[2052,{"@metamask/ethjs-util":2055,"@metamask/number-to-bn":1774,"ethjs-schema":3813,"strip-hex-prefix":4825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=e("@metamask/number-to-bn"),n=e("ethjs-schema"),a=e("@metamask/ethjs-util"),i=a.arrayContainsArray,o=a.getBinarySize,c=a.padToEven,l=e("strip-hex-prefix");function u(e,t,s){if(-1===["string","number","object"].indexOf(typeof e)||null===e)return e;var n=r(e),a=s&&n.toString(16).length%2?"0":"";if(r(e).isNeg())throw new Error("[ethjs-format] while formatting quantity '"+n.toString(10)+"', invalid negative number. Number must be positive or zero.");return t?"0x"+a+n.toString(16):n}function d(e,t){var s=e;return-1===n.tags.indexOf(e)&&(s=u(e,t)),s}function h(e,t){var s=e,r=0;if("string"==typeof e&&(s="0x"+c(l(e)),r=o(s)),"0x00"===s&&(s="0x0"),"number"==typeof t&&null!==e&&"0x"!==s&&"0x0"!==s&&(!/^[0-9A-Fa-f]+$/.test(l(s))||r!==2+2*t))throw new Error("[ethjs-format] hex string '"+s+"' must be an alphanumeric "+(2+2*t)+" utf8 byte hex (chars: a-fA-F) string, is "+r+" bytes");return s}function m(e,t,s){var r=Object.assign({},t),a=null;if("string"==typeof e&&(a="Boolean|EthSyncing"===e?Object.assign({},n.objects.EthSyncing):"DATA|Transaction"===e?Object.assign({},n.objects.Transaction):Object.assign({},n.objects[e])),!i(Object.keys(t),a.__required))throw new Error("[ethjs-format] object "+JSON.stringify(t)+" must contain properties: "+a.__required.join(", "));return Object.keys(a).forEach((function(e){"__required"!==e&&void 0!==t[e]&&(r[e]=f(a[e],t[e],s))})),r}function p(e,t,s,r){var n=t.slice(),a=e;if("Array|DATA"===e&&(a=["D"]),"FilterChange"===e&&"string"==typeof t[0]&&(a=["D32"]),!0===s&&"number"==typeof r&&t.length<r)throw new Error("array "+JSON.stringify(t)+" must contain at least "+r+" params, but only contains "+t.length+".");return a=a.slice(),t.forEach((function(e,t){var r=0;a.length>1&&(r=t),n[t]=f(a[r],e,s)})),n}function f(e,t,s,r){var n=t;return"Q"===e?n=u(t,s):"QP"===e?n=u(t,s,!0):"Q|T"===e?n=d(t,s):"D"===e?n=h(t):"D20"===e?n=h(t,20):"D32"===e?n=h(t,32):"object"==typeof t&&null!==t&&!1===Array.isArray(t)?n=m(e,t,s):Array.isArray(t)&&(n=p(e,t,s,r)),n}t.exports={schema:n,formatQuantity:u,formatQuantityOrTag:d,formatObject:m,formatArray:p,format:f,formatInputs:function(e,t){return f(n.methods[e][0],t,!0,n.methods[e][2])},formatOutputs:function(e,t){return f(n.methods[e][1],t,!1)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query>@metamask/ethjs-format",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-format/lib/index.js"}],[2053,{"@metamask/ethjs-format":2052,"@metamask/ethjs-rpc":2054,"promise-to-callback":4465},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=e("@metamask/ethjs-format"),n=e("@metamask/ethjs-rpc"),a=e("promise-to-callback");function i(e,t){var s=this,r=t||{};if(!(this instanceof i))throw new Error('[ethjs-query] the Eth object requires the "new" flag in order to function normally (i.e. `const eth = new Eth(provider);`).');if("object"!=typeof e)throw new Error("[ethjs-query] the Eth object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new Eth(provider);')");s.options=Object.assign({debug:r.debug||!1,logger:r.logger||console,jsonSpace:r.jsonSpace||0}),s.rpc=new n(e),s.setProvider=s.rpc.setProvider}function o(e,t){return function(){var s=null,n=null,i=this,o=[].slice.call(arguments),c=e.replace("eth_","");o.length>0&&"function"==typeof o[o.length-1]&&(s=o.pop());var l=function(){var s=this;return new Promise((function(a,l){if(o.length<t[2])l(new Error("[ethjs-query] method '"+c+"' requires at least "+t[2]+" input (format type "+t[0][0]+"), "+o.length+" provided. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else if(o.length>t[0].length)l(new Error("[ethjs-query] method '"+c+"' requires at most "+t[0].length+" params, "+o.length+" provided '"+JSON.stringify(o,null,i.options.jsonSpace)+"'. For more information visit: https://github.com/ethereum/wiki/wiki/JSON-RPC#"+e.toLowerCase()));else{t[3]&&o.length<t[3]&&o.push("latest"),s.log("attempting method formatting for '"+c+"' with inputs "+JSON.stringify(o,null,s.options.jsonSpace));try{n=r.formatInputs(e,o),s.log("method formatting success for '"+c+"' with formatted result: "+JSON.stringify(n,null,s.options.jsonSpace))}catch(e){return void l(new Error("[ethjs-query] while formatting inputs '"+JSON.stringify(o,null,s.options.jsonSpace)+"' for method '"+c+"' error: "+e))}s.rpc.sendAsync({method:e,params:n}).then((function(t){s.log("attempting method formatting for '"+c+"' with raw outputs: "+JSON.stringify(t,null,s.options.jsonSpace));var n=r.formatOutputs(e,t);s.log("method formatting success for '"+c+"' formatted result: "+JSON.stringify(n,null,s.options.jsonSpace)),a(n)})).catch((function(e){l(e)}))}}))}.call(this);return s?a(l)(s):l}}t.exports=i,i.prototype.log=function(e){this.options.debug&&this.options.logger.log("[ethjs-query log] "+e)},Object.keys(r.schema.methods).forEach((function(e){Object.defineProperty(i.prototype,e.replace("eth_",""),{enumerable:!0,value:o(e,r.schema.methods[e])})}))}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-query/lib/index.js"}],[2054,{"promise-to-callback":4465},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=e("promise-to-callback");function n(e,t){var s=this,r=t||{};if(!(this instanceof n))throw new Error('[ethjs-rpc] the EthRPC object requires the "new" flag in order to function normally (i.e. `const eth = new EthRPC(provider);`).');s.options=Object.assign({jsonSpace:r.jsonSpace||0,max:r.max||9999999999999}),s.idCounter=Math.floor(Math.random()*s.options.max),s.setProvider=function(e){if("object"!=typeof e)throw new Error("[ethjs-rpc] the EthRPC object requires that the first input 'provider' must be an object, got '"+typeof e+"' (i.e. 'const eth = new EthRPC(provider);')");s.currentProvider=e},s.setProvider(e)}t.exports=n,n.prototype.sendAsync=function(e,t){var s=this;s.idCounter=s.idCounter%s.options.max;var n,a,i=(n=e,a=s.idCounter++,Object.assign({},{id:a,jsonrpc:"2.0",params:[]},n)),o=new Promise((function(e,t){s.currentProvider.sendAsync(i,(function(r,n){var a=n||{};if(r||a.error){var o="[ethjs-rpc] "+(a.error?"rpc":"")+" error with payload "+JSON.stringify(i,null,s.options.jsonSpace)+" "+(r?String(r):JSON.stringify(a.error,null,s.options.jsonSpace)),c=new Error(o);return c.value=r||a.error,void t(c)}e(a.result)}))}));return t?r(o)(t):o}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-query>@metamask/ethjs-rpc",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-rpc/lib/index.js"}],[2055,{buffer:3520,"is-hex-prefixed":4139,"strip-hex-prefix":4825},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(s){(function(){var r=e("is-hex-prefixed"),n=e("strip-hex-prefix");function a(e){var t=e;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function i(e){return"0x"+e.toString(16)}t.exports={arrayContainsArray:function(e,t,s){if(!0!==Array.isArray(e))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(s)?"some":"every"]((function(t){return e.indexOf(t)>=0}))},intToBuffer:function(e){var t=i(e);return s.from(a(t.slice(2)),"hex")},getBinarySize:function(e){if("string"!=typeof e)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return s.byteLength(e,"utf8")},isHexPrefixed:r,stripHexPrefix:n,padToEven:a,intToHex:i,fromAscii:function(e){for(var t="",s=0;s<e.length;s++){var r=e.charCodeAt(s).toString(16);t+=r.length<2?"0"+r:r}return"0x"+t},fromUtf8:function(e){return"0x"+a(s.from(e,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(e){var t="",s=0,r=e.length;for("0x"===e.substring(0,2)&&(s=2);s<r;s+=2){var n=parseInt(e.substr(s,2),16);t+=String.fromCharCode(n)}return t},toUtf8:function(e){return s.from(a(n(e).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(e,t,s){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var r=[],n=0;n<e.length;n++){var a=e[n][t];if(s&&!a)a="";else if("string"!=typeof a)throw new Error("invalid abi");r.push(a)}return r},isHexString:function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry>@metamask/ethjs-contract>@metamask/ethjs-util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/ethjs-util/lib/index.js"}],[2056,{"./chunk-Q2YPK5SL.js":2057,"@metamask/controller-utils":2011,"@metamask/eth-query":1363,"@metamask/polling-controller":1840,uuid:4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o=e("./chunk-Q2YPK5SL.js"),c=e("@metamask/controller-utils"),l=e("@metamask/eth-query"),u=(r=l)&&r.__esModule?r:{default:r},d=e("@metamask/polling-controller"),h=e("uuid"),m="https://gas.api.infura.io",p={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"},f={gasFeeEstimatesByChainId:{persist:!0,anonymous:!1},gasFeeEstimates:{persist:!0,anonymous:!1},estimatedGasFeeTimeBounds:{persist:!0,anonymous:!1},gasEstimateType:{persist:!0,anonymous:!1},nonRPCGasFeeApisDisabled:{persist:!0,anonymous:!1}},g={gasFeeEstimatesByChainId:{},gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:p.NONE,nonRPCGasFeeApisDisabled:!1},v=class extends d.StaticIntervalPollingController{constructor({interval:e=15e3,messenger:t,state:s,getCurrentNetworkEIP1559Compatibility:r,getCurrentAccountEIP1559Compatibility:c,getChainId:l,getCurrentNetworkLegacyGasAPICompatibility:d,getProvider:h,onNetworkDidChange:p,clientId:v,infuraAPIKey:_}){super({name:"GasFeeController",metadata:f,messenger:t,state:{...g,...s}}),o.__privateAdd.call(void 0,this,a),o.__privateAdd.call(void 0,this,n,void 0),this.intervalDelay=e,this.setIntervalLength(e),this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=r,this.getCurrentNetworkLegacyGasAPICompatibility=d,this.getCurrentAccountEIP1559Compatibility=c,o.__privateSet.call(void 0,this,n,h),this.EIP1559APIEndpoint=`${m}/networks/<chain_id>/suggestedGasFees`,this.legacyAPIEndpoint=`${m}/networks/<chain_id>/gasPrices`,this.clientId=v,this.infuraAPIKey=_,this.ethQuery=new(0,u.default)(o.__privateGet.call(void 0,this,n).call(this)),p&&l?(this.currentChainId=l(),p((async e=>{await o.__privateMethod.call(void 0,this,a,i).call(this,e)}))):(this.currentChainId=this.messagingSystem.call("NetworkController:getState").providerConfig.chainId,this.messagingSystem.subscribe("NetworkController:networkDidChange",(async e=>{await o.__privateMethod.call(void 0,this,a,i).call(this,e)})))}async resetPolling(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),await this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach((e=>{this.pollTokens.add(e)}))}}async fetchGasFeeEstimates(e){return await this._fetchGasFeeEstimateData(e)}async getGasFeeEstimatesAndStartPolling(e){const t=e||h.v1.call(void 0);return this.pollTokens.add(t),1===this.pollTokens.size&&(await this._fetchGasFeeEstimateData(),this._poll()),t}async _fetchGasFeeEstimateData(e={}){const{shouldUpdateState:t=!0,networkClientId:s}=e;let r,n,a,i;if(void 0!==s){const e=this.messagingSystem.call("NetworkController:getNetworkClientById",s);a="0x38"===e.configuration.chainId,i=c.convertHexToDecimal.call(void 0,e.configuration.chainId);try{n=await this.messagingSystem.call("NetworkController:getEIP1559Compatibility",s)||!1}catch{n=!1}r=new(0,u.default)(e.provider)}r??(r=this.ethQuery),a??(a=this.getCurrentNetworkLegacyGasAPICompatibility()),i??(i=c.convertHexToDecimal.call(void 0,this.currentChainId));try{n??(n=await this.getEIP1559Compatibility())}catch(e){console.error(e),n??(n=!1)}const l=await k({isEIP1559Compatible:n,isLegacyGasAPICompatible:a,fetchGasEstimates:o.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${i}`),fetchLegacyGasPriceEstimates:o.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${i}`),fetchEthGasPriceEstimate:o.fetchEthGasPriceEstimate,calculateTimeEstimate:o.calculateTimeEstimate,clientId:this.clientId,ethQuery:r,infuraAPIKey:this.infuraAPIKey,nonRPCGasFeeApisDisabled:this.state.nonRPCGasFeeApisDisabled});if(t){const e=c.toHex.call(void 0,i);this.update((t=>{this.currentChainId===e&&(t.gasFeeEstimates=l.gasFeeEstimates,t.estimatedGasFeeTimeBounds=l.estimatedGasFeeTimeBounds,t.gasEstimateType=l.gasEstimateType),t.gasFeeEstimatesByChainId??(t.gasFeeEstimatesByChainId={}),t.gasFeeEstimatesByChainId[e]={gasFeeEstimates:l.gasFeeEstimates,estimatedGasFeeTimeBounds:l.estimatedGasFeeTimeBounds,gasEstimateType:l.gasEstimateType}}))}return l}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((async()=>{await c.safelyExecute.call(void 0,(()=>this._fetchGasFeeEstimateData()))}),this.intervalDelay)}async _executePoll(e){await this._fetchGasFeeEstimateData({networkClientId:e})}resetState(){this.update((()=>g))}async getEIP1559Compatibility(){const e=await this.getCurrentNetworkEIP1559Compatibility(),t=this.getCurrentAccountEIP1559Compatibility?.()??!0;return e&&t}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===p.FEE_MARKET?o.calculateTimeEstimate.call(void 0,e,t,this.state.gasFeeEstimates):{}}enableNonRPCGasFeeApis(){this.update((e=>{e.nonRPCGasFeeApisDisabled=!1}))}disableNonRPCGasFeeApis(){this.update((e=>{e.nonRPCGasFeeApisDisabled=!0}))}};n=new WeakMap,a=new WeakSet,i=async function(e){const t=e.providerConfig.chainId;t!==this.currentChainId&&(this.ethQuery=new(0,u.default)(o.__privateGet.call(void 0,this,n).call(this)),await this.resetPolling(),this.currentChainId=t)};var _=v;async function k(e){try{return await async function(e){const{isEIP1559Compatible:t,isLegacyGasAPICompatible:s,nonRPCGasFeeApisDisabled:r}=e;try{if(t&&!r)return await async function(e){const{fetchGasEstimates:t,fetchGasEstimatesUrl:s,infuraAPIKey:r,clientId:n,calculateTimeEstimate:a}=e,i=await t(s,r,n),{suggestedMaxPriorityFeePerGas:o,suggestedMaxFeePerGas:c}=i.medium,l=a(o,c,i);return{gasFeeEstimates:i,estimatedGasFeeTimeBounds:l,gasEstimateType:p.FEE_MARKET}}(e);if(s&&!r)return await async function(e){const{fetchLegacyGasPriceEstimates:t,fetchLegacyGasPriceEstimatesUrl:s,infuraAPIKey:r,clientId:n}=e;return{gasFeeEstimates:await t(s,r,n),estimatedGasFeeTimeBounds:{},gasEstimateType:p.LEGACY}}(e);throw new Error("Main gas fee/price estimation failed. Use fallback")}catch{return await async function(e){const{ethQuery:t,fetchEthGasPriceEstimate:s}=e;return{gasFeeEstimates:await s(t),estimatedGasFeeTimeBounds:{},gasEstimateType:p.ETH_GASPRICE}}(e)}}(e)}catch(e){if(e instanceof Error)throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`);throw e}}s.determineGasFeeCalculations=k,s.GAS_API_BASE_URL=m,s.GAS_ESTIMATE_TYPES=p,s.GasFeeController=v,s.GasFeeController_default=_}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/dist/chunk-H5WHAYLI.js"}],[2057,{"@metamask/controller-utils":2011,"bn.js":3472,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0});var r,n=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},a=e("@metamask/controller-utils"),i=e("bn.js"),o=(r=i)&&r.__esModule?r:{default:r},c=e=>({"X-Client-Id":e});function l(e){const t=a.gweiDecToWEIBN.call(void 0,e).toString(16);return a.weiHexToGweiDec.call(void 0,t)}function u(e){return t.from(`${e}:`).toString("base64")}function d(e,t){return{"Content-Type":"application/json",Authorization:`Basic ${e}`,...t?.trim()?c(t):{}}}s.__privateGet=(e,t,s)=>(n(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,r)=>(n(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),s.__privateMethod=(e,t,s)=>(n(e,t,"access private method"),s),s.normalizeGWEIDecimalNumbers=l,s.fetchGasEstimates=async function(e,t,s){const r=u(t),n=await a.handleFetch.call(void 0,e,{headers:d(r,s)});return{low:{...n.low,suggestedMaxPriorityFeePerGas:l(n.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:l(n.low.suggestedMaxFeePerGas)},medium:{...n.medium,suggestedMaxPriorityFeePerGas:l(n.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:l(n.medium.suggestedMaxFeePerGas)},high:{...n.high,suggestedMaxPriorityFeePerGas:l(n.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:l(n.high.suggestedMaxFeePerGas)},estimatedBaseFee:l(n.estimatedBaseFee),historicalBaseFeeRange:n.historicalBaseFeeRange,baseFeeTrend:n.baseFeeTrend,latestPriorityFeeRange:n.latestPriorityFeeRange,historicalPriorityFeeRange:n.historicalPriorityFeeRange,priorityFeeTrend:n.priorityFeeTrend,networkCongestion:n.networkCongestion}},s.fetchLegacyGasPriceEstimates=async function(e,t,s){const r=u(t),n=await a.handleFetch.call(void 0,e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:d(r,s)});return{low:n.SafeGasPrice,medium:n.ProposeGasPrice,high:n.FastGasPrice}},s.fetchEthGasPriceEstimate=async function(e){const t=await a.query.call(void 0,e,"gasPrice");return{gasPrice:a.weiHexToGweiDec.call(void 0,t).toString()}},s.calculateTimeEstimate=function(e,t,s){const{low:r,medium:n,high:i,estimatedBaseFee:c}=s,l=a.gweiDecToWEIBN.call(void 0,e),u=a.gweiDecToWEIBN.call(void 0,t),d=a.gweiDecToWEIBN.call(void 0,c),h=o.default.min(l,u.sub(d)),m=a.gweiDecToWEIBN.call(void 0,r.suggestedMaxPriorityFeePerGas),p=a.gweiDecToWEIBN.call(void 0,n.suggestedMaxPriorityFeePerGas),f=a.gweiDecToWEIBN.call(void 0,i.suggestedMaxPriorityFeePerGas);let g,v;return h.lt(m)?(g=null,v="unknown"):h.gte(m)&&h.lt(p)?(g=r.minWaitTimeEstimate,v=r.maxWaitTimeEstimate):h.gte(p)&&h.lt(f)?(g=n.minWaitTimeEstimate,v=n.maxWaitTimeEstimate):h.eq(f)?(g=i.minWaitTimeEstimate,v=i.maxWaitTimeEstimate):(g=0,v=i.maxWaitTimeEstimate),{lowerTimeBound:g,upperTimeBound:v}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/dist/chunk-Q2YPK5SL.js"}],[2058,{"./chunk-H5WHAYLI.js":2056,"./chunk-Q2YPK5SL.js":2057},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-H5WHAYLI.js");e("./chunk-Q2YPK5SL.js"),s.GAS_API_BASE_URL=r.GAS_API_BASE_URL,s.GAS_ESTIMATE_TYPES=r.GAS_ESTIMATE_TYPES,s.GasFeeController=r.GasFeeController}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@metamask/gas-fee-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/gas-fee-controller/dist/index.js"}],[2059,{"./chunk-S6VGOPUY.js":2077,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-S6VGOPUY.js"),n=e("@metamask/utils").createModuleLogger.call(void 0,r.projectLogger,"layer-1-gas-fee-flow");async function a({layer1GasFeeFlows:e,provider:t,transactionMeta:s}){const r=function(e,t){return t.find((t=>t.matchesTransaction(e)))}(s,e);if(r){n("Found layer 1 gas fee flow",r.constructor.name,s.id);try{const{layer1Fee:e}=await r.getLayer1Fee({provider:t,transactionMeta:s});return e}catch(e){return void n("Failed to get layer 1 gas fee",s.id,e)}}}s.updateTransactionLayer1GasFee=async function(e){const t=await a(e);if(!t)return;const{transactionMeta:s}=e;s.layer1GasFee=t,n("Updated layer 1 gas fee",t,s.id)},s.getTransactionLayer1GasFee=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-2XKEAKQG.js"}],[206,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:71,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=71;const s=function(e){e.NotificationController&&(e.AnnouncementController={announcements:e.NotificationController.notifications},delete e.NotificationController);return e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/071.js"}],[2060,{"./chunk-DLOQPH4M.js":2064,"./chunk-S6VGOPUY.js":2077,"./chunk-UT4M4XI3.js":2083,"@metamask/controller-utils":2011,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UT4M4XI3.js"),n=e("./chunk-DLOQPH4M.js"),a=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils"),o=e("@metamask/utils"),c=o.createModuleLogger.call(void 0,a.projectLogger,"gas-fees");function l(e){return i.toHex.call(void 0,i.gweiDecToWEIBN.call(void 0,e))}s.updateGasFees=async function(e){const{txMeta:t}=e,s={...t.txParams},a=r.SWAP_TRANSACTION_TYPES.includes(t.type)?void 0:e.getSavedGasFees(t.chainId),u=await async function(e){const{eip1559:t,ethQuery:s,gasFeeFlows:r,getGasFeeEstimates:a,txMeta:l}=e,{networkClientId:u}=l;if(!t&&l.txParams.gasPrice||t&&l.txParams.maxFeePerGas&&l.txParams.maxPriorityFeePerGas)return{};const d=n.getGasFeeFlow.call(void 0,l,r);try{const e=await a({networkClientId:u}),t=await d.getGasFees({ethQuery:s,gasFeeControllerData:e,transactionMeta:l}),r=t.estimates?.type;switch(r){case"fee-market":return t.estimates.medium;case"legacy":return{gasPrice:t.estimates.medium};case"eth_gasPrice":return{gasPrice:t.estimates.gasPrice};default:throw new Error(`Unsupported gas fee estimate type returned from flow: ${r}`)}}catch(e){c("Failed to get suggested gas fees",e)}const h=await i.query.call(void 0,s,"gasPrice");return{gasPrice:h?o.add0x.call(void 0,h.toString(16)):void 0}}(e);c("Suggested gas fees",u);const d={...e,initialParams:s,savedGasFees:a,suggestedGasFees:u};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:s,initialParams:r,suggestedGasFees:n}=e;if(!s)return;if(t){const e=l(t.maxBaseFee);return c("Using maxFeePerGas from savedGasFees",e),e}if(r.maxFeePerGas)return c("Using maxFeePerGas from request",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice&&!r.maxPriorityFeePerGas)return c("Setting maxFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(n.maxFeePerGas)return c("Using suggested maxFeePerGas",n.maxFeePerGas),n.maxFeePerGas;if(n.gasPrice)return c("Setting maxFeePerGas to suggested gasPrice",n.gasPrice),n.gasPrice;return void c("maxFeePerGas not set")}(d),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:s,savedGasFees:r,suggestedGasFees:n,txMeta:a}=e;if(!t)return;if(r){const e=l(r.priorityFee);return c("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(s.maxPriorityFeePerGas)return c("Using maxPriorityFeePerGas from request",s.maxPriorityFeePerGas),s.maxPriorityFeePerGas;if(s.gasPrice&&!s.maxFeePerGas)return c("Setting maxPriorityFeePerGas to gasPrice from request",s.gasPrice),s.gasPrice;if(n.maxPriorityFeePerGas)return c("Using suggested maxPriorityFeePerGas",n.maxPriorityFeePerGas),n.maxPriorityFeePerGas;if(a.txParams.maxFeePerGas)return c("Setting maxPriorityFeePerGas to maxFeePerGas",a.txParams.maxFeePerGas),a.txParams.maxFeePerGas;return void c("maxPriorityFeePerGas not set")}(d),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:s,suggestedGasFees:r}=e;if(t)return;if(s.gasPrice)return c("Using gasPrice from request",s.gasPrice),s.gasPrice;if(r.maxFeePerGas)return c("Using suggested maxFeePerGas",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice)return c("Using suggested gasPrice",r.gasPrice),r.gasPrice;return void c("gasPrice not set")}(d),t.userFeeLevel=function(e){const{eip1559:t,initialParams:s,savedGasFees:r,suggestedGasFees:n,txMeta:a}=e;if(!t)return;if(r)return"custom";if(!s.maxFeePerGas&&!s.maxPriorityFeePerGas&&s.gasPrice)return a.origin===i.ORIGIN_METAMASK?"custom":"dappSuggested";if(!s.maxFeePerGas&&!s.maxPriorityFeePerGas&&n.maxFeePerGas&&n.maxPriorityFeePerGas)return"medium";if(a.origin===i.ORIGIN_METAMASK)return"medium";return"dappSuggested"}(d),c("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates||(e.defaultGasEstimates={});e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},s.gweiDecimalToWeiHex=l}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-3ZRHCVVS.js"}],[2061,{"./chunk-S6VGOPUY.js":2077,"./chunk-Z4BLTVTB.js":2089,"@metamask/controller-utils":2011,events:3814,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y,S,w,b,T,E,P,j,I,C,A,x,R,N,M,O,F,G,B,L,D,U,H,$,J,V,W,q,z,K,Y,X,Z,Q,ee,te,se,re=e("./chunk-S6VGOPUY.js"),ne=e("./chunk-Z4BLTVTB.js"),ae=e("@metamask/controller-utils"),ie=e("events"),oe=(r=ie)&&r.__esModule?r:{default:r},ce=e("lodash"),le=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],ue=re.createModuleLogger.call(void 0,re.projectLogger,"pending-transactions");n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakSet,_=function(){ne.__privateGet.call(void 0,this,p)||(ne.__privateGet.call(void 0,this,a).on("latest",ne.__privateGet.call(void 0,this,d)),ne.__privateSet.call(void 0,this,p,!0),ue("Started polling"))},k=new WeakSet,y=async function(e){const t=await ne.__privateGet.call(void 0,this,h).call(this);try{await ne.__privateMethod.call(void 0,this,S,w).call(this)}catch(e){ue("Failed to check transactions",e)}finally{t()}try{await ne.__privateMethod.call(void 0,this,b,T).call(this,e)}catch(e){ue("Failed to resubmit transactions",e)}},S=new WeakSet,w=async function(){ue("Checking transactions");const e=ne.__privateMethod.call(void 0,this,L,D).call(this);e.length?(ue("Found pending transactions to check",{count:e.length,ids:e.map((e=>e.id))}),await Promise.all(e.map((e=>ne.__privateMethod.call(void 0,this,x,R).call(this,e))))):ue("No pending transactions to check")},b=new WeakSet,T=async function(e){if(!ne.__privateGet.call(void 0,this,u).call(this)||!ne.__privateGet.call(void 0,this,p))return;ue("Resubmitting transactions");const t=ne.__privateMethod.call(void 0,this,L,D).call(this);if(t.length){ue("Found pending transactions to resubmit",{count:t.length,ids:t.map((e=>e.id))});for(const s of t)try{await ne.__privateMethod.call(void 0,this,j,I).call(this,s,e)}catch(e){const t=e.value?.message?.toLowerCase()||e.message.toLowerCase();if(ne.__privateMethod.call(void 0,this,E,P).call(this,t))return void ue("Ignoring known transaction error",t);ne.__privateMethod.call(void 0,this,U,H).call(this,s,e.message,"There was an error when resubmitting this transaction.")}}else ue("No pending transactions to resubmit")},E=new WeakSet,P=function(e){return le.some((t=>e.includes(t)))},j=new WeakSet,I=async function(e,t){if(!ne.__privateMethod.call(void 0,this,C,A).call(this,e,t))return;const{rawTx:s}=e;if(!ne.__privateGet.call(void 0,this,g).call(this,e))return;if(!s?.length)return ue("Approving transaction as no raw value"),void await ne.__privateGet.call(void 0,this,n).call(this,e.id);const r=ne.__privateGet.call(void 0,this,c).call(this,e.networkClientId);await ne.__privateGet.call(void 0,this,m).call(this,r,s);const a=(e.retryCount??0)+1;ne.__privateMethod.call(void 0,this,q,z).call(this,ce.merge.call(void 0,{},e,{retryCount:a}),"PendingTransactionTracker:transaction-retry - Retry count increased")},C=new WeakSet,A=function(e,t){const s=ce.cloneDeep.call(void 0,e);s.firstRetryBlockNumber||(s.firstRetryBlockNumber=t,ne.__privateMethod.call(void 0,this,q,z).call(this,s,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:r}=s,n=Number.parseInt(t,16)-Number.parseInt(r,16),a=e.retryCount||0;return n>=Math.min(50,Math.pow(2,a))},x=new WeakSet,R=async function(e){const{hash:t,id:s}=e;if(!t&&ne.__privateGet.call(void 0,this,f).call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void ne.__privateMethod.call(void 0,this,$,J).call(this,e,t)}if(ne.__privateMethod.call(void 0,this,G,B).call(this,e))return ue("Nonce already taken",s),void ne.__privateMethod.call(void 0,this,V,W).call(this,e);try{const s=await ne.__privateMethod.call(void 0,this,K,Y).call(this,t),r="0x1"===s?.status;if("0x0"===s?.status)return ue("Transaction receipt has failed status"),void ne.__privateMethod.call(void 0,this,$,J).call(this,e,new Error("Transaction dropped or replaced"));const{blockNumber:n,blockHash:a}=s||{};if(r&&n&&a)return void await ne.__privateMethod.call(void 0,this,N,M).call(this,e,{...s,blockNumber:n,blockHash:a})}catch(t){return ue("Failed to check transaction",s,t),void ne.__privateMethod.call(void 0,this,U,H).call(this,e,t.message,"There was a problem loading this transaction.")}await ne.__privateMethod.call(void 0,this,O,F).call(this,e)&&ne.__privateMethod.call(void 0,this,V,W).call(this,e)},N=new WeakSet,M=async function(e,t){const{id:s}=e,{blockHash:r}=t;ue("Transaction confirmed",s);const{baseFeePerGas:n,timestamp:a}=await ne.__privateMethod.call(void 0,this,X,Z).call(this,r,!1),i=ce.cloneDeep.call(void 0,e);i.baseFeePerGas=n,i.blockTimestamp=a,i.status="confirmed",i.txParams={...i.txParams,gasUsed:t.gasUsed},i.txReceipt=t,i.verifiedOnBlockchain=!0,ne.__privateMethod.call(void 0,this,q,z).call(this,i,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",i)},O=new WeakSet,F=async function(e){const{hash:t,id:s,txParams:{nonce:r,from:n}}=e;if(!r||!t)return!1;const a=await ne.__privateMethod.call(void 0,this,Q,ee).call(this,n),o=parseInt(a,16);if(parseInt(r,16)>=o)return!1;let c=ne.__privateGet.call(void 0,this,i).get(t);return void 0===c&&(c=0,ne.__privateGet.call(void 0,this,i).set(t,c)),c<3?(ue("Incrementing dropped block count",{id:s,droppedBlockCount:c}),ne.__privateGet.call(void 0,this,i).set(t,c+1),!1):(ue("Hit dropped block count",s),ne.__privateGet.call(void 0,this,i).delete(t),!0)},G=new WeakSet,B=function(e){const{id:t,txParams:s}=e;return ne.__privateMethod.call(void 0,this,te,se).call(this).some((e=>e.id!==t&&e.txParams.from===s.from&&"confirmed"===e.status&&e.txParams.nonce===s.nonce&&"incoming"!==e.type))},L=new WeakSet,D=function(){return ne.__privateMethod.call(void 0,this,te,se).call(this).filter((e=>"submitted"===e.status&&!e.verifiedOnBlockchain&&!e.isUserOperation))},U=new WeakSet,H=function(e,t,s){ne.__privateMethod.call(void 0,this,q,z).call(this,{...e,warning:{error:t,message:s}},"PendingTransactionTracker:#warnTransaction - Warning added")},$=new WeakSet,J=function(e,t){ue("Transaction failed",e.id,t),this.hub.emit("transaction-failed",e,t)},V=new WeakSet,W=function(e){ue("Transaction dropped",e.id),this.hub.emit("transaction-dropped",e)},q=new WeakSet,z=function(e,t){this.hub.emit("transaction-updated",e,t)},K=new WeakSet,Y=async function(e){return await ae.query.call(void 0,ne.__privateGet.call(void 0,this,c).call(this),"getTransactionReceipt",[e])},X=new WeakSet,Z=async function(e,t){return await ae.query.call(void 0,ne.__privateGet.call(void 0,this,c).call(this),"getBlockByHash",[e,t])},Q=new WeakSet,ee=async function(e){return await ae.query.call(void 0,ne.__privateGet.call(void 0,this,c).call(this),"getTransactionCount",[e])},te=new WeakSet,se=function(){const e=ne.__privateGet.call(void 0,this,o).call(this);return ne.__privateGet.call(void 0,this,l).call(this).filter((t=>t.chainId===e))},s.PendingTransactionTracker=class{constructor({approveTransaction:e,blockTracker:t,getChainId:s,getEthQuery:r,getTransactions:w,isResubmitEnabled:T,getGlobalLock:P,publishTransaction:I,hooks:A}){ne.__privateAdd.call(void 0,this,v),ne.__privateAdd.call(void 0,this,k),ne.__privateAdd.call(void 0,this,S),ne.__privateAdd.call(void 0,this,b),ne.__privateAdd.call(void 0,this,E),ne.__privateAdd.call(void 0,this,j),ne.__privateAdd.call(void 0,this,C),ne.__privateAdd.call(void 0,this,x),ne.__privateAdd.call(void 0,this,N),ne.__privateAdd.call(void 0,this,O),ne.__privateAdd.call(void 0,this,G),ne.__privateAdd.call(void 0,this,L),ne.__privateAdd.call(void 0,this,U),ne.__privateAdd.call(void 0,this,$),ne.__privateAdd.call(void 0,this,V),ne.__privateAdd.call(void 0,this,q),ne.__privateAdd.call(void 0,this,K),ne.__privateAdd.call(void 0,this,X),ne.__privateAdd.call(void 0,this,Q),ne.__privateAdd.call(void 0,this,te),ne.__privateAdd.call(void 0,this,n,void 0),ne.__privateAdd.call(void 0,this,a,void 0),ne.__privateAdd.call(void 0,this,i,void 0),ne.__privateAdd.call(void 0,this,o,void 0),ne.__privateAdd.call(void 0,this,c,void 0),ne.__privateAdd.call(void 0,this,l,void 0),ne.__privateAdd.call(void 0,this,u,void 0),ne.__privateAdd.call(void 0,this,d,void 0),ne.__privateAdd.call(void 0,this,h,void 0),ne.__privateAdd.call(void 0,this,m,void 0),ne.__privateAdd.call(void 0,this,p,void 0),ne.__privateAdd.call(void 0,this,f,void 0),ne.__privateAdd.call(void 0,this,g,void 0),this.startIfPendingTransactions=()=>{ne.__privateMethod.call(void 0,this,L,D).call(this).length?ne.__privateMethod.call(void 0,this,v,_).call(this):this.stop()},this.hub=new(0,oe.default),ne.__privateSet.call(void 0,this,n,e),ne.__privateSet.call(void 0,this,a,t),ne.__privateSet.call(void 0,this,i,new Map),ne.__privateSet.call(void 0,this,o,s),ne.__privateSet.call(void 0,this,c,r),ne.__privateSet.call(void 0,this,l,w),ne.__privateSet.call(void 0,this,u,T??(()=>!0)),ne.__privateSet.call(void 0,this,d,ne.__privateMethod.call(void 0,this,k,y).bind(this)),ne.__privateSet.call(void 0,this,h,P),ne.__privateSet.call(void 0,this,m,I),ne.__privateSet.call(void 0,this,p,!1),ne.__privateSet.call(void 0,this,g,A?.beforePublish??(()=>!0)),ne.__privateSet.call(void 0,this,f,A?.beforeCheckPendingTransaction??(()=>!0))}async forceCheckTransaction(e){const t=await ne.__privateGet.call(void 0,this,h).call(this);try{await ne.__privateMethod.call(void 0,this,x,R).call(this,e)}catch(e){ue("Failed to check transaction",e)}finally{t()}}stop(){ne.__privateGet.call(void 0,this,p)&&(ne.__privateGet.call(void 0,this,a).removeListener("latest",ne.__privateGet.call(void 0,this,d)),ne.__privateSet.call(void 0,this,p,!1),ue("Stopped polling"))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-5KMU2IAT.js"}],[2062,{"@metamask/rpc-errors":1884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/rpc-errors");s.validateConfirmedExternalTransaction=function(e,t,s){if(!e||!e.txParams)throw r.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if("confirmed"!==e.status)throw r.rpcErrors.invalidParams('External transaction status should be "confirmed"');const n=e.txParams.nonce;if(s&&s.length>0){if(s.find((e=>e.txParams?.nonce===n)))throw r.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find((e=>e.txParams?.nonce===n)))throw r.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7LXE4KHV.js"}],[2063,{"./chunk-2XKEAKQG.js":2059,"./chunk-DLOQPH4M.js":2064,"./chunk-S6VGOPUY.js":2077,"./chunk-Z4BLTVTB.js":2089,"@metamask/eth-query":1363,"@metamask/utils":2739,events:3814},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y,S,w,b,T,E,P,j,I,C,A=e("./chunk-2XKEAKQG.js"),x=e("./chunk-DLOQPH4M.js"),R=e("./chunk-S6VGOPUY.js"),N=e("./chunk-Z4BLTVTB.js"),M=r(e("@metamask/eth-query")),O=e("@metamask/utils"),F=r(e("events")),G=O.createModuleLogger.call(void 0,R.projectLogger,"gas-fee-poller");n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,m=function(){N.__privateGet.call(void 0,this,d)||(N.__privateMethod.call(void 0,this,g,v).call(this),N.__privateSet.call(void 0,this,d,!0),G("Started polling"))},p=new WeakSet,f=function(){N.__privateGet.call(void 0,this,d)&&(clearTimeout(N.__privateGet.call(void 0,this,u)),N.__privateSet.call(void 0,this,u,void 0),N.__privateSet.call(void 0,this,d,!1),G("Stopped polling"))},g=new WeakSet,v=async function(){await N.__privateMethod.call(void 0,this,_,k).call(this),N.__privateSet.call(void 0,this,u,setTimeout((()=>N.__privateMethod.call(void 0,this,g,v).call(this)),1e4))},_=new WeakSet,k=async function(){const e=N.__privateMethod.call(void 0,this,P,j).call(this);if(!e.length)return;G("Found unapproved transactions",e.length);const t=await N.__privateMethod.call(void 0,this,I,C).call(this,e);G("Retrieved gas fee controller data",t),await Promise.all(e.flatMap((e=>{const{chainId:s}=e,r=t.get(s);return N.__privateMethod.call(void 0,this,y,S).call(this,e,r)})))},y=new WeakSet,S=async function(e,t){const{id:s}=e,[r,n]=await Promise.all([N.__privateMethod.call(void 0,this,w,b).call(this,e,t),N.__privateMethod.call(void 0,this,T,E).call(this,e)]);(r||n)&&this.hub.emit("transaction-updated",{transactionId:s,gasFeeEstimates:r?.gasFeeEstimates,gasFeeEstimatesLoaded:r?.gasFeeEstimatesLoaded,layer1GasFee:n})},w=new WeakSet,b=async function(e,t){const{chainId:s,networkClientId:r}=e,n=new(0,M.default)(N.__privateGet.call(void 0,this,o).call(this,s,r)),i=x.getGasFeeFlow.call(void 0,e,N.__privateGet.call(void 0,this,a));i&&G("Found gas fee flow",i.constructor.name,e.id);const c={ethQuery:n,gasFeeControllerData:t,transactionMeta:e};let l;if(i)try{l=(await i.getGasFees(c)).estimates}catch(t){G("Failed to get suggested gas fees",e.id,t)}if(l||!e.gasFeeEstimatesLoaded)return G("Updated gas fee estimates",{gasFeeEstimates:l,transaction:e.id}),{gasFeeEstimates:l,gasFeeEstimatesLoaded:!0}},T=new WeakSet,E=async function(e){const{chainId:t,networkClientId:s}=e,r=N.__privateGet.call(void 0,this,o).call(this,t,s),n=await A.getTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:N.__privateGet.call(void 0,this,l),provider:r,transactionMeta:e});return n&&G("Updated layer 1 gas fee",n,e.id),n},P=new WeakSet,j=function(){return N.__privateGet.call(void 0,this,c).call(this).filter((e=>"unapproved"===e.status))},I=new WeakSet,C=async function(e){const t=new Map;for(const s of e){const{chainId:e,networkClientId:r}=s;if(t.has(e))continue;const a=r??N.__privateGet.call(void 0,this,n).call(this,e);t.set(e,a)}G("Extracted network client IDs by chain ID",t);const s=Array.from(t.entries()).map((async([e,t])=>[e,await N.__privateGet.call(void 0,this,i).call(this,{networkClientId:t})]));return new Map(await Promise.all(s))},s.GasFeePoller=class{constructor({findNetworkClientIdByChainId:e,gasFeeFlows:t,getGasFeeControllerEstimates:s,getProvider:r,getTransactions:v,layer1GasFeeFlows:k,onStateChange:S}){N.__privateAdd.call(void 0,this,h),N.__privateAdd.call(void 0,this,p),N.__privateAdd.call(void 0,this,g),N.__privateAdd.call(void 0,this,_),N.__privateAdd.call(void 0,this,y),N.__privateAdd.call(void 0,this,w),N.__privateAdd.call(void 0,this,T),N.__privateAdd.call(void 0,this,P),N.__privateAdd.call(void 0,this,I),this.hub=new(0,F.default),N.__privateAdd.call(void 0,this,n,void 0),N.__privateAdd.call(void 0,this,a,void 0),N.__privateAdd.call(void 0,this,i,void 0),N.__privateAdd.call(void 0,this,o,void 0),N.__privateAdd.call(void 0,this,c,void 0),N.__privateAdd.call(void 0,this,l,void 0),N.__privateAdd.call(void 0,this,u,void 0),N.__privateAdd.call(void 0,this,d,!1),N.__privateSet.call(void 0,this,n,e),N.__privateSet.call(void 0,this,a,t),N.__privateSet.call(void 0,this,l,k),N.__privateSet.call(void 0,this,i,s),N.__privateSet.call(void 0,this,o,r),N.__privateSet.call(void 0,this,c,v),S((()=>{N.__privateMethod.call(void 0,this,P,j).call(this).length?N.__privateMethod.call(void 0,this,h,m).call(this):N.__privateMethod.call(void 0,this,p,f).call(this)}))}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-7MKQDZKY.js"}],[2064,{"./chunk-RAOYRJ25.js":2076,"@metamask/controller-utils":2011},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-RAOYRJ25.js"),n=e("@metamask/controller-utils");function a(e,t){return n.weiHexToGweiDec.call(void 0,e[t])}s.getGasFeeFlow=function(e,t){return t.find((t=>t.matchesTransaction(e)))},s.mergeGasFeeEstimates=function({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}){const s=t.type;return"fee-market"===s?Object.values(r.GasFeeEstimateLevel).reduce(((s,r)=>{return{...s,[r]:(a=e?.[r],i=t[r],{...a,suggestedMaxFeePerGas:n.weiHexToGweiDec.call(void 0,i.maxFeePerGas),suggestedMaxPriorityFeePerGas:n.weiHexToGweiDec.call(void 0,i.maxPriorityFeePerGas)})};var a,i}),{...e}):"legacy"===s?Object.values(r.GasFeeEstimateLevel).reduce(((e,s)=>({...e,[s]:a(t,s)})),{}):"eth_gasPrice"===s?{gasPrice:(i=t,n.weiHexToGweiDec.call(void 0,i.gasPrice))}:e;var i}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-DLOQPH4M.js"}],[2065,{"./chunk-S6VGOPUY.js":2077,"./chunk-Z4BLTVTB.js":2089,"async-mutex":3410,events:3814},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y,S,w,b,T,E,P,j,I,C,A,x,R,N,M,O=e("./chunk-S6VGOPUY.js"),F=e("./chunk-Z4BLTVTB.js"),G=e("async-mutex"),B=e("events"),L=(r=B)&&r.__esModule?r:{default:r},D=[e=>e.status,e=>e.txParams.gasUsed];n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakSet,_=function(e){e.sort(((e,t)=>e.time<t.time?-1:1))},k=new WeakSet,y=function(e,t){return e.filter((e=>!t.some((({hash:t})=>t===e.hash))))},S=new WeakSet,w=function(e,t){return e.filter((e=>t.some((t=>e.hash===t.hash&&F.__privateMethod.call(void 0,this,b,T).call(this,e,t)))))},b=new WeakSet,T=function(e,t){return D.some((s=>s(e)!==s(t)))},E=new WeakSet,P=function(){const e=F.__privateGet.call(void 0,this,p).getLastBlockVariations?.()??[],t=F.__privateMethod.call(void 0,this,x,R).call(this,e);return F.__privateGet.call(void 0,this,i).call(this)[t]},j=new WeakSet,I=function(e){const t=F.__privateMethod.call(void 0,this,E,P).call(this);return t?t+1:F.__privateGet.call(void 0,this,m)?void 0:e-10},C=new WeakSet,A=function(e,t){let s=-1;for(const t of e){const e=t.blockNumber?parseInt(t.blockNumber,10):-1;s=Math.max(s,e)}if(-1===s)return;const r=F.__privateMethod.call(void 0,this,x,R).call(this,t),n=F.__privateGet.call(void 0,this,i).call(this);n[r]>=s||this.hub.emit("updatedLastFetchedBlockNumbers",{lastFetchedBlockNumbers:{...n,[r]:s},blockNumber:s})},x=new WeakSet,R=function(e){const t=F.__privateGet.call(void 0,this,c).call(this),s=F.__privateGet.call(void 0,this,a).call(this)?.toLowerCase();return[t,s,...e].join("#")},N=new WeakSet,M=function(){const e=F.__privateGet.call(void 0,this,l).call(this),t=F.__privateGet.call(void 0,this,c).call(this),s=F.__privateGet.call(void 0,this,p).isSupportedNetwork(t);return e&&s},s.IncomingTransactionHelper=class{constructor({blockTracker:e,getCurrentAccount:t,getLastFetchedBlockNumbers:s,getLocalTransactions:r,getChainId:_,isEnabled:y,queryEntireHistory:w,remoteTransactionSource:T,transactionLimit:P,updateTransactions:I}){F.__privateAdd.call(void 0,this,v),F.__privateAdd.call(void 0,this,k),F.__privateAdd.call(void 0,this,S),F.__privateAdd.call(void 0,this,b),F.__privateAdd.call(void 0,this,E),F.__privateAdd.call(void 0,this,j),F.__privateAdd.call(void 0,this,C),F.__privateAdd.call(void 0,this,x),F.__privateAdd.call(void 0,this,N),F.__privateAdd.call(void 0,this,n,void 0),F.__privateAdd.call(void 0,this,a,void 0),F.__privateAdd.call(void 0,this,i,void 0),F.__privateAdd.call(void 0,this,o,void 0),F.__privateAdd.call(void 0,this,c,void 0),F.__privateAdd.call(void 0,this,l,void 0),F.__privateAdd.call(void 0,this,u,void 0),F.__privateAdd.call(void 0,this,d,new(0,G.Mutex)),F.__privateAdd.call(void 0,this,h,void 0),F.__privateAdd.call(void 0,this,m,void 0),F.__privateAdd.call(void 0,this,p,void 0),F.__privateAdd.call(void 0,this,f,void 0),F.__privateAdd.call(void 0,this,g,void 0),this.hub=new(0,L.default),F.__privateSet.call(void 0,this,n,e),F.__privateSet.call(void 0,this,a,t),F.__privateSet.call(void 0,this,i,s),F.__privateSet.call(void 0,this,o,r||(()=>[])),F.__privateSet.call(void 0,this,c,_),F.__privateSet.call(void 0,this,l,y??(()=>!0)),F.__privateSet.call(void 0,this,u,!1),F.__privateSet.call(void 0,this,m,w??!0),F.__privateSet.call(void 0,this,p,T),F.__privateSet.call(void 0,this,f,P),F.__privateSet.call(void 0,this,g,I??!1),F.__privateSet.call(void 0,this,h,(async e=>{try{await this.update(e)}catch(e){console.error("Error while checking incoming transactions",e)}}))}start(){F.__privateGet.call(void 0,this,u)||F.__privateMethod.call(void 0,this,N,M).call(this)&&(F.__privateGet.call(void 0,this,n).addListener("latest",F.__privateGet.call(void 0,this,h)),F.__privateSet.call(void 0,this,u,!0))}stop(){F.__privateGet.call(void 0,this,n).removeListener("latest",F.__privateGet.call(void 0,this,h)),F.__privateSet.call(void 0,this,u,!1)}async update(e){const t=await F.__privateGet.call(void 0,this,d).acquire();O.incomingTransactionsLogger.call(void 0,"Checking for incoming transactions");try{if(!F.__privateMethod.call(void 0,this,N,M).call(this))return;const t=parseInt(e||await F.__privateGet.call(void 0,this,n).getLatestBlock(),16),s=F.__privateGet.call(void 0,this,p).getLastBlockVariations?.()??[],r=F.__privateMethod.call(void 0,this,j,I).call(this,t),i=F.__privateGet.call(void 0,this,a).call(this),l=F.__privateGet.call(void 0,this,c).call(this);let u=[];try{u=await F.__privateGet.call(void 0,this,p).fetchTransactions({address:i,currentChainId:l,fromBlock:r,limit:F.__privateGet.call(void 0,this,f)})}catch(e){return void O.incomingTransactionsLogger.call(void 0,"Error while fetching remote transactions",e)}F.__privateGet.call(void 0,this,g)||(u=u.filter((e=>e.txParams.to?.toLowerCase()===i.toLowerCase())));const d=F.__privateGet.call(void 0,this,g)?F.__privateGet.call(void 0,this,o).call(this):[],h=F.__privateMethod.call(void 0,this,k,y).call(this,u,d),m=F.__privateMethod.call(void 0,this,S,w).call(this,u,d);(h.length>0||m.length>0)&&(F.__privateMethod.call(void 0,this,v,_).call(this,h),F.__privateMethod.call(void 0,this,v,_).call(this,m),O.incomingTransactionsLogger.call(void 0,"Found incoming transactions",{new:h,updated:m}),this.hub.emit("transactions",{added:h,updated:m})),F.__privateMethod.call(void 0,this,C,A).call(this,u,s)}finally{t()}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-DTDTOMTB.js"}],[2066,{"./chunk-FDUCRHYT.js":2067,"./chunk-S6VGOPUY.js":2077,"./chunk-UGN7PBON.js":2082,"./chunk-Z4BLTVTB.js":2089,"@metamask/controller-utils":2011,"async-mutex":3410,"bn.js":3472,uuid:4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k=e("./chunk-FDUCRHYT.js"),y=e("./chunk-UGN7PBON.js"),S=e("./chunk-S6VGOPUY.js"),w=e("./chunk-Z4BLTVTB.js"),b=e("@metamask/controller-utils"),T=e("async-mutex"),E=e("bn.js"),P=(r=E)&&r.__esModule?r:{default:r},j=e("uuid");n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakSet,c=function(e,t){const s=Date.now()-e,r=Math.max(0,5e3-s);r>0?setTimeout(t,r):t()},l=new WeakMap,u=new WeakMap,d=new WeakSet,h=function(e){let t=e.result;return"0"===e.status&&(t=[],e.result.length&&S.incomingTransactionsLogger.call(void 0,"Ignored Etherscan request error",{message:e.result,type:w.__privateGet.call(void 0,this,a)?"token":"normal"})),t},m=new WeakSet,p=function(e,t){const s=w.__privateMethod.call(void 0,this,v,_).call(this,e,t);return{...s,txParams:{...s.txParams,data:e.input},..."0"===e.isError?{status:"confirmed"}:{error:new Error("Transaction failed"),status:"failed"}}},f=new WeakSet,g=function(e,t){return{...w.__privateMethod.call(void 0,this,v,_).call(this,e,t),isTransfer:!0,transferInformation:{contractAddress:e.contractAddress,decimals:Number(e.tokenDecimal),symbol:e.tokenSymbol}}},v=new WeakSet,_=function(e,t){const s=1e3*parseInt(e.timeStamp,10);return{blockNumber:e.blockNumber,chainId:t,hash:e.hash,id:j.v1.call(void 0,{msecs:s}),status:"confirmed",time:s,txParams:{chainId:t,from:e.from,gas:b.BNToHex.call(void 0,new(0,P.default)(e.gas)),gasPrice:b.BNToHex.call(void 0,new(0,P.default)(e.gasPrice)),gasUsed:b.BNToHex.call(void 0,new(0,P.default)(e.gasUsed)),nonce:b.BNToHex.call(void 0,new(0,P.default)(e.nonce)),to:e.to,value:b.BNToHex.call(void 0,new(0,P.default)(e.value))},type:"incoming",verifiedOnBlockchain:!1}},s.EtherscanRemoteTransactionSource=class{constructor({includeTokenTransfers:e}={}){w.__privateAdd.call(void 0,this,o),w.__privateAdd.call(void 0,this,d),w.__privateAdd.call(void 0,this,m),w.__privateAdd.call(void 0,this,f),w.__privateAdd.call(void 0,this,v),w.__privateAdd.call(void 0,this,n,void 0),w.__privateAdd.call(void 0,this,a,void 0),w.__privateAdd.call(void 0,this,i,new(0,T.Mutex)),w.__privateAdd.call(void 0,this,l,(async(e,t)=>{const{currentChainId:s}=e,r=await k.fetchEtherscanTransactions.call(void 0,t);return w.__privateMethod.call(void 0,this,d,h).call(this,r).map((e=>w.__privateMethod.call(void 0,this,m,p).call(this,e,s)))})),w.__privateAdd.call(void 0,this,u,(async(e,t)=>{const{currentChainId:s}=e,r=await k.fetchEtherscanTokenTransactions.call(void 0,t);return w.__privateMethod.call(void 0,this,d,h).call(this,r).map((e=>w.__privateMethod.call(void 0,this,f,g).call(this,e,s)))})),w.__privateSet.call(void 0,this,n,e??!0),w.__privateSet.call(void 0,this,a,!1)}isSupportedNetwork(e){return Object.keys(y.ETHERSCAN_SUPPORTED_NETWORKS).includes(e)}getLastBlockVariations(){return[w.__privateGet.call(void 0,this,a)?"token":"normal"]}async fetchTransactions(e){const t=await w.__privateGet.call(void 0,this,i).acquire(),s=Date.now(),r={...e,chainId:e.currentChainId};try{const t=w.__privateGet.call(void 0,this,a)?await w.__privateGet.call(void 0,this,u).call(this,e,r):await w.__privateGet.call(void 0,this,l).call(this,e,r);return w.__privateGet.call(void 0,this,n)&&w.__privateSet.call(void 0,this,a,!w.__privateGet.call(void 0,this,a)),t}finally{w.__privateMethod.call(void 0,this,o,c).call(this,s,t)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-EQT25RSP.js"}],[2067,{"./chunk-S6VGOPUY.js":2077,"./chunk-UGN7PBON.js":2082,"@metamask/controller-utils":2011},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UGN7PBON.js"),n=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils");async function i(e,{address:t,chainId:s,fromBlock:r,limit:i}){const c=function(e,t){const s=o(e);let r=`${s}/api?`;for(const e of Object.keys(t)){const s=t[e];s&&(r+=`${e}=${s}&`)}return r+="tag=latest&page=1",r}(s,{...{module:"account",address:t,startBlock:r?.toString(),offset:i?.toString(),sort:"desc"},action:e});n.incomingTransactionsLogger.call(void 0,"Sending Etherscan request",c);return await a.handleFetch.call(void 0,c)}function o(e){const t=r.ETHERSCAN_SUPPORTED_NETWORKS[e];if(!t)throw new Error(`Etherscan does not support chain with ID: ${e}`);return`https://${t.subdomain}.${t.domain}`}s.fetchEtherscanTransactions=async function({address:e,chainId:t,fromBlock:s,limit:r}){return await i("txlist",{address:e,chainId:t,fromBlock:s,limit:r})},s.fetchEtherscanTokenTransactions=async function({address:e,chainId:t,fromBlock:s,limit:r}){return await i("tokentx",{address:e,chainId:t,fromBlock:s,limit:r})},s.getEtherscanApiHost=o}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-FDUCRHYT.js"}],[2068,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=class extends Error{constructor(e,t){super(e??"Simulation failed"),this.code=t}};s.SimulationError=r,s.SimulationChainNotSupportedError=class extends r{constructor(e){super(`Chain is not supported: ${e}`,"chain-not-supported")}},s.SimulationInvalidResponseError=class extends r{constructor(){super("Invalid response from simulation API","invalid-response")}},s.SimulationRevertedError=class extends r{constructor(){super("Transaction was reverted","reverted")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-HMOSP33F.js"}],[2069,{"./chunk-HMOSP33F.js":2068,"./chunk-KT6UAKBB.js":2070,"./chunk-S6VGOPUY.js":2077,"./chunk-UGN7PBON.js":2082,"@ethersproject/abi":483,"@metamask/controller-utils":2011,"@metamask/metamask-eth-abis":1654,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-KT6UAKBB.js"),n=e("./chunk-HMOSP33F.js"),a=e("./chunk-UGN7PBON.js"),i=e("./chunk-S6VGOPUY.js"),o=e("@ethersproject/abi"),c=e("@metamask/controller-utils"),l=e("@metamask/metamask-eth-abis"),u=e("@metamask/utils"),d=(e=>(e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.ERC20_WRAPPED="erc20Wrapped",e.ERC721_LEGACY="erc721Legacy",e))(d||{}),h=u.createModuleLogger.call(void 0,i.projectLogger,"simulation"),m=["Transfer","TransferSingle","TransferBatch","Deposit","Withdrawal"],p={erc20:{abi:l.abiERC20,standard:"erc20"},erc721:{abi:l.abiERC721,standard:"erc721"},erc1155:{abi:l.abiERC1155,standard:"erc1155"},erc20Wrapped:{abi:a.ABI_SIMULATION_ERC20_WRAPPED,standard:"erc20"},erc721Legacy:{abi:a.ABI_SIMULATION_ERC721_LEGACY,standard:"erc721"}},f=["execution reverted","insufficient funds for gas"];function g(e){const t=w(e.transactions[0]?.callTrace??{});h("Extracted logs",t);const s=function(){const e=Object.values(d);return new Map(e.map((e=>{const{abi:t}=p[e];return[e,new(0,o.Interface)(t)]})))}();return t.map((e=>{const t=function(e,t){const s=Object.values(d);for(const r of s)try{const s=t.get(r),{abi:n,standard:a}=p[r];return{...s.parseLog(e),abi:n,standard:a}}catch(e){continue}return}(e,s);if(!t)return void h("Failed to parse log",e);const r=t.abi.find((e=>e.name===t.name))?.inputs;if(!r)return void h("Failed to find inputs for event",t);const n=function(e,t){return e.reduce(((e,s,r)=>{const n=t[r].name.replace("_",""),a=v(s);return e[n]=a,e}),{})}(t.args,r);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:n,abi:t.abi}})).filter((e=>void 0!==e))}function v(e){return Array.isArray(e)?e.map(v):(e.toHexString?.()??e).toLowerCase()}function _(e){return"Transfer"===e.name&&"erc721"===e.tokenStandard&&0===parseInt(e.args.from,16)}function k(e){return"erc721"===e.tokenStandard?[e.args.tokenId]:"erc1155"===e.tokenStandard&&"TransferSingle"===e.name?[e.args.id]:"erc1155"===e.tokenStandard&&"TransferBatch"===e.name?e.args.ids:[void 0]}function y(e,t,s){const r=(n=s.return,c.toHex.call(void 0,c.hexToBN.call(void 0,n)));var n;return"erc721"===t.standard?r===e?"0x1":"0x0":r}function S(e,t,s){switch(e){case"erc721":return new(0,o.Interface)(l.abiERC721).encodeFunctionData("ownerOf",[s]);case"erc1155":return new(0,o.Interface)(l.abiERC1155).encodeFunctionData("balanceOf",[t,s]);default:return new(0,o.Interface)(l.abiERC20).encodeFunctionData("balanceOf",[t])}}function w(e){return[...e.logs??[],...(e.calls??[]).map((e=>w(e))).flat()]}function b(e,t){const s=c.hexToBN.call(void 0,t).sub(c.hexToBN.call(void 0,e)),r=s.isNeg(),n=c.toHex.call(void 0,s.abs());if(!s.isZero())return{previousBalance:e,newBalance:t,difference:n,isDecrease:r};h("Balance change is zero")}s.SupportedToken=d,s.getSimulationData=async function(e){const{chainId:t,from:s,to:a,value:i,data:o}=e;h("Getting simulation data",e);try{const c=await r.simulateTransactions.call(void 0,t,{transactions:[{data:o,from:s,maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",to:a,value:i}],withCallTrace:!0,withLogs:!0}),l=c.transactions?.[0]?.error;if(l)throw new(0,n.SimulationError)(l);const u=function(e,t){const s=t.transactions[0];if(!s)return;const{stateDiff:r}=s,n=r?.pre?.[e]?.balance,a=r?.post?.[e]?.balance;if(!n||!a)return;return b(n,a)}(e.from,c),d=g(c);h("Parsed events",d);const p=await async function(e,t){const s=function(e,t){const s=new Set,r=new Map,n=new Map,a=t.filter((t=>m.includes(t.name)&&[t.args.from,t.args.to].includes(e.from)));h("Filtered user events",a);for(const t of a){const a=k(t);h("Extracted token ids",a);for(const i of a){const a={address:t.contractAddress,standard:t.tokenStandard,id:i},o=JSON.stringify(a);if(s.has(o)){h("Ignoring additional event with same contract and token ID",a);continue}s.add(o);const c=S(t.tokenStandard,e.from,i),l={from:e.from,to:t.contractAddress,data:c};_(t)||r.set(a,l),n.set(a,l)}}return{before:r,after:n}}(e,t);h("Generated balance transactions",[...s.after.values()]);const a=[...s.before.values(),e,...s.after.values()];if(1===a.length)return[];const i=await r.simulateTransactions.call(void 0,e.chainId,{transactions:a});if(h("Balance simulation response",i),i.transactions.length!==a.length)throw new(0,n.SimulationInvalidResponseError);let o=0;return[...s.after.keys()].map(((t,r)=>{const n=b(!s.before.get(t)?"0x0":y(e.from,t,i.transactions[o++]),y(e.from,t,i.transactions[r+s.before.size+1]));if(n)return{...t,...n}})).filter((e=>void 0!==e))}(e,d);return{nativeBalanceChange:u,tokenBalanceChanges:p}}catch(t){h("Failed to get simulation data",t,e);let s=t;f.some((e=>s.message?.includes(e)))&&(s=new(0,n.SimulationRevertedError));const{code:r,message:a}=s;return{tokenBalanceChanges:[],error:{code:r,message:a}}}},s.getEvents=g}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-IT3SYNZ6.js"}],[207,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:72,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=72;const s=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/072.js"}],[2070,{"./chunk-HMOSP33F.js":2068,"./chunk-S6VGOPUY.js":2077,"@metamask/controller-utils":2011,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-HMOSP33F.js"),n=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils"),i=e("@metamask/utils").createModuleLogger.call(void 0,n.projectLogger,"simulation-api"),o="https://tx-sentinel-{0}.api.cx.metamask.io/",c="networks",l=0;function u(e){return o.replace("{0}",e)}s.simulateTransactions=async function(e,t){const s=await async function(e){const t=await async function(){const e=`${u("ethereum-mainnet")}${c}`,t=await fetch(e);return t.json()}(),s=a.convertHexToDecimal.call(void 0,e),n=t[s];if(!n?.confirmations)throw i("Chain is not supported",e),new(0,r.SimulationChainNotSupportedError)(e);return u(n.network)}(e);i("Sending request",s,t);const n=l;l+=1;const o=await fetch(s,{method:"POST",body:JSON.stringify({id:String(n),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[t]})}),d=await o.json();if(i("Received response",d),d.error){const{code:e,message:t}=d.error;throw new(0,r.SimulationError)(t,e)}return d?.result}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-KT6UAKBB.js"}],[2071,{"./chunk-UGN7PBON.js":2082,"./chunk-YVCX6Z75.js":2087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-YVCX6Z75.js"),n=e("./chunk-UGN7PBON.js"),a=[n.CHAIN_IDS.OPTIMISM,n.CHAIN_IDS.OPTIMISM_TESTNET,n.CHAIN_IDS.BASE,n.CHAIN_IDS.BASE_TESTNET,n.CHAIN_IDS.OPBNB,n.CHAIN_IDS.OPBNB_TESTNET,n.CHAIN_IDS.ZORA],i=class extends r.OracleLayer1GasFeeFlow{constructor(){super("0x420000000000000000000000000000000000000F")}matchesTransaction(e){return a.includes(e.chainId)}};s.OptimismLayer1GasFeeFlow=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-NYKRCWBG.js"}],[2072,{"./chunk-2XKEAKQG.js":2059,"./chunk-3ZRHCVVS.js":2060,"./chunk-5KMU2IAT.js":2061,"./chunk-7LXE4KHV.js":2062,"./chunk-7MKQDZKY.js":2063,"./chunk-DLOQPH4M.js":2064,"./chunk-DTDTOMTB.js":2065,"./chunk-EQT25RSP.js":2066,"./chunk-IT3SYNZ6.js":2069,"./chunk-NYKRCWBG.js":2071,"./chunk-PRUNMTRD.js":2073,"./chunk-PUESYN62.js":2074,"./chunk-Q6Q44V4W.js":2075,"./chunk-S6VGOPUY.js":2077,"./chunk-SD6CWFDF.js":2078,"./chunk-TIE3CPF7.js":2079,"./chunk-TJMQEH57.js":2080,"./chunk-UGFBA4GV.js":2081,"./chunk-UT4M4XI3.js":2083,"./chunk-V72C4MCR.js":2084,"./chunk-VH47Q6TS.js":2085,"./chunk-WR5F34OW.js":2086,"./chunk-YXSCBWTU.js":2088,"./chunk-Z4BLTVTB.js":2089,"@ethereumjs/common":441,"@ethereumjs/tx":2095,"@ethereumjs/util":2107,"@metamask/base-controller":2005,"@metamask/controller-utils":2011,"@metamask/eth-query":1363,"@metamask/network-controller":1706,"@metamask/nonce-tracker":1763,"@metamask/rpc-errors":1884,"@metamask/utils":2739,"async-mutex":3410,"eth-method-registry":2117,events:3814,lodash:4322,uuid:4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y,S,w,b,T,E,P,j,I,C,A,x,R,N,M,O,F,G,B,L,D,U,H,$,J,V,W,q,z,K,Y,X,Z=e("./chunk-VH47Q6TS.js"),Q=e("./chunk-Q6Q44V4W.js"),ee=e("./chunk-YXSCBWTU.js"),te=e("./chunk-NYKRCWBG.js"),se=e("./chunk-WR5F34OW.js"),re=e("./chunk-TJMQEH57.js"),ne=e("./chunk-TIE3CPF7.js"),ae=e("./chunk-PRUNMTRD.js"),ie=e("./chunk-IT3SYNZ6.js"),oe=e("./chunk-SD6CWFDF.js"),ce=e("./chunk-DTDTOMTB.js"),le=e("./chunk-PUESYN62.js"),ue=e("./chunk-5KMU2IAT.js"),de=e("./chunk-7LXE4KHV.js"),he=e("./chunk-3ZRHCVVS.js"),me=e("./chunk-UT4M4XI3.js"),pe=e("./chunk-UGFBA4GV.js"),fe=e("./chunk-V72C4MCR.js"),ge=e("./chunk-EQT25RSP.js"),ve=e("./chunk-7MKQDZKY.js"),_e=e("./chunk-2XKEAKQG.js"),ke=e("./chunk-DLOQPH4M.js"),ye=e("./chunk-S6VGOPUY.js"),Se=e("./chunk-Z4BLTVTB.js"),we=e("@ethereumjs/common"),be=e("@ethereumjs/tx"),Te=e("@ethereumjs/util"),Ee=e("@metamask/base-controller"),Pe=e("@metamask/controller-utils"),je=e("@metamask/eth-query"),Ie=(r=je)&&r.__esModule?r:{default:r},Ce=e("@metamask/network-controller"),Ae=e("@metamask/nonce-tracker"),xe=e("@metamask/rpc-errors"),Re=e("@metamask/utils"),Ne=e("async-mutex"),Me=e("eth-method-registry"),Oe=e("events"),Fe=e("lodash"),Ge=e("uuid"),Be={transactions:{persist:!0,anonymous:!1},methodData:{persist:!0,anonymous:!1},lastFetchedBlockNumbers:{persist:!0,anonymous:!1}},Le=we.Hardfork.London,De=1.1,Ue=1.1,He="TransactionController",$e=(e=>(e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook",e))($e||{});var Je=class extends Ee.BaseController{constructor({blockTracker:e,disableHistory:t,disableSendFlowHistory:s,disableSwaps:r,getCurrentAccountEIP1559Compatibility:k,getCurrentNetworkEIP1559Compatibility:b,getExternalPendingTransactions:j,getGasFeeEstimates:C,getNetworkClientRegistry:O,getNetworkState:G,getPermittedAccounts:L,getSavedGasFees:U,getSelectedAddress:V,incomingTransactions:q={},isMultichainEnabled:K=!1,isSimulationEnabled:X,messenger:Z,onNetworkStateChange:Q,pendingTransactions:ee={},provider:te,securityProviderRequest:se,sign:re,state:ne,testGasFeeFlows:ae,transactionHistoryLimit:ie=40,hooks:oe}){super({name:He,metadata:Be,messenger:Z,state:{methodData:{},transactions:[],lastFetchedBlockNumbers:{},...ne}}),Se.__privateAdd.call(void 0,this,d),Se.__privateAdd.call(void 0,this,m),Se.__privateAdd.call(void 0,this,f),Se.__privateAdd.call(void 0,this,_),Se.__privateAdd.call(void 0,this,y),Se.__privateAdd.call(void 0,this,w),Se.__privateAdd.call(void 0,this,T),Se.__privateAdd.call(void 0,this,P),Se.__privateAdd.call(void 0,this,I),Se.__privateAdd.call(void 0,this,A),Se.__privateAdd.call(void 0,this,R),Se.__privateAdd.call(void 0,this,M),Se.__privateAdd.call(void 0,this,F),Se.__privateAdd.call(void 0,this,B),Se.__privateAdd.call(void 0,this,D),Se.__privateAdd.call(void 0,this,H),Se.__privateAdd.call(void 0,this,J),Se.__privateAdd.call(void 0,this,W),Se.__privateAdd.call(void 0,this,z),Se.__privateAdd.call(void 0,this,Y),Se.__privateAdd.call(void 0,this,n,new(0,Oe.EventEmitter)),this.approvingTransactionIds=new Set,this.mutex=new(0,Ne.Mutex),Se.__privateAdd.call(void 0,this,a,void 0),Se.__privateAdd.call(void 0,this,i,void 0),this.signAbortCallbacks=new Map,Se.__privateAdd.call(void 0,this,o,void 0),Se.__privateAdd.call(void 0,this,c,void 0),Se.__privateAdd.call(void 0,this,l,void 0),Se.__privateAdd.call(void 0,this,u,void 0),Se.__privateAdd.call(void 0,this,v,(()=>{this.pendingTransactionTracker.startIfPendingTransactions(),Se.__privateGet.call(void 0,this,u).checkForPendingTransactionAndStartPolling()})),this.messagingSystem=Z,this.getNetworkState=G,this.isSendFlowHistoryDisabled=s??!1,this.isHistoryDisabled=t??!1,this.isSwapsDisabled=r??!1,Se.__privateSet.call(void 0,this,c,X??(()=>!0)),this.registry=new(0,Me.MethodRegistry)({provider:te}),this.getSavedGasFees=U??(e=>{}),this.getCurrentAccountEIP1559Compatibility=k??(()=>Promise.resolve(!0)),this.getCurrentNetworkEIP1559Compatibility=b,this.getGasFeeEstimates=C||(()=>Promise.resolve({})),this.getPermittedAccounts=L,this.getSelectedAddress=V,this.getExternalPendingTransactions=j??(()=>[]),this.securityProviderRequest=se,Se.__privateSet.call(void 0,this,a,q),Se.__privateSet.call(void 0,this,i,ee),Se.__privateSet.call(void 0,this,o,ie),this.sign=re,Se.__privateSet.call(void 0,this,l,!0===ae),this.afterSign=oe?.afterSign??(()=>!0),this.beforeApproveOnInit=oe?.beforeApproveOnInit??(()=>!0),this.beforeCheckPendingTransaction=oe?.beforeCheckPendingTransaction??(()=>!0),this.beforePublish=oe?.beforePublish??(()=>!0),this.getAdditionalSignArguments=oe?.getAdditionalSignArguments??(()=>[]),this.publish=oe?.publish??(()=>Promise.resolve({transactionHash:void 0})),this.nonceTracker=Se.__privateMethod.call(void 0,this,d,h).call(this,{provider:te,blockTracker:e});const ce=e=>this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e);Se.__privateSet.call(void 0,this,u,new(0,le.MultichainTrackingHelper)({isMultichainEnabled:K,provider:te,nonceTracker:this.nonceTracker,incomingTransactionOptions:q,findNetworkClientIdByChainId:ce,getNetworkClientById:e=>this.messagingSystem.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:O,removeIncomingTransactionHelperListeners:Se.__privateMethod.call(void 0,this,y,S).bind(this),removePendingTransactionTrackerListeners:Se.__privateMethod.call(void 0,this,T,E).bind(this),createNonceTracker:Se.__privateMethod.call(void 0,this,d,h).bind(this),createIncomingTransactionHelper:Se.__privateMethod.call(void 0,this,m,p).bind(this),createPendingTransactionTracker:Se.__privateMethod.call(void 0,this,f,g).bind(this),onNetworkStateChange:e=>{this.messagingSystem.subscribe("NetworkController:stateChange",e)}})),Se.__privateGet.call(void 0,this,u).initialize();const ue=new(0,ge.EtherscanRemoteTransactionSource)({includeTokenTransfers:q.includeTokenTransfers});this.incomingTransactionHelper=Se.__privateMethod.call(void 0,this,m,p).call(this,{blockTracker:e,etherscanRemoteTransactionSource:ue}),this.pendingTransactionTracker=Se.__privateMethod.call(void 0,this,f,g).call(this,{provider:te,blockTracker:e}),this.gasFeeFlows=Se.__privateMethod.call(void 0,this,A,x).call(this),this.layer1GasFeeFlows=Se.__privateMethod.call(void 0,this,R,N).call(this);new(0,ve.GasFeePoller)({findNetworkClientIdByChainId:ce,gasFeeFlows:this.gasFeeFlows,getGasFeeControllerEstimates:this.getGasFeeEstimates,getProvider:(e,t)=>Se.__privateGet.call(void 0,this,u).getProvider({networkClientId:t,chainId:e}),getTransactions:()=>this.state.transactions,layer1GasFeeFlows:this.layer1GasFeeFlows,onStateChange:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e)}}).hub.on("transaction-updated",Se.__privateMethod.call(void 0,this,H,$).bind(this)),this.messagingSystem.subscribe("TransactionController:stateChange",Se.__privateGet.call(void 0,this,v)),Q((()=>{ye.projectLogger.call(void 0,"Detected network change",this.getChainId()),this.pendingTransactionTracker.startIfPendingTransactions(),this.onBootCleanup()})),this.onBootCleanup(),Se.__privateGet.call(void 0,this,v).call(this)}failTransaction(e,t,s){const r=Fe.merge.call(void 0,{},e,{error:pe.normalizeTxError.call(void 0,t),status:"failed"});this.messagingSystem.publish(`${He}:transactionFailed`,{actionId:s,error:t.message,transactionMeta:r}),this.updateTransaction(r,"TransactionController#failTransaction - Add error message and set status to failed"),this.onTransactionStatusChange(r),this.messagingSystem.publish(`${He}:transactionFinished`,r),Se.__privateGet.call(void 0,this,n).emit(`${e.id}:finished`,r)}async registryLookup(e){const t=await this.registry.lookup(e);if(!t)return{registryMethod:"",parsedRegistryMethod:{name:void 0,args:void 0}};return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}destroy(){Se.__privateMethod.call(void 0,this,_,k).call(this)}async handleMethodData(e){const t=await this.mutex.acquire();try{const{methodData:t}=this.state;if(Object.keys(t).find((t=>e===t)))return t[e];const s=await this.registryLookup(e);return this.update((t=>{t.methodData[e]=s})),s}finally{t()}}async addTransaction(e,{actionId:t,deviceConfirmedOn:s,method:r,origin:n,requireApproval:a,securityAlertResponse:i,sendFlowHistory:o,swaps:c={},type:l,networkClientId:d}={}){if(ye.projectLogger.call(void 0,"Adding transaction",e),e=pe.normalizeTransactionParams.call(void 0,e),d&&!Se.__privateGet.call(void 0,this,u).has(d))throw new Error("The networkClientId for this transaction could not be found");const h=d??Se.__privateMethod.call(void 0,this,W,q).call(this),m=await this.getEIP1559Compatibility(h);Z.validateTxParams.call(void 0,e,m),n&&await Z.validateTransactionOrigin.call(void 0,await this.getPermittedAccounts(n),this.getSelectedAddress(),e.from,n);const p=this.generateDappSuggestedGasFees(e,n),f=this.getChainId(h),g=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:h,chainId:f}),v=l??(await oe.determineTransactionType.call(void 0,e,g)).type,_=this.getTransactionWithActionId(t);let k=_?Fe.cloneDeep.call(void 0,_):{actionId:t,chainId:f,dappSuggestedGasFees:p,deviceConfirmedOn:s,id:Ge.v1.call(void 0),origin:n,securityAlertResponse:i,status:"unapproved",time:Date.now(),txParams:e,userEditedGasLimit:!1,verifiedOnBlockchain:!1,type:v,networkClientId:h};if(await this.updateGasProperties(k),!_){if(r&&this.securityProviderRequest){const e=await this.securityProviderRequest(k,r);k.securityProviderResponse=e}this.isSendFlowHistoryDisabled||(k.sendFlowHistory=o??[]),this.isHistoryDisabled||(k=ne.addInitialHistorySnapshot.call(void 0,k)),k=me.updateSwapsTransaction.call(void 0,k,v,c,{isSwapsDisabled:this.isSwapsDisabled,cancelTransaction:this.cancelTransaction.bind(this),messenger:this.messagingSystem}),this.addMetadata(k),!1!==a?Se.__privateMethod.call(void 0,this,D,U).call(this,k):ye.projectLogger.call(void 0,"Skipping simulation as approval not required"),this.messagingSystem.publish(`${He}:unapprovedTransactionAdded`,k)}return{result:this.processApproval(k,{isExisting:Boolean(_),requireApproval:a,actionId:t}),transactionMeta:k}}startIncomingTransactionPolling(e=[]){0!==e.length?Se.__privateGet.call(void 0,this,u).startIncomingTransactionPolling(e):this.incomingTransactionHelper.start()}stopIncomingTransactionPolling(e=[]){0!==e.length?Se.__privateGet.call(void 0,this,u).stopIncomingTransactionPolling(e):this.incomingTransactionHelper.stop()}stopAllIncomingTransactionPolling(){this.incomingTransactionHelper.stop(),Se.__privateGet.call(void 0,this,u).stopAllIncomingTransactionPolling()}async updateIncomingTransactions(e=[]){0!==e.length?await Se.__privateGet.call(void 0,this,u).updateIncomingTransactions(e):await this.incomingTransactionHelper.update()}async stopTransaction(e,t,{estimatedBaseFee:s,actionId:r}={}){if(this.getTransactionWithActionId(r))return;t&&(t=pe.normalizeGasFeeValues.call(void 0,t),pe.validateGasValues.call(void 0,t)),ye.projectLogger.call(void 0,"Creating cancel transaction",e,t);const a=this.getTransaction(e);if(!a)return;if(!this.sign)throw new Error("No sign method defined.");const i=pe.getIncreasedPriceFromExisting.call(void 0,a.txParams.gasPrice,De),o=pe.isGasPriceValue.call(void 0,t)&&t.gasPrice,c=o&&pe.validateMinimumIncrease.call(void 0,o,i)||i,l=a.txParams?.maxFeePerGas,d=pe.getIncreasedPriceFromExisting.call(void 0,l,De),h=pe.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,m=h&&pe.validateMinimumIncrease.call(void 0,h,d)||l&&d,p=a.txParams?.maxPriorityFeePerGas,f=pe.getIncreasedPriceFromExisting.call(void 0,p,De),g=pe.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,v=g&&pe.validateMinimumIncrease.call(void 0,g,f)||p&&f,_=m&&v?{from:a.txParams.from,gasLimit:a.txParams.gas,maxFeePerGas:m,maxPriorityFeePerGas:v,type:"0x2",nonce:a.txParams.nonce,to:a.txParams.from,value:"0x0"}:{from:a.txParams.from,gasLimit:a.txParams.gas,gasPrice:c,nonce:a.txParams.nonce,to:a.txParams.from,value:"0x0"},k=this.prepareUnsignedEthTx(a.chainId,_),y=await this.sign(k,a.txParams.from),S=Te.bufferToHex.call(void 0,y.serialize()),w=_.maxFeePerGas??_.gasPrice,b=_.maxFeePerGas?a.txParams.maxFeePerGas:a.txParams.gasPrice;ye.projectLogger.call(void 0,"Submitting cancel transaction",{oldFee:b,newFee:w,txParams:_});const T=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:a.networkClientId,chainId:a.chainId}),E=await this.publishTransactionForRetry(T,S,a),P={actionId:r,chainId:a.chainId,networkClientId:a.networkClientId,estimatedBaseFee:s,hash:E,id:Ge.v1.call(void 0),originalGasEstimate:a.txParams.gas,status:"submitted",time:Date.now(),type:"cancel",txParams:_};this.addMetadata(P),this.messagingSystem.publish(`${He}:transactionApproved`,{transactionMeta:P,actionId:r}),this.messagingSystem.publish(`${He}:transactionSubmitted`,{transactionMeta:P,actionId:r}),this.messagingSystem.publish(`${He}:transactionFinished`,P),Se.__privateGet.call(void 0,this,n).emit(`${a.id}:finished`,P)}async speedUpTransaction(e,t,{actionId:s,estimatedBaseFee:r}={}){if(this.getTransactionWithActionId(s))return;t&&(t=pe.normalizeGasFeeValues.call(void 0,t),pe.validateGasValues.call(void 0,t)),ye.projectLogger.call(void 0,"Creating speed up transaction",e,t);const n=this.getTransaction(e);if(!n)return;if(!this.sign)throw new Error("No sign method defined.");const a=pe.getIncreasedPriceFromExisting.call(void 0,n.txParams.gasPrice,Ue),i=pe.isGasPriceValue.call(void 0,t)&&t.gasPrice,o=i&&pe.validateMinimumIncrease.call(void 0,i,a)||a,c=n.txParams?.maxFeePerGas,l=pe.getIncreasedPriceFromExisting.call(void 0,c,Ue),d=pe.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxFeePerGas,h=d&&pe.validateMinimumIncrease.call(void 0,d,l)||c&&l,m=n.txParams?.maxPriorityFeePerGas,p=pe.getIncreasedPriceFromExisting.call(void 0,m,Ue),f=pe.isFeeMarketEIP1559Values.call(void 0,t)&&t.maxPriorityFeePerGas,g=f&&pe.validateMinimumIncrease.call(void 0,f,p)||m&&p,v=h&&g?{...n.txParams,gasLimit:n.txParams.gas,maxFeePerGas:h,maxPriorityFeePerGas:g,type:"0x2"}:{...n.txParams,gasLimit:n.txParams.gas,gasPrice:o},_=this.prepareUnsignedEthTx(n.chainId,v),k=await this.sign(_,n.txParams.from),y=this.updateTransactionMetaRSV(n,k),S=Te.bufferToHex.call(void 0,k.serialize()),w=v.maxFeePerGas??v.gasPrice,b=v.maxFeePerGas?y.txParams.maxFeePerGas:y.txParams.gasPrice;ye.projectLogger.call(void 0,"Submitting speed up transaction",{oldFee:b,newFee:w,txParams:v});const T=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:n.networkClientId,chainId:n.chainId}),E=await this.publishTransactionForRetry(T,S,n),P={...y,estimatedBaseFee:r,id:Ge.v1.call(void 0),time:Date.now(),hash:E,actionId:s,originalGasEstimate:n.txParams.gas,type:"retry",originalType:n.type},j=h&&g?{...P,txParams:{...n.txParams,maxFeePerGas:h,maxPriorityFeePerGas:g}}:{...P,txParams:{...n.txParams,gasPrice:o}};this.addMetadata(j),this.messagingSystem.publish(`${He}:transactionApproved`,{transactionMeta:j,actionId:s}),this.messagingSystem.publish(`${He}:transactionSubmitted`,{transactionMeta:j,actionId:s}),this.messagingSystem.publish(`${He}:speedupTransactionAdded`,j)}async estimateGas(e,t){const s=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:t}),{estimatedGas:r,simulationFails:n}=await fe.estimateGas.call(void 0,e,s);return{gas:r,simulationFails:n}}async estimateGasBuffered(e,t,s){const r=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:s}),{blockGasLimit:n,estimatedGas:a,simulationFails:i}=await fe.estimateGas.call(void 0,e,r);return{gas:fe.addGasBuffer.call(void 0,a,n,t),simulationFails:i}}updateTransaction(e,t){const{id:s}=e;Se.__privateMethod.call(void 0,this,M,O).call(this,{transactionId:s,note:t,skipHistory:this.isHistoryDisabled},(()=>({...e})))}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const s=this.getTransaction(e);if(!s)throw new Error("Cannot update security alert response as no transaction metadata found");const r={...s,securityAlertResponse:t};this.updateTransaction(r,`${He}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions(e,t){if(e&&!t)return void this.update((e=>{e.transactions=[]}));const s=this.getChainId(),r=this.state.transactions.filter((({chainId:r,txParams:n})=>{if(!(e||r===s))return!0;return!(!t||n.from?.toLowerCase()===t.toLowerCase())}));this.update((e=>{e.transactions=this.trimTransactionsForState(r)}))}async confirmExternalTransaction(e,t,s){const r=this.addExternalTransaction(e);try{const e=r.id,n={...r,status:"confirmed",txReceipt:t};s&&(n.baseFeePerGas=s),this.markNonceDuplicatesDropped(e),this.updateTransaction(n,`${He}:confirmExternalTransaction - Add external transaction`),this.onTransactionStatusChange(n),this.updatePostBalance(n),this.messagingSystem.publish(`${He}:transactionConfirmed`,n)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionSendFlowHistory(e,t,s){if(this.isSendFlowHistoryDisabled)throw new Error("Send flow history is disabled for the current transaction controller");const r=this.getTransaction(e);if(!r)throw new Error("Cannot update send flow history as no transaction metadata found");pe.validateIfTransactionUnapproved.call(void 0,r,"updateTransactionSendFlowHistory");const n=r.sendFlowHistory??[];if(t===n.length){const e={...r,sendFlowHistory:[...n,...s]};this.updateTransaction(e,`${He}:updateTransactionSendFlowHistory - sendFlowHistory updated`)}return this.getTransaction(e)}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:s,estimateSuggested:r,gas:n,gasLimit:a,gasPrice:i,maxPriorityFeePerGas:o,maxFeePerGas:c,originalGasEstimate:l,userEditedGasLimit:u,userFeeLevel:d}){const h=this.getTransaction(e);if(!h)throw new Error("Cannot update transaction as no transaction metadata found");pe.validateIfTransactionUnapproved.call(void 0,h,"updateTransactionGasFees");let m={txParams:{gas:n,gasLimit:a,gasPrice:i,maxPriorityFeePerGas:o,maxFeePerGas:c},defaultGasEstimates:t,estimateUsed:s,estimateSuggested:r,originalGasEstimate:l,userEditedGasLimit:u,userFeeLevel:d};m.txParams=Fe.pickBy.call(void 0,m.txParams),m=Fe.pickBy.call(void 0,m);const p=Fe.merge.call(void 0,{},h,m);return this.updateTransaction(p,`${He}:updateTransactionGasFees - gas values updated`),this.getTransaction(e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:s,maxPriorityFeePerGas:r}){const n=this.getTransaction(e);if(!n)throw new Error("Cannot update transaction as no transaction metadata found");pe.validateIfTransactionUnapproved.call(void 0,n,"updatePreviousGasParams");const a={previousGas:{gasLimit:t,maxFeePerGas:s,maxPriorityFeePerGas:r}};a.previousGas=Fe.pickBy.call(void 0,a.previousGas);const i=Fe.merge.call(void 0,{},n,a);return this.updateTransaction(i,`${He}:updatePreviousGasParams - Previous gas values updated`),this.getTransaction(e)}async getNonceLock(e,t){return Se.__privateGet.call(void 0,this,u).getNonceLock(e,t)}async updateEditableParams(e,{data:t,gas:s,gasPrice:r,from:n,to:a,value:i}){const o=this.getTransaction(e);if(!o)throw new Error("Cannot update editable params as no transaction metadata found");pe.validateIfTransactionUnapproved.call(void 0,o,"updateEditableParams");const c={txParams:{data:t,from:n,to:a,value:i,gas:s,gasPrice:r}};c.txParams=Fe.pickBy.call(void 0,c.txParams);const l=Fe.merge.call(void 0,{},o,c),d=Se.__privateGet.call(void 0,this,u).getProvider({chainId:o.chainId,networkClientId:o.networkClientId}),h=new(0,Ie.default)(d),{type:m}=await oe.determineTransactionType.call(void 0,l.txParams,h);return l.type=m,await _e.updateTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:d,transactionMeta:l}),this.updateTransaction(l,`Update Editable Params for ${e}`),this.getTransaction(e)}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if(ye.projectLogger.call(void 0,"Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const s=e[0],r=this.getCommonConfiguration(s.chainId);let n;try{n=this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",s.chainId)}catch(e){ye.projectLogger.call(void 0,"failed to find networkClientId from chainId",e)}const a=be.TransactionFactory.fromTxData(s,{common:r}),i=Te.bufferToHex.call(void 0,a.serialize());if(this.approvingTransactionIds.has(i))return"";let o,c;this.approvingTransactionIds.add(i);try{const r=s.from;c=!0!==t?await this.getNonceLock(r,n):void 0;const a=c?Re.add0x.call(void 0,c.nextNonce.toString(16)):s.nonce;c&&ye.projectLogger.call(void 0,"Using nonce from nonce tracker",a,c.nonceDetails),o=await Promise.all(e.map((e=>(e.nonce=a,this.signExternalTransaction(e.chainId,e)))))}catch(e){throw ye.projectLogger.call(void 0,"Error while signing transactions with same nonce",e),e}finally{c?.releaseLock(),this.approvingTransactionIds.delete(i)}return o}updateCustodialTransaction(e,{errorMessage:t,hash:s,status:r}){const a=this.getTransaction(e);if(!a)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(!a.custodyId)throw new Error("Transaction must be a custodian transaction");if(r&&!["submitted","signed","failed"].includes(r))throw new Error(`Cannot update custodial transaction with status: ${r}`);const i=Fe.merge.call(void 0,{},a,Fe.pickBy.call(void 0,{hash:s,status:r}));"submitted"===i.status&&(i.submittedTime=(new Date).getTime()),"failed"===i.status&&(i.error=pe.normalizeTxError.call(void 0,new Error(t))),this.updateTransaction(i,`${He}:updateCustodialTransaction - Custodial transaction updated`),["submitted","failed"].includes(r)&&(this.messagingSystem.publish(`${He}:transactionFinished`,i),Se.__privateGet.call(void 0,this,n).emit(`${i.id}:finished`,i))}initApprovals(){const e=this.getChainId(),t=this.state.transactions.filter((t=>"unapproved"===t.status&&t.chainId===e&&!t.isUserOperation));for(const e of t)this.processApproval(e,{shouldShowRequest:!1}).catch((e=>{e?.code!==xe.errorCodes.provider.userRejectedRequest&&console.error("Error during persisted transaction approval",e)}))}getTransactions({searchCriteria:e={},initialList:t,filterToCurrentNetwork:s=!0,limit:r}={}){const n=this.getChainId(),a=Fe.mapValues.call(void 0,e,(e=>"function"==typeof e?e:t=>t===e)),i=t??this.state.transactions,o=Fe.sortBy.call(void 0,Fe.pickBy.call(void 0,i,(e=>{if(s&&e.chainId!==n)return!1;for(const[t,s]of Object.entries(a))if(t in e.txParams){if(!1===s(e.txParams[t]))return!1}else if(!1===s(e[t]))return!1;return!0})),"time");if(void 0!==r){const e=new Set,t=[];for(let s=o.length-1;s>-1;s--){const n=o[s],{nonce:a}=n.txParams;if(!e.has(a)){if(!(e.size<r))continue;e.add(a)}t.unshift(n)}return t}return o}async estimateGasFee({transactionParams:e,chainId:t,networkClientId:s}){const r=Se.__privateMethod.call(void 0,this,J,V).call(this,{networkClientId:s,chainId:t}),n={txParams:e,chainId:t,networkClientId:r},a=ke.getGasFeeFlow.call(void 0,n,this.gasFeeFlows),i=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:r,chainId:t}),o=await this.getGasFeeEstimates({networkClientId:r});return a.getGasFees({ethQuery:i,gasFeeControllerData:o,transactionMeta:n})}async getLayer1GasFee({transactionParams:e,chainId:t,networkClientId:s}){const r=Se.__privateGet.call(void 0,this,u).getProvider({networkClientId:s,chainId:t});return await _e.getTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:r,transactionMeta:{txParams:e,chainId:t}})}async signExternalTransaction(e,t){if(!this.sign)throw new Error("No sign method defined.");const s=pe.normalizeTransactionParams.call(void 0,t),r=pe.isEIP1559Transaction.call(void 0,s)?"0x2":"0x0",n={...s,type:r,gasLimit:s.gas,chainId:e},{from:a}=n,i=this.getCommonConfiguration(e),o=be.TransactionFactory.fromTxData(n,{common:i}),c=await this.sign(o,a);return Te.bufferToHex.call(void 0,c.serialize())}clearUnapprovedTransactions(){const e=this.state.transactions.filter((({status:e})=>"unapproved"!==e));this.update((t=>{t.transactions=this.trimTransactionsForState(e)}))}abortTransactionSigning(e){if(!this.getTransaction(e))throw new Error("Cannot abort signing as no transaction metadata found");const t=this.signAbortCallbacks.get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),this.signAbortCallbacks.delete(e)}addMetadata(e){this.update((t=>{t.transactions=this.trimTransactionsForState([...t.transactions,e])}))}async updateGasProperties(e){const t=await this.getEIP1559Compatibility(e.networkClientId)&&"0x0"!==e.txParams.type,{networkClientId:s,chainId:r}=e,n=Se.__privateMethod.call(void 0,this,Y,X).call(this,s),a=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:s,chainId:r}),i=Se.__privateGet.call(void 0,this,u).getProvider({networkClientId:s,chainId:r});await fe.updateGas.call(void 0,{ethQuery:a,chainId:r,isCustomNetwork:n,txMeta:e}),await he.updateGasFees.call(void 0,{eip1559:t,ethQuery:a,gasFeeFlows:this.gasFeeFlows,getGasFeeEstimates:this.getGasFeeEstimates,getSavedGasFees:this.getSavedGasFees.bind(this),txMeta:e}),await _e.updateTransactionLayer1GasFee.call(void 0,{layer1GasFeeFlows:this.layer1GasFeeFlows,provider:i,transactionMeta:e})}onBootCleanup(){this.submitApprovedTransactions()}submitApprovedTransactions(){const e=this.state.transactions.filter((e=>"approved"===e.status));for(const t of e)this.beforeApproveOnInit(t)&&this.approveTransaction(t.id).catch((e=>{console.error("Error while submitting persisted transaction",e)}))}async processApproval(e,{isExisting:t=!1,requireApproval:s,shouldShowRequest:r=!0,actionId:n}){const a=e.id;let i;const{meta:o,isCompleted:c}=this.isTransactionCompleted(a),l=c?Promise.resolve(o):this.waitForTransactionFinished(a);if(o&&!t&&!c)try{if(!1!==s){const t=await this.requestApproval(e,{shouldShowRequest:r});i=t.resultCallbacks;const s=t.value,n=s?.txMeta;n&&(ye.projectLogger.call(void 0,"Updating transaction with approval data",{customNonce:n.customNonceValue,params:n.txParams}),this.updateTransaction(n,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:t}=this.isTransactionCompleted(a);if(!t){"skipped-via-before-publish-hook"===await this.approveTransaction(a)&&i&&i.success();const e=this.getTransaction(a);this.messagingSystem.publish(`${He}:transactionApproved`,{transactionMeta:e,actionId:n})}}catch(e){const{isCompleted:t}=this.isTransactionCompleted(a);if(!t){if(e?.code===xe.errorCodes.provider.userRejectedRequest)throw this.cancelTransaction(a,n),xe.providerErrors.userRejectedRequest("MetaMask Tx Signature: User denied transaction signature.");this.failTransaction(o,e,n)}}const u=await l;switch(u?.status){case"failed":throw i?.error(u.error),xe.rpcErrors.internal(u.error.message);case"submitted":return i?.success(),u.hash;default:const e=xe.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(u||a)}`);throw i?.error(e),e}}async approveTransaction(e){const t=new Array;t.push(await this.mutex.acquire());let s=this.getTransactionOrThrow(e);try{if(!this.sign)return this.failTransaction(s,new Error("No sign method defined.")),"not-approved";if(!s.chainId)return this.failTransaction(s,new Error("No chainId defined.")),"not-approved";if(this.approvingTransactionIds.has(e))return ye.projectLogger.call(void 0,"Skipping approval as signing in progress",e),"not-approved";this.approvingTransactionIds.add(e),t.push((()=>this.approvingTransactionIds.delete(e)));const[r,a]=await ae.getNextNonce.call(void 0,s,(e=>Se.__privateGet.call(void 0,this,u).getNonceLock(e,s.networkClientId)));a&&t.push(a),s=Se.__privateMethod.call(void 0,this,M,O).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction approved"},(e=>{const{txParams:t,chainId:s}=e;e.status="approved",e.txParams={...t,nonce:r,chainId:s,gasLimit:t.gas,...pe.isEIP1559Transaction.call(void 0,t)&&{type:"0x2"}}})),this.onTransactionStatusChange(s);const i=await this.signTransaction(s,s.txParams);if(!this.beforePublish(s))return ye.projectLogger.call(void 0,"Skipping publishing transaction based on hook"),this.messagingSystem.publish(`${He}:transactionPublishingSkipped`,s),"skipped-via-before-publish-hook";if(!i)return"not-approved";const o=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:s.networkClientId,chainId:s.chainId});let c;const l="swap"===s.type;l&&(ye.projectLogger.call(void 0,"Determining pre-transaction balance"),c=await Pe.query.call(void 0,o,"getBalance",[s.txParams.from])),ye.projectLogger.call(void 0,"Publishing transaction",s.txParams);let{transactionHash:d}=await this.publish(s,i);return void 0===d&&(d=await this.publishTransaction(o,i)),ye.projectLogger.call(void 0,"Publish successful",d),s=Se.__privateMethod.call(void 0,this,M,O).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction submitted"},(e=>{e.hash=d,e.status="submitted",e.submittedTime=(new Date).getTime(),l&&(e.preTxBalance=c,ye.projectLogger.call(void 0,"Updated pre-transaction balance",c))})),this.messagingSystem.publish(`${He}:transactionSubmitted`,{transactionMeta:s}),this.messagingSystem.publish(`${He}:transactionFinished`,s),Se.__privateGet.call(void 0,this,n).emit(`${e}:finished`,s),this.onTransactionStatusChange(s),"approved"}catch(e){return this.failTransaction(s,e),"not-approved"}finally{t.forEach((e=>e()))}}async publishTransaction(e,t){return await Pe.query.call(void 0,e,"sendRawTransaction",[t])}cancelTransaction(e,t){const s=this.state.transactions.find((({id:t})=>t===e));if(!s)return;this.update((t=>{const s=t.transactions.filter((({id:t})=>t!==e));t.transactions=this.trimTransactionsForState(s)}));const r={...s,status:"rejected"};this.messagingSystem.publish(`${He}:transactionFinished`,r),Se.__privateGet.call(void 0,this,n).emit(`${s.id}:finished`,r),this.messagingSystem.publish(`${He}:transactionRejected`,{transactionMeta:r,actionId:t}),this.onTransactionStatusChange(r)}trimTransactionsForState(e){const t=new Set,s=[...e].sort(((e,t)=>e.time>t.time?-1:1)).filter((e=>{const{chainId:s,status:r,txParams:n,time:a}=e;if(n){const e=`${String(n.nonce)}-${Pe.convertHexToDecimal.call(void 0,s)}-${new Date(a).toDateString()}`;if(t.has(e))return!0;if(t.size<Se.__privateGet.call(void 0,this,o)||!this.isFinalState(r))return t.add(e),!0}return!1}));return s.reverse(),s}isFinalState(e){return"rejected"===e||"confirmed"===e||"failed"===e}isLocalFinalState(e){return["confirmed","failed","rejected","submitted"].includes(e)}async requestApproval(e,{shouldShowRequest:t}){const s=this.getApprovalId(e),{origin:r}=e,n=Pe.ApprovalType.Transaction,a={txId:e.id};return await this.messagingSystem.call("ApprovalController:addRequest",{id:s,origin:r||Pe.ORIGIN_METAMASK,type:n,requestData:a,expectsResult:!0},t)}getTransaction(e){const{transactions:t}=this.state;return t.find((({id:t})=>t===e))}getTransactionOrThrow(e,t="TransactionController"){const s=this.getTransaction(e);if(!s)throw new Error(`${t}: No transaction found with id ${e}`);return s}getApprovalId(e){return String(e.id)}isTransactionCompleted(e){const t=this.getTransaction(e);if(!t)return{meta:void 0,isCompleted:!1};return{meta:t,isCompleted:this.isLocalFinalState(t.status)}}getChainId(e){const t=Se.__privateMethod.call(void 0,this,z,K).call(this),s=Se.__privateMethod.call(void 0,this,W,q).call(this);return e&&e!==s?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.chainId:t}prepareUnsignedEthTx(e,t){return be.TransactionFactory.fromTxData(t,{freeze:!1,common:this.getCommonConfiguration(e)})}getCommonConfiguration(e){const t={chainId:parseInt(e,16),defaultHardfork:Le};return we.Common.custom(t)}onIncomingTransactions({added:e,updated:t}){this.update((s=>{const{transactions:r}=s,n=[...e,...r.map((e=>t.find((({hash:t})=>t===e.hash))??e))];s.transactions=this.trimTransactionsForState(n)}))}onUpdatedLastFetchedBlockNumbers({lastFetchedBlockNumbers:e,blockNumber:t}){this.update((t=>{t.lastFetchedBlockNumbers=e})),this.messagingSystem.publish(`${He}:incomingTransactionBlockReceived`,t)}generateDappSuggestedGasFees(e,t){if(!t||t===Pe.ORIGIN_METAMASK)return;const{gasPrice:s,maxFeePerGas:r,maxPriorityFeePerGas:n,gas:a}=e;if(void 0===s&&void 0===r&&void 0===n&&void 0===a)return;const i={};return void 0!==s?i.gasPrice=s:void 0===r&&void 0===n||(i.maxFeePerGas=r,i.maxPriorityFeePerGas=n),void 0!==a&&(i.gas=a),i}addExternalTransaction(e){const{chainId:t}=e,{transactions:s}=this.state,r=e?.txParams?.from,n=s.filter((e=>e.txParams.from===r&&e.chainId===t)),a=n.filter((e=>"confirmed"===e.status)),i=n.filter((e=>"submitted"===e.status));de.validateConfirmedExternalTransaction.call(void 0,e,a,i);const o=0!==(e.history??[]).length||this.isHistoryDisabled?e:ne.addInitialHistorySnapshot.call(void 0,e);return this.update((e=>{e.transactions=this.trimTransactionsForState([...e.transactions,o])})),o}markNonceDuplicatesDropped(e){const t=this.getTransaction(e);if(!t)return;const s=t.txParams?.nonce,r=t.txParams?.from,{chainId:n}=t,a=this.state.transactions.filter((t=>t.id!==e&&t.txParams.from===r&&t.txParams.nonce===s&&t.chainId===n&&"incoming"!==t.type)),i=a.map((e=>e.id));if(0!==a.length){this.update((e=>{for(const s of e.transactions)i.includes(s.id)&&(s.replacedBy=t?.hash,s.replacedById=t?.id)}));for(const e of this.state.transactions)i.includes(e.id)&&"failed"!==e.status&&this.setTransactionStatusDropped(e)}}setTransactionStatusDropped(e){const t={...e,status:"dropped"};this.messagingSystem.publish(`${He}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),this.onTransactionStatusChange(t)}getTransactionWithActionId(e){return this.state.transactions.find((t=>e&&t.actionId===e))}async waitForTransactionFinished(e){return new Promise((t=>{Se.__privateGet.call(void 0,this,n).once(`${e}:finished`,(e=>{t(e)}))}))}updateTransactionMetaRSV(e,t){const s=Fe.cloneDeep.call(void 0,e);for(const e of["r","s","v"]){const r=t[e];null!=r&&(s[e]=Re.add0x.call(void 0,r.toString(16)))}return s}async getEIP1559Compatibility(e){const t=await this.getCurrentNetworkEIP1559Compatibility(e),s=await this.getCurrentAccountEIP1559Compatibility();return t&&s}async signTransaction(e,t){ye.projectLogger.call(void 0,"Signing transaction",t);const s=this.prepareUnsignedEthTx(e.chainId,t);this.approvingTransactionIds.add(e.id);const r=await new Promise(((r,n)=>{this.sign?.(s,t.from,...this.getAdditionalSignArguments(e)).then(r,n),this.signAbortCallbacks.set(e.id,(()=>n(new Error("Signing aborted by user"))))}));if(this.signAbortCallbacks.delete(e.id),!r)return void ye.projectLogger.call(void 0,"Skipping signed status as no signed transaction");const n=Fe.cloneDeep.call(void 0,e);if(!this.afterSign(n,r))return this.updateTransaction(n,"TransactionController#signTransaction - Update after sign"),void ye.projectLogger.call(void 0,"Skipping signed status based on hook");const a={...this.updateTransactionMetaRSV(n,r),status:"signed"};this.updateTransaction(a,"TransactionController#approveTransaction - Transaction signed"),this.onTransactionStatusChange(a);const i=Te.bufferToHex.call(void 0,r.serialize()),o=Fe.merge.call(void 0,{},a,{rawTx:i});return this.updateTransaction(o,"TransactionController#approveTransaction - RawTransaction added"),i}onTransactionStatusChange(e){this.messagingSystem.publish(`${He}:transactionStatusUpdated`,{transactionMeta:e})}getNonceTrackerTransactions(e,t,s=this.getChainId()){return ae.getAndFormatTransactionsForNonceTracker.call(void 0,s,t,e,this.state.transactions)}onConfirmedTransaction(e){ye.projectLogger.call(void 0,"Processing confirmed transaction",e.id),this.markNonceDuplicatesDropped(e.id),this.messagingSystem.publish(`${He}:transactionConfirmed`,e),this.onTransactionStatusChange(e),this.updatePostBalance(e)}async updatePostBalance(e){try{if("swap"!==e.type)return;const t=Se.__privateGet.call(void 0,this,u).getEthQuery({networkClientId:e.networkClientId,chainId:e.chainId}),{updatedTransactionMeta:s,approvalTransactionMeta:r}=await me.updatePostTransactionBalance.call(void 0,e,{ethQuery:t,getTransaction:this.getTransaction.bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messagingSystem.publish(`${He}:postTransactionBalanceUpdated`,{transactionMeta:s,approvalTransactionMeta:r})}catch(e){ye.projectLogger.call(void 0,"Error while updating post transaction balance",e)}}async publishTransactionForRetry(e,t,s){try{return await this.publishTransaction(e,t)}catch(e){if(this.isTransactionAlreadyConfirmedError(e))throw await this.pendingTransactionTracker.forceCheckTransaction(s),new Error("Previous transaction is already confirmed");throw e}}isTransactionAlreadyConfirmedError(e){return e?.message?.includes("nonce too low")||e?.data?.message?.includes("nonce too low")}};n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakSet,h=function({provider:e,blockTracker:t,chainId:s}){return new(0,Ae.NonceTracker)({provider:e,blockTracker:t,getPendingTransactions:Se.__privateMethod.call(void 0,this,I,C).bind(this,s),getConfirmedTransactions:this.getNonceTrackerTransactions.bind(this,"confirmed")})},m=new WeakSet,p=function({blockTracker:e,etherscanRemoteTransactionSource:t,chainId:s}){const r=new(0,ce.IncomingTransactionHelper)({blockTracker:e,getCurrentAccount:this.getSelectedAddress,getLastFetchedBlockNumbers:()=>this.state.lastFetchedBlockNumbers,getChainId:s?()=>s:this.getChainId.bind(this),isEnabled:Se.__privateGet.call(void 0,this,a).isEnabled,queryEntireHistory:Se.__privateGet.call(void 0,this,a).queryEntireHistory,remoteTransactionSource:t,transactionLimit:Se.__privateGet.call(void 0,this,o),updateTransactions:Se.__privateGet.call(void 0,this,a).updateTransactions});return Se.__privateMethod.call(void 0,this,w,b).call(this,r),r},f=new WeakSet,g=function({provider:e,blockTracker:t,chainId:s}){const r=new(0,Ie.default)(e),n=s?()=>s:this.getChainId.bind(this),a=new(0,ue.PendingTransactionTracker)({approveTransaction:async e=>{await this.approveTransaction(e)},blockTracker:t,getChainId:n,getEthQuery:()=>r,getTransactions:()=>this.state.transactions,isResubmitEnabled:Se.__privateGet.call(void 0,this,i).isResubmitEnabled,getGlobalLock:()=>Se.__privateGet.call(void 0,this,u).acquireNonceLockForChainIdKey({chainId:n()}),publishTransaction:this.publishTransaction.bind(this),hooks:{beforeCheckPendingTransaction:this.beforeCheckPendingTransaction.bind(this),beforePublish:this.beforePublish.bind(this)}});return Se.__privateMethod.call(void 0,this,P,j).call(this,a),a},v=new WeakMap,_=new WeakSet,k=function(){this.pendingTransactionTracker.stop(),Se.__privateMethod.call(void 0,this,T,E).call(this,this.pendingTransactionTracker),this.incomingTransactionHelper.stop(),Se.__privateMethod.call(void 0,this,y,S).call(this,this.incomingTransactionHelper),Se.__privateGet.call(void 0,this,u).stopAllTracking()},y=new WeakSet,S=function(e){e.hub.removeAllListeners("transactions"),e.hub.removeAllListeners("updatedLastFetchedBlockNumbers")},w=new WeakSet,b=function(e){e.hub.on("transactions",this.onIncomingTransactions.bind(this)),e.hub.on("updatedLastFetchedBlockNumbers",this.onUpdatedLastFetchedBlockNumbers.bind(this))},T=new WeakSet,E=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},P=new WeakSet,j=function(e){e.hub.on("transaction-confirmed",this.onConfirmedTransaction.bind(this)),e.hub.on("transaction-dropped",this.setTransactionStatusDropped.bind(this)),e.hub.on("transaction-failed",this.failTransaction.bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},I=new WeakSet,C=function(e,t){return[...this.getNonceTrackerTransactions("submitted",t,e),...this.getExternalPendingTransactions(t,e)]},A=new WeakSet,x=function(){return Se.__privateGet.call(void 0,this,l)?[new(0,re.TestGasFeeFlow)]:[new(0,Q.LineaGasFeeFlow),new(0,ee.DefaultGasFeeFlow)]},R=new WeakSet,N=function(){return[new(0,te.OptimismLayer1GasFeeFlow),new(0,se.ScrollLayer1GasFeeFlow)]},M=new WeakSet,O=function({transactionId:e,note:t,skipHistory:s},r){let n=[];this.update((a=>{const i=a.transactions.findIndex((({id:t})=>t===e));let o=a.transactions[i];o=r(o)??o,o.txParams=pe.normalizeTransactionParams.call(void 0,o.txParams),Z.validateTxParams.call(void 0,o.txParams),n=Se.__privateMethod.call(void 0,this,F,G).call(this,o),!0!==s&&(o=ne.updateTransactionHistory.call(void 0,o,t??"Transaction updated")),a.transactions[i]=o}));const a=this.getTransaction(e);return n.length>0&&Se.__privateMethod.call(void 0,this,B,L).call(this,a,n),a},F=new WeakSet,G=function(e){const{id:t,txParams:s}=e,r=this.getTransaction(t)?.txParams;if(!r||Fe.isEqual.call(void 0,r,s))return[];const n=Object.keys(s).filter((e=>s[e]!==r[e]));return ye.projectLogger.call(void 0,"Transaction parameters have been updated",t,n,r,s),n},B=new WeakSet,L=function(e,t){["to","value","data"].some((e=>t.includes(e)))&&(ye.projectLogger.call(void 0,"Updating simulation data due to transaction parameter update"),Se.__privateMethod.call(void 0,this,D,U).call(this,e))},D=new WeakSet,U=async function(e){const{id:t,chainId:s,txParams:r}=e,{from:n,to:a,value:i,data:o}=r;let l={error:{code:"disabled",message:"Simulation disabled"},tokenBalanceChanges:[]};Se.__privateGet.call(void 0,this,c).call(this)&&(Se.__privateMethod.call(void 0,this,M,O).call(this,{transactionId:t,skipHistory:!0},(e=>{e.simulationData=void 0})),l=await ie.getSimulationData.call(void 0,{chainId:s,from:n,to:a,value:i,data:o}));this.getTransaction(t)?(Se.__privateMethod.call(void 0,this,M,O).call(this,{transactionId:t,note:"TransactionController#updateSimulationData - Update simulation data"},(e=>{e.simulationData=l})),ye.projectLogger.call(void 0,"Updated simulation data",t,l)):ye.projectLogger.call(void 0,"Cannot update simulation data as transaction not found",t,l)},H=new WeakSet,$=function({transactionId:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:s,layer1GasFee:r}){Se.__privateMethod.call(void 0,this,M,O).call(this,{transactionId:e,skipHistory:!0},(e=>{t&&(e.gasFeeEstimates=t),void 0!==s&&(e.gasFeeEstimatesLoaded=s),r&&(e.layer1GasFee=r)}))},J=new WeakSet,V=function({networkClientId:e,chainId:t}){const s=Se.__privateMethod.call(void 0,this,z,K).call(this),r=Se.__privateMethod.call(void 0,this,W,q).call(this);return e||(t&&t!==s?this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",t):r)},W=new WeakSet,q=function(){return this.getNetworkState().selectedNetworkClientId},z=new WeakSet,K=function(){return this.getNetworkState().providerConfig.chainId},Y=new WeakSet,X=function(e){const t=Se.__privateMethod.call(void 0,this,W,q).call(this);return e&&e!==t?this.messagingSystem.call("NetworkController:getNetworkClientById",e).configuration.type===Ce.NetworkClientType.Custom:this.getNetworkState().providerConfig.type===Pe.NetworkType.rpc},s.HARDFORK=Le,s.CANCEL_RATE=De,s.SPEED_UP_RATE=Ue,s.ApprovalState=$e,s.TransactionController=Je}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-OQNGSDIH.js"}],[2073,{"./chunk-S6VGOPUY.js":2077,"@metamask/controller-utils":2011},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-S6VGOPUY.js"),n=e("@metamask/controller-utils"),a=r.createModuleLogger.call(void 0,r.projectLogger,"nonce");s.getNextNonce=async function(e,t){const{customNonceValue:s,txParams:{from:r,nonce:i}}=e,o=s?n.toHex.call(void 0,s):void 0;if(o)return a("Using custom nonce",o),[o,void 0];if(i)return a("Using existing nonce",i),[i,void 0];const c=await t(r),l=n.toHex.call(void 0,c.nextNonce),u=c.releaseLock.bind(c);return a("Using nonce from nonce tracker",l,c.nonceDetails),[l,u]},s.getAndFormatTransactionsForNonceTracker=function(e,t,s,r){return r.filter((({chainId:r,isTransfer:n,isUserOperation:a,status:i,txParams:{from:o}})=>!n&&!a&&r===e&&i===s&&o.toLowerCase()===t.toLowerCase())).map((({status:e,txParams:{from:t,gas:s,value:r,nonce:n}})=>({status:e,history:[{}],txParams:{from:t??"",gas:s??"",value:r??"",nonce:n??""}})))}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-PRUNMTRD.js"}],[2074,{"./chunk-EQT25RSP.js":2066,"./chunk-S6VGOPUY.js":2077,"./chunk-Z4BLTVTB.js":2089,"@metamask/eth-query":1363,"async-mutex":3410},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y,S,w,b,T,E,P,j=e("./chunk-EQT25RSP.js"),I=e("./chunk-S6VGOPUY.js"),C=e("./chunk-Z4BLTVTB.js"),A=e("@metamask/eth-query"),x=(r=A)&&r.__esModule?r:{default:r},R=e("async-mutex");n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,k=new WeakMap,y=new WeakSet,S=function(e){const t=C.__privateGet.call(void 0,this,v).get(e);t&&(t.pendingTransactionTracker.stop(),C.__privateGet.call(void 0,this,h).call(this,t.pendingTransactionTracker),t.incomingTransactionHelper.stop(),C.__privateGet.call(void 0,this,d).call(this,t.incomingTransactionHelper),C.__privateGet.call(void 0,this,v).delete(e))},w=new WeakSet,b=function(e){if(C.__privateGet.call(void 0,this,v).get(e))return;const{provider:t,blockTracker:s,configuration:{chainId:r}}=C.__privateGet.call(void 0,this,l).call(this,e);let n=C.__privateGet.call(void 0,this,_).get(r);n||(n=new(0,j.EtherscanRemoteTransactionSource)({includeTokenTransfers:C.__privateGet.call(void 0,this,o).includeTokenTransfers}),C.__privateGet.call(void 0,this,_).set(r,n));const a=C.__privateGet.call(void 0,this,m).call(this,{provider:t,blockTracker:s,chainId:r}),i=C.__privateGet.call(void 0,this,p).call(this,{blockTracker:s,etherscanRemoteTransactionSource:n,chainId:r}),c=C.__privateGet.call(void 0,this,f).call(this,{provider:t,blockTracker:s,chainId:r});C.__privateGet.call(void 0,this,v).set(e,{nonceTracker:a,incomingTransactionHelper:i,pendingTransactionTracker:c})},T=new WeakMap,E=new WeakSet,P=function({networkClientId:e,chainId:t}={}){let s;if(e)try{s=C.__privateGet.call(void 0,this,l).call(this,e)}catch(e){I.incomingTransactionsLogger.call(void 0,"failed to get network client by networkClientId")}if(!s&&t)try{const e=C.__privateGet.call(void 0,this,c).call(this,t);s=C.__privateGet.call(void 0,this,l).call(this,e)}catch(e){I.incomingTransactionsLogger.call(void 0,"failed to get network client by chainId")}return s},s.MultichainTrackingHelper=class{constructor({isMultichainEnabled:e,provider:t,nonceTracker:s,incomingTransactionOptions:r,findNetworkClientIdByChainId:P,getNetworkClientById:j,getNetworkClientRegistry:I,removeIncomingTransactionHelperListeners:A,removePendingTransactionTrackerListeners:x,createNonceTracker:R,createIncomingTransactionHelper:N,createPendingTransactionTracker:M,onNetworkStateChange:O}){C.__privateAdd.call(void 0,this,y),C.__privateAdd.call(void 0,this,w),C.__privateAdd.call(void 0,this,E),C.__privateAdd.call(void 0,this,n,void 0),C.__privateAdd.call(void 0,this,a,void 0),C.__privateAdd.call(void 0,this,i,void 0),C.__privateAdd.call(void 0,this,o,void 0),C.__privateAdd.call(void 0,this,c,void 0),C.__privateAdd.call(void 0,this,l,void 0),C.__privateAdd.call(void 0,this,u,void 0),C.__privateAdd.call(void 0,this,d,void 0),C.__privateAdd.call(void 0,this,h,void 0),C.__privateAdd.call(void 0,this,m,void 0),C.__privateAdd.call(void 0,this,p,void 0),C.__privateAdd.call(void 0,this,f,void 0),C.__privateAdd.call(void 0,this,g,new Map),C.__privateAdd.call(void 0,this,v,new Map),C.__privateAdd.call(void 0,this,_,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of C.__privateGet.call(void 0,this,v))e.pendingTransactionTracker.startIfPendingTransactions()},C.__privateAdd.call(void 0,this,k,(e=>{C.__privateGet.call(void 0,this,T).call(this,e);const t=Object.keys(e),s=Array.from(C.__privateGet.call(void 0,this,v).keys());s.filter((e=>!t.includes(e))).forEach((e=>{C.__privateMethod.call(void 0,this,y,S).call(this,e)}));t.filter((e=>!s.includes(e))).forEach((e=>{C.__privateMethod.call(void 0,this,w,b).call(this,e)}))})),C.__privateAdd.call(void 0,this,T,(e=>{const t=new Set;Object.values(e).forEach((e=>t.add(e.configuration.chainId)));Array.from(C.__privateGet.call(void 0,this,_).keys()).filter((e=>!t.has(e))).forEach((e=>{C.__privateGet.call(void 0,this,_).delete(e)}))})),C.__privateSet.call(void 0,this,n,e),C.__privateSet.call(void 0,this,a,t),C.__privateSet.call(void 0,this,i,s),C.__privateSet.call(void 0,this,o,r),C.__privateSet.call(void 0,this,c,P),C.__privateSet.call(void 0,this,l,j),C.__privateSet.call(void 0,this,u,I),C.__privateSet.call(void 0,this,d,A),C.__privateSet.call(void 0,this,h,x),C.__privateSet.call(void 0,this,m,R),C.__privateSet.call(void 0,this,p,N),C.__privateSet.call(void 0,this,f,M),O(((e,t)=>{if(C.__privateGet.call(void 0,this,n)){const e=C.__privateGet.call(void 0,this,u).call(this);t.forEach((({op:t,path:s})=>{if("remove"===t&&"networkConfigurations"===s[0]){const t=s[1];delete e[t]}})),C.__privateGet.call(void 0,this,k).call(this,e)}}))}initialize(){if(!C.__privateGet.call(void 0,this,n))return;const e=C.__privateGet.call(void 0,this,u).call(this);C.__privateGet.call(void 0,this,k).call(this,e)}has(e){return C.__privateGet.call(void 0,this,v).has(e)}getEthQuery({networkClientId:e,chainId:t}={}){return new(0,x.default)(this.getProvider({networkClientId:e,chainId:t}))}getProvider({networkClientId:e,chainId:t}={}){if(!C.__privateGet.call(void 0,this,n))return C.__privateGet.call(void 0,this,a);const s=C.__privateMethod.call(void 0,this,E,P).call(this,{networkClientId:e,chainId:t});return s?.provider||C.__privateGet.call(void 0,this,a)}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let s=C.__privateGet.call(void 0,this,g).get(e);s||(s=new Map,C.__privateGet.call(void 0,this,g).set(e,s));let r=s.get(t);return r||(r=new(0,R.Mutex),s.set(t,r)),await r.acquire()}async getNonceLock(e,t){let s,r=C.__privateGet.call(void 0,this,i);if(t&&C.__privateGet.call(void 0,this,n)){const n=C.__privateGet.call(void 0,this,l).call(this,t);s=await this.acquireNonceLockForChainIdKey({chainId:n.configuration.chainId,key:e});const a=C.__privateGet.call(void 0,this,v).get(t);if(!a)throw new Error("missing nonceTracker for networkClientId");r=a.nonceTracker}try{const t=await r.getNonceLock(e);return{...t,releaseLock:()=>{t.releaseLock(),s?.()}}}catch(e){throw s?.(),e}}startIncomingTransactionPolling(e=[]){e.forEach((e=>{C.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.start()}))}stopIncomingTransactionPolling(e=[]){e.forEach((e=>{C.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.stop()}))}stopAllIncomingTransactionPolling(){for(const[,e]of C.__privateGet.call(void 0,this,v))e.incomingTransactionHelper.stop()}async updateIncomingTransactions(e=[]){(await Promise.allSettled(e.map((async e=>await(C.__privateGet.call(void 0,this,v).get(e)?.incomingTransactionHelper.update()))))).filter((e=>"rejected"===e.status)).forEach((e=>{I.incomingTransactionsLogger.call(void 0,"failed to update incoming transactions",e.reason)}))}stopAllTracking(){for(const[e]of C.__privateGet.call(void 0,this,v))C.__privateMethod.call(void 0,this,y,S).call(this,e)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-PUESYN62.js"}],[2075,{"./chunk-RAOYRJ25.js":2076,"./chunk-S6VGOPUY.js":2077,"./chunk-YXSCBWTU.js":2088,"./chunk-Z4BLTVTB.js":2089,"@metamask/controller-utils":2011,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m=e("./chunk-YXSCBWTU.js"),p=e("./chunk-S6VGOPUY.js"),f=e("./chunk-RAOYRJ25.js"),g=e("./chunk-Z4BLTVTB.js"),v=e("@metamask/controller-utils"),_=e("@metamask/utils").createModuleLogger.call(void 0,p.projectLogger,"linea-gas-fee-flow"),k=[v.ChainId["linea-mainnet"],v.ChainId["linea-goerli"],v.ChainId["linea-sepolia"]],y={low:1,medium:1.35,high:1.7},S={low:1,medium:1.05,high:1.1};r=new WeakSet,n=async function(e){const{ethQuery:t,transactionMeta:s}=e,r=await g.__privateMethod.call(void 0,this,a,i).call(this,s,t);_("Received Linea response",r);const n=g.__privateMethod.call(void 0,this,o,c).call(this,r.baseFeePerGas,y);_("Generated base fees",g.__privateMethod.call(void 0,this,d,h).call(this,n));const m=g.__privateMethod.call(void 0,this,o,c).call(this,r.priorityFeePerGas,S);_("Generated priority fees",g.__privateMethod.call(void 0,this,d,h).call(this,m));const p=g.__privateMethod.call(void 0,this,l,u).call(this,n,m);_("Generated max fees",g.__privateMethod.call(void 0,this,d,h).call(this,p));return{estimates:Object.values(f.GasFeeEstimateLevel).reduce(((e,t)=>({...e,[t]:{maxFeePerGas:v.toHex.call(void 0,p[t]),maxPriorityFeePerGas:v.toHex.call(void 0,m[t])}})),{type:"fee-market"})}},a=new WeakSet,i=function(e,t){return v.query.call(void 0,t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data,gasPrice:"0x100000000"}])},o=new WeakSet,c=function(e,t){const s=v.hexToBN.call(void 0,e);return{low:s.muln(t.low),medium:s.muln(t.medium),high:s.muln(t.high)}},l=new WeakSet,u=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},d=new WeakSet,h=function(e){return Object.values(f.GasFeeEstimateLevel).map((t=>e[t].toString(10)))},s.LineaGasFeeFlow=class{constructor(){g.__privateAdd.call(void 0,this,r),g.__privateAdd.call(void 0,this,a),g.__privateAdd.call(void 0,this,o),g.__privateAdd.call(void 0,this,l),g.__privateAdd.call(void 0,this,d)}matchesTransaction(e){return k.includes(e.chainId)}async getGasFees(e){try{return await g.__privateMethod.call(void 0,this,r,n).call(this,e)}catch(t){return _("Using default flow as fallback due to error",t),(new(0,m.DefaultGasFeeFlow)).getGasFees(e)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-Q6Q44V4W.js"}],[2076,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e=>(e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.dropped="dropped",e.failed="failed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved",e))(r||{}),n=(e=>(e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device",e))(n||{}),a=(e=>(e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.incoming="incoming",e.personalSign="personal_sign",e.retry="retry",e.simpleSend="simpleSend",e.signTypedData="eth_signTypedData",e.smart="smart",e.swap="swap",e.swapAndSend="swapAndSend",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance",e))(a||{}),i=(e=>(e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e))(i||{}),o=(e=>(e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium",e))(o||{}),c=(e=>(e.Low="low",e.Medium="medium",e.High="high",e))(c||{}),l=(e=>(e.FeeMarket="fee-market",e.Legacy="legacy",e.GasPrice="eth_gasPrice",e))(l||{}),u=(e=>(e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155",e))(u||{}),d=(e=>(e.ChainNotSupported="chain-not-supported",e.Disabled="disabled",e.InvalidResponse="invalid-response",e.Reverted="reverted",e))(d||{});s.TransactionStatus=r,s.WalletDevice=n,s.TransactionType=a,s.TransactionEnvelopeType=i,s.UserFeeLevel=o,s.GasFeeEstimateLevel=c,s.GasFeeEstimateType=l,s.SimulationTokenStandard=u,s.SimulationErrorCode=d}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-RAOYRJ25.js"}],[2077,{"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils"),n=r.createProjectLogger.call(void 0,"transaction-controller"),a=r.createModuleLogger.call(void 0,n,"incoming-transactions");s.createModuleLogger=r.createModuleLogger,s.projectLogger=n,s.incomingTransactionsLogger=a}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-S6VGOPUY.js"}],[2078,{"@ethersproject/abi":483,"@metamask/controller-utils":2011,"@metamask/metamask-eth-abis":1654},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@ethersproject/abi"),n=e("@metamask/controller-utils"),a=e("@metamask/metamask-eth-abis"),i=new(0,r.Interface)(a.abiERC20),o=new(0,r.Interface)(a.abiERC721),c=new(0,r.Interface)(a.abiERC1155),l=new(0,r.Interface)(a.abiFiatTokenV2);s.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",s.determineTransactionType=async function(e,t){const{data:s,to:r}=e;if(s&&!r)return{type:"contractDeployment",getCodeResponse:void 0};const{contractCode:a,isContractAddress:u}=await async function(e,t){let s;try{s=await n.query.call(void 0,e,"getCode",[t])}catch(e){s=null}const r=!!s&&("0x"!==s&&"0x0"!==s);return{contractCode:s,isContractAddress:r}}(t,r);if(!u)return{type:"simpleSend",getCodeResponse:a};const d=0!==Number(e.value??"0"),h={type:"contractInteraction",getCodeResponse:a};if(!s||d)return h;const m=function(e){if(!e)return;try{return i.parseTransaction({data:e})}catch{}try{return o.parseTransaction({data:e})}catch{}try{return c.parseTransaction({data:e})}catch{}try{return l.parseTransaction({data:e})}catch{}return}(s)?.name;if(!m)return h;const p=["approve","setapprovalforall","transfer","transferfrom","safetransferfrom","increaseAllowance"].find((e=>e.toLowerCase()===m.toLowerCase()));return p?{type:p,getCodeResponse:a}:h}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-SD6CWFDF.js"}],[2079,{"fast-json-patch":3848,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("fast-json-patch"),a=(r=n)&&r.__esModule?r:{default:r},i=e("lodash"),o=["/status","/txParams/gasPrice","/txParams/gas","/estimatedBaseFee","/blockTimestamp"];function c(e,t,s){const r=a.default.compare(e,t);return r[0]&&(s&&(r[0].note=s),r[0].timestamp=Date.now()),r}function l(e){return i.cloneDeep.call(void 0,e).reduce(((e,t)=>a.default.applyPatch(e,t).newDocument))}function u(e){const t={...e};return delete t.history,i.cloneDeep.call(void 0,t)}s.MAX_TRANSACTION_HISTORY_LENGTH=100,s.DISPLAYED_TRANSACTION_HISTORY_PATHS=o,s.addInitialHistorySnapshot=function(e){const t=u(e);return i.merge.call(void 0,{},e,{history:[t]})},s.updateTransactionHistory=function(e,t){if(!e.history)return e;const s=u(e),r=c(l(e.history),s,t);if(0===r.length)return e;let n=[...e.history,r];return n.length>100&&(n=function(e){const t=e[0],s=e.slice(1),r=s.findIndex((e=>!e.some((({path:e})=>o.includes(e)))));if(-1===r)return e;const n=r===s.length-1?r-1:r+1,a=Math.min(r,n),i=s[a],u=s[a+1],d=l([t,...s.slice(0,a)]),h=l([d,i,u]),m=c(d,h,`${String(i[0].note)}, ${String(u[0].note)}`);return s.splice(a,2,m),[t,...s]}(n)),i.merge.call(void 0,{},e,{history:n})}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-TIE3CPF7.js"}],[208,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:73,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=73;const s=function(e){const t=(null==e?void 0:e.PreferencesController)||{};return{...e,PreferencesController:{...t,knownMethodData:{}}}}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/073.js"}],[2080,{"./chunk-Z4BLTVTB.js":2089,"@metamask/controller-utils":2011},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i=e("./chunk-Z4BLTVTB.js"),o=e("@metamask/controller-utils"),c=1e15;r=new WeakMap,n=new WeakSet,a=function(e,t){const s=Math.ceil(e/t);return o.toHex.call(void 0,s)},s.TestGasFeeFlow=class{constructor(){i.__privateAdd.call(void 0,this,n),i.__privateAdd.call(void 0,this,r,1)}matchesTransaction(e){return!0}async getGasFees(e){const{transactionMeta:t}=e,{txParams:s}=t,{gas:o}=s;if(!o)throw new Error("Cannot estimate fee without gas value");const l=parseInt(o,16),u=.5*c,d=(i.__privateGet.call(void 0,this,r)+1)*c,h=i.__privateGet.call(void 0,this,r)*c,m=d-u,p=h-u,f=d+u,g=h+u;return i.__privateSet.call(void 0,this,r,i.__privateGet.call(void 0,this,r)+1),{estimates:{type:"fee-market",low:{maxFeePerGas:i.__privateMethod.call(void 0,this,n,a).call(this,m,l),maxPriorityFeePerGas:i.__privateMethod.call(void 0,this,n,a).call(this,p,l)},medium:{maxFeePerGas:i.__privateMethod.call(void 0,this,n,a).call(this,d,l),maxPriorityFeePerGas:i.__privateMethod.call(void 0,this,n,a).call(this,h,l)},high:{maxFeePerGas:i.__privateMethod.call(void 0,this,n,a).call(this,f,l),maxPriorityFeePerGas:i.__privateMethod.call(void 0,this,n,a).call(this,g,l)}}}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-TJMQEH57.js"}],[2081,{"@metamask/controller-utils":2011,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/controller-utils"),n=e("@metamask/utils"),a={data:e=>n.add0x.call(void 0,c(e)),from:e=>n.add0x.call(void 0,e).toLowerCase(),gas:e=>n.add0x.call(void 0,e),gasLimit:e=>n.add0x.call(void 0,e),gasPrice:e=>n.add0x.call(void 0,e),nonce:e=>n.add0x.call(void 0,e),to:e=>n.add0x.call(void 0,e).toLowerCase(),value:e=>n.add0x.call(void 0,e),maxFeePerGas:e=>n.add0x.call(void 0,e),maxPriorityFeePerGas:e=>n.add0x.call(void 0,e),estimatedBaseFee:e=>n.add0x.call(void 0,e),type:e=>n.add0x.call(void 0,e)};var i=(e,t)=>n.add0x.call(void 0,`${parseInt(""+e*t,10).toString(16)}`);function o(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function c(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",s=t?e.slice(2):e;return t+(s.length%2==0?s:`0${s}`)}s.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error",s.normalizeTransactionParams=function(e){const t={from:""};for(const s of n.getKnownPropertyNames.call(void 0,a))e[s]&&(t[s]=a[s](e[s]));return t.value||(t.value="0x0"),t},s.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")},s.validateGasValues=e=>{Object.keys(e).forEach((t=>{const s=e[t];if("string"!=typeof s||!n.isStrictHexString.call(void 0,s))throw new TypeError(`expected hex string for ${t} but received: ${s}`)}))},s.isFeeMarketEIP1559Values=e=>void 0!==e?.maxFeePerGas||void 0!==e?.maxPriorityFeePerGas,s.isGasPriceValue=e=>void 0!==e?.gasPrice,s.getIncreasedPriceHex=i,s.getIncreasedPriceFromExisting=(e,t)=>i(r.convertHexToDecimal.call(void 0,e),t),s.validateMinimumIncrease=function(e,t){const s=r.convertHexToDecimal.call(void 0,e),n=r.convertHexToDecimal.call(void 0,t);if(s>=n)return e;throw new Error(`The proposed value: ${s} should meet or exceed the minimum value: ${n}`)},s.validateIfTransactionUnapproved=function(e,t){if("unapproved"!==e?.status)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},s.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:o(e.value)?e.value:void 0}},s.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?n.add0x.call(void 0,e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},s.padHexToEvenLength=c}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UGFBA4GV.js"}],[2082,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144",ZORA:"0x76adf1",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f"},n="etherscan.io",a="api",i={[r.GOERLI]:{domain:n,subdomain:`${a}-goerli`},[r.MAINNET]:{domain:n,subdomain:a},[r.SEPOLIA]:{domain:n,subdomain:`${a}-sepolia`},[r.LINEA_GOERLI]:{domain:"lineascan.build",subdomain:`${a}-goerli`},[r.LINEA_SEPOLIA]:{domain:"lineascan.build",subdomain:`${a}-sepolia`},[r.LINEA_MAINNET]:{domain:"lineascan.build",subdomain:a},[r.BSC]:{domain:"bscscan.com",subdomain:a},[r.BSC_TESTNET]:{domain:"bscscan.com",subdomain:`${a}-testnet`},[r.OPTIMISM]:{domain:n,subdomain:`${a}-optimistic`},[r.OPTIMISM_SEPOLIA]:{domain:n,subdomain:`${a}-sepolia-optimistic`},[r.POLYGON]:{domain:"polygonscan.com",subdomain:a},[r.POLYGON_TESTNET]:{domain:"polygonscan.com",subdomain:`${a}-mumbai`},[r.AVALANCHE]:{domain:"snowtrace.io",subdomain:a},[r.AVALANCHE_TESTNET]:{domain:"snowtrace.io",subdomain:`${a}-testnet`},[r.FANTOM]:{domain:"ftmscan.com",subdomain:a},[r.FANTOM_TESTNET]:{domain:"ftmscan.com",subdomain:`${a}-testnet`},[r.MOONBEAM]:{domain:"moonscan.io",subdomain:`${a}-moonbeam`},[r.MOONBEAM_TESTNET]:{domain:"moonscan.io",subdomain:`${a}-moonbase`},[r.MOONRIVER]:{domain:"moonscan.io",subdomain:`${a}-moonriver`},[r.GNOSIS]:{domain:"gnosisscan.io",subdomain:`${a}-gnosis`}},o={[r.OPTIMISM]:1,[r.OPTIMISM_SEPOLIA]:1};s.CHAIN_IDS=r,s.DEFAULT_ETHERSCAN_DOMAIN=n,s.DEFAULT_ETHERSCAN_SUBDOMAIN_PREFIX=a,s.ETHERSCAN_SUPPORTED_NETWORKS=i,s.GAS_BUFFER_CHAIN_OVERRIDES=o,s.ABI_SIMULATION_ERC20_WRAPPED=[{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}],s.ABI_SIMULATION_ERC721_LEGACY=[{anonymous:!1,inputs:[{indexed:!1,name:"_from",type:"address"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UGN7PBON.js"}],[2083,{"./chunk-S6VGOPUY.js":2077,"./chunk-UGFBA4GV.js":2081,"./chunk-UGN7PBON.js":2082,"@metamask/controller-utils":2011,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UGFBA4GV.js"),n=e("./chunk-UGN7PBON.js"),a=e("./chunk-S6VGOPUY.js"),i=e("@metamask/controller-utils"),o=e("lodash"),c=a.createModuleLogger.call(void 0,a.projectLogger,"swaps"),l=5e3,u="0x0000000000000000000000000000000000000000",d={name:"Ether",address:u,decimals:18},h={name:"Binance Coin",address:u,decimals:18},m={name:"Matic",address:u,decimals:18},p={name:"Avalanche",address:u,decimals:18},f={name:"Test Ether",address:u,decimals:18},g={name:"Ether",address:u,decimals:18},v={...d},_={...d},k={...d},y={[n.CHAIN_IDS.MAINNET]:d,"0x539":f,[n.CHAIN_IDS.BSC]:h,[n.CHAIN_IDS.POLYGON]:m,[n.CHAIN_IDS.GOERLI]:g,[n.CHAIN_IDS.AVALANCHE]:p,[n.CHAIN_IDS.OPTIMISM]:_,[n.CHAIN_IDS.ARBITRUM]:v,[n.CHAIN_IDS.ZKSYNC_ERA]:k},S=["swap","swapAndSend","swapApproval"];function w(e,t){return!(!e||!t)&&e===y[t]?.address}function b(e){return new Promise((t=>setTimeout(t,e)))}s.UPDATE_POST_TX_BALANCE_TIMEOUT=l,s.UPDATE_POST_TX_BALANCE_ATTEMPTS=6,s.DEFAULT_TOKEN_ADDRESS=u,s.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=y,s.SWAP_TRANSACTION_TYPES=S,s.updateSwapsTransaction=function(e,t,s,{isSwapsDisabled:n,cancelTransaction:a,messenger:i}){if(n||!S.includes(t))return e;if("swap"===t&&!1===s?.hasApproveTx&&e.simulationFails)throw a(e.id),new Error("Simulation failed");const c=s?.meta;if(!c)return e;let l=e;return"swapApproval"===t&&(l=function(e,{type:t,sourceTokenSymbol:s}){r.validateIfTransactionUnapproved.call(void 0,e,"updateSwapApprovalTransaction");let n={type:t,sourceTokenSymbol:s};return n=o.pickBy.call(void 0,{type:t,sourceTokenSymbol:s}),o.merge.call(void 0,{},e,n)}(e,c),i.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:l})),"swapAndSend"===t&&(l=function(e,{approvalTxId:t,destinationTokenAddress:s,destinationTokenAmount:n,destinationTokenDecimals:a,destinationTokenSymbol:i,estimatedBaseFee:c,sourceTokenAddress:l,sourceTokenAmount:u,sourceTokenDecimals:d,sourceTokenSymbol:h,swapAndSendRecipient:m,swapMetaData:p,swapTokenValue:f,type:g}){r.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let v={approvalTxId:t,destinationTokenAddress:s,destinationTokenAmount:n,destinationTokenDecimals:a,destinationTokenSymbol:i,estimatedBaseFee:c,sourceTokenAddress:l,sourceTokenAmount:u,sourceTokenDecimals:d,sourceTokenSymbol:h,swapAndSendRecipient:m,swapMetaData:p,swapTokenValue:f,type:g};return v=o.pickBy.call(void 0,v),o.merge.call(void 0,{},e,v)}(e,c),i.publish("TransactionController:transactionNewSwapAndSend",{transactionMeta:l})),"swap"===t&&(l=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:s,type:n,destinationTokenDecimals:a,destinationTokenAddress:i,swapMetaData:c,swapTokenValue:l,estimatedBaseFee:u,approvalTxId:d}){r.validateIfTransactionUnapproved.call(void 0,e,"updateSwapTransaction");let h={sourceTokenSymbol:t,destinationTokenSymbol:s,type:n,destinationTokenDecimals:a,destinationTokenAddress:i,swapMetaData:c,swapTokenValue:l,estimatedBaseFee:u,approvalTxId:d};return h=o.pickBy.call(void 0,h),o.merge.call(void 0,{},e,h)}(e,c),i.publish("TransactionController:transactionNewSwap",{transactionMeta:l})),l},s.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:s,updateTransaction:r}){c("Updating post transaction balance",e.id);const n=e.id;let a,o;for(let r=0;r<6;r++){c("Querying balance",{attempt:r});const u=await i.query.call(void 0,t,"getBalance",[e.txParams.from]);a={...s(n)??{}},o=a.approvalTxId?s(a.approvalTxId):void 0,a.postTxBalance=u.toString(16);const d=w(e.destinationTokenAddress,e.chainId);if(!d||e.preTxBalance!==a.postTxBalance){c("Finishing post balance update",{isDefaultTokenAddress:d,preTxBalance:e.preTxBalance,postTxBalance:a.postTxBalance});break}c("Waiting for balance to update",{delay:l}),await b(l)}return r(a,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),c("Completed post balance update",a?.postTxBalance),{updatedTransactionMeta:a,approvalTransactionMeta:o}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-UT4M4XI3.js"}],[2084,{"./chunk-S6VGOPUY.js":2077,"./chunk-UGN7PBON.js":2082,"@metamask/controller-utils":2011,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UGN7PBON.js"),n=e("./chunk-S6VGOPUY.js"),a=e("@metamask/controller-utils"),i=e("@metamask/utils"),o=i.createModuleLogger.call(void 0,n.projectLogger,"gas"),c="0x5208",l=1.5;async function u(e,t){const s={...e},{data:r,value:n}=s,{gasLimit:c,number:l}=await async function(e){return await a.query.call(void 0,e,"getBlockByNumber",["latest",!1])}(t),d=a.hexToBN.call(void 0,c);s.data=r?i.add0x.call(void 0,r):r,s.gas=a.BNToHex.call(void 0,a.fractionBN.call(void 0,d,19,20)),s.value=n||"0x0";let h,m=s.gas;try{m=await a.query.call(void 0,t,"estimateGas",[s])}catch(e){h={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:l,blockGasLimit:c}},o("Estimation failed",{...h,fallback:u})}return{blockGasLimit:c,estimatedGas:m,simulationFails:h}}function d(e,t,s){const r=a.hexToBN.call(void 0,e),n=a.hexToBN.call(void 0,t).muln(.9),c=r.muln(s);if(r.gt(n)){const t=i.add0x.call(void 0,e);return o("Using estimated value",t),t}if(c.lt(n)){const e=i.add0x.call(void 0,a.BNToHex.call(void 0,c));return o("Using padded estimate",e,s),e}const l=i.add0x.call(void 0,a.BNToHex.call(void 0,n));return o("Using 90% of block gas limit",l),l}s.log=o,s.FIXED_GAS=c,s.DEFAULT_GAS_MULTIPLIER=l,s.updateGas=async function(e){const{txMeta:t}=e,s={...t.txParams},[n,i]=await async function(e){const{isCustomNetwork:t,chainId:s,txMeta:n}=e;if(n.txParams.gas)return o("Using value from request",n.txParams.gas),[n.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:s}){const{txParams:{to:r,data:n}}=t;if(s||!r||n)return!1;const i=await async function(e,t){return await a.query.call(void 0,e,"getCode",[t])}(e,r);return!i||"0x"===i}(e))return o("Using fixed value",c),[c];const{blockGasLimit:i,estimatedGas:h,simulationFails:m}=await u(n.txParams,e.ethQuery);if(t)return o("Using original estimate as custom network"),[h,m];const p=r.GAS_BUFFER_CHAIN_OVERRIDES[s]??l;return[d(h,i,p),m]}(e);t.txParams.gas=n,t.simulationFails=i,s.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates||(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},s.estimateGas=u,s.addGasBuffer=d}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-V72C4MCR.js"}],[2085,{"./chunk-UGFBA4GV.js":2081,"@ethersproject/abi":483,"@metamask/controller-utils":2011,"@metamask/metamask-eth-abis":1654,"@metamask/rpc-errors":1884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UGFBA4GV.js"),n=e("@ethersproject/abi"),a=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),o=e("@metamask/rpc-errors");function c(e,t){switch(t){case"maxFeePerGas":case"maxPriorityFeePerGas":if(e.type&&"0x2"!==e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "0x2"`);break;default:if(e.type&&"0x2"===e.type)throw o.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${e.type}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function l(e,t,s){if(void 0!==e[s])throw o.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${s}, these cannot be mixed`)}function u(e,t){if("string"!=typeof e[t])throw o.rpcErrors.invalidParams(`Invalid transaction params: ${t} is not a string. got: (${e[t]})`)}s.validateTransactionOrigin=async function(e,t,s,r){if(r!==a.ORIGIN_METAMASK){if(!e.includes(s))throw o.providerErrors.unauthorized({data:{origin:r}})}else if(s!==t)throw o.rpcErrors.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:r,fromAddress:s,selectedAddress:t}})},s.validateTxParams=function(e,t=!0){!function(e,t){if(r.isEIP1559Transaction.call(void 0,e)&&!t)throw o.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!a.isValidHexAddress.call(void 0,e))throw o.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||void 0===e.to){if(!e.data)throw o.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(void 0!==e.to&&!a.isValidHexAddress.call(void 0,e.to))throw o.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(void 0!==e){if(e.includes("-"))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw o.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw o.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new(0,n.Interface)(i.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw o.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e){if(void 0!==e&&"number"!=typeof e&&"string"!=typeof e)throw o.rpcErrors.invalidParams(`Invalid transaction params: chainId is not a Number or hex string. got: (${e})`)}(e.chainId),function(e){e.gasPrice&&(c(e,"gasPrice"),l(e,"gasPrice","maxFeePerGas"),l(e,"gasPrice","maxPriorityFeePerGas"),u(e,"gasPrice"));e.maxFeePerGas&&(c(e,"maxFeePerGas"),l(e,"maxFeePerGas","gasPrice"),u(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(c(e,"maxPriorityFeePerGas"),l(e,"maxPriorityFeePerGas","gasPrice"),u(e,"maxPriorityFeePerGas"))}(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-VH47Q6TS.js"}],[2086,{"./chunk-UGN7PBON.js":2082,"./chunk-YVCX6Z75.js":2087},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-YVCX6Z75.js"),n=e("./chunk-UGN7PBON.js"),a=[n.CHAIN_IDS.SCROLL,n.CHAIN_IDS.SCROLL_SEPOLIA],i=class extends r.OracleLayer1GasFeeFlow{constructor(){super("0x5300000000000000000000000000000000000002",!0)}matchesTransaction(e){return a.includes(e.chainId)}};s.ScrollLayer1GasFeeFlow=i}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-WR5F34OW.js"}],[2087,{"./chunk-S6VGOPUY.js":2077,"./chunk-Z4BLTVTB.js":2089,"@ethereumjs/common":441,"@ethereumjs/tx":2095,"@ethersproject/contracts":506,"@ethersproject/providers":544,"@metamask/utils":2739,buffer:3520,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m=e("./chunk-S6VGOPUY.js"),p=e("./chunk-Z4BLTVTB.js"),f=e("@ethereumjs/common"),g=e("@ethereumjs/tx"),v=e("@ethersproject/contracts"),_=e("@ethersproject/providers"),k=e("@metamask/utils"),y=e("lodash"),S=k.createModuleLogger.call(void 0,m.projectLogger,"oracle-layer1-gas-fee-flow"),w=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];r=new WeakMap,n=new WeakMap,a=new WeakSet,i=async function(e){const{provider:t,transactionMeta:s}=e,a=new(0,v.Contract)(p.__privateGet.call(void 0,this,r),w,new(0,_.Web3Provider)(t)),i=p.__privateMethod.call(void 0,this,o,c).call(this,s,p.__privateGet.call(void 0,this,n)).serialize(),l=await a.getL1Fee(i);if(void 0===l)throw new Error("No value returned from oracle contract");return{layer1Fee:l.toHexString()}},o=new WeakSet,c=function(e,s){const r=p.__privateMethod.call(void 0,this,l,u).call(this,e),n=p.__privateMethod.call(void 0,this,d,h).call(this,e);let a=g.TransactionFactory.fromTxData(r,{common:n});if(s){const e=t.from("abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789","hex");a=a.sign(e)}return a},l=new WeakSet,u=function(e){return{...y.omit.call(void 0,e.txParams,"gas"),gasLimit:e.txParams.gas}},d=new WeakSet,h=function(e){const t=Number(e.chainId);return f.Common.custom({chainId:t,defaultHardfork:f.Hardfork.London})},s.OracleLayer1GasFeeFlow=class{constructor(e,t){p.__privateAdd.call(void 0,this,a),p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,l),p.__privateAdd.call(void 0,this,d),p.__privateAdd.call(void 0,this,r,void 0),p.__privateAdd.call(void 0,this,n,void 0),p.__privateSet.call(void 0,this,r,e),p.__privateSet.call(void 0,this,n,t??!1)}async getLayer1Fee(e){try{return await p.__privateMethod.call(void 0,this,a,i).call(this,e)}catch(e){throw S("Failed to get oracle layer 1 gas fee",e),new Error("Failed to get oracle layer 1 gas fee")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-YVCX6Z75.js"}],[2088,{"./chunk-3ZRHCVVS.js":2060,"./chunk-RAOYRJ25.js":2076,"./chunk-S6VGOPUY.js":2077,"./chunk-Z4BLTVTB.js":2089,"@metamask/gas-fee-controller":2058,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m=e("./chunk-3ZRHCVVS.js"),p=e("./chunk-S6VGOPUY.js"),f=e("./chunk-RAOYRJ25.js"),g=e("./chunk-Z4BLTVTB.js"),v=e("@metamask/gas-fee-controller"),_=e("@metamask/utils").createModuleLogger.call(void 0,p.projectLogger,"default-gas-fee-flow");r=new WeakSet,n=function(e){return{type:"fee-market",...Object.values(f.GasFeeEstimateLevel).reduce(((t,s)=>({...t,[s]:g.__privateMethod.call(void 0,this,l,u).call(this,e,s)})),{})}},a=new WeakSet,i=function(e){return{type:"legacy",...Object.values(f.GasFeeEstimateLevel).reduce(((t,s)=>({...t,[s]:g.__privateMethod.call(void 0,this,d,h).call(this,e,s)})),{})}},o=new WeakSet,c=function(e){return{type:"eth_gasPrice",gasPrice:m.gweiDecimalToWeiHex.call(void 0,e.gasPrice)}},l=new WeakSet,u=function(e,t){return{maxFeePerGas:m.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:m.gweiDecimalToWeiHex.call(void 0,e[t].suggestedMaxPriorityFeePerGas)}},d=new WeakSet,h=function(e,t){return m.gweiDecimalToWeiHex.call(void 0,e[t])},s.DefaultGasFeeFlow=class{constructor(){g.__privateAdd.call(void 0,this,r),g.__privateAdd.call(void 0,this,a),g.__privateAdd.call(void 0,this,o),g.__privateAdd.call(void 0,this,l),g.__privateAdd.call(void 0,this,d)}matchesTransaction(e){return!0}async getGasFees(e){const{gasFeeControllerData:t}=e,{gasEstimateType:s,gasFeeEstimates:l}=t;let u;switch(s){case v.GAS_ESTIMATE_TYPES.FEE_MARKET:_("Using fee market estimates",l),u=g.__privateMethod.call(void 0,this,r,n).call(this,l);break;case v.GAS_ESTIMATE_TYPES.LEGACY:_("Using legacy estimates",l),u=g.__privateMethod.call(void 0,this,a,i).call(this,l);break;case v.GAS_ESTIMATE_TYPES.ETH_GASPRICE:_("Using eth_gasPrice estimates",l),u=g.__privateMethod.call(void 0,this,o,c).call(this,l);break;default:throw new Error(`Unsupported gas estimate type: ${s}`)}return{estimates:u}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-YXSCBWTU.js"}],[2089,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__privateGet=(e,t,s)=>(r(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,n)=>(r(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),s.__privateMethod=(e,t,s)=>(r(e,t,"access private method"),s)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/chunk-Z4BLTVTB.js"}],[209,{"../../../shared/constants/network":4977,"bignumber.js":3425,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r,n=e("lodash"),a=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},i=e("../../../shared/constants/network");const o=e=>new a.default(e||"0x0",16).gt(0),c=["0x3","0x2a","0x4"],l={"0x3":{rpcUrl:(0,i.getRpcUrl)({network:"ropsten"}),nickname:"Ropsten",ticker:"RopstenETH"},"0x2a":{rpcUrl:(0,i.getRpcUrl)({network:"kovan"}),nickname:"Kovan",ticker:"KovanETH"},"0x4":{rpcUrl:(0,i.getRpcUrl)({network:"rinkeby"}),nickname:"Rinkeby",ticker:"RinkebyETH"}};s.default={version:74,async migrate(e){const t=(0,n.cloneDeep)(e);t.meta.version=74;const s=function(e){var t,s;const r=(null==e?void 0:e.PreferencesController)||{},a=r.preferences||{},i=(null==e?void 0:e.NetworkController)||{},u=(null==i?void 0:i.provider)||{},d=c.filter((e=>e===(null==u?void 0:u.chainId)));if(!a.showTestNetworks&&0===d.length)return e;const h=(null==e||null===(t=e.TransactionController)||void 0===t?void 0:t.transactions)||{},m=(null===(s=e.CachedBalancesController)||void 0===s?void 0:s.cachedBalances)||{},p=Object.values(h).filter((({chainId:e})=>c.includes(e))).map((({chainId:e})=>e)),f=c.filter((e=>Object.values(m[e]||{}).some(o))),g=(0,n.uniq)([...f,...p,...d]),v=r.frequentRpcListDetail??[];g.forEach((e=>{v.find((t=>t.chainId===e))||v.unshift({rpcUrl:l[e].rpcUrl,chainId:e,ticker:l[e].ticker,nickname:l[e].nickname,rpcPrefs:{}})})),v.length&&(r.frequentRpcListDetail=v);if(d.length){const e=d[0];i.provider={...i.provider,type:"rpc",rpcUrl:l[e].rpcUrl,chainId:e,nickname:l[e].nickname,ticker:l[e].ticker}}return{...e,PreferencesController:{...r},NetworkController:{...i}}}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/074.js"}],[2090,{"./chunk-2XKEAKQG.js":2059,"./chunk-3ZRHCVVS.js":2060,"./chunk-5KMU2IAT.js":2061,"./chunk-7LXE4KHV.js":2062,"./chunk-7MKQDZKY.js":2063,"./chunk-DLOQPH4M.js":2064,"./chunk-DTDTOMTB.js":2065,"./chunk-EQT25RSP.js":2066,"./chunk-FDUCRHYT.js":2067,"./chunk-HMOSP33F.js":2068,"./chunk-IT3SYNZ6.js":2069,"./chunk-KT6UAKBB.js":2070,"./chunk-NYKRCWBG.js":2071,"./chunk-OQNGSDIH.js":2072,"./chunk-PRUNMTRD.js":2073,"./chunk-PUESYN62.js":2074,"./chunk-Q6Q44V4W.js":2075,"./chunk-RAOYRJ25.js":2076,"./chunk-S6VGOPUY.js":2077,"./chunk-SD6CWFDF.js":2078,"./chunk-TIE3CPF7.js":2079,"./chunk-TJMQEH57.js":2080,"./chunk-UGFBA4GV.js":2081,"./chunk-UGN7PBON.js":2082,"./chunk-UT4M4XI3.js":2083,"./chunk-V72C4MCR.js":2084,"./chunk-VH47Q6TS.js":2085,"./chunk-WR5F34OW.js":2086,"./chunk-YVCX6Z75.js":2087,"./chunk-YXSCBWTU.js":2088,"./chunk-Z4BLTVTB.js":2089},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-OQNGSDIH.js");e("./chunk-VH47Q6TS.js"),e("./chunk-Q6Q44V4W.js"),e("./chunk-YXSCBWTU.js"),e("./chunk-NYKRCWBG.js"),e("./chunk-WR5F34OW.js"),e("./chunk-YVCX6Z75.js"),e("./chunk-TJMQEH57.js");var n=e("./chunk-TIE3CPF7.js");e("./chunk-PRUNMTRD.js"),e("./chunk-IT3SYNZ6.js"),e("./chunk-KT6UAKBB.js");var a=e("./chunk-SD6CWFDF.js");e("./chunk-DTDTOMTB.js"),e("./chunk-PUESYN62.js"),e("./chunk-5KMU2IAT.js"),e("./chunk-7LXE4KHV.js"),e("./chunk-3ZRHCVVS.js"),e("./chunk-UT4M4XI3.js");var i=e("./chunk-UGFBA4GV.js");e("./chunk-V72C4MCR.js"),e("./chunk-HMOSP33F.js"),e("./chunk-EQT25RSP.js"),e("./chunk-FDUCRHYT.js"),e("./chunk-UGN7PBON.js"),e("./chunk-7MKQDZKY.js"),e("./chunk-2XKEAKQG.js");var o=e("./chunk-DLOQPH4M.js");e("./chunk-S6VGOPUY.js");var c=e("./chunk-RAOYRJ25.js");e("./chunk-Z4BLTVTB.js"),s.CANCEL_RATE=r.CANCEL_RATE,s.DISPLAYED_TRANSACTION_HISTORY_PATHS=n.DISPLAYED_TRANSACTION_HISTORY_PATHS,s.GasFeeEstimateLevel=c.GasFeeEstimateLevel,s.GasFeeEstimateType=c.GasFeeEstimateType,s.HARDFORK=r.HARDFORK,s.MAX_TRANSACTION_HISTORY_LENGTH=n.MAX_TRANSACTION_HISTORY_LENGTH,s.SimulationErrorCode=c.SimulationErrorCode,s.SimulationTokenStandard=c.SimulationTokenStandard,s.TransactionController=r.TransactionController,s.TransactionEnvelopeType=c.TransactionEnvelopeType,s.TransactionStatus=c.TransactionStatus,s.TransactionType=c.TransactionType,s.UserFeeLevel=c.UserFeeLevel,s.WalletDevice=c.WalletDevice,s.determineTransactionType=a.determineTransactionType,s.isEIP1559Transaction=i.isEIP1559Transaction,s.mergeGasFeeEstimates=o.mergeGasFeeEstimates,s.normalizeTransactionParams=i.normalizeTransactionParams}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/dist/index.js"}],[2091,{"./types":2098,"./util":2099,"@ethereumjs/common":441,"@ethereumjs/util":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.BaseTransaction=void 0;const r=e("@ethereumjs/common"),n=e("@ethereumjs/util"),a=e("./types"),i=e("./util");s.BaseTransaction=class{constructor(e,t){this.cache={hash:undefined,dataFee:undefined},this.activeCapabilities=[],this.DEFAULT_CHAIN=r.Chain.Mainnet,this.DEFAULT_HARDFORK=r.Hardfork.Merge;const{nonce:s,gasLimit:a,to:o,value:c,data:l,v:u,r:d,s:h,type:m}=e;this._type=Number((0,n.bufferToBigInt)((0,n.toBuffer)(m))),this.txOptions=t;const p=(0,n.toBuffer)(""===o?"0x":o),f=(0,n.toBuffer)(""===u?"0x":u),g=(0,n.toBuffer)(""===d?"0x":d),v=(0,n.toBuffer)(""===h?"0x":h);this.nonce=(0,n.bufferToBigInt)((0,n.toBuffer)(""===s?"0x":s)),this.gasLimit=(0,n.bufferToBigInt)((0,n.toBuffer)(""===a?"0x":a)),this.to=p.length>0?new n.Address(p):undefined,this.value=(0,n.bufferToBigInt)((0,n.toBuffer)(""===c?"0x":c)),this.data=(0,n.toBuffer)(""===l?"0x":l),this.v=f.length>0?(0,n.bufferToBigInt)(f):undefined,this.r=g.length>0?(0,n.bufferToBigInt)(g):undefined,this.s=v.length>0?(0,n.bufferToBigInt)(v):undefined,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const _=this.to===undefined||null===this.to,k=t.allowUnlimitedInitCodeSize??!1,y=t.common??this._getCommon();_&&y.isActivatedEIP(3860)&&!1===k&&(0,i.checkMaxInitCodeSize)(y,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(e!==undefined&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&e!==undefined&&e>n.SECP256K1_ORDER_DIV_2){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let s=BigInt(0);for(let r=0;r<this.data.length;r++)0===this.data[r]?s+=e:s+=t;if((this.to===undefined||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));s+=this.common.param("gasPrices","initCodeWordCost")*e}return s}toCreationAddress(){return this.to===undefined||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:s}=this;return e!==undefined&&t!==undefined&&s!==undefined}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,n.unpadBuffer)(e).length}catch(e){return!1}}getSenderAddress(){return new n.Address((0,n.publicToAddress)(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(a.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(a.Capability.EIP155ReplayProtection),t=!0);const s=this.getMessageToSign(!0),{v:r,r:i,s:o}=(0,n.ecsign)(s,e),c=this._processSignature(r,i,o);if(t){const e=this.activeCapabilities.indexOf(a.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return c}_getCommon(e,t){if(t!==undefined){const s=(0,n.bufferToBigInt)((0,n.toBuffer)(t));if(e){if(e.chainId()!==s){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return r.Common.isSupportedChainId(s)?new r.Common({chain:s,hardfork:this.DEFAULT_HARDFORK}):r.Common.custom({name:"custom-chain",networkId:s,chainId:s},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}return e?.copy()??new r.Common({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,s=!1){for(const[r,a]of Object.entries(e))switch(t){case 64:if(s){if(a!==undefined&&a>=n.MAX_UINT64){const e=this._errorMsg(`${r} cannot equal or exceed MAX_UINT64 (2^64-1), given ${a}`);throw new Error(e)}}else if(a!==undefined&&a>n.MAX_UINT64){const e=this._errorMsg(`${r} cannot exceed MAX_UINT64 (2^64-1), given ${a}`);throw new Error(e)}break;case 256:if(s){if(a!==undefined&&a>=n.MAX_INTEGER){const e=this._errorMsg(`${r} cannot equal or exceed MAX_INTEGER (2^256-1), given ${a}`);throw new Error(e)}}else if(a!==undefined&&a>n.MAX_INTEGER){const e=this._errorMsg(`${r} cannot exceed MAX_INTEGER (2^256-1), given ${a}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[s,r]of Object.entries(e))if(t.includes(s)&&Array.isArray(r))throw new Error(`${s} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,n.bufferToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let s="";try{s=this.common.hardfork()}catch(e){s="error"}let r=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return r+=`signed=${t} hf=${s}`,r}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/baseTransaction.js"}],[2092,{"./baseTransaction":2091,"./util":2099,"@ethereumjs/rlp":444,"@ethereumjs/util":2107,buffer:3520,"ethereum-cryptography/keccak":3748},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.FeeMarketEIP1559Transaction=void 0;const r=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak"),i=e("./baseTransaction"),o=e("./util"),c=t.from(2..toString(16).padStart(2,"0"),"hex");class l extends i.BaseTransaction{constructor(e,t={}){super({...e,type:2},t),this.DEFAULT_HARDFORK="london";const{chainId:s,accessList:r,maxFeePerGas:a,maxPriorityFeePerGas:c}=e;if(this.common=this._getCommon(t.common,s),this.chainId=this.common.chainId(),!1===this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const l=o.AccessLists.getAccessListData(r??[]);if(this.accessList=l.accessList,this.AccessListJSON=l.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.maxFeePerGas=(0,n.bufferToBigInt)((0,n.toBuffer)(""===a?"0x":a)),this.maxPriorityFeePerGas=(0,n.bufferToBigInt)((0,n.toBuffer)(""===c?"0x":c)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),i.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(c))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${e.slice(0,1).toString("hex")}`);const s=(0,n.arrToBufArr)(r.RLP.decode(e.slice(1)));if(!Array.isArray(s))throw new Error("Invalid serialized tx input: must be array");return l.fromValuesArray(s,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[s,r,a,i,o,c,u,d,h,m,p,f]=e;return this._validateNotArray({chainId:s,v:m}),(0,n.validateNoLeadingZeroes)({nonce:r,maxPriorityFeePerGas:a,maxFeePerGas:i,gasLimit:o,value:u,v:m,r:p,s:f}),new l({chainId:(0,n.bufferToBigInt)(s),nonce:r,maxPriorityFeePerGas:a,maxFeePerGas:i,gasLimit:o,to:c,value:u,data:d,accessList:h??[],v:m!==undefined?(0,n.bufferToBigInt)(m):undefined,r:p,s:f},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,s=this.maxFeePerGas-e,r=(t<s?t:s)+e;return this.gasLimit*r+this.value}raw(){return[(0,n.bigIntToUnpaddedBuffer)(this.chainId),(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.maxPriorityFeePerGas),(0,n.bigIntToUnpaddedBuffer)(this.maxFeePerGas),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([c,t.from(r.RLP.encode((0,n.bufArrToArr)(e)))])}getMessageToSign(e=!0){const s=this.raw().slice(0,9),i=t.concat([c,t.from(r.RLP.encode((0,n.bufArrToArr)(s)))]);return e?t.from((0,a.keccak256)(i)):i}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,a.keccak256)(this.serialize()))),this.cache.hash):t.from((0,a.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:s,s:r}=this;this._validateHighS();try{return(0,n.ecrecover)(e,t+BigInt(27),(0,n.bigIntToUnpaddedBuffer)(s),(0,n.bigIntToUnpaddedBuffer)(r))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,s){const r={...this.txOptions,common:this.common};return l.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,n.bufferToBigInt)(t),s:(0,n.bufferToBigInt)(s)},r)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,n.bigIntToHex)(this.chainId),nonce:(0,n.bigIntToHex)(this.nonce),maxPriorityFeePerGas:(0,n.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,n.bigIntToHex)(this.maxFeePerGas),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}s.FeeMarketEIP1559Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip1559Transaction.js"}],[2093,{"./baseTransaction":2091,"./util":2099,"@ethereumjs/rlp":444,"@ethereumjs/util":2107,buffer:3520,"ethereum-cryptography/keccak":3748},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.AccessListEIP2930Transaction=void 0;const r=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak"),i=e("./baseTransaction"),o=e("./util"),c=t.from(1..toString(16).padStart(2,"0"),"hex");class l extends i.BaseTransaction{constructor(e,t={}){super({...e,type:1},t),this.DEFAULT_HARDFORK="berlin";const{chainId:s,accessList:r,gasPrice:a}=e;if(this.common=this._getCommon(t.common,s),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const c=o.AccessLists.getAccessListData(r??[]);if(this.accessList=c.accessList,this.AccessListJSON=c.AccessListJSON,o.AccessLists.verifyAccessList(this.accessList),this.gasPrice=(0,n.bufferToBigInt)((0,n.toBuffer)(""===a?"0x":a)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),i.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>n.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS();(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){if(!e.slice(0,1).equals(c))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${e.slice(0,1).toString("hex")}`);const s=(0,n.arrToBufArr)(r.RLP.decode(Uint8Array.from(e.slice(1))));if(!Array.isArray(s))throw new Error("Invalid serialized tx input: must be array");return l.fromValuesArray(s,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[s,r,a,i,o,c,u,d,h,m,p]=e;this._validateNotArray({chainId:s,v:h}),(0,n.validateNoLeadingZeroes)({nonce:r,gasPrice:a,gasLimit:i,value:c,v:h,r:m,s:p});return new l({chainId:(0,n.bufferToBigInt)(s),nonce:r,gasPrice:a,gasLimit:i,to:o,value:c,data:u,accessList:d??[],v:h!==undefined?(0,n.bufferToBigInt)(h):undefined,r:m,s:p},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(o.AccessLists.getDataFeeEIP2930(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,n.bigIntToUnpaddedBuffer)(this.chainId),(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.gasPrice),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data,this.accessList,this.v!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){const e=this.raw();return t.concat([c,t.from(r.RLP.encode((0,n.bufArrToArr)(e)))])}getMessageToSign(e=!0){const s=this.raw().slice(0,8),i=t.concat([c,t.from(r.RLP.encode((0,n.bufArrToArr)(s)))]);return e?t.from((0,a.keccak256)(i)):i}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,a.keccak256)(this.serialize()))),this.cache.hash):t.from((0,a.keccak256)(this.serialize()))}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:s,s:r}=this;this._validateHighS();try{return(0,n.ecrecover)(e,t+BigInt(27),(0,n.bigIntToUnpaddedBuffer)(s),(0,n.bigIntToUnpaddedBuffer)(r))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,s){const r={...this.txOptions,common:this.common};return l.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,n.bufferToBigInt)(t),s:(0,n.bufferToBigInt)(s)},r)}toJSON(){const e=o.AccessLists.getAccessListJSON(this.accessList);return{chainId:(0,n.bigIntToHex)(this.chainId),nonce:(0,n.bigIntToHex)(this.nonce),gasPrice:(0,n.bigIntToHex)(this.gasPrice),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),accessList:e,v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice} accessListCount=${this.accessList?.length??0}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}s.AccessListEIP2930Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/eip2930Transaction.js"}],[2094,{"@ethereumjs/util":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.normalizeTxParams=void 0;const r=e("@ethereumjs/util");s.normalizeTxParams=e=>{const t=Object.assign({},e);return t.gasLimit=(0,r.toType)(t.gasLimit??t.gas,r.TypeOutput.BigInt),t.data=t.data===undefined?t.input:t.data,t.gasPrice=t.gasPrice!==undefined?BigInt(t.gasPrice):undefined,t.value=t.value!==undefined?BigInt(t.value):undefined,t.to=null!==t.to&&t.to!==undefined?(0,r.setLengthLeft)((0,r.toBuffer)(t.to),20):null,t.v="0x0"===t.v?"0x":t.v,t.r="0x0"===t.r?"0x":t.r,t.s="0x0"===t.s?"0x":t.s,"0x"!==t.v&&(t.v=(0,r.toType)(t.v,r.TypeOutput.BigInt)),t}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/fromRpc.js"}],[2095,{"./eip1559Transaction":2092,"./eip2930Transaction":2093,"./legacyTransaction":2096,"./transactionFactory":2097,"./types":2098},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),s.TransactionFactory=s.Transaction=s.AccessListEIP2930Transaction=s.FeeMarketEIP1559Transaction=void 0;var a=e("./eip1559Transaction");Object.defineProperty(s,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return a.FeeMarketEIP1559Transaction}});var i=e("./eip2930Transaction");Object.defineProperty(s,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return i.AccessListEIP2930Transaction}});var o=e("./legacyTransaction");Object.defineProperty(s,"Transaction",{enumerable:!0,get:function(){return o.Transaction}});var c=e("./transactionFactory");Object.defineProperty(s,"TransactionFactory",{enumerable:!0,get:function(){return c.TransactionFactory}}),n(e("./types"),s)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/index.js"}],[2096,{"./baseTransaction":2091,"./types":2098,"@ethereumjs/rlp":444,"@ethereumjs/util":2107,buffer:3520,"ethereum-cryptography/keccak":3748},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.Transaction=void 0;const r=e("@ethereumjs/rlp"),n=e("@ethereumjs/util"),a=e("ethereum-cryptography/keccak"),i=e("./baseTransaction"),o=e("./types");function c(e,t){const s=Number(e),r=2*Number(t);return s===r+35||s===r+36}class l extends i.BaseTransaction{constructor(e,t={}){if(super({...e,type:0},t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=(0,n.bufferToBigInt)((0,n.toBuffer)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>n.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),i.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?c(this.v,this.common.chainId())&&this.activeCapabilities.push(o.Capability.EIP155ReplayProtection):this.activeCapabilities.push(o.Capability.EIP155ReplayProtection));(t?.freeze??!0)&&Object.freeze(this)}static fromTxData(e,t={}){return new l(e,t)}static fromSerializedTx(e,t={}){const s=(0,n.arrToBufArr)(r.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(s))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(s,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[s,r,a,i,o,c,u,d,h]=e;return(0,n.validateNoLeadingZeroes)({nonce:s,gasPrice:r,gasLimit:a,value:o,v:u,r:d,s:h}),new l({nonce:s,gasPrice:r,gasLimit:a,to:i,value:o,data:c,v:u,r:d,s:h},t)}raw(){return[(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.gasPrice),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data,this.v!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.v):t.from([]),this.r!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.r):t.from([]),this.s!==undefined?(0,n.bigIntToUnpaddedBuffer)(this.s):t.from([])]}serialize(){return t.from(r.RLP.encode((0,n.bufArrToArr)(this.raw())))}_getMessageToSign(){const e=[(0,n.bigIntToUnpaddedBuffer)(this.nonce),(0,n.bigIntToUnpaddedBuffer)(this.gasPrice),(0,n.bigIntToUnpaddedBuffer)(this.gasLimit),this.to!==undefined?this.to.buf:t.from([]),(0,n.bigIntToUnpaddedBuffer)(this.value),this.data];return this.supports(o.Capability.EIP155ReplayProtection)&&(e.push((0,n.bigIntToUnpaddedBuffer)(this.common.chainId())),e.push((0,n.unpadBuffer)((0,n.toBuffer)(0))),e.push((0,n.unpadBuffer)((0,n.toBuffer)(0)))),e}getMessageToSign(e=!0){const s=this._getMessageToSign();return e?t.from((0,a.keccak256)(r.RLP.encode((0,n.bufArrToArr)(s)))):s}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=t.from((0,a.keccak256)(r.RLP.encode((0,n.bufArrToArr)(this.raw()))))),this.cache.hash):t.from((0,a.keccak256)(r.RLP.encode((0,n.bufArrToArr)(this.raw()))))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return t.from((0,a.keccak256)(r.RLP.encode((0,n.bufArrToArr)(e))))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:s,s:r}=this;this._validateHighS();try{return(0,n.ecrecover)(e,t,(0,n.bigIntToUnpaddedBuffer)(s),(0,n.bigIntToUnpaddedBuffer)(r),this.supports(o.Capability.EIP155ReplayProtection)?this.common.chainId():undefined)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,s){this.supports(o.Capability.EIP155ReplayProtection)&&(e+=this.common.chainId()*BigInt(2)+BigInt(8));const r={...this.txOptions,common:this.common};return l.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:e,r:(0,n.bufferToBigInt)(t),s:(0,n.bufferToBigInt)(s)},r)}toJSON(){return{nonce:(0,n.bigIntToHex)(this.nonce),gasPrice:(0,n.bigIntToHex)(this.gasPrice),gasLimit:(0,n.bigIntToHex)(this.gasLimit),to:this.to!==undefined?this.to.toString():undefined,value:(0,n.bigIntToHex)(this.value),data:"0x"+this.data.toString("hex"),v:this.v!==undefined?(0,n.bigIntToHex)(this.v):undefined,r:this.r!==undefined?(0,n.bigIntToHex)(this.r):undefined,s:this.s!==undefined?(0,n.bigIntToHex)(this.s):undefined}}_validateTxV(e,t){let s;const r=e!==undefined?Number(e):undefined;if(r!==undefined&&r<37&&27!==r&&28!==r)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${r}`);if(r!==undefined&&0!==r&&(!t||t.gteHardfork("spuriousDragon"))&&27!==r&&28!==r)if(t){if(!c(BigInt(r),t.chainId()))throw new Error(`Incompatible EIP155-based V ${r} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(r-35)%2==0?35:36,s=BigInt(r-e)/BigInt(2)}return this._getCommon(t,s)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}s.Transaction=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/legacyTransaction.js"}],[2097,{"../../../../../../../../../is-buffer/index.js":4134,"./eip1559Transaction":2092,"./eip2930Transaction":2093,"./fromRpc":2094,"./legacyTransaction":2096,"@ethereumjs/util":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.TransactionFactory=void 0;const r=e("@ethereumjs/util"),n=e("./eip1559Transaction"),a=e("./eip2930Transaction"),i=e("./fromRpc"),o=e("./legacyTransaction");class c{constructor(){}static fromTxData(e,t={}){if("type"in e&&e.type!==undefined){const s=Number((0,r.bufferToBigInt)((0,r.toBuffer)(e.type)));if(0===s)return o.Transaction.fromTxData(e,t);if(1===s)return a.AccessListEIP2930Transaction.fromTxData(e,t);if(2===s)return n.FeeMarketEIP1559Transaction.fromTxData(e,t);throw new Error(`Tx instantiation with type ${s} not supported`)}return o.Transaction.fromTxData(e,t)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return o.Transaction.fromSerializedTx(e,t);switch(e[0]){case 1:return a.AccessListEIP2930Transaction.fromSerializedTx(e,t);case 2:return n.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);default:throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}static fromBlockBodyData(e,s={}){if(t.isBuffer(e))return this.fromSerializedData(e,s);if(Array.isArray(e))return o.Transaction.fromValuesArray(e,s);throw new Error("Cannot decode transaction: unknown type input")}static async fromEthersProvider(e,t,s){const n=(0,r.getProvider)(e),a=await(0,r.fetchFromProvider)(n,{method:"eth_getTransactionByHash",params:[t]});if(null===a)throw new Error("No data returned from provider");return c.fromRPCTx(a,s)}static async fromRPCTx(e,t={}){return c.fromTxData((0,i.normalizeTxParams)(e),t)}}s.TransactionFactory=c}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/transactionFactory.js"}],[2098,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function r(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}Object.defineProperty(s,"__esModule",{value:!0}),s.isAccessList=s.isAccessListBuffer=s.Capability=void 0,function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(s.Capability||(s.Capability={})),s.isAccessListBuffer=r,s.isAccessList=function(e){return!r(e)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/types.js"}],[2099,{"./types":2098,"@ethereumjs/util":2107},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.AccessLists=s.checkMaxInitCodeSize=void 0;const r=e("@ethereumjs/util"),n=e("./types");s.checkMaxInitCodeSize=function(e,t){const s=e.param("vm","maxInitCodeSize");if(s&&BigInt(t)>s)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)};s.AccessLists=class{static getAccessListData(e){let t,s;if((0,n.isAccessList)(e)){t=e;const n=[];for(let t=0;t<e.length;t++){const s=e[t],a=(0,r.toBuffer)(s.address),i=[];for(let e=0;e<s.storageKeys.length;e++)i.push((0,r.toBuffer)(s.storageKeys[e]));n.push([a,i])}s=n}else{s=e??[];const n=[];for(let e=0;e<s.length;e++){const t=s[e],a=(0,r.bufferToHex)(t[0]),i=[];for(let e=0;e<t[1].length;e++)i.push((0,r.bufferToHex)(t[1][e]));const o={address:a,storageKeys:i};n.push(o)}t=n}return{AccessListJSON:t,accessList:s}}static verifyAccessList(e){for(let t=0;t<e.length;t++){const s=e[t],r=s[0],n=s[1];if(s[2]!==undefined)throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==r.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<n.length;e++)if(32!==n[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}}static getAccessListJSON(e){const t=[];for(let s=0;s<e.length;s++){const n=e[s],a={address:"0x"+(0,r.setLengthLeft)(n[0],20).toString("hex"),storageKeys:[]},i=n[1];for(let e=0;e<i.length;e++){const t=i[e];a.storageKeys.push("0x"+(0,r.setLengthLeft)(t,32).toString("hex"))}t.push(a)}return t}static getDataFeeEIP2930(e,t){const s=t.param("gasPrices","accessListStorageKeyCost"),r=t.param("gasPrices","accessListAddressCost");let n=0;for(let t=0;t<e.length;t++){n+=e[t][1].length}return e.length*Number(r)+n*Number(s)}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/tx",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/tx/dist/util.js"}],[21,{"../constants/notification-schema":18,"./process-feature-announcement":20,"./process-onchain-notifications":22},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.processNotification=function(e,t=[]){if(o(e)){const s=(0,a.processFeatureAnnouncement)(e);return s.isRead=(0,a.isFeatureAnnouncementRead)(s,t),s}if(i(e))return(0,n.processOnChainNotification)(e);return(t=>{throw new Error(`No processor found for notification kind ${e.type}`)})()};var r=e("../constants/notification-schema"),n=e("./process-onchain-notifications"),a=e("./process-feature-announcement");const i=e=>Object.values(r.TRIGGER_TYPES).includes(e.type),o=e=>e.type===r.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-notifications.ts"}],[210,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:75,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=75;const s=function(e){return delete e.ThreeBoxController,e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/075.js"}],[2100,{"./bytes":2103,"./constants":2104,"./helpers":2106,"./internal":2108,"@ethereumjs/rlp":444,buffer:3520,"ethereum-cryptography/keccak":3748,"ethereum-cryptography/secp256k1":3765,"ethereum-cryptography/utils":3767},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.accountBodyToRLP=s.accountBodyToSlim=s.accountBodyFromSlim=s.isZeroAddress=s.zeroAddress=s.importPublic=s.privateToAddress=s.privateToPublic=s.publicToAddress=s.pubToAddress=s.isValidPublic=s.isValidPrivate=s.generateAddress2=s.generateAddress=s.isValidChecksumAddress=s.toChecksumAddress=s.isValidAddress=s.Account=void 0;const r=e("@ethereumjs/rlp"),n=e("ethereum-cryptography/keccak"),a=e("ethereum-cryptography/secp256k1"),i=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),l=e("./helpers"),u=e("./internal"),d=BigInt(0);class h{constructor(e=d,t=d,s=c.KECCAK256_RLP,r=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=s,this.codeHash=r,this._validate()}static fromAccountData(e){const{nonce:t,balance:s,storageRoot:r,codeHash:n}=e;return new h(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,s!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(s)):undefined,r!==undefined?(0,o.toBuffer)(r):undefined,n!==undefined?(0,o.toBuffer)(n):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(r.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,s,r,n]=e;return new h((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(s),r,n)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(r.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}s.Account=h;s.isValidAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};s.toChecksumAddress=function(e,s){(0,l.assertIsHexString)(e);const r=(0,u.stripHexPrefix)(e).toLowerCase();let a="";if(s!==undefined){a=(0,o.bufferToBigInt)((0,o.toBuffer)(s)).toString()+"0x"}const c=t.from(a+r,"utf8"),d=(0,i.bytesToHex)((0,n.keccak256)(c));let h="0x";for(let e=0;e<r.length;e++)parseInt(d[e],16)>=8?h+=r[e].toUpperCase():h+=r[e];return h};s.isValidChecksumAddress=function(e,t){return(0,s.isValidAddress)(e)&&(0,s.toChecksumAddress)(e,t)===e};s.generateAddress=function(e,s){return(0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(s),(0,o.bufferToBigInt)(s)===BigInt(0)?t.from((0,n.keccak256)(r.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,n.keccak256)(r.RLP.encode((0,o.bufArrToArr)([e,s])))).slice(-20)};s.generateAddress2=function(e,s,r){if((0,l.assertIsBuffer)(e),(0,l.assertIsBuffer)(s),(0,l.assertIsBuffer)(r),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==s.length)throw new Error("Expected salt to be of length 32");const a=(0,n.keccak256)(t.concat([t.from("ff","hex"),e,s,(0,n.keccak256)(r)]));return(0,o.toBuffer)(a).slice(-20)};s.isValidPrivate=function(e){return a.secp256k1.utils.isValidPrivateKey(e)};s.isValidPublic=function(e,s=!1){if((0,l.assertIsBuffer)(e),64===e.length)try{return a.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!s)return!1;try{return a.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};s.pubToAddress=function(e,s=!1){if((0,l.assertIsBuffer)(e),s&&64!==e.length&&(e=t.from(a.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,n.keccak256)(e)).slice(-20)},s.publicToAddress=s.pubToAddress;s.privateToPublic=function(e){return(0,l.assertIsBuffer)(e),t.from(a.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};s.privateToAddress=function(e){return(0,s.publicToAddress)((0,s.privateToPublic)(e))};s.importPublic=function(e){return(0,l.assertIsBuffer)(e),64!==e.length&&(e=t.from(a.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};s.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function m(e){const[t,s,r,n]=e;return[t,s,0===(0,o.arrToBufArr)(r).length?c.KECCAK256_RLP:r,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_NULL:n]}s.isZeroAddress=function(e){try{(0,l.assertIsString)(e)}catch(e){return!1}return(0,s.zeroAddress)()===e},s.accountBodyFromSlim=m;const p=new Uint8Array(0);s.accountBodyToSlim=function(e){const[t,s,r,n]=e;return[t,s,(0,o.arrToBufArr)(r).equals(c.KECCAK256_RLP)?p:r,(0,o.arrToBufArr)(n).equals(c.KECCAK256_NULL)?p:n]},s.accountBodyToRLP=function(e,t=!0){const s=t?m(e):e;return(0,o.arrToBufArr)(r.RLP.encode(s))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/account.js"}],[2101,{"./account":2100,"./bytes":2103,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.Address=void 0;const r=e("./account"),n=e("./bytes");class a{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new a((0,n.zeros)(20))}static fromString(e){if(!(0,r.isValidAddress)(e))throw new Error("Invalid address");return new a((0,n.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const s=(0,r.pubToAddress)(e);return new a(s)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const s=(0,r.privateToAddress)(e);return new a(s)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new a((0,r.generateAddress)(e.buf,(0,n.bigIntToBuffer)(t)))}static generate2(e,s,n){if(!t.isBuffer(s))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(n))throw new Error("Expected initCode to be a Buffer");return new a((0,r.generateAddress2)(e.buf,s,n))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(a.zero())}isPrecompileOrSystemAddress(){const e=(0,n.bufferToBigInt)(this.buf),t=BigInt(0),s=BigInt("0xffff");return e>=t&&e<=s}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}s.Address=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/address.js"}],[2102,{events:3814},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.AsyncEventEmitter=void 0;const r=e("events");class n extends r.EventEmitter{emit(e,...t){let[s,r]=t;const n=this;let a=n._events[e]??[];return r===undefined&&"function"==typeof s&&(r=s,s=undefined),"newListener"!==e&&"removeListener"!==e||(s={event:s,fn:r},r=undefined),a=Array.isArray(a)?a:[a],async function(e,t,s){let r;for await(const n of t)try{n.length<2?n.call(e,s):await new Promise(((t,r)=>{n.call(e,s,(e=>{e?r(e):t()}))}))}catch(e){r=e}if(r)throw r}(n,a.slice(),s).then(r).catch(r),n.listenerCount(e)>0}once(e,t){const s=this;let r;if("function"!=typeof t)throw new TypeError("listener must be a function");return r=t.length>=2?function(n,a){s.removeListener(e,r),t(n,a)}:function(n){s.removeListener(e,r),t(n,r)},s.on(e,r),s}first(e,t){let s=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(s)||(this._events[e]=s=[s]),s.unshift(t),this}before(e,t,s){return this.beforeOrAfter(e,t,s)}after(e,t,s){return this.beforeOrAfter(e,t,s,"after")}beforeOrAfter(e,t,s,r){let n,a,i=this._events[e]??[];const o="after"===r?1:0;if("function"!=typeof s)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(i)||(this._events[e]=i=[i]),a=i.length,n=i.length;n--;)if(i[n]===t){a=n+o;break}return i.splice(a,0,s),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}s.AsyncEventEmitter=n}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[2103,{"./helpers":2106,"./internal":2108,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.intToUnpaddedBuffer=s.bigIntToUnpaddedBuffer=s.bigIntToHex=s.bufArrToArr=s.arrToBufArr=s.validateNoLeadingZeroes=s.baToJSON=s.toUtf8=s.short=s.addHexPrefix=s.toUnsigned=s.fromSigned=s.bufferToInt=s.bigIntToBuffer=s.bufferToBigInt=s.bufferToHex=s.toBuffer=s.unpadHexString=s.unpadArray=s.unpadBuffer=s.setLengthRight=s.setLengthLeft=s.zeros=s.intToBuffer=s.intToHex=void 0;const r=e("./helpers"),n=e("./internal");s.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};s.intToBuffer=function(e){const r=(0,s.intToHex)(e);return t.from((0,n.padToEven)(r.slice(2)),"hex")};s.zeros=function(e){return t.allocUnsafe(e).fill(0)};const a=function(e,t,r){const n=(0,s.zeros)(t);return r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};s.setLengthLeft=function(e,t){return(0,r.assertIsBuffer)(e),a(e,t,!1)};s.setLengthRight=function(e,t){return(0,r.assertIsBuffer)(e),a(e,t,!0)};const i=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};s.unpadBuffer=function(e){return(0,r.assertIsBuffer)(e),i(e)};s.unpadArray=function(e){return(0,r.assertIsArray)(e),i(e)};s.unpadHexString=function(e){return(0,r.assertIsHexString)(e),e=(0,n.stripHexPrefix)(e),"0x"+i(e)};s.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,n.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,n.padToEven)((0,n.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,s.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let s=e.toString(16);return s.length%2&&(s="0"+s),t.from(s,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,s.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,s.toBuffer)("0x"+e.toString(16))}s.bufferToHex=function(e){return"0x"+(e=(0,s.toBuffer)(e)).toString("hex")},s.bufferToBigInt=o,s.bigIntToBuffer=c;s.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};s.fromSigned=function(e){return BigInt.asIntN(256,o(e))};s.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};s.addHexPrefix=function(e){return"string"!=typeof e||(0,n.isHexPrefixed)(e)?e:"0x"+e},s.short=function(e,s=50){const r=t.isBuffer(e)?e.toString("hex"):e;return r.length<=s?r:r.slice(0,s)+""};s.toUtf8=function(e){if((e=(0,n.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};s.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let r=0;r<e.length;r++)t.push((0,s.baToJSON)(e[r]));return t}};s.validateNoLeadingZeroes=function(e){for(const[t,s]of Object.entries(e))if(s!==undefined&&s.length>0&&0===s[0])throw new Error(`${t} cannot have leading zeroes, received: ${s.toString("hex")}`)},s.arrToBufArr=function e(s){return Array.isArray(s)?s.map((t=>e(t))):t.from(s)},s.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};s.bigIntToHex=e=>"0x"+e.toString(16),s.bigIntToUnpaddedBuffer=function(e){return(0,s.unpadBuffer)(c(e))},s.intToUnpaddedBuffer=function(e){return(0,s.unpadBuffer)((0,s.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/bytes.js"}],[2104,{buffer:3520,"ethereum-cryptography/secp256k1":3765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.MAX_WITHDRAWALS_PER_PAYLOAD=s.RLP_EMPTY_STRING=s.KECCAK256_RLP=s.KECCAK256_RLP_S=s.KECCAK256_RLP_ARRAY=s.KECCAK256_RLP_ARRAY_S=s.KECCAK256_NULL=s.KECCAK256_NULL_S=s.TWO_POW256=s.SECP256K1_ORDER_DIV_2=s.SECP256K1_ORDER=s.MAX_INTEGER_BIGINT=s.MAX_INTEGER=s.MAX_UINT64=void 0;const r=e("buffer"),n=e("ethereum-cryptography/secp256k1");s.MAX_UINT64=BigInt("0xffffffffffffffff"),s.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),s.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),s.SECP256K1_ORDER=n.secp256k1.CURVE.n,s.SECP256K1_ORDER_DIV_2=n.secp256k1.CURVE.n/BigInt(2),s.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),s.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",s.KECCAK256_NULL=r.Buffer.from(s.KECCAK256_NULL_S,"hex"),s.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",s.KECCAK256_RLP_ARRAY=r.Buffer.from(s.KECCAK256_RLP_ARRAY_S,"hex"),s.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",s.KECCAK256_RLP=r.Buffer.from(s.KECCAK256_RLP_S,"hex"),s.RLP_EMPTY_STRING=r.Buffer.from([128]),s.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/constants.js"}],[2105,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.compactBytesToNibbles=s.bytesToNibbles=s.nibblesToCompactBytes=s.nibblesToBytes=s.hasTerminator=void 0;s.hasTerminator=e=>e.length>0&&16===e[e.length-1];s.nibblesToBytes=(e,t)=>{for(let s=0,r=0;r<e.length;s+=1,r+=2)t[s]=e[r]<<4|e[r+1]};s.nibblesToCompactBytes=e=>{let t=0;(0,s.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const r=new Uint8Array(e.length/2+1);return r[0]=t<<5,1&~e.length||(r[0]|=16,r[0]|=e[0],e=e.subarray(1)),(0,s.nibblesToBytes)(e,r.subarray(1)),r};s.bytesToNibbles=e=>{const t=2*e.length+1,s=new Uint8Array(t);for(let t=0;t<e.length;t++){const r=e[t];s[2*t]=r/16,s[2*t+1]=r%16}return s[t-1]=16,s};s.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,s.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const r=2-(1&t[0]);return t.subarray(r)}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/encoding.js"}],[2106,{"../../../../../../../../../is-buffer/index.js":4134,"./internal":2108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.assertIsString=s.assertIsArray=s.assertIsBuffer=s.assertIsHexString=void 0;const r=e("./internal");s.assertIsHexString=function(e){if(!(0,r.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};s.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};s.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};s.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../../is-buffer/index.js")})}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/helpers.js"}],[2107,{"./account":2100,"./address":2101,"./asyncEventEmitter":2102,"./bytes":2103,"./constants":2104,"./encoding":2105,"./internal":2108,"./lock":2109,"./provider":2110,"./signature":2111,"./types":2112,"./units":2113,"./withdrawal":2114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),s.toAscii=s.stripHexPrefix=s.padToEven=s.isHexString=s.isHexPrefixed=s.getKeys=s.getBinarySize=s.fromUtf8=s.fromAscii=s.arrayContainsArray=void 0,n(e("./constants"),s),n(e("./units"),s),n(e("./account"),s),n(e("./address"),s),n(e("./withdrawal"),s),n(e("./signature"),s),n(e("./bytes"),s),n(e("./types"),s),n(e("./encoding"),s),n(e("./asyncEventEmitter"),s);var a=e("./internal");Object.defineProperty(s,"arrayContainsArray",{enumerable:!0,get:function(){return a.arrayContainsArray}}),Object.defineProperty(s,"fromAscii",{enumerable:!0,get:function(){return a.fromAscii}}),Object.defineProperty(s,"fromUtf8",{enumerable:!0,get:function(){return a.fromUtf8}}),Object.defineProperty(s,"getBinarySize",{enumerable:!0,get:function(){return a.getBinarySize}}),Object.defineProperty(s,"getKeys",{enumerable:!0,get:function(){return a.getKeys}}),Object.defineProperty(s,"isHexPrefixed",{enumerable:!0,get:function(){return a.isHexPrefixed}}),Object.defineProperty(s,"isHexString",{enumerable:!0,get:function(){return a.isHexString}}),Object.defineProperty(s,"padToEven",{enumerable:!0,get:function(){return a.padToEven}}),Object.defineProperty(s,"stripHexPrefix",{enumerable:!0,get:function(){return a.stripHexPrefix}}),Object.defineProperty(s,"toAscii",{enumerable:!0,get:function(){return a.toAscii}}),n(e("./lock"),s),n(e("./provider"),s)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/index.js"}],[2108,{buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(s,"__esModule",{value:!0}),s.isHexString=s.getKeys=s.fromAscii=s.fromUtf8=s.toAscii=s.arrayContainsArray=s.getBinarySize=s.padToEven=s.stripHexPrefix=s.isHexPrefixed=void 0,s.isHexPrefixed=t;function r(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}s.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},s.padToEven=r,s.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},s.arrayContainsArray=function(e,t,s){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===s?"some":"every"]((t=>e.indexOf(t)>=0))},s.toAscii=function(e){let t="",s=0;const r=e.length;for("0x"===e.substring(0,2)&&(s=2);s<r;s+=2){const r=parseInt(e.substr(s,2),16);t+=String.fromCharCode(r)}return t},s.fromUtf8=function(t){return`0x${r(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},s.fromAscii=function(e){let t="";for(let s=0;s<e.length;s++){const r=e.charCodeAt(s).toString(16);t+=r.length<2?`0${r}`:r}return`0x${t}`},s.getKeys=function(e,t,s){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const r=[];for(let n=0;n<e.length;n++){let a=e[n][t];if(!0!==s||a){if("string"!=typeof a)throw new Error("invalid abi - expected type 'string', received "+typeof a)}else a="";r.push(a)}return r},s.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/internal.js"}],[2109,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Lock=void 0;s.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/lock.js"}],[211,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:76,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=76;const s=function(e){var t;if(e.CollectiblesController){const{allCollectibleContracts:t,allCollectibles:s,ignoredCollectibles:r,...n}=e.CollectiblesController;e.NftController={...t?{allNftContracts:t}:{},...s?{allNfts:s}:{},...r?{ignoredNfts:r}:{},...n},delete e.CollectiblesController}null!==(t=e.PreferencesController)&&void 0!==t&&t.useCollectibleDetection&&(e.PreferencesController.useNftDetection=e.PreferencesController.useCollectibleDetection,delete e.PreferencesController.useCollectibleDetection);return e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/076.js"}],[2110,{"micro-ftch":4365},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getProvider=s.fetchFromProvider=void 0;const r=e("micro-ftch");s.fetchFromProvider=async(e,t)=>(await(0,r.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;s.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/provider.js"}],[2111,{"./bytes":2103,"./constants":2104,"./helpers":2106,buffer:3520,"ethereum-cryptography/keccak":3748,"ethereum-cryptography/secp256k1":3765},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.hashPersonalMessage=s.isValidSignature=s.fromRpcSig=s.toCompactSig=s.toRpcSig=s.ecrecover=s.ecsign=void 0;const r=e("ethereum-cryptography/keccak"),n=e("ethereum-cryptography/secp256k1"),a=e("./bytes"),i=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function l(e){return e===BigInt(0)||e===BigInt(1)}s.ecsign=function(e,s,r){const a=n.secp256k1.sign(e,s),i=a.toCompactRawBytes();return{r:t.from(i.slice(0,32)),s:t.from(i.slice(32,64)),v:r===undefined?BigInt(a.recovery+27):BigInt(a.recovery+35)+BigInt(r)*BigInt(2)}};s.ecrecover=function(e,s,r,i,o){const u=t.concat([(0,a.setLengthLeft)(r,32),(0,a.setLengthLeft)(i,32)],64),d=c(s,o);if(!l(d))throw new Error("Invalid signature v value");const h=n.secp256k1.Signature.fromCompact(u).addRecoveryBit(Number(d)).recoverPublicKey(e);return t.from(h.toRawBytes(!1).slice(1))};s.toRpcSig=function(e,s,r,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");return(0,a.bufferToHex)(t.concat([(0,a.setLengthLeft)(s,32),(0,a.setLengthLeft)(r,32),(0,a.toBuffer)(e)]))};s.toCompactSig=function(e,s,r,n){if(!l(c(e,n)))throw new Error("Invalid signature v value");let i=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(i=t.from(r),i[0]|=128),(0,a.bufferToHex)(t.concat([(0,a.setLengthLeft)(s,32),(0,a.setLengthLeft)(i,32)]))};s.fromRpcSig=function(e){const t=(0,a.toBuffer)(e);let s,r,n;if(t.length>=65)s=t.slice(0,32),r=t.slice(32,64),n=(0,a.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");s=t.slice(0,32),r=t.slice(32,64),n=BigInt((0,a.bufferToInt)(t.slice(32,33))>>7),r[0]&=127}return n<27&&(n+=BigInt(27)),{v:n,r:s,s:r}};s.isValidSignature=function(e,t,s,r=!0,n){if(32!==t.length||32!==s.length)return!1;if(!l(c(e,n)))return!1;const o=(0,a.bufferToBigInt)(t),u=(0,a.bufferToBigInt)(s);return!(o===BigInt(0)||o>=i.SECP256K1_ORDER||u===BigInt(0)||u>=i.SECP256K1_ORDER)&&!(r&&u>=i.SECP256K1_ORDER_DIV_2)};s.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const s=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,r.keccak256)(t.concat([s,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/signature.js"}],[2112,{"./bytes":2103,"./internal":2108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toType=s.TypeOutput=void 0;const r=e("./bytes"),n=e("./internal");var a;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(a=s.TypeOutput||(s.TypeOutput={})),s.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,n.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const s=(0,r.toBuffer)(e);switch(t){case a.Buffer:return s;case a.BigInt:return(0,r.bufferToBigInt)(s);case a.Number:{const e=(0,r.bufferToBigInt)(s);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case a.PrefixedHexString:return(0,r.bufferToHex)(s);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/types.js"}],[2113,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.GWEI_TO_WEI=void 0,s.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/units.js"}],[2114,{"./address":2101,"./bytes":2103,"./types":2112,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.Withdrawal=void 0;const r=e("./address"),n=e("./bytes"),a=e("./types");class i{constructor(e,t,s,r){this.index=e,this.validatorIndex=t,this.address=s,this.amount=r}static fromWithdrawalData(e){const{index:t,validatorIndex:s,address:n,amount:o}=e,c=(0,a.toType)(t,a.TypeOutput.BigInt),l=(0,a.toType)(s,a.TypeOutput.BigInt),u=new r.Address((0,a.toType)(n,a.TypeOutput.Buffer)),d=(0,a.toType)(o,a.TypeOutput.BigInt);return new i(c,l,u,d)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,s,r,n]=e;return i.fromWithdrawalData({index:t,validatorIndex:s,address:r,amount:n})}static toBufferArray(e){const{index:s,validatorIndex:n,address:i,amount:o}=e,c=(0,a.toType)(s,a.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,a.toType)(s,a.TypeOutput.Buffer),l=(0,a.toType)(n,a.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,a.toType)(n,a.TypeOutput.Buffer);let u;u=i instanceof r.Address?i.buf:(0,a.toType)(i,a.TypeOutput.Buffer);return[c,l,u,(0,a.toType)(o,a.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,a.toType)(o,a.TypeOutput.Buffer)]}raw(){return i.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,n.bigIntToHex)(this.index),validatorIndex:(0,n.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,n.bigIntToHex)(this.amount)}}}s.Withdrawal=i}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>@ethereumjs/util",file:"node_modules/@metamask/smart-transactions-controller/node_modules/@metamask/transaction-controller/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[2115,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){!function(e){var s,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,a=Math.floor,i="[BigNumber Error] ",o=i+"Number primitive has more than 15 significant digits: ",c=1e14,l=14,u=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,m=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function f(e){for(var t,s,r=1,n=e.length,a=e[0]+"";r<n;){for(t=e[r++]+"",s=l-t.length;s--;t="0"+t);a+=t}for(n=a.length;48===a.charCodeAt(--n););return a.slice(0,n+1||1)}function g(e,t){var s,r,n=e.c,a=t.c,i=e.s,o=t.s,c=e.e,l=t.e;if(!i||!o)return null;if(s=n&&!n[0],r=a&&!a[0],s||r)return s?r?0:-o:i;if(i!=o)return i;if(s=i<0,r=c==l,!n||!a)return r?0:!n^s?1:-1;if(!r)return c>l^s?1:-1;for(o=(c=n.length)<(l=a.length)?c:l,i=0;i<o;i++)if(n[i]!=a[i])return n[i]>a[i]^s?1:-1;return c==l?0:c>l^s?1:-1}function v(e,t,s,r){if(e<t||e>s||e!==a(e))throw Error(i+(r||"Argument")+("number"==typeof e?e<t||e>s?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return p(e.e/l)==t&&e.c[t]%2!=0}function k(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function y(e,t,s){var r,n;if(t<0){for(n=s+".";++t;n+=s);e=n+e}else if(++t>(r=e.length)){for(n=s,t-=r;--t;n+=s);e+=n}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}s=function e(t){var s,S,w,b,T,E,P,j,I,C,A=J.prototype={constructor:J,toString:null,valueOf:null},x=new J(1),R=20,N=4,M=-7,O=21,F=-1e7,G=1e7,B=!1,L=1,D=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function J(e,t){var s,n,i,c,d,h,m,p,f=this;if(!(f instanceof J))return new J(e,t);if(null==t){if(e&&!0===e._isBigNumber)return f.s=e.s,void(!e.c||e.e>G?f.c=f.e=null:e.e<F?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>G?f.c=f.e=null:(f.e=c,f.c=[e]))}p=String(e)}else{if(!r.test(p=String(e)))return w(f,p,h);f.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(v(t,2,H.length,"Base"),10==t&&$)return z(f=new J(e),R+f.e+1,N);if(p=String(e),h="number"==typeof e){if(0*e!=0)return w(f,p,h,t);if(f.s=1/e<0?(p=p.slice(1),-1):1,J.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else f.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(s=H.slice(0,t),c=d=0,m=p.length;d<m;d++)if(s.indexOf(n=p.charAt(d))<0){if("."==n){if(d>c){c=m;continue}}else if(!i&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){i=!0,d=-1,c=0;continue}return w(f,String(e),h,t)}h=!1,(c=(p=S(p,t,10,f.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(m=p.length;48===p.charCodeAt(--m););if(p=p.slice(d,++m)){if(m-=d,h&&J.DEBUG&&m>15&&(e>u||e!==a(e)))throw Error(o+f.s*e);if((c=c-d-1)>G)f.c=f.e=null;else if(c<F)f.c=[f.e=0];else{if(f.e=c,f.c=[],d=(c+1)%l,c<0&&(d+=l),d<m){for(d&&f.c.push(+p.slice(0,d)),m-=l;d<m;)f.c.push(+p.slice(d,d+=l));d=l-(p=p.slice(d)).length}else d-=m;for(;d--;p+="0");f.c.push(+p)}}else f.c=[f.e=0]}function V(e,t,s,r){var n,a,i,o,c;if(null==s?s=N:v(s,0,8),!e.c)return e.toString();if(n=e.c[0],i=e.e,null==t)c=f(e.c),c=1==r||2==r&&(i<=M||i>=O)?k(c,i):y(c,i,"0");else if(a=(e=z(new J(e),t,s)).e,o=(c=f(e.c)).length,1==r||2==r&&(t<=a||a<=M)){for(;o<t;c+="0",o++);c=k(c,a)}else if(t-=i,c=y(c,a,"0"),a+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=a-o)>0)for(a+1==o&&(c+=".");t--;c+="0");return e.s<0&&n?"-"+c:c}function W(e,t){for(var s,r,n=1,a=new J(e[0]);n<e.length;n++)(!(r=new J(e[n])).s||(s=g(a,r))===t||0===s&&a.s===t)&&(a=r);return a}function q(e,t,s){for(var r=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,r++);return(s=r+s*l-1)>G?e.c=e.e=null:s<F?e.c=[e.e=0]:(e.e=s,e.c=t),e}function z(e,t,s,r){var i,o,u,h,m,p,f,g=e.c,v=d;if(g){e:{for(i=1,h=g[0];h>=10;h/=10,i++);if((o=t-i)<0)o+=l,u=t,m=g[p=0],f=a(m/v[i-u-1]%10);else if((p=n((o+1)/l))>=g.length){if(!r)break e;for(;g.length<=p;g.push(0));m=f=0,i=1,u=(o%=l)-l+1}else{for(m=h=g[p],i=1;h>=10;h/=10,i++);f=(u=(o%=l)-l+i)<0?0:a(m/v[i-u-1]%10)}if(r=r||t<0||null!=g[p+1]||(u<0?m:m%v[i-u-1]),r=s<4?(f||r)&&(0==s||s==(e.s<0?3:2)):f>5||5==f&&(4==s||r||6==s&&(o>0?u>0?m/v[i-u]:0:g[p-1])%10&1||s==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=v[(l-t%l)%l],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,h=1,p--):(g.length=p+1,h=v[l-o],g[p]=u>0?a(m/v[i-u]%v[u])*h:0),r)for(;;){if(0==p){for(o=1,u=g[0];u>=10;u/=10,o++);for(u=g[0]+=h,h=1;u>=10;u/=10,h++);o!=h&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=h,g[p]!=c)break;g[p--]=0,h=1}for(o=g.length;0===g[--o];g.pop());}e.e>G?e.c=e.e=null:e.e<F&&(e.c=[e.e=0])}return e}function K(e){var t,s=e.e;return null===s?e.toString():(t=f(e.c),t=s<=M||s>=O?k(t,s):y(t,s,"0"),e.s<0?"-"+t:t)}return J.clone=e,J.ROUND_UP=0,J.ROUND_DOWN=1,J.ROUND_CEIL=2,J.ROUND_FLOOR=3,J.ROUND_HALF_UP=4,J.ROUND_HALF_DOWN=5,J.ROUND_HALF_EVEN=6,J.ROUND_HALF_CEIL=7,J.ROUND_HALF_FLOOR=8,J.EUCLID=9,J.config=J.set=function(e){var t,s;if(null!=e){if("object"!=typeof e)throw Error(i+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(s=e[t],0,m,t),R=s),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(s=e[t],0,8,t),N=s),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((s=e[t])&&s.pop?(v(s[0],-m,0,t),v(s[1],0,m,t),M=s[0],O=s[1]):(v(s,-m,m,t),M=-(O=s<0?-s:s))),e.hasOwnProperty(t="RANGE"))if((s=e[t])&&s.pop)v(s[0],-m,-1,t),v(s[1],1,m,t),F=s[0],G=s[1];else{if(v(s,-m,m,t),!s)throw Error(i+t+" cannot be zero: "+s);F=-(G=s<0?-s:s)}if(e.hasOwnProperty(t="CRYPTO")){if((s=e[t])!==!!s)throw Error(i+t+" not true or false: "+s);if(s){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!s,Error(i+"crypto unavailable");B=s}else B=s}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(s=e[t],0,9,t),L=s),e.hasOwnProperty(t="POW_PRECISION")&&(v(s=e[t],0,m,t),D=s),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(s=e[t]))throw Error(i+t+" not an object: "+s);U=s}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(s=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(s))throw Error(i+t+" invalid: "+s);$="0123456789"==s.slice(0,10),H=s}}return{DECIMAL_PLACES:R,ROUNDING_MODE:N,EXPONENTIAL_AT:[M,O],RANGE:[F,G],CRYPTO:B,MODULO_MODE:L,POW_PRECISION:D,FORMAT:U,ALPHABET:H}},J.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!J.DEBUG)return!0;var t,s,r=e.c,n=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&n>=-m&&n<=m&&n===a(n)){if(0===r[0]){if(0===n&&1===r.length)return!0;break e}if((t=(n+1)%l)<1&&(t+=l),String(r[0]).length==t){for(t=0;t<r.length;t++)if((s=r[t])<0||s>=c||s!==a(s))break e;if(0!==s)return!0}}}else if(null===r&&null===n&&(null===o||1===o||-1===o))return!0;throw Error(i+"Invalid BigNumber: "+e)},J.maximum=J.max=function(){return W(arguments,-1)},J.minimum=J.min=function(){return W(arguments,1)},J.random=(b=9007199254740992,T=Math.random()*b&2097151?function(){return a(Math.random()*b)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,s,r,o,c,u=0,h=[],p=new J(x);if(null==e?e=R:v(e,0,m),o=n(e/l),B)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)(c=131072*t[u]+(t[u+1]>>>11))>=9e15?(s=crypto.getRandomValues(new Uint32Array(2)),t[u]=s[0],t[u+1]=s[1]):(h.push(c%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw B=!1,Error(i+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(h.push(c%1e14),u+=7);u=o/7}if(!B)for(;u<o;)(c=T())<9e15&&(h[u++]=c%1e14);for(o=h[--u],e%=l,o&&e&&(c=d[l-e],h[u]=a(o/c)*c);0===h[u];h.pop(),u--);if(u<0)h=[r=0];else{for(r=-1;0===h[0];h.splice(0,1),r-=l);for(u=1,c=h[0];c>=10;c/=10,u++);u<l&&(r-=l-u)}return p.e=r,p.c=h,p}),J.sum=function(){for(var e=1,t=arguments,s=new J(t[0]);e<t.length;)s=s.plus(t[e++]);return s},S=function(){var e="0123456789";function t(e,t,s,r){for(var n,a,i=[0],o=0,c=e.length;o<c;){for(a=i.length;a--;i[a]*=t);for(i[0]+=r.indexOf(e.charAt(o++)),n=0;n<i.length;n++)i[n]>s-1&&(null==i[n+1]&&(i[n+1]=0),i[n+1]+=i[n]/s|0,i[n]%=s)}return i.reverse()}return function(r,n,a,i,o){var c,l,u,d,h,m,p,g,v=r.indexOf("."),_=R,k=N;for(v>=0&&(d=D,D=0,r=r.replace(".",""),m=(g=new J(n)).pow(r.length-v),D=d,g.c=t(y(f(m.c),m.e,"0"),10,a,e),g.e=g.c.length),u=d=(p=t(r,n,a,o?(c=H,e):(c=e,H))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(v<0?--u:(m.c=p,m.e=u,m.s=i,p=(m=s(m,g,_,k,a)).c,h=m.r,u=m.e),v=p[l=u+_+1],d=a/2,h=h||l<0||null!=p[l+1],h=k<4?(null!=v||h)&&(0==k||k==(m.s<0?3:2)):v>d||v==d&&(4==k||h||6==k&&1&p[l-1]||k==(m.s<0?8:7)),l<1||!p[0])r=h?y(c.charAt(1),-_,c.charAt(0)):c.charAt(0);else{if(p.length=l,h)for(--a;++p[--l]>a;)p[l]=0,l||(++u,p=[1].concat(p));for(d=p.length;!p[--d];);for(v=0,r="";v<=d;r+=c.charAt(p[v++]));r=y(r,u,c.charAt(0))}return r}}(),s=function(){function e(e,t,s){var r,n,a,i,o=0,c=e.length,l=t%h,u=t/h|0;for(e=e.slice();c--;)o=((n=l*(a=e[c]%h)+(r=u*a+(i=e[c]/h|0)*l)%h*h+o)/s|0)+(r/h|0)+u*i,e[c]=n%s;return o&&(e=[o].concat(e)),e}function t(e,t,s,r){var n,a;if(s!=r)a=s>r?1:-1;else for(n=a=0;n<s;n++)if(e[n]!=t[n]){a=e[n]>t[n]?1:-1;break}return a}function s(e,t,s,r){for(var n=0;s--;)e[s]-=n,n=e[s]<t[s]?1:0,e[s]=n*r+e[s]-t[s];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,n,i,o,u){var d,h,m,f,g,v,_,k,y,S,w,b,T,E,P,j,I,C=r.s==n.s?1:-1,A=r.c,x=n.c;if(!(A&&A[0]&&x&&x[0]))return new J(r.s&&n.s&&(A?!x||A[0]!=x[0]:x)?A&&0==A[0]||!x?0*C:C/0:NaN);for(y=(k=new J(C)).c=[],C=i+(h=r.e-n.e)+1,u||(u=c,h=p(r.e/l)-p(n.e/l),C=C/l|0),m=0;x[m]==(A[m]||0);m++);if(x[m]>(A[m]||0)&&h--,C<0)y.push(1),f=!0;else{for(E=A.length,j=x.length,m=0,C+=2,(g=a(u/(x[0]+1)))>1&&(x=e(x,g,u),A=e(A,g,u),j=x.length,E=A.length),T=j,w=(S=A.slice(0,j)).length;w<j;S[w++]=0);I=x.slice(),I=[0].concat(I),P=x[0],x[1]>=u/2&&P++;do{if(g=0,(d=t(x,S,j,w))<0){if(b=S[0],j!=w&&(b=b*u+(S[1]||0)),(g=a(b/P))>1)for(g>=u&&(g=u-1),_=(v=e(x,g,u)).length,w=S.length;1==t(v,S,_,w);)g--,s(v,j<_?I:x,_,u),_=v.length,d=1;else 0==g&&(d=g=1),_=(v=x.slice()).length;if(_<w&&(v=[0].concat(v)),s(S,v,w,u),w=S.length,-1==d)for(;t(x,S,j,w)<1;)g++,s(S,j<w?I:x,w,u),w=S.length}else 0===d&&(g++,S=[0]);y[m++]=g,S[0]?S[w++]=A[T]||0:(S=[A[T]],w=1)}while((T++<E||null!=S[0])&&C--);f=null!=S[0],y[0]||y.splice(0,1)}if(u==c){for(m=1,C=y[0];C>=10;C/=10,m++);z(k,i+(k.e=m+h*l-1)+1,o,f)}else k.e=h,k.r=+f;return k}}(),E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,j=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g,w=function(e,t,s,r){var n,a=s?t:t.replace(C,"");if(I.test(a))e.s=isNaN(a)?null:a<0?-1:1;else{if(!s&&(a=a.replace(E,(function(e,t,s){return n="x"==(s=s.toLowerCase())?16:"b"==s?2:8,r&&r!=n?e:t})),r&&(n=r,a=a.replace(P,"$1").replace(j,"0.$1")),t!=a))return new J(a,n);if(J.DEBUG)throw Error(i+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new J(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return g(this,new J(e,t))},A.decimalPlaces=A.dp=function(e,t){var s,r,n,a=this;if(null!=e)return v(e,0,m),null==t?t=N:v(t,0,8),z(new J(a),e+a.e+1,t);if(!(s=a.c))return null;if(r=((n=s.length-1)-p(this.e/l))*l,n=s[n])for(;n%10==0;n/=10,r--);return r<0&&(r=0),r},A.dividedBy=A.div=function(e,t){return s(this,new J(e,t),R,N)},A.dividedToIntegerBy=A.idiv=function(e,t){return s(this,new J(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var s,r,o,c,u,d,h,m,p=this;if((e=new J(e)).c&&!e.isInteger())throw Error(i+"Exponent not an integer: "+K(e));if(null!=t&&(t=new J(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return m=new J(Math.pow(+K(p),u?e.s*(2-_(e)):+K(e))),t?m.mod(t):m;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new J(NaN);(r=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return c=p.s<0&&_(e)?-0:0,p.e>-1&&(c=1/c),new J(d?1/c:c);D&&(c=n(D/l+2))}for(u?(s=new J(.5),d&&(e.s=1),h=_(e)):h=(o=Math.abs(+K(e)))%2,m=new J(x);;){if(h){if(!(m=m.times(p)).c)break;c?m.c.length>c&&(m.c.length=c):r&&(m=m.mod(t))}if(o){if(0===(o=a(o/2)))break;h=o%2}else if(z(e=e.times(s),e.e+1,1),e.e>14)h=_(e);else{if(0===(o=+K(e)))break;h=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}return r?m:(d&&(m=x.div(m)),t?m.mod(t):c?z(m,D,N,undefined):m)},A.integerValue=function(e){var t=new J(this);return null==e?e=N:v(e,0,8),z(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===g(this,new J(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return g(this,new J(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=g(this,new J(e,t)))||0===t},A.isInteger=function(){return!!this.c&&p(this.e/l)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return g(this,new J(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=g(this,new J(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var s,r,n,a,i=this,o=i.s;if(t=(e=new J(e,t)).s,!o||!t)return new J(NaN);if(o!=t)return e.s=-t,i.plus(e);var u=i.e/l,d=e.e/l,h=i.c,m=e.c;if(!u||!d){if(!h||!m)return h?(e.s=-t,e):new J(m?i:NaN);if(!h[0]||!m[0])return m[0]?(e.s=-t,e):new J(h[0]?i:3==N?-0:0)}if(u=p(u),d=p(d),h=h.slice(),o=u-d){for((a=o<0)?(o=-o,n=h):(d=u,n=m),n.reverse(),t=o;t--;n.push(0));n.reverse()}else for(r=(a=(o=h.length)<(t=m.length))?o:t,o=t=0;t<r;t++)if(h[t]!=m[t]){a=h[t]<m[t];break}if(a&&(n=h,h=m,m=n,e.s=-e.s),(t=(r=m.length)-(s=h.length))>0)for(;t--;h[s++]=0);for(t=c-1;r>o;){if(h[--r]<m[r]){for(s=r;s&&!h[--s];h[s]=t);--h[s],h[r]+=c}h[r]-=m[r]}for(;0==h[0];h.splice(0,1),--d);return h[0]?q(e,h,d):(e.s=3==N?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var r,n,a=this;return e=new J(e,t),!a.c||!e.s||e.c&&!e.c[0]?new J(NaN):!e.c||a.c&&!a.c[0]?new J(a):(9==L?(n=e.s,e.s=1,r=s(a,e,0,3),e.s=n,r.s*=n):r=s(a,e,0,L),(e=a.minus(r.times(e))).c[0]||1!=L||(e.s=a.s),e)},A.multipliedBy=A.times=function(e,t){var s,r,n,a,i,o,u,d,m,f,g,v,_,k,y,S=this,w=S.c,b=(e=new J(e,t)).c;if(!(w&&b&&w[0]&&b[0]))return!S.s||!e.s||w&&!w[0]&&!b||b&&!b[0]&&!w?e.c=e.e=e.s=null:(e.s*=S.s,w&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=p(S.e/l)+p(e.e/l),e.s*=S.s,(u=w.length)<(f=b.length)&&(_=w,w=b,b=_,n=u,u=f,f=n),n=u+f,_=[];n--;_.push(0));for(k=c,y=h,n=f;--n>=0;){for(s=0,g=b[n]%y,v=b[n]/y|0,a=n+(i=u);a>n;)s=((d=g*(d=w[--i]%y)+(o=v*d+(m=w[i]/y|0)*g)%y*y+_[a]+s)/k|0)+(o/y|0)+v*m,_[a--]=d%k;_[a]=s}return s?++r:_.splice(0,1),q(e,_,r)},A.negated=function(){var e=new J(this);return e.s=-e.s||null,e},A.plus=function(e,t){var s,r=this,n=r.s;if(t=(e=new J(e,t)).s,!n||!t)return new J(NaN);if(n!=t)return e.s=-t,r.minus(e);var a=r.e/l,i=e.e/l,o=r.c,u=e.c;if(!a||!i){if(!o||!u)return new J(n/0);if(!o[0]||!u[0])return u[0]?e:new J(o[0]?r:0*n)}if(a=p(a),i=p(i),o=o.slice(),n=a-i){for(n>0?(i=a,s=u):(n=-n,s=o),s.reverse();n--;s.push(0));s.reverse()}for((n=o.length)-(t=u.length)<0&&(s=u,u=o,o=s,t=n),n=0;t;)n=(o[--t]=o[t]+u[t]+n)/c|0,o[t]=c===o[t]?0:o[t]%c;return n&&(o=[n].concat(o),++i),q(e,o,i)},A.precision=A.sd=function(e,t){var s,r,n,a=this;if(null!=e&&e!==!!e)return v(e,1,m),null==t?t=N:v(t,0,8),z(new J(a),e,t);if(!(s=a.c))return null;if(r=(n=s.length-1)*l+1,n=s[n]){for(;n%10==0;n/=10,r--);for(n=s[0];n>=10;n/=10,r++);}return e&&a.e+1>r&&(r=a.e+1),r},A.shiftedBy=function(e){return v(e,-9007199254740991,u),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,r,n,a,i=this,o=i.c,c=i.s,l=i.e,u=R+4,d=new J("0.5");if(1!==c||!o||!o[0])return new J(!c||c<0&&(!o||o[0])?NaN:o?i:1/0);if(0==(c=Math.sqrt(+K(i)))||c==1/0?(((t=f(o)).length+l)%2==0&&(t+="0"),c=Math.sqrt(+t),l=p((l+1)/2)-(l<0||l%2),r=new J(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new J(c+""),r.c[0])for((c=(l=r.e)+u)<3&&(c=0);;)if(a=r,r=d.times(a.plus(s(i,a,u,1))),f(a.c).slice(0,c)===(t=f(r.c)).slice(0,c)){if(r.e<l&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(z(r,r.e+R+2,1),e=!r.times(r).eq(i));break}if(!n&&(z(a,a.e+R+2,0),a.times(a).eq(i))){r=a;break}u+=4,c+=4,n=1}return z(r,r.e+R+1,N,e)},A.toExponential=function(e,t){return null!=e&&(v(e,0,m),e++),V(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(v(e,0,m),e=e+this.e+1),V(this,e,t)},A.toFormat=function(e,t,s){var r,n=this;if(null==s)null!=e&&t&&"object"==typeof t?(s=t,t=null):e&&"object"==typeof e?(s=e,e=t=null):s=U;else if("object"!=typeof s)throw Error(i+"Argument not an object: "+s);if(r=n.toFixed(e,t),n.c){var a,o=r.split("."),c=+s.groupSize,l=+s.secondaryGroupSize,u=s.groupSeparator||"",d=o[0],h=o[1],m=n.s<0,p=m?d.slice(1):d,f=p.length;if(l&&(a=c,c=l,l=a,f-=a),c>0&&f>0){for(a=f%c||c,d=p.substr(0,a);a<f;a+=c)d+=u+p.substr(a,c);l>0&&(d+=u+p.slice(a)),m&&(d="-"+d)}r=h?d+(s.decimalSeparator||"")+((l=+s.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(s.fractionGroupSeparator||"")):h):d}return(s.prefix||"")+r+(s.suffix||"")},A.toFraction=function(e){var t,r,n,a,o,c,u,h,m,p,g,v,_=this,k=_.c;if(null!=e&&(!(u=new J(e)).isInteger()&&(u.c||1!==u.s)||u.lt(x)))throw Error(i+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+K(u));if(!k)return new J(_);for(t=new J(x),m=r=new J(x),n=h=new J(x),v=f(k),o=t.e=v.length-_.e-1,t.c[0]=d[(c=o%l)<0?l+c:c],e=!e||u.comparedTo(t)>0?o>0?t:m:u,c=G,G=1/0,u=new J(v),h.c[0]=0;p=s(u,t,0,1),1!=(a=r.plus(p.times(n))).comparedTo(e);)r=n,n=a,m=h.plus(p.times(a=m)),h=a,t=u.minus(p.times(a=t)),u=a;return a=s(e.minus(r),n,0,1),h=h.plus(a.times(m)),r=r.plus(a.times(n)),h.s=m.s=_.s,g=s(m,n,o*=2,N).minus(_).abs().comparedTo(s(h,r,o,N).minus(_).abs())<1?[m,n]:[h,r],G=c,g},A.toNumber=function(){return+K(this)},A.toPrecision=function(e,t){return null!=e&&v(e,1,m),V(this,e,t,2)},A.toString=function(e){var t,s=this,r=s.s,n=s.e;return null===n?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=n<=M||n>=O?k(f(s.c),n):y(f(s.c),n,"0"):10===e&&$?t=y(f((s=z(new J(s),R+n+1,N)).c),s.e,"0"):(v(e,2,H.length,"Base"),t=S(y(f(s.c),n,"0"),10,e,r,!0)),r<0&&s.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return K(this)},A._isBigNumber=!0,null!=t&&J.set(t),J}(),s.default=s.BigNumber=s,"function"==typeof define&&define.amd?define((function(){return s})):void 0!==t&&t.exports?t.exports=s:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=s)}(this)}}},{package:"@metamask/smart-transactions-controller>bignumber.js",file:"node_modules/@metamask/smart-transactions-controller/node_modules/bignumber.js/bignumber.js"}],[2116,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports=[{constant:!1,inputs:[{name:"_new",type:"address"}],name:"setOwner",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSignatures",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"drain",outputs:[],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"bytes4"}],name:"entries",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_method",type:"string"}],name:"register",outputs:[{name:"",type:"bool"}],payable:!1,type:"function"},{inputs:[],type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"creator",type:"address"},{indexed:!0,name:"signature",type:"bytes4"},{indexed:!1,name:"method",type:"string"}],name:"Registered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"old",type:"address"},{indexed:!0,name:"current",type:"address"}],name:"NewOwner",type:"event"}]}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/abi.json"}],[2117,{"./abi.json":2116,"./registry-map.json":2118,"@metamask/ethjs-contract":2050,"@metamask/ethjs-query":2053},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.MethodRegistry=void 0;const n=r(e("@metamask/ethjs-query")),a=r(e("@metamask/ethjs-contract")),i=r(e("./registry-map.json")),o=r(e("./abi.json"));s.MethodRegistry=class{constructor(e){if(!e.provider)throw new Error("Missing required 'provider' option");const t=i.default[e.network||"1"];if(!t)throw new Error("No method registry found on the requested network.");const s=new n.default(e.provider),r=(0,a.default)(s);this.registry=r(o.default).at(t)}async lookup(e){const t=await this.registry.entries(e);return t?t[0]:undefined}parse(e){const t=e.match(/^([^)(]*)\((.*)\)([^)(]*)$/u);let s;if(s=t?t[1].charAt(0).toUpperCase()+t[1].slice(1).split(/(?=[A-Z])/u).join(" "):"",t){const r=e.match(new RegExp(`${t[1]}\\(+([a-z1-9,()\\[\\]]+)\\)`,"u"));let n,a=[];return r&&(n=r[1].match(/[A-z1-9]+/gu),n&&(a=n.map((e=>({type:e}))))),{name:s,args:a}}return{}}}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/index.js"}],[2118,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={1:"0x44691B39d1a75dC4E0A0346CBB15E310e6ED1E86"}}}},{package:"@metamask/smart-transactions-controller>@metamask/transaction-controller>eth-method-registry",file:"node_modules/@metamask/smart-transactions-controller/node_modules/eth-method-registry/dist/registry-map.json"}],[2119,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={name:"@metamask/smart-transactions-controller",version:"10.1.6",description:"Improves success rates for swaps by trialing transactions privately and finding minimum fees",repository:{type:"git",url:"https://github.com/MetaMask/smart-transactions-controller.git"},license:"SEE LICENSE IN LICENSE",main:"dist/index.js",types:"dist/index.d.ts",files:["dist/"],scripts:{build:"tsc --project .","build:clean":"rm -rf dist && yarn build","build:link":"yarn build && cd dist && yarn link && rm -rf node_modules && cd ..",lint:"yarn lint:eslint && yarn lint:misc --check","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' '**/*.yml' '!.yarnrc.yml' --ignore-path .gitignore",prepack:"./scripts/prepack.sh",test:"jest","test:watch":"jest --watchAll"},dependencies:{"@babel/runtime":"^7.24.1","@ethereumjs/tx":"^5.2.1","@ethereumjs/util":"^9.0.2","@ethersproject/bytes":"^5.7.0","@metamask/base-controller":"^6.0.0","@metamask/controller-utils":"^11.0.0","@metamask/eth-query":"^4.0.0","@metamask/network-controller":"^19.0.0","@metamask/polling-controller":"^8.0.0","@metamask/transaction-controller":"^32.0.0","bignumber.js":"^9.0.1",events:"^3.3.0","fast-json-patch":"^3.1.0",lodash:"^4.17.21"},devDependencies:{"@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"^3.1.0","@metamask/eslint-config":"^12.2.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@types/jest":"^26.0.24","@types/lodash":"^4.14.194","@types/node":"^18.19.17","@types/sinon":"^9.0.10","@typescript-eslint/eslint-plugin":"^5.33.0","@typescript-eslint/parser":"^5.33.0",eslint:"^8.48.0","eslint-config-prettier":"^8.8.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^39.2.9","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","isomorphic-fetch":"^3.0.0",jest:"^29.7.0",nock:"^14.0.0-beta.7",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.4.3",sinon:"^9.2.4","ts-jest":"^29.1.4",typescript:"~4.8.4"},packageManager:"yarn@3.2.1",engines:{node:"^18.18 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>keccak":!1,"@metamask/controller-utils>ethereumjs-util>ethereum-cryptography>secp256k1":!1,"@metamask/controller-utils>babel-runtime>core-js":!1}}}}}},{package:"@metamask/smart-transactions-controller",file:"node_modules/@metamask/smart-transactions-controller/package.json"}],[212,{"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){(0,r.hasProperty)(e,"PreferencesController")&&(0,r.isObject)(e.PreferencesController)&&(0,r.hasProperty)(e.PreferencesController,"frequentRpcListDetail")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"networkConfigurations")&&delete e.PreferencesController.frequentRpcListDetail;return{...e}};var r=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-082.ts"}],[2120,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e=>(e[e.Unverified=0]="Unverified",e[e.Blocked=1]="Blocked",e[e.Verified=2]="Verified",e[e.Unavailable=3]="Unavailable",e))(r||{});s.SnapsRegistryStatus=r}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4CA3O64H.js"}],[2121,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-4URGXJP7.js"}],[2122,{"./chunk-EXN2TFDJ.js":2132,"./chunk-KH72WRHR.js":2140,"@metamask/post-message-stream":1850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-KH72WRHR.js"),a=e("./chunk-EXN2TFDJ.js"),i=e("@metamask/post-message-stream"),o=class extends n.ProxyExecutionService{constructor({messenger:e,setupSnapProvider:t,offscreenPromise:s}){super({messenger:e,setupSnapProvider:t,stream:new(0,i.BrowserRuntimePostMessageStream)({name:"parent",target:"child"})}),a.__privateAdd.call(void 0,this,r,void 0),a.__privateSet.call(void 0,this,r,s)}async initEnvStream(e){return await a.__privateGet.call(void 0,this,r),await super.initEnvStream(e)}};r=new WeakMap,s.OffscreenExecutionService=o}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-6ERB63FH.js"}],[2123,{"./chunk-EXN2TFDJ.js":2132,"@metamask/post-message-stream":1850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/post-message-stream"),l=class extends c.BasePostMessageStream{constructor({stream:e,jobId:t}){super(),o.__privateAdd.call(void 0,this,a),o.__privateAdd.call(void 0,this,r,void 0),o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,r,e),o.__privateSet.call(void 0,this,n,t),o.__privateGet.call(void 0,this,r).on("data",o.__privateMethod.call(void 0,this,a,i).bind(this))}_postMessage(e){o.__privateGet.call(void 0,this,r).write({jobId:o.__privateGet.call(void 0,this,n),data:e})}};r=new WeakMap,n=new WeakMap,a=new WeakSet,i=function(e){e.jobId===o.__privateGet.call(void 0,this,n)&&this.push(e.data)},s.ProxyPostMessageStream=l}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-7Y6P5FRN.js"}],[2124,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});s.RequestQueue=class{constructor(e){this.maxQueueSize=e,this.queueSizes=new Map}increment(e){const t=this.queueSizes.get(e)??0;if(t>=this.maxQueueSize)throw new Error("Maximum number of requests reached. Try again later.");this.queueSizes.set(e,t+1)}decrement(e){const t=this.queueSizes.get(e)??0;if(0===t)throw new Error(`Cannot decrement, ${e} does not have any outstanding requests.`);this.queueSizes.set(e,t-1)}get(e){return this.queueSizes.get(e)??0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-AP7CJ6DA.js"}],[2125,{"@metamask/utils":2739,"@xstate/fsm":3135},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils"),n=e("@xstate/fsm");s.validateMachine=function(e){r.assert.call(void 0,"_options"in e,"The machine is not an @xstate/fsm machine");const t=e,s=new Set,n=e=>{return(t=e,Array.isArray(t)?t:null==t?[]:[t]).flatMap((e=>"string"==typeof e?[e]:(r.assert.call(void 0,"function"==typeof e),[]))).forEach(s.add.bind(s));var t};for(const e of Object.values(t.config.states)){n(e.entry),n(e.exit);for(const t of Object.values(e.on??{}))n(t.actions)}s.forEach((e=>r.assert.call(void 0,void 0!==t._options.actions&&e in t._options.actions,`Action "${e}" doesn't have an implementation`)))},s.forceStrict=function(e){let t=!1;e.subscribe((e=>{r.assert.call(void 0,!t||e.changed,"Invalid state transition"),t=!0}));const s=e.send.bind(e);e.send=(...t)=>(r.assert.call(void 0,e.status===n.InterpreterStatus.Running,"Interpreter is stopped"),s(...t))}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BO2ZDPWV.js"}],[2126,{"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils");s.Timer=class{constructor(e){r.assert.call(void 0,!Number.isNaN(e),new TypeError("Can't start a timer with NaN time")),r.assert.call(void 0,e>=0,new TypeError("Can't start a timer with negative time")),this.state={value:"stopped",remaining:e}}get status(){return this.state.value}get remaining(){return this.state.remaining}cancel(){r.assert.call(void 0,"paused"===this.status||"running"===this.status,new Error("Tried to cancel a not running Timer")),this.onFinish(!1)}finish(){r.assert.call(void 0,"finished"!==this.status,new Error("Tried to finish a finished Timer.")),this.onFinish(!0)}pause(){r.assert.call(void 0,"running"===this.state.value,new Error("Tried to pause a not running Timer"));const{callback:e,start:t,timeout:s,remaining:n}=this.state;void 0!==s&&clearTimeout(s),this.state={value:"paused",callback:e,remaining:n-(Date.now()-t)}}start(e){r.assert.call(void 0,"stopped"===this.state.value,new Error("Tried to start an already running Timer"));const{remaining:t}=this.state;this.state={value:"paused",remaining:t,callback:e},this.resume()}resume(){r.assert.call(void 0,"paused"===this.state.value,new Error("Tried to resume not paused Timer"));const{remaining:e,callback:t}=this.state,s=Date.now();let n;e!==Number.POSITIVE_INFINITY&&(n=setTimeout((()=>this.onFinish(!0)),e)),this.state={value:"running",callback:t,remaining:e,start:s,timeout:n}}onFinish(e){r.assert.call(void 0,"running"===this.state.value||"paused"===this.state.value),"running"===this.state.value&&void 0!==this.state.timeout&&clearTimeout(this.state.timeout);const{callback:t,remaining:s}=this.state;this.state={value:"finished",remaining:"running"===this.state.value?s-(Date.now()-this.state.start):s},e&&t()}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BOFPNIRX.js"}],[2127,{"./chunk-EXN2TFDJ.js":2132,"./chunk-H7TB7I6Z.js":2135,"@metamask/base-controller":2159,"@metamask/snaps-utils":2227,"@metamask/utils":2739,nanoid:2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m=e("./chunk-H7TB7I6Z.js"),p=e("./chunk-EXN2TFDJ.js"),f=e("@metamask/base-controller"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),_=e("nanoid"),k=1e7,y="SnapInterfaceController",S=class extends f.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{interfaces:{persist:!1,anonymous:!1}},name:y,state:{interfaces:{},...t}}),p.__privateAdd.call(void 0,this,r),p.__privateAdd.call(void 0,this,a),p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,l),p.__privateAdd.call(void 0,this,d),p.__privateMethod.call(void 0,this,r,n).call(this)}async createInterface(e,t,s){const r=m.getJsxInterface.call(void 0,t);await p.__privateMethod.call(void 0,this,d,h).call(this,r),m.validateInterfaceContext.call(void 0,s);const n=_.nanoid.call(void 0),a=m.constructState.call(void 0,{},r);return this.update((t=>{t.interfaces[n]={snapId:e,content:r,state:a,context:s??null}})),n}getInterface(e,t){return p.__privateMethod.call(void 0,this,a,i).call(this,e,t),this.state.interfaces[t]}async updateInterface(e,t,s){p.__privateMethod.call(void 0,this,a,i).call(this,e,t);const r=m.getJsxInterface.call(void 0,s);await p.__privateMethod.call(void 0,this,d,h).call(this,r);const n=this.state.interfaces[t].state,o=m.constructState.call(void 0,n,r);this.update((e=>{e.interfaces[t].state=o,e.interfaces[t].content=r}))}deleteInterface(e){this.update((t=>{delete t.interfaces[e]}))}updateInterfaceState(e,t){this.update((s=>{s.interfaces[e].state=t}))}};r=new WeakSet,n=function(){this.messagingSystem.registerActionHandler(`${y}:createInterface`,this.createInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:getInterface`,this.getInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:updateInterface`,this.updateInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:deleteInterface`,this.deleteInterface.bind(this)),this.messagingSystem.registerActionHandler(`${y}:updateInterfaceState`,this.updateInterfaceState.bind(this))},a=new WeakSet,i=function(e,t){const s=this.state.interfaces[t];v.assert.call(void 0,void 0!==s,`Interface with id '${t}' not found.`),v.assert.call(void 0,s.snapId===e,`Interface not created by ${e}.`)},o=new WeakSet,c=async function(){await this.messagingSystem.call("PhishingController:maybeUpdateState")},l=new WeakSet,u=function(e){return this.messagingSystem.call("PhishingController:testOrigin",e).result},d=new WeakSet,h=async function(e){const t=g.getJsonSizeUnsafe.call(void 0,e);v.assert.call(void 0,t<=k,"A Snap UI may not be larger than 10 MB."),await p.__privateMethod.call(void 0,this,o,c).call(this),g.validateJsxLinks.call(void 0,e,p.__privateMethod.call(void 0,this,l,u).bind(this))},s.SnapInterfaceController=S}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-BUHS4M6F.js"}],[2128,{"./chunk-BOFPNIRX.js":2126,"@metamask/snaps-sdk":2575,"@metamask/snaps-utils":2227,"fast-deep-equal":3842},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-BOFPNIRX.js"),a=e("@metamask/snaps-sdk"),i=e("@metamask/snaps-utils"),o=e("fast-deep-equal"),c=(r=o)&&r.__esModule?r:{default:r};function l(e,t){return Object.entries(e).reduce(((e,[s,r])=>(s in t||(e[s]=r),e)),{})}function u(e,t){let s;const r=new Promise(((r,n)=>{e.start((()=>{void 0===t?r():r(t)})),s=n}));return r.cancel=()=>{"finished"!==e.status&&(e.cancel(),s(new Error("The delay has been canceled.")))},r}var d=Symbol("Used to check if the requested promise has timeout (see withTimeout)");async function h(e,t){return t&&0!==t.length?await Promise.all(t.map((async t=>e.fetch(t)))):[]}s.setDiff=l,s.permissionsDiff=function(e,t){return Object.entries(e).reduce(((e,[s,r])=>{const n=s in t;return(!n||n&&!c.default.call(void 0,r.caveats??[],t[s].caveats??[]))&&(e[s]=r),e}),{})},s.delay=function(e,t){return u(new(0,n.Timer)(e),t)},s.delayWithTimer=u,s.hasTimedOut=d,s.withTimeout=async function(e,t){const s=u("number"==typeof t?new(0,n.Timer)(t):t,d);try{return await Promise.race([e,s])}finally{s.cancel()}},s.getSnapFiles=h,s.fetchSnap=async function(e,t){try{const e=await t.manifest(),s=await t.fetch(e.result.source.location.npm.filePath),{iconPath:r}=e.result.source.location.npm,n=r?await t.fetch(r):void 0,a=await h(t,e.result.source.files);await Promise.all(a.map((async e=>{e.data.base64=await i.encodeBase64.call(void 0,e)})));const o=await h(t,e.result.source.locales),c={manifest:e,sourceCode:s,svgIcon:n,auxiliaryFiles:a,localizationFiles:i.getValidatedLocalizationFiles.call(void 0,o)};return await i.validateFetchedSnap.call(void 0,c),c}catch(t){throw new Error(`Failed to fetch snap "${e}": ${a.getErrorMessage.call(void 0,t)}.`)}},s.calculateConnectionsChange=function(e,t){const s=l(t,e),r=l(e,t);return{newConnections:s,unusedConnections:r,approvedConnections:l(e,r)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CDTGUNSA.js"}],[2129,{"./chunk-EXN2TFDJ.js":2132,"@metamask/base-controller":2159,"@metamask/snaps-registry":2398,"@metamask/snaps-utils":2227,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y,S,w,b,T,E,P,j,I,C=e("./chunk-EXN2TFDJ.js"),A=e("@metamask/base-controller"),x=e("@metamask/snaps-registry"),R=e("@metamask/snaps-utils"),N=e("@metamask/utils"),M={database:null,lastUpdated:null,databaseUnavailable:!1},O=class extends A.BaseController{constructor({messenger:e,state:t,url:s={registry:"https://acl.execution.metamask.io/latest/registry.json",signature:"https://acl.execution.metamask.io/latest/signature.json"},publicKey:u="0x025b65308f0f0fb8bc7f7ff87bfc296e0330eee5d3c1d1ee4a048b2fd6a86fa0a6",fetchFunction:p=globalThis.fetch.bind(globalThis),recentFetchThreshold:g=N.inMilliseconds.call(void 0,5,N.Duration.Minute),refetchOnAllowlistMiss:_=!0}){super({messenger:e,metadata:{database:{persist:!0,anonymous:!1},lastUpdated:{persist:!0,anonymous:!1},databaseUnavailable:{persist:!0,anonymous:!1}},name:"SnapsRegistry",state:{...M,...t}}),C.__privateAdd.call(void 0,this,l),C.__privateAdd.call(void 0,this,d),C.__privateAdd.call(void 0,this,m),C.__privateAdd.call(void 0,this,f),C.__privateAdd.call(void 0,this,v),C.__privateAdd.call(void 0,this,k),C.__privateAdd.call(void 0,this,S),C.__privateAdd.call(void 0,this,b),C.__privateAdd.call(void 0,this,E),C.__privateAdd.call(void 0,this,j),C.__privateAdd.call(void 0,this,r,void 0),C.__privateAdd.call(void 0,this,n,void 0),C.__privateAdd.call(void 0,this,a,void 0),C.__privateAdd.call(void 0,this,i,void 0),C.__privateAdd.call(void 0,this,o,void 0),C.__privateAdd.call(void 0,this,c,void 0),C.__privateSet.call(void 0,this,r,s),C.__privateSet.call(void 0,this,n,u),C.__privateSet.call(void 0,this,a,p),C.__privateSet.call(void 0,this,i,g),C.__privateSet.call(void 0,this,o,_),C.__privateSet.call(void 0,this,c,null),this.messagingSystem.registerActionHandler("SnapsRegistry:get",(async(...e)=>C.__privateMethod.call(void 0,this,k,y).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:getMetadata",(async(...e)=>C.__privateMethod.call(void 0,this,b,T).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:resolveVersion",(async(...e)=>C.__privateMethod.call(void 0,this,S,w).call(this,...e))),this.messagingSystem.registerActionHandler("SnapsRegistry:update",(async()=>C.__privateMethod.call(void 0,this,d,h).call(this)))}};r=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakSet,u=function(){return this.state.lastUpdated&&Date.now()-this.state.lastUpdated<C.__privateGet.call(void 0,this,i)},d=new WeakSet,h=async function(){C.__privateGet.call(void 0,this,c)?await C.__privateGet.call(void 0,this,c):(null===C.__privateGet.call(void 0,this,c)&&C.__privateSet.call(void 0,this,c,C.__privateMethod.call(void 0,this,m,p).call(this)),await C.__privateGet.call(void 0,this,c),C.__privateSet.call(void 0,this,c,null))},m=new WeakSet,p=async function(){if(!C.__privateMethod.call(void 0,this,l,u).call(this))try{const e=await C.__privateMethod.call(void 0,this,j,I).call(this,C.__privateGet.call(void 0,this,r).registry),t=await C.__privateMethod.call(void 0,this,j,I).call(this,C.__privateGet.call(void 0,this,r).signature);C.__privateMethod.call(void 0,this,E,P).call(this,e,t),this.update((t=>{t.database=JSON.parse(e),t.lastUpdated=Date.now(),t.databaseUnavailable=!1}))}catch{this.update((e=>{e.databaseUnavailable=!0}))}},f=new WeakSet,g=async function(){return null===this.state.database&&await C.__privateMethod.call(void 0,this,d,h).call(this),this.state.database},v=new WeakSet,_=async function(e,t,s=!1){const r=await C.__privateMethod.call(void 0,this,f,g).call(this),n=r?.blockedSnaps.find((s=>"id"in s?s.id===e&&N.satisfiesVersionRange.call(void 0,t.version,s.versionRange):s.checksum===t.checksum));if(n)return{status:1,reason:n.reason};const a=r?.verifiedSnaps[e],i=a?.versions?.[t.version];return i&&i.checksum===t.checksum?{status:2}:C.__privateGet.call(void 0,this,o)&&!s?(await C.__privateMethod.call(void 0,this,d,h).call(this),C.__privateMethod.call(void 0,this,v,_).call(this,e,t,!0)):{status:this.state.databaseUnavailable?3:0}},k=new WeakSet,y=async function(e){return Object.entries(e).reduce((async(e,[t,s])=>{const r=await C.__privateMethod.call(void 0,this,v,_).call(this,t,s),n=await e;return n[t]=r,n}),Promise.resolve({}))},S=new WeakSet,w=async function(e,t,s=!1){const r=await C.__privateMethod.call(void 0,this,f,g).call(this),n=r?.verifiedSnaps[e]?.versions??null;if(!n&&C.__privateGet.call(void 0,this,o)&&!s)return await C.__privateMethod.call(void 0,this,d,h).call(this),C.__privateMethod.call(void 0,this,S,w).call(this,e,t,!0);if(!n)return t;const a=R.getTargetVersion.call(void 0,Object.keys(n),t);return a||!C.__privateGet.call(void 0,this,o)||s?a?(N.assertIsSemVerRange.call(void 0,a),a):t:(await C.__privateMethod.call(void 0,this,d,h).call(this),C.__privateMethod.call(void 0,this,S,w).call(this,e,t,!0))},b=new WeakSet,T=async function(e){const t=await C.__privateMethod.call(void 0,this,f,g).call(this);return t?.verifiedSnaps[e]?.metadata??null},E=new WeakSet,P=function(e,t){N.assert.call(void 0,C.__privateGet.call(void 0,this,n),"No public key provided.");const s=x.verify.call(void 0,{registry:e,signature:JSON.parse(t),publicKey:C.__privateGet.call(void 0,this,n)});N.assert.call(void 0,s,"Invalid registry signature.")},j=new WeakSet,I=async function(e){const t=await C.__privateGet.call(void 0,this,a).call(this,e);if(!t.ok)throw new Error(`Failed to fetch ${e}.`);return await t.text()},s.JsonSnapsRegistry=O}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-CPUUURMT.js"}],[213,{"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){(0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"network")&&(0,r.hasProperty)(e.NetworkController,"networkId")&&delete e.NetworkController.network;return{...e}};var r=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-084.ts"}],[2130,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-D74XJG2L.js"}],[2131,{"./chunk-AP7CJ6DA.js":2124,"./chunk-BO2ZDPWV.js":2125,"./chunk-BOFPNIRX.js":2126,"./chunk-CDTGUNSA.js":2128,"./chunk-EXN2TFDJ.js":2132,"./chunk-JQ54YYLU.js":2139,"./chunk-NXZVKBSV.js":2142,"./chunk-PT22IXNS.js":2145,"@metamask/base-controller":2159,"@metamask/permission-controller":1796,"@metamask/rpc-errors":1884,"@metamask/snaps-rpc-methods":2467,"@metamask/snaps-sdk":2575,"@metamask/snaps-utils":2227,"@metamask/utils":2739,"@xstate/fsm":3135,nanoid:2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-PT22IXNS.js"),n=e("./chunk-AP7CJ6DA.js"),a=e("./chunk-JQ54YYLU.js"),i=e("./chunk-BO2ZDPWV.js"),o=e("./chunk-NXZVKBSV.js"),c=e("./chunk-CDTGUNSA.js"),l=e("./chunk-BOFPNIRX.js"),u=e("./chunk-EXN2TFDJ.js"),d=e("@metamask/base-controller"),h=e("@metamask/permission-controller"),m=e("@metamask/rpc-errors"),p=e("@metamask/snaps-rpc-methods"),f=e("@metamask/snaps-sdk"),g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),_=e("@xstate/fsm"),k=e("nanoid"),y="SnapController",S="wallet_installSnap",w="wallet_updateSnap",b="wallet_installSnapResult",T=new Set(["initialPermissions","id","version","enabled","blocked"]),E={snaps:{},snapStates:{},unencryptedSnapStates:{}};function P(e){return Object.keys(e).reduce(((t,s)=>(T.has(s)&&(t[s]=e[s]),t)),{})}var j,I,C,A,x,R,N,M,O,F,G,B,L,D,U,H,$,J,V,W,q,z,K,Y,X,Z,Q,ee,te,se,re,ne,ae,ie,oe,ce,le,ue,de,he,me,pe,fe,ge,ve,_e,ke,ye,Se,we,be,Te,Ee,Pe,je,Ie,Ce,Ae,xe,Re,Ne,Me,Oe,Fe,Ge,Be,Le,De,Ue,He,$e,Je,Ve,We,qe,ze,Ke,Ye,Xe,Ze,Qe,et,tt,st,rt,nt,at,it,ot,ct,lt,ut,dt,ht,mt,pt,ft,gt,vt,_t,kt,yt,St,wt,bt,Tt,Et,Pt,jt,It=class extends d.BaseController{constructor({closeAllConnections:e,messenger:t,state:s,dynamicPermissions:n=["eth_accounts"],environmentEndowmentPermissions:a=[],excludedPermissions:i={},idleTimeCheckInterval:o=v.inMilliseconds.call(void 0,5,v.Duration.Second),maxIdleTime:c=v.inMilliseconds.call(void 0,30,v.Duration.Second),maxRequestTime:l=v.inMilliseconds.call(void 0,60,v.Duration.Second),fetchFunction:d=globalThis.fetch.bind(globalThis),featureFlags:h={},detectSnapLocation:m=r.detectSnapLocation,preinstalledSnaps:p=null,encryptor:_,getMnemonic:k,getFeatureFlags:y=(()=>({}))}){super({messenger:t,metadata:{snapStates:{persist:!0,anonymous:!1},unencryptedSnapStates:{persist:!0,anonymous:!1},snaps:{persist:e=>Object.values(e).filter((e=>e.status!==g.SnapStatus.Installing)).map((e=>({...e,status:g.SnapStatus.Stopped}))).reduce(((e,t)=>(e[t.id]=t,e)),{}),anonymous:!1}},name:"SnapController",state:{...E,...s}}),u.__privateAdd.call(void 0,this,J),u.__privateAdd.call(void 0,this,W),u.__privateAdd.call(void 0,this,z),u.__privateAdd.call(void 0,this,Y),u.__privateAdd.call(void 0,this,Z),u.__privateAdd.call(void 0,this,ee),u.__privateAdd.call(void 0,this,se),u.__privateAdd.call(void 0,this,ne),u.__privateAdd.call(void 0,this,ie),u.__privateAdd.call(void 0,this,ce),u.__privateAdd.call(void 0,this,ue),u.__privateAdd.call(void 0,this,he),u.__privateAdd.call(void 0,this,pe),u.__privateAdd.call(void 0,this,ge),u.__privateAdd.call(void 0,this,_e),u.__privateAdd.call(void 0,this,ye),u.__privateAdd.call(void 0,this,we),u.__privateAdd.call(void 0,this,Te),u.__privateAdd.call(void 0,this,Pe),u.__privateAdd.call(void 0,this,Ie),u.__privateAdd.call(void 0,this,Ae),u.__privateAdd.call(void 0,this,Re),u.__privateAdd.call(void 0,this,Me),u.__privateAdd.call(void 0,this,Fe),u.__privateAdd.call(void 0,this,Be),u.__privateAdd.call(void 0,this,De),u.__privateAdd.call(void 0,this,He),u.__privateAdd.call(void 0,this,Je),u.__privateAdd.call(void 0,this,We),u.__privateAdd.call(void 0,this,ze),u.__privateAdd.call(void 0,this,Ye),u.__privateAdd.call(void 0,this,Ze),u.__privateAdd.call(void 0,this,et),u.__privateAdd.call(void 0,this,st),u.__privateAdd.call(void 0,this,nt),u.__privateAdd.call(void 0,this,it),u.__privateAdd.call(void 0,this,ct),u.__privateAdd.call(void 0,this,ut),u.__privateAdd.call(void 0,this,ht),u.__privateAdd.call(void 0,this,pt),u.__privateAdd.call(void 0,this,gt),u.__privateAdd.call(void 0,this,_t),u.__privateAdd.call(void 0,this,yt),u.__privateAdd.call(void 0,this,wt),u.__privateAdd.call(void 0,this,Tt),u.__privateAdd.call(void 0,this,Pt),u.__privateAdd.call(void 0,this,j,void 0),u.__privateAdd.call(void 0,this,I,void 0),u.__privateAdd.call(void 0,this,C,void 0),u.__privateAdd.call(void 0,this,A,void 0),u.__privateAdd.call(void 0,this,x,void 0),u.__privateAdd.call(void 0,this,R,void 0),u.__privateAdd.call(void 0,this,N,void 0),u.__privateAdd.call(void 0,this,M,void 0),u.__privateAdd.call(void 0,this,O,void 0),u.__privateAdd.call(void 0,this,F,void 0),u.__privateAdd.call(void 0,this,G,void 0),u.__privateAdd.call(void 0,this,B,void 0),u.__privateAdd.call(void 0,this,L,void 0),u.__privateAdd.call(void 0,this,D,void 0),u.__privateAdd.call(void 0,this,U,void 0),u.__privateAdd.call(void 0,this,H,void 0),u.__privateAdd.call(void 0,this,$,void 0),u.__privateSet.call(void 0,this,j,e),u.__privateSet.call(void 0,this,I,n),u.__privateSet.call(void 0,this,C,a),u.__privateSet.call(void 0,this,A,i),u.__privateSet.call(void 0,this,x,h),u.__privateSet.call(void 0,this,R,d),u.__privateSet.call(void 0,this,N,o),u.__privateSet.call(void 0,this,M,c),this.maxRequestTime=l,u.__privateSet.call(void 0,this,B,m),u.__privateSet.call(void 0,this,O,_),u.__privateSet.call(void 0,this,F,k),u.__privateSet.call(void 0,this,G,y),u.__privateSet.call(void 0,this,$,p),this._onUnhandledSnapError=this._onUnhandledSnapError.bind(this),this._onOutboundRequest=this._onOutboundRequest.bind(this),this._onOutboundResponse=this._onOutboundResponse.bind(this),u.__privateSet.call(void 0,this,D,new Map),u.__privateSet.call(void 0,this,L,new Map),u.__privateMethod.call(void 0,this,Y,X).call(this),this.messagingSystem.subscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.subscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.subscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.subscribe("SnapController:snapInstalled",(({id:e},t)=>{u.__privateMethod.call(void 0,this,Pt,jt).call(this,t,e,g.HandlerType.OnInstall).catch((t=>{g.logError.call(void 0,`Error when calling \`onInstall\` lifecycle hook for snap "${e}": ${f.getErrorMessage.call(void 0,t)}`)}))})),this.messagingSystem.subscribe("SnapController:snapUpdated",(({id:e},t,s)=>{u.__privateMethod.call(void 0,this,Pt,jt).call(this,s,e,g.HandlerType.OnUpdate).catch((t=>{g.logError.call(void 0,`Error when calling \`onUpdate\` lifecycle hook for snap "${e}": ${f.getErrorMessage.call(void 0,t)}`)}))})),u.__privateMethod.call(void 0,this,J,V).call(this),u.__privateMethod.call(void 0,this,W,q).call(this),u.__privateGet.call(void 0,this,$)&&u.__privateMethod.call(void 0,this,z,K).call(this,u.__privateGet.call(void 0,this,$)),Object.values(this.state?.snaps??{}).forEach((e=>u.__privateMethod.call(void 0,this,_t,kt).call(this,e.id)))}async updateBlockedSnaps(){u.__privateMethod.call(void 0,this,ie,oe).call(this),await this.messagingSystem.call("SnapsRegistry:update");const e=await this.messagingSystem.call("SnapsRegistry:get",Object.values(this.state.snaps).reduce(((e,t)=>(e[t.id]={version:t.version,checksum:t.manifest.source.shasum},e)),{}));await Promise.all(Object.entries(e).map((async([e,{status:t,reason:s}])=>1===t?u.__privateMethod.call(void 0,this,Z,Q).call(this,e,s):u.__privateMethod.call(void 0,this,ee,te).call(this,e))))}_onUnhandledSnapError(e,t){this.stopSnap(e,g.SnapStatusEvents.Crash).catch((e=>{g.logError.call(void 0,e)}))}_onOutboundRequest(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);t.pendingInboundRequests.filter((e=>"running"===e.timer.status)).forEach((e=>e.timer.pause())),t.pendingOutboundRequests+=1}_onOutboundResponse(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);t.pendingOutboundRequests-=1,0===t.pendingOutboundRequests&&t.pendingInboundRequests.filter((e=>"paused"===e.timer.status)).forEach((e=>e.timer.resume()))}async startSnap(e){u.__privateMethod.call(void 0,this,ie,oe).call(this);const t=this.state.snaps[e];if(!1===t.enabled)throw new Error(`Snap "${e}" is disabled.`);await u.__privateMethod.call(void 0,this,Fe,Ge).call(this,{snapId:e,sourceCode:t.sourceCode})}enableSnap(e){if(this.getExpect(e),this.state.snaps[e].blocked)throw new Error(`Snap "${e}" is blocked and cannot be enabled.`);this.update((t=>{t.snaps[e].enabled=!0})),this.messagingSystem.publish("SnapController:snapEnabled",this.getTruncatedExpect(e))}async disableSnap(e){if(!this.has(e))throw new Error(`Snap "${e}" not found.`);this.update((t=>{t.snaps[e].enabled=!1})),this.isRunning(e)&&await this.stopSnap(e,g.SnapStatusEvents.Stop),this.messagingSystem.publish("SnapController:snapDisabled",this.getTruncatedExpect(e))}async stopSnap(e,t=g.SnapStatusEvents.Stop){var s;const r=u.__privateMethod.call(void 0,this,pt,ft).call(this,e);if(!r)throw new Error(`The snap "${e}" is not running.`);if(!r.stopping){r.stopping=!0;try{this.isRunning(e)&&(null==(s=u.__privateGet.call(void 0,this,j))||s.call(this,e),await u.__privateMethod.call(void 0,this,he,me).call(this,e))}finally{r.lastRequest=null,r.pendingInboundRequests=[],r.pendingOutboundRequests=0,r.stopping=!1,this.isRunning(e)&&u.__privateMethod.call(void 0,this,ue,de).call(this,e,t)}}}isRunning(e){return"running"===this.getExpect(e).status}has(e){return Boolean(this.get(e))}get(e){return this.state.snaps[e]}getExpect(e){const t=this.get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" not found.`)),t}getTruncated(e){const t=this.get(e);return t?P(t):null}getTruncatedExpect(e){return P(this.getExpect(e))}async updateSnapState(e,t,s){if(s){const s=await u.__privateMethod.call(void 0,this,_e,ke).call(this,e,t);this.update((t=>{t.snapStates[e]=s}))}else this.update((s=>{s.unencryptedSnapStates[e]=JSON.stringify(t)}))}clearSnapState(e,t){this.update((s=>{t?s.snapStates[e]=null:s.unencryptedSnapStates[e]=null}))}async getSnapState(e,t){const s=t?this.state.snapStates[e]:this.state.unencryptedSnapStates[e];if(null==s)return null;if(!t)return g.parseJson.call(void 0,s);return await u.__privateMethod.call(void 0,this,ge,ve).call(this,e,s)}async getSnapFile(e,t,s=f.AuxiliaryFileEncoding.Base64){const r=this.getExpect(e),n=g.normalizeRelative.call(void 0,t),a=r.auxiliaryFiles?.find((e=>e.path===n))?.value;return a?g.encodeAuxiliaryFile.call(void 0,a,s):null}async clearState(){const e=Object.keys(this.state.snaps);u.__privateGet.call(void 0,this,j)&&e.forEach((e=>{var t;null==(t=u.__privateGet.call(void 0,this,j))||t.call(this,e)})),await this.messagingSystem.call("ExecutionService:terminateAllSnaps"),e.forEach((e=>u.__privateMethod.call(void 0,this,Pe,je).call(this,e))),this.update((e=>{e.snaps={},e.snapStates={}})),u.__privateGet.call(void 0,this,L).clear(),u.__privateGet.call(void 0,this,$)&&(u.__privateMethod.call(void 0,this,z,K).call(this,u.__privateGet.call(void 0,this,$)),Object.values(this.state?.snaps).forEach((e=>u.__privateMethod.call(void 0,this,_t,kt).call(this,e.id))))}async removeSnap(e){return this.removeSnaps([e])}async removeSnaps(e){if(!Array.isArray(e))throw new Error("Expected array of snap ids.");e.forEach((e=>{const t=this.getExpect(e);v.assert.call(void 0,!1!==t.removable,`${e} is not removable.`)})),await Promise.all(e.map((async e=>{const t=this.getExpect(e),s=this.getTruncatedExpect(e);await this.disableSnap(e),u.__privateMethod.call(void 0,this,Pe,je).call(this,e),u.__privateMethod.call(void 0,this,Te,Ee).call(this,e),u.__privateGet.call(void 0,this,L).delete(e),this.update((t=>{delete t.snaps[e],delete t.snapStates[e],delete t.unencryptedSnapStates[e]})),t.status!==g.SnapStatus.Installing&&this.messagingSystem.publish("SnapController:snapUninstalled",s)})))}removeSnapFromSubject(e,t){const s=this.messagingSystem.call("PermissionController:getPermissions",e),r=s?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(!r)return;if(Boolean(r.value?.[t])){const s={...r.value};delete s[t],Object.keys(s).length>0?this.messagingSystem.call("PermissionController:updateCaveat",e,p.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,s):this.messagingSystem.call("PermissionController:revokePermissions",{[e]:[p.WALLET_SNAP_PERMISSION_KEY]})}}revokeDynamicSnapPermissions(e,t){v.assert.call(void 0,t.every((e=>u.__privateGet.call(void 0,this,I).includes(e))),"Non-dynamic permissions cannot be revoked"),this.messagingSystem.call("PermissionController:revokePermissions",{[e]:t})}incrementActiveReferences(e){u.__privateMethod.call(void 0,this,gt,vt).call(this,e).activeReferences+=1}decrementActiveReferences(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);v.assert.call(void 0,t.activeReferences>0,"SnapController reference management is in an invalid state."),t.activeReferences-=1}getAllSnaps(){return Object.values(this.state.snaps).map(P)}getPermittedSnaps(e){const t=this.messagingSystem.call("PermissionController:getPermissions",e)??{},s=t[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds))?.value??{};return Object.keys(s).reduce(((e,t)=>{const s=this.get(t),r=this.getTruncated(t);return r&&s?.status!==g.SnapStatus.Installing&&(e[t]=r),e}),{})}async installSnaps(e,t){u.__privateMethod.call(void 0,this,ie,oe).call(this);const s={},r=Object.keys(t),n=[],a=[];try{for(const[r,{version:i}]of Object.entries(t)){g.assertIsValidSnapId.call(void 0,r);const[t,o]=g.resolveVersionRange.call(void 0,i);if(t)throw m.rpcErrors.invalidParams(`The "version" field must be a valid SemVer version range if specified. Received: "${i}".`);const c=u.__privateGet.call(void 0,this,B).call(this,r,{versionRange:o,fetch:u.__privateGet.call(void 0,this,R),allowLocal:u.__privateGet.call(void 0,this,x).allowLocalSnaps,resolveVersion:async e=>u.__privateGet.call(void 0,this,x).requireAllowlist?await u.__privateMethod.call(void 0,this,Re,Ne).call(this,r,e):e}),l=this.has(r)&&!c.shouldAlwaysReload;if(l&&u.__privateMethod.call(void 0,this,Tt,Et).call(this,r,o)){const e=this.getExpect(r);n.push({snapId:r,oldVersion:e.version});let t=u.__privateMethod.call(void 0,this,it,ot).call(this,r);if(void 0!==t)throw new Error("This snap is already being updated.");t=u.__privateMethod.call(void 0,this,ct,lt).call(this,r),t.newVersion=o}else l||a.push(r);s[r]=await this.processRequestedSnap(e,r,c,o)}a.forEach((t=>this.messagingSystem.publish("SnapController:snapInstalled",this.getTruncatedExpect(t),e))),n.forEach((({snapId:t,oldVersion:s})=>this.messagingSystem.publish("SnapController:snapUpdated",this.getTruncatedExpect(t),s,e))),r.forEach((e=>u.__privateGet.call(void 0,this,D).delete(e)))}catch(e){const t=a.filter((e=>this.has(e)));await this.removeSnaps(t);const s=[...u.__privateGet.call(void 0,this,D).keys()],r=n.map((({snapId:e})=>e)).filter((e=>s.includes(e)));throw await u.__privateMethod.call(void 0,this,ht,mt).call(this,r),e}return s}async processRequestedSnap(e,t,s,r){const n=this.getTruncated(t);if(n&&!s.shouldAlwaysReload)return v.satisfiesVersionRange.call(void 0,n.version,r)?n:await this.updateSnap(e,t,s,r,!1);u.__privateMethod.call(void 0,this,ne,ae).call(this);let a=u.__privateMethod.call(void 0,this,Ie,Ce).call(this,{origin:e,snapId:t,type:S});this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!1),n&&this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),n&&s.shouldAlwaysReload&&u.__privateMethod.call(void 0,this,Pe,je).call(this,t);try{const{sourceCode:n}=await u.__privateMethod.call(void 0,this,Me,Oe).call(this,{origin:e,id:t,location:s,versionRange:r});await this.authorize(t,a),a=u.__privateMethod.call(void 0,this,Ie,Ce).call(this,{origin:e,snapId:t,type:b}),await u.__privateMethod.call(void 0,this,Fe,Ge).call(this,{snapId:t,sourceCode:n});const i=this.getTruncatedExpect(t);return u.__privateMethod.call(void 0,this,Ae,xe).call(this,a.id,{loading:!1,type:S}),i}catch(s){g.logError.call(void 0,`Error when adding ${t}.`,s);const r=s instanceof Error?s.message:s.toString();throw u.__privateMethod.call(void 0,this,Ae,xe).call(this,a.id,{loading:!1,type:S,error:r}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!1,r),s}}async updateSnap(e,t,s,r=g.DEFAULT_REQUESTED_SNAP_VERSION,n=!0){if(u.__privateMethod.call(void 0,this,ne,ae).call(this),u.__privateMethod.call(void 0,this,ie,oe).call(this),!v.isValidSemVerRange.call(void 0,r))throw new Error(`Received invalid snap version range: "${r}".`);let a=u.__privateMethod.call(void 0,this,Ie,Ce).call(this,{origin:e,snapId:t,type:w});try{this.messagingSystem.publish("SnapController:snapInstallStarted",t,e,!0);const i=this.getExpect(t),o=i.manifest,l=await c.fetchSnap.call(void 0,t,s),{sourceCode:d,manifest:h}=l,f=h.result,_=f.version;if(!v.gtVersion.call(void 0,_,i.version))throw m.rpcErrors.invalidParams(`Snap "${t}@${i.version}" is already installed. Couldn't update to a version inside requested "${r}" range.`);if(!v.satisfiesVersionRange.call(void 0,_,r))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${_}" which doesn't satisfy requested version range "${r}".`);await u.__privateMethod.call(void 0,this,se,re).call(this,t,{version:_,checksum:f.source.shasum,permissions:f.initialPermissions});const k=p.processSnapPermissions.call(void 0,f.initialPermissions);u.__privateMethod.call(void 0,this,He,$e).call(this,k);const{newPermissions:y,unusedPermissions:S,approvedPermissions:T}=u.__privateMethod.call(void 0,this,yt,St).call(this,t,k),{newConnections:E,unusedConnections:P,approvedConnections:j}=c.calculateConnectionsChange.call(void 0,o.initialConnections??{},f.initialConnections??{});u.__privateMethod.call(void 0,this,Ae,xe).call(this,a.id,{permissions:y,newVersion:f.version,newPermissions:y,approvedPermissions:T,unusedPermissions:S,newConnections:E,unusedConnections:P,approvedConnections:j,loading:!1});const{permissions:I,...C}=await a.promise;a=u.__privateMethod.call(void 0,this,Ie,Ce).call(this,{origin:e,snapId:t,type:b}),this.isRunning(t)&&await this.stopSnap(t,g.SnapStatusEvents.Stop),u.__privateMethod.call(void 0,this,ue,de).call(this,t,g.SnapStatusEvents.Update),u.__privateMethod.call(void 0,this,De,Ue).call(this,{origin:e,id:t,files:l,isUpdate:!0}),u.__privateMethod.call(void 0,this,wt,bt).call(this,{snapId:t,unusedPermissions:S,newPermissions:I,requestData:C}),f.initialConnections&&u.__privateMethod.call(void 0,this,ye,Se).call(this,t,o.initialConnections??null,f.initialConnections);const A=u.__privateMethod.call(void 0,this,it,ot).call(this,t);void 0!==A&&(A.permissions.revoked=S,A.permissions.granted=I,A.permissions.requestData=C);const x=d.toString();v.assert.call(void 0,"string"==typeof x&&x.length>0,`Invalid source code for snap "${t}".`);try{await u.__privateMethod.call(void 0,this,Fe,Ge).call(this,{snapId:t,sourceCode:x})}catch{throw new Error(`Snap ${t} crashed with updated source code.`)}const R=this.getTruncatedExpect(t);return n&&this.messagingSystem.publish("SnapController:snapUpdated",R,i.version,e),u.__privateMethod.call(void 0,this,Ae,xe).call(this,a.id,{loading:!1,type:w}),R}catch(s){g.logError.call(void 0,`Error when updating ${t},`,s);const r=s instanceof Error?s.message:s.toString();throw u.__privateMethod.call(void 0,this,Ae,xe).call(this,a.id,{loading:!1,error:r,type:w}),this.messagingSystem.publish("SnapController:snapInstallFailed",t,e,!0,r),s}}async getRegistryMetadata(e){return u.__privateMethod.call(void 0,this,ie,oe).call(this),await this.messagingSystem.call("SnapsRegistry:getMetadata",e)}async authorize(e,t){o.log.call(void 0,`Authorizing snap: ${e}`);const s=this.state.snaps[e],{initialPermissions:r,initialConnections:n}=s;try{const a=p.processSnapPermissions.call(void 0,r);u.__privateMethod.call(void 0,this,He,$e).call(this,a),u.__privateMethod.call(void 0,this,Ae,xe).call(this,t.id,{loading:!1,connections:n??{},permissions:a});const{permissions:i,...o}=await t.promise;u.__privateMethod.call(void 0,this,wt,bt).call(this,{snapId:e,newPermissions:i,requestData:o}),s.manifest.initialConnections&&u.__privateMethod.call(void 0,this,ye,Se).call(this,e,null,s.manifest.initialConnections)}finally{u.__privateMethod.call(void 0,this,gt,vt).call(this,e).installPromise=null}}destroy(){super.destroy(),u.__privateGet.call(void 0,this,U)&&clearTimeout(u.__privateGet.call(void 0,this,U)),this.messagingSystem.unsubscribe("ExecutionService:unhandledError",this._onUnhandledSnapError),this.messagingSystem.unsubscribe("ExecutionService:outboundRequest",this._onOutboundRequest),this.messagingSystem.unsubscribe("ExecutionService:outboundResponse",this._onOutboundResponse),this.messagingSystem.clearEventSubscriptions("SnapController:snapInstalled"),this.messagingSystem.clearEventSubscriptions("SnapController:snapUpdated")}async handleRequest({snapId:e,origin:t,handler:s,request:r}){u.__privateMethod.call(void 0,this,ie,oe).call(this);const n={jsonrpc:"2.0",id:k.nanoid.call(void 0),...r};v.assertIsJsonRpcRequest.call(void 0,n);const a=p.handlerEndowments[s];v.assert.call(void 0,"string"==typeof a||null===a,"'permissionName' must be either a string or null.");const i=this.messagingSystem.call("PermissionController:getPermissions",e);if(!(null===a||i&&v.hasProperty.call(void 0,i,a)))throw new Error(`Snap "${e}" is not permitted to use "${a}".`);const o=a?i[a]:void 0;if(a===p.SnapEndowments.Rpc||a===p.SnapEndowments.Keyring){v.assert.call(void 0,o);const s=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",t),r=a===p.SnapEndowments.Rpc?p.getRpcCaveatOrigins.call(void 0,o):p.getKeyringCaveatOrigins.call(void 0,o);if(v.assert.call(void 0,r),!g.isOriginAllowed.call(void 0,r,s?.subjectType??h.SubjectType.Website,t))throw new Error(`Snap "${e}" is not permitted to handle requests from "${t}".`)}const c=u.__privateMethod.call(void 0,this,We,qe).call(this,e);if(!c)throw new Error(`Snap RPC message handler not found for snap "${e}".`);return c({origin:t,handler:s,request:n,timeout:u.__privateMethod.call(void 0,this,Je,Ve).call(this,o)})}};j=new WeakMap,I=new WeakMap,C=new WeakMap,A=new WeakMap,x=new WeakMap,R=new WeakMap,N=new WeakMap,M=new WeakMap,O=new WeakMap,F=new WeakMap,G=new WeakMap,B=new WeakMap,L=new WeakMap,D=new WeakMap,U=new WeakMap,H=new WeakMap,$=new WeakMap,J=new WeakSet,V=function(){const e=({snapId:e})=>this.getExpect(e).enabled,t={initial:g.SnapStatus.Installing,states:{[g.SnapStatus.Installing]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e}}},[g.SnapStatus.Updating]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped}},[g.SnapStatus.Running]:{on:{[g.SnapStatusEvents.Stop]:g.SnapStatus.Stopped,[g.SnapStatusEvents.Crash]:g.SnapStatus.Crashed}},[g.SnapStatus.Stopped]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}},[g.SnapStatus.Crashed]:{on:{[g.SnapStatusEvents.Start]:{target:g.SnapStatus.Running,cond:e},[g.SnapStatusEvents.Update]:g.SnapStatus.Updating}}}};u.__privateSet.call(void 0,this,H,_.createMachine.call(void 0,t)),i.validateMachine.call(void 0,u.__privateGet.call(void 0,this,H))},W=new WeakSet,q=function(){this.messagingSystem.registerActionHandler(`${y}:clearSnapState`,((...e)=>this.clearSnapState(...e))),this.messagingSystem.registerActionHandler(`${y}:get`,((...e)=>this.get(...e))),this.messagingSystem.registerActionHandler(`${y}:getSnapState`,(async(...e)=>this.getSnapState(...e))),this.messagingSystem.registerActionHandler(`${y}:handleRequest`,(async(...e)=>this.handleRequest(...e))),this.messagingSystem.registerActionHandler(`${y}:has`,((...e)=>this.has(...e))),this.messagingSystem.registerActionHandler(`${y}:updateBlockedSnaps`,(async()=>this.updateBlockedSnaps())),this.messagingSystem.registerActionHandler(`${y}:updateSnapState`,(async(...e)=>this.updateSnapState(...e))),this.messagingSystem.registerActionHandler(`${y}:enable`,((...e)=>this.enableSnap(...e))),this.messagingSystem.registerActionHandler(`${y}:disable`,(async(...e)=>this.disableSnap(...e))),this.messagingSystem.registerActionHandler(`${y}:remove`,(async(...e)=>this.removeSnap(...e))),this.messagingSystem.registerActionHandler(`${y}:getPermitted`,((...e)=>this.getPermittedSnaps(...e))),this.messagingSystem.registerActionHandler(`${y}:install`,(async(...e)=>this.installSnaps(...e))),this.messagingSystem.registerActionHandler(`${y}:getAll`,((...e)=>this.getAllSnaps(...e))),this.messagingSystem.registerActionHandler(`${y}:incrementActiveReferences`,((...e)=>this.incrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${y}:decrementActiveReferences`,((...e)=>this.decrementActiveReferences(...e))),this.messagingSystem.registerActionHandler(`${y}:getRegistryMetadata`,(async(...e)=>this.getRegistryMetadata(...e))),this.messagingSystem.registerActionHandler(`${y}:disconnectOrigin`,((...e)=>this.removeSnapFromSubject(...e))),this.messagingSystem.registerActionHandler(`${y}:revokeDynamicPermissions`,((...e)=>this.revokeDynamicSnapPermissions(...e))),this.messagingSystem.registerActionHandler(`${y}:getFile`,(async(...e)=>this.getSnapFile(...e)))},z=new WeakSet,K=function(e){for(const{snapId:t,manifest:s,files:r,removable:n,hidden:a}of e){const e=this.get(t),i=void 0!==e,o=i&&v.gtVersion.call(void 0,s.version,e.version);if(i&&(!o||!0!==e.preinstalled))continue;const c=new(0,g.VirtualFile)({path:g.NpmSnapFileNames.Manifest,value:JSON.stringify(s),result:s}),l=r.map((({path:e,value:t})=>new(0,g.VirtualFile)({value:t,path:e}))),{filePath:d,iconPath:h}=s.source.location.npm,m=l.find((e=>e.path===d)),f=h?l.find((e=>e.path===h)):void 0;v.assert.call(void 0,m,"Source code not provided for preinstalled snap."),v.assert.call(void 0,!h||h&&f,"Icon not provided for preinstalled snap."),v.assert.call(void 0,void 0===s.source.files,"Auxiliary files are not currently supported for preinstalled snaps.");const _=s.source.locales?.map((e=>l.find((t=>t.path===e))))??[],k=g.getValidatedLocalizationFiles.call(void 0,_.filter(Boolean));v.assert.call(void 0,_.length===k.length,"Missing localization files for preinstalled snap.");const y={manifest:c,sourceCode:m,svgIcon:f,auxiliaryFiles:[],localizationFiles:k};u.__privateMethod.call(void 0,this,De,Ue).call(this,{id:t,origin:"metamask",files:y,removable:n,hidden:a,preinstalled:!0});const S=p.processSnapPermissions.call(void 0,s.initialPermissions);u.__privateMethod.call(void 0,this,He,$e).call(this,S);const{newPermissions:w,unusedPermissions:b}=u.__privateMethod.call(void 0,this,yt,St).call(this,t,S);u.__privateMethod.call(void 0,this,wt,bt).call(this,{snapId:t,newPermissions:w,unusedPermissions:b}),s.initialConnections&&u.__privateMethod.call(void 0,this,ye,Se).call(this,t,e?.initialConnections??null,s.initialConnections),this.update((e=>{e.snaps[t].status=g.SnapStatus.Stopped}))}},Y=new WeakSet,X=function(){u.__privateSet.call(void 0,this,U,setTimeout((()=>{u.__privateMethod.call(void 0,this,ce,le).call(this).catch((e=>{g.logError.call(void 0,e)})),u.__privateMethod.call(void 0,this,Y,X).call(this)}),u.__privateGet.call(void 0,this,N)))},Z=new WeakSet,Q=async function(e,t){if(this.has(e)){try{this.update((s=>{s.snaps[e].blocked=!0,s.snaps[e].blockInformation=t})),await this.disableSnap(e)}catch(t){g.logError.call(void 0,`Encountered error when stopping blocked snap "${e}".`,t)}this.messagingSystem.publish(`${y}:snapBlocked`,e,t)}},ee=new WeakSet,te=function(e){this.has(e)&&this.state.snaps[e].blocked&&(this.update((t=>{t.snaps[e].blocked=!1,delete t.snaps[e].blockInformation})),this.messagingSystem.publish(`${y}:snapUnblocked`,e))},se=new WeakSet,re=async function(e,t){const s=(await this.messagingSystem.call("SnapsRegistry:get",{[e]:t}))[e];if(1===s.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": The version is blocked. ${s.reason?.explanation??""}`);const r=Object.keys(t.permissions).some((e=>!a.ALLOWED_PERMISSIONS.includes(e)));if(u.__privateGet.call(void 0,this,x).requireAllowlist&&r&&2!==s.status)throw new Error(`Cannot install version "${t.version}" of snap "${e}": ${3===s.status?"The registry is temporarily unavailable.":"The snap is not on the allowlist."}`)},ne=new WeakSet,ae=function(){v.assert.call(void 0,!0!==u.__privateGet.call(void 0,this,x).disableSnapInstallation,"Installing Snaps is currently disabled in this version of MetaMask.")},ie=new WeakSet,oe=function(){const e=u.__privateGet.call(void 0,this,G).call(this);v.assert.call(void 0,!0!==e.disableSnaps,"The Snaps platform requires basic functionality to be used. Enable basic functionality in the settings to use the Snaps platform.")},ce=new WeakSet,le=async function(){const e=[...u.__privateGet.call(void 0,this,L).entries()];return Promise.all(e.filter((([e,t])=>0===t.activeReferences&&0===t.pendingInboundRequests.length&&t.lastRequest&&u.__privateGet.call(void 0,this,M)&&v.timeSince.call(void 0,t.lastRequest)>u.__privateGet.call(void 0,this,M))).map((async([e])=>this.stopSnap(e,g.SnapStatusEvents.Stop))))},ue=new WeakSet,de=function(e,t){const{interpreter:s}=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);s.send(t),this.update((t=>{t.snaps[e].status=s.state.value}))},he=new WeakSet,me=async function(e){await this.messagingSystem.call("ExecutionService:terminateSnap",e),await new Promise((e=>setTimeout(e,1)));u.__privateMethod.call(void 0,this,gt,vt).call(this,e).pendingInboundRequests.filter((e=>"finished"!==e.timer.status)).forEach((e=>e.timer.finish())),await new Promise((e=>setTimeout(e,1))),this.messagingSystem.publish("SnapController:snapTerminated",this.getTruncatedExpect(e))},pe=new WeakSet,fe=async function({snapId:e,salt:t,useCache:s,keyMetadata:r}){const n=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);if(n.encryptionKey&&n.encryptionSalt&&s)return{key:await u.__privateGet.call(void 0,this,O).importKey(n.encryptionKey),salt:n.encryptionSalt};const a=t??u.__privateGet.call(void 0,this,O).generateSalt(),i=await u.__privateGet.call(void 0,this,F).call(this),o=await p.getEncryptionEntropy.call(void 0,{snapId:e,mnemonicPhrase:i}),c=await u.__privateGet.call(void 0,this,O).keyFromPassword(o,a,!0,r),l=await u.__privateGet.call(void 0,this,O).exportKey(c);return s&&(n.encryptionKey=l,n.encryptionSalt=a),{key:c,salt:a}},ge=new WeakSet,ve=async function(e,t){try{const s=g.parseJson.call(void 0,t),{salt:r,keyMetadata:n}=s,i=u.__privateGet.call(void 0,this,O).isVaultUpdated(t),{key:o}=await u.__privateMethod.call(void 0,this,pe,fe).call(this,{snapId:e,salt:r,useCache:i,keyMetadata:n??a.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS}),c=await u.__privateGet.call(void 0,this,O).decryptWithKey(o,s);return v.assert.call(void 0,v.isValidJson.call(void 0,c)),c}catch{throw m.rpcErrors.internal({message:"Failed to decrypt snap state, the state must be corrupted."})}},_e=new WeakSet,ke=async function(e,t){const{key:s,salt:r}=await u.__privateMethod.call(void 0,this,pe,fe).call(this,{snapId:e,useCache:!0}),n=await u.__privateGet.call(void 0,this,O).encryptWithKey(s,t);return n.salt=r,JSON.stringify(n)},ye=new WeakSet,Se=function(e,t,s){if(t){const r=c.setDiff.call(void 0,t,s);for(const t of Object.keys(r))this.removeSnapFromSubject(t,e)}for(const t of Object.keys(s))u.__privateMethod.call(void 0,this,we,be).call(this,t,e)},we=new WeakSet,be=function(e,t){const s=this.messagingSystem.call("PermissionController:getPermissions",e),r=s?.[p.WALLET_SNAP_PERMISSION_KEY]?.caveats?.find((e=>e.type===g.SnapCaveatType.SnapIds));if(Boolean(r?.value?.[t]))return;if(r)return void this.messagingSystem.call("PermissionController:updateCaveat",e,p.WALLET_SNAP_PERMISSION_KEY,g.SnapCaveatType.SnapIds,{...r.value,[t]:{}});const n={[p.WALLET_SNAP_PERMISSION_KEY]:{caveats:[{type:g.SnapCaveatType.SnapIds,value:{[t]:{}}}]}};this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:n,subject:{origin:e}})},Te=new WeakSet,Ee=function(e){const t=this.messagingSystem.call("PermissionController:getSubjectNames");for(const s of t)this.removeSnapFromSubject(s,e)},Pe=new WeakSet,je=function(e){this.messagingSystem.call("PermissionController:hasPermissions",e)&&this.messagingSystem.call("PermissionController:revokeAllPermissions",e)},Ie=new WeakSet,Ce=function({origin:e,snapId:t,type:s}){const r=k.nanoid.call(void 0);return{id:r,promise:this.messagingSystem.call("ApprovalController:addRequest",{origin:e,id:r,type:s,requestData:{metadata:{id:r,origin:t,dappOrigin:e},snapId:t},requestState:{loading:!0}},!0)}},Ae=new WeakSet,xe=function(e,t){try{this.messagingSystem.call("ApprovalController:updateRequestState",{id:e,requestState:t})}catch{}},Re=new WeakSet,Ne=async function(e,t){return await this.messagingSystem.call("SnapsRegistry:resolveVersion",e,t)},Me=new WeakSet,Oe=async function(e){const{id:t,location:s,versionRange:r}=e;u.__privateMethod.call(void 0,this,_t,kt).call(this,t);const n=u.__privateMethod.call(void 0,this,gt,vt).call(this,t);n.installPromise||(o.log.call(void 0,`Adding snap: ${t}`),n.installPromise=(async()=>{const n=await c.fetchSnap.call(void 0,t,s),a=n.manifest.result;if(!v.satisfiesVersionRange.call(void 0,a.version,r))throw new Error(`Version mismatch. Manifest for "${t}" specifies version "${a.version}" which doesn't satisfy requested version range "${r}".`);return await u.__privateMethod.call(void 0,this,se,re).call(this,t,{version:a.version,checksum:a.source.shasum,permissions:a.initialPermissions}),u.__privateMethod.call(void 0,this,De,Ue).call(this,{...e,files:n,id:t})})());try{return await n.installPromise}catch(e){throw n.installPromise=null,e}},Fe=new WeakSet,Ge=async function(e){const{snapId:t}=e;if(this.isRunning(t))throw new Error(`Snap "${t}" is already started.`);try{const s=u.__privateMethod.call(void 0,this,gt,vt).call(this,t),r=await this.messagingSystem.call("ExecutionService:executeSnap",{...e,endowments:await u.__privateMethod.call(void 0,this,Be,Le).call(this,t)});return u.__privateMethod.call(void 0,this,ue,de).call(this,t,g.SnapStatusEvents.Start),s.lastRequest=Date.now(),r}catch(e){throw await u.__privateMethod.call(void 0,this,he,me).call(this,t),e}},Be=new WeakSet,Le=async function(e){let t=[];for(const s of u.__privateGet.call(void 0,this,C))if(this.messagingSystem.call("PermissionController:hasPermission",e,s)){const r=await this.messagingSystem.call("PermissionController:getEndowments",e,s);if(r){if(!Array.isArray(r)||r.some((e=>"string"!=typeof e)))throw new Error("Expected an array of string endowment names.");t=t.concat(r)}}const s=[...new Set([...g.DEFAULT_ENDOWMENTS,...t])];return s.length<g.DEFAULT_ENDOWMENTS.length+t.length&&g.logError.call(void 0,`Duplicate endowments found for ${e}. Default endowments should not be requested.`,t),s},De=new WeakSet,Ue=function(e){const{id:t,origin:s,files:r,isUpdate:n=!1,removable:a,preinstalled:i,hidden:o}=e,{manifest:c,sourceCode:l,svgIcon:d,auxiliaryFiles:m,localizationFiles:p}=r;g.assertIsSnapManifest.call(void 0,c.result);const{version:f}=c.result,_=l.toString();v.assert.call(void 0,"string"==typeof _&&_.length>0,`Invalid source code for snap "${t}".`);const k=m.map((e=>(v.assert.call(void 0,"string"==typeof e.data.base64),{path:e.path,value:e.data.base64}))),y=this.state.snaps[t],S=[...y?.versionHistory??[],{version:f,date:Date.now(),origin:s}],w=p.map((e=>e.result)),b={...y,blocked:!1,enabled:!0,removable:a,preinstalled:i,hidden:o,id:t,initialConnections:c.result.initialConnections,initialPermissions:c.result.initialPermissions,manifest:c.result,status:u.__privateGet.call(void 0,this,H).config.initial,sourceCode:_,version:f,versionHistory:S,auxiliaryFiles:k,localizationFiles:w};delete b.blockInformation;const{inversePatches:T}=this.update((e=>{e.snaps[t]=b}));if(n){const e=u.__privateMethod.call(void 0,this,it,ot).call(this,t);void 0!==e&&(e.statePatches=T)}const{proposedName:E}=g.getLocalizedSnapManifest.call(void 0,c.result,"en",w);return this.messagingSystem.call("SubjectMetadataController:addSubjectMetadata",{subjectType:h.SubjectType.Snap,name:E,origin:b.id,version:f,svgIcon:d?.toString()??null}),{...b,sourceCode:_}},He=new WeakSet,$e=function(e){const t=Object.keys(e),s=Array.from(new Set(Object.values(p.handlerEndowments)));v.assert.call(void 0,t.some((e=>s.includes(e))),`A snap must request at least one of the following permissions: ${s.filter((e=>null!==e)).join(", ")}.`);const r=t.reduce(((e,t)=>(v.hasProperty.call(void 0,u.__privateGet.call(void 0,this,A),t)&&e.push(u.__privateGet.call(void 0,this,A)[t]),e)),[]);v.assert.call(void 0,0===r.length,`One or more permissions are not allowed:\n${r.join("\n")}`)},Je=new WeakSet,Ve=function(e){return p.getMaxRequestTimeCaveat.call(void 0,e)??this.maxRequestTime},We=new WeakSet,qe=function(e){const t=u.__privateMethod.call(void 0,this,gt,vt).call(this,e),s=t.rpcHandler;if(s)return s;const r=new(0,n.RequestQueue)(5),a=new Map,i=async({origin:t,handler:s,request:n,timeout:i})=>{if(!1===this.state.snaps[e].enabled)throw new Error(`Snap "${e}" is disabled.`);if(this.state.snaps[e].status===g.SnapStatus.Installing)throw new Error(`Snap "${e}" is currently being installed. Please try again later.`);if(!this.isRunning(e)){let s=a.get(e);if(s){if(r.get(t)>=r.maxQueueSize)throw new Error("Exceeds maximum number of requests waiting to be resolved, please try again.")}else s=this.startSnap(e),a.set(e,s);r.increment(t);try{await s}finally{r.decrement(t),a.get(e)===s&&a.delete(e)}}const o=new(0,l.Timer)(i);u.__privateMethod.call(void 0,this,st,rt).call(this,e,n.id,o);const d=this.messagingSystem.call("ExecutionService:handleRpcRequest",e,{origin:t,handler:s,request:n});try{const t=await c.withTimeout.call(void 0,d,o);if(t===c.hasTimedOut)throw new Error(`${e} failed to respond to the request in time.`);await u.__privateMethod.call(void 0,this,et,tt).call(this,e,s,t);const r=await u.__privateMethod.call(void 0,this,Ze,Qe).call(this,e,s,t);return u.__privateMethod.call(void 0,this,nt,at).call(this,e,n.id),r}catch(t){u.__privateMethod.call(void 0,this,nt,at).call(this,e,n.id);const[s,r]=g.unwrapError.call(void 0,t);throw r||await this.stopSnap(e,g.SnapStatusEvents.Crash),s}};return t.rpcHandler=i,i},ze=new WeakSet,Ke=async function(e,t){return this.messagingSystem.call("SnapInterfaceController:createInterface",e,t)},Ye=new WeakSet,Xe=function(e,t){v.assert.call(void 0,this.messagingSystem.call("SnapInterfaceController:getInterface",e,t))},Ze=new WeakSet,Qe=async function(e,t,s){switch(t){case g.HandlerType.OnTransaction:case g.HandlerType.OnSignature:case g.HandlerType.OnHomePage:{const t=s;if(t&&v.hasProperty.call(void 0,t,"content")){const{content:s,...r}=t;return{...r,id:await u.__privateMethod.call(void 0,this,ze,Ke).call(this,e,s)}}return s}default:return s}},et=new WeakSet,tt=async function(e,t,s){switch(t){case g.HandlerType.OnTransaction:v.assertStruct.call(void 0,s,g.OnTransactionResponseStruct),s&&v.hasProperty.call(void 0,s,"id")&&u.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,s.id);break;case g.HandlerType.OnSignature:v.assertStruct.call(void 0,s,g.OnSignatureResponseStruct),s&&v.hasProperty.call(void 0,s,"id")&&u.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,s.id);break;case g.HandlerType.OnHomePage:v.assertStruct.call(void 0,s,g.OnHomePageResponseStruct),s&&v.hasProperty.call(void 0,s,"id")&&u.__privateMethod.call(void 0,this,Ye,Xe).call(this,e,s.id);break;case g.HandlerType.OnNameLookup:v.assertStruct.call(void 0,s,g.OnNameLookupResponseStruct)}},st=new WeakSet,rt=function(e,t,s){const r=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);r.pendingInboundRequests.push({requestId:t,timer:s}),r.lastRequest=null},nt=new WeakSet,at=function(e,t){const s=u.__privateMethod.call(void 0,this,gt,vt).call(this,e);s.pendingInboundRequests=s.pendingInboundRequests.filter((e=>e.requestId!==t)),0===s.pendingInboundRequests.length&&(s.lastRequest=Date.now())},it=new WeakSet,ot=function(e){return u.__privateGet.call(void 0,this,D).get(e)},ct=new WeakSet,lt=function(e){v.assert.call(void 0,void 0===u.__privateGet.call(void 0,this,D).get(e),new Error(`Snap "${e}" rollback snapshot already exists.`)),u.__privateGet.call(void 0,this,D).set(e,{statePatches:[],permissions:{},newVersion:""});const t=u.__privateGet.call(void 0,this,D).get(e);return v.assert.call(void 0,void 0!==t,new Error(`Snapshot creation failed for ${e}.`)),t},ut=new WeakSet,dt=async function(e){const t=u.__privateMethod.call(void 0,this,it,ot).call(this,e);if(!t)throw new Error("A snapshot does not exist for this snap.");await this.stopSnap(e,g.SnapStatusEvents.Stop),this.get(e)?.status!==g.SnapStatus.Stopped&&u.__privateMethod.call(void 0,this,ue,de).call(this,e,g.SnapStatusEvents.Stop);const{statePatches:s,permissions:r}=t;s?.length&&this.applyPatches(s),this.get(e)?.status!==g.SnapStatus.Stopped&&this.update((t=>{t.snaps[e].status=g.SnapStatus.Stopped})),u.__privateMethod.call(void 0,this,wt,bt).call(this,{snapId:e,unusedPermissions:r.granted,newPermissions:r.revoked,requestData:r.requestData});const n=this.getTruncatedExpect(e);this.messagingSystem.publish("SnapController:snapRolledback",n,t.newVersion),u.__privateGet.call(void 0,this,D).delete(e)},ht=new WeakSet,mt=async function(e){for(const t of e)await u.__privateMethod.call(void 0,this,ut,dt).call(this,t)},pt=new WeakSet,ft=function(e){return u.__privateGet.call(void 0,this,L).get(e)},gt=new WeakSet,vt=function(e){const t=u.__privateMethod.call(void 0,this,pt,ft).call(this,e);return v.assert.call(void 0,void 0!==t,new Error(`Snap "${e}" runtime data not found`)),t},_t=new WeakSet,kt=function(e){if(u.__privateGet.call(void 0,this,L).has(e))return;const t=this.get(e),s=_.interpret.call(void 0,u.__privateGet.call(void 0,this,H));s.start({context:{snapId:e},value:t?.status??u.__privateGet.call(void 0,this,H).config.initial}),i.forceStrict.call(void 0,s),u.__privateGet.call(void 0,this,L).set(e,{lastRequest:null,rpcHandler:null,installPromise:null,encryptionKey:null,encryptionSalt:null,activeReferences:0,pendingInboundRequests:[],pendingOutboundRequests:0,interpreter:s,stopping:!1})},yt=new WeakSet,St=function(e,t){const s=this.messagingSystem.call("PermissionController:getPermissions",e)??{},r=c.permissionsDiff.call(void 0,t,s),n=c.permissionsDiff.call(void 0,s,t);return{newPermissions:r,unusedPermissions:n,approvedPermissions:c.permissionsDiff.call(void 0,s,n)}},wt=new WeakSet,bt=function({snapId:e,unusedPermissions:t={},newPermissions:s={},requestData:r}){const n=Object.keys(t);v.isNonEmptyArray.call(void 0,n)&&this.messagingSystem.call("PermissionController:revokePermissions",{[e]:n}),v.isNonEmptyArray.call(void 0,Object.keys(s))&&this.messagingSystem.call("PermissionController:grantPermissions",{approvedPermissions:s,subject:{origin:e},requestData:r})},Tt=new WeakSet,Et=function(e,t){const s=this.getExpect(e);return!v.satisfiesVersionRange.call(void 0,s.version,t)&&!v.gtRange.call(void 0,s.version,t)},Pt=new WeakSet,jt=async function(e,t,s){const r=p.handlerEndowments[s];v.assert.call(void 0,r,"Lifecycle hook must have an endowment.");this.messagingSystem.call("PermissionController:hasPermission",t,r)&&await this.handleRequest({snapId:t,handler:s,origin:e,request:{jsonrpc:"2.0",method:s}})},s.controllerName=y,s.SNAP_APPROVAL_INSTALL=S,s.SNAP_APPROVAL_UPDATE=w,s.SNAP_APPROVAL_RESULT=b,s.SnapController=It}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-E52MHHG4.js"}],[2132,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(t=>void 0!==e?e:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>(void 0!==e?e:t)[s]}):t)((function(t){if(void 0!==e)return e.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),n=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__require=r,s.__privateGet=(e,t,s)=>(n(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,r)=>(n(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),s.__privateMethod=(e,t,s)=>(n(e,t,"access private method"),s)}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-EXN2TFDJ.js"}],[2133,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-G66GQJS6.js"}],[2134,{"./chunk-BOFPNIRX.js":2126,"./chunk-EXN2TFDJ.js":2132,"./chunk-YYPUPKQY.js":2151,"@metamask/base-controller":2159,"@metamask/snaps-rpc-methods":2467,"@metamask/snaps-utils":2227,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o=e("./chunk-YYPUPKQY.js"),c=e("./chunk-BOFPNIRX.js"),l=e("./chunk-EXN2TFDJ.js"),u=e("@metamask/base-controller"),d=e("@metamask/snaps-rpc-methods"),h=e("@metamask/snaps-utils"),m=e("@metamask/utils"),p=m.inMilliseconds.call(void 0,24,m.Duration.Hour),f=class extends u.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:{jobs:{persist:!0,anonymous:!1}},name:"CronjobController",state:{jobs:{},...t}}),l.__privateAdd.call(void 0,this,r,void 0),l.__privateAdd.call(void 0,this,n,void 0),l.__privateAdd.call(void 0,this,a,void 0),l.__privateAdd.call(void 0,this,i,void 0),l.__privateSet.call(void 0,this,a,new Map),l.__privateSet.call(void 0,this,i,new Map),l.__privateSet.call(void 0,this,r,e),this._handleSnapRegisterEvent=this._handleSnapRegisterEvent.bind(this),this._handleSnapUnregisterEvent=this._handleSnapUnregisterEvent.bind(this),this._handleEventSnapUpdated=this._handleEventSnapUpdated.bind(this),this.messagingSystem.subscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.subscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.subscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}getAllJobs(){const e=this.messagingSystem.call("SnapController:getAll");return o.getRunnableSnaps.call(void 0,e).map((e=>this.getSnapJobs(e.id))).flat().filter((e=>void 0!==e))}getSnapJobs(e){const t=l.__privateGet.call(void 0,this,r).call("PermissionController:getPermissions",e),s=t?.[d.SnapEndowments.Cronjob],n=d.getCronjobCaveatJobs.call(void 0,s);return n?.map(((t,s)=>({...t,id:`${e}-${s}`,snapId:e})))}register(e){const t=this.getSnapJobs(e);t?.forEach((e=>this.schedule(e)))}schedule(e){if(l.__privateGet.call(void 0,this,a).has(e.id))return;const t=h.parseCronExpression.call(void 0,e.expression).next(),s=new Date,r=t.getTime()-s.getTime();if(r>p)return;const n=new(0,c.Timer)(r);n.start((()=>{this.executeCronjob(e).catch((e=>{h.logError.call(void 0,e)})),l.__privateGet.call(void 0,this,a).delete(e.id),this.schedule(e)})),this.state.jobs[e.id]?.lastRun||this.updateJobLastRunState(e.id,0),l.__privateGet.call(void 0,this,a).set(e.id,n),l.__privateGet.call(void 0,this,i).set(e.id,e.snapId)}async executeCronjob(e){this.updateJobLastRunState(e.id,Date.now()),await l.__privateGet.call(void 0,this,r).call("SnapController:handleRequest",{snapId:e.snapId,origin:"",handler:h.HandlerType.OnCronjob,request:e.request})}unregister(e){const t=[...l.__privateGet.call(void 0,this,i).entries()].filter((([t,s])=>s===e));t.length&&t.forEach((([e])=>{const t=l.__privateGet.call(void 0,this,a).get(e);t&&(t.cancel(),l.__privateGet.call(void 0,this,a).delete(e),l.__privateGet.call(void 0,this,i).delete(e))}))}updateJobLastRunState(e,t){this.update((s=>{s.jobs[e]={lastRun:t}}))}async dailyCheckIn(){const e=this.getAllJobs();for(const t of e){const e=h.parseCronExpression.call(void 0,t.expression),s=this.state.jobs[t.id]?.lastRun;void 0!==s&&e.hasPrev()&&e.prev().getTime()>s&&await this.executeCronjob(t),this.schedule(t)}l.__privateSet.call(void 0,this,n,new(0,c.Timer)(p)),l.__privateGet.call(void 0,this,n).start((()=>{this.dailyCheckIn().catch((e=>{h.logError.call(void 0,e)}))}))}destroy(){super.destroy(),this.messagingSystem.unsubscribe("SnapController:snapInstalled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUninstalled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapEnabled",this._handleSnapRegisterEvent),this.messagingSystem.unsubscribe("SnapController:snapDisabled",this._handleSnapUnregisterEvent),this.messagingSystem.unsubscribe("SnapController:snapUpdated",this._handleEventSnapUpdated),l.__privateGet.call(void 0,this,i).forEach((e=>{this.unregister(e)}))}_handleSnapRegisterEvent(e){this.register(e.id)}_handleSnapUnregisterEvent(e){this.unregister(e.id)}_handleEventSnapUpdated(e){this.unregister(e.id),this.register(e.id)}};r=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,s.DAILY_TIMEOUT=p,s.CronjobController=f}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-GRBWVPLF.js"}],[2135,{"@metamask/snaps-sdk":2575,"@metamask/snaps-sdk/jsx":2579,"@metamask/snaps-utils":2227},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/snaps-sdk"),n=e("@metamask/snaps-sdk/jsx"),a=e("@metamask/snaps-utils");function i(e,t){r.assert.call(void 0,void 0===e[t],`Duplicate component names are not allowed, found multiple instances of: "${t}".`)}function o(e,t,s){const r=s?e[s]:e,n=r?.[t.props.name];return"FileInput"===t.type?n??null:function(e){return"Checkbox"===e.type?e.props.checked:e.props.value}(t)??n??function(e){switch(e.type){case"Dropdown":{const t=a.getJsxChildren.call(void 0,e);return t[0]?.props.value}case"Checkbox":return!1;default:return null}}(t)??null}var c=1e6;s.getJsxInterface=function(e){return n.isJSXElementUnsafe.call(void 0,e)?e:a.getJsxElementFromComponent.call(void 0,e)},s.assertNameIsUnique=i,s.constructState=function(e,t){const s={},r=[];return a.walkJsx.call(void 0,t,((t,n)=>{let a=r[r.length-1];if(a&&n<=a.depth&&(r.pop(),a=r[r.length-1]),"Form"===t.type)return i(s,t.props.name),r.push({name:t.props.name,depth:n}),void(s[t.props.name]={});if(a&&("Input"===t.type||"Dropdown"===t.type||"FileInput"===t.type||"Checkbox"===t.type)){const r=s[a.name];return i(r,t.props.name),void(r[t.props.name]=o(e,t,a.name))}"Input"!==t.type&&"Dropdown"!==t.type&&"FileInput"!==t.type&&"Checkbox"!==t.type||(i(s,t.props.name),s[t.props.name]=o(e,t))})),s},s.validateInterfaceContext=function(e){if(!e)return;const t=a.getJsonSizeUnsafe.call(void 0,e);r.assert.call(void 0,t<=c,"A Snap interface context may not be larger than 1 MB.")}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-H7TB7I6Z.js"}],[2136,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HOY6NKQR.js"}],[2137,{"./chunk-7Y6P5FRN.js":2123,"./chunk-EXN2TFDJ.js":2132,"./chunk-S775IABY.js":2147,"@metamask/post-message-stream":1850,"@metamask/snaps-utils":2227,"@metamask/utils":2739,nanoid:2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a=e("./chunk-S775IABY.js"),i=e("./chunk-7Y6P5FRN.js"),o=e("./chunk-EXN2TFDJ.js"),c=e("@metamask/post-message-stream"),l=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("nanoid"),h="snaps-worker-pool",m=class extends a.AbstractExecutionService{constructor({documentUrl:e,messenger:t,setupSnapProvider:s}){super({messenger:t,setupSnapProvider:s}),o.__privateAdd.call(void 0,this,r,void 0),o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,r,e)}async terminateJob(e){u.assert.call(void 0,o.__privateGet.call(void 0,this,n),"Runtime stream not initialized."),o.__privateGet.call(void 0,this,n).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:d.nanoid.call(void 0)}})}async initEnvStream(e){await this.createDocument(),u.assert.call(void 0,o.__privateGet.call(void 0,this,n),"Runtime stream not initialized.");return{worker:e,stream:new(0,i.ProxyPostMessageStream)({stream:o.__privateGet.call(void 0,this,n),jobId:e})}}async createDocument(){if(document.getElementById(h))return;const e=await l.createWindow.call(void 0,o.__privateGet.call(void 0,this,r).href,h,!1);o.__privateSet.call(void 0,this,n,new(0,c.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:e,targetOrigin:"*"}))}};r=new WeakMap,n=new WeakMap,s.WORKER_POOL_ID=h,s.WebWorkerExecutionService=m}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-HQ6HMINL.js"}],[2138,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JAUAKTUL.js"}],[2139,{"@metamask/snaps-rpc-methods":2467},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/snaps-rpc-methods"),n=Object.freeze(["snap_dialog","snap_manageState","snap_notify","snap_getLocale",r.SnapEndowments.Cronjob,r.SnapEndowments.HomePage,r.SnapEndowments.LifecycleHooks,r.SnapEndowments.EthereumProvider,r.SnapEndowments.TransactionInsight,r.SnapEndowments.SignatureInsight]);s.ALLOWED_PERMISSIONS=n,s.LEGACY_ENCRYPTION_KEY_DERIVATION_OPTIONS={algorithm:"PBKDF2",params:{iterations:1e4}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-JQ54YYLU.js"}],[214,{"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){(0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"provider")&&(0,r.hasProperty)(e.NetworkController,"providerConfig")&&delete e.NetworkController.provider;return{...e}};var r=e("@metamask/utils")}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-086.ts"}],[2140,{"./chunk-7Y6P5FRN.js":2123,"./chunk-EXN2TFDJ.js":2132,"./chunk-S775IABY.js":2147,nanoid:2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-S775IABY.js"),a=e("./chunk-7Y6P5FRN.js"),i=e("./chunk-EXN2TFDJ.js"),o=e("nanoid"),c=class extends n.AbstractExecutionService{constructor({stream:e,messenger:t,setupSnapProvider:s}){super({messenger:t,setupSnapProvider:s,usePing:!1}),i.__privateAdd.call(void 0,this,r,void 0),i.__privateSet.call(void 0,this,r,e)}async terminateJob(e){i.__privateGet.call(void 0,this,r).write({jobId:e.id,data:{jsonrpc:"2.0",method:"terminateJob",id:o.nanoid.call(void 0)}})}async initEnvStream(e){const t=new(0,a.ProxyPostMessageStream)({stream:i.__privateGet.call(void 0,this,r),jobId:e});return await new Promise((e=>{t.once("data",e),t.write({name:"command",data:{jsonrpc:"2.0",method:"ping",id:o.nanoid.call(void 0)}})})),{worker:e,stream:t}}};r=new WeakMap,s.ProxyExecutionService=c}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-KH72WRHR.js"}],[2141,{"./chunk-EXN2TFDJ.js":2132,"./chunk-RDBT3ZJQ.js":2146,"@metamask/snaps-utils":2227,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-RDBT3ZJQ.js"),a=e("./chunk-EXN2TFDJ.js"),i=e("@metamask/snaps-utils"),o=e("@metamask/utils");function c(e){return o.assert.call(void 0,void 0!==e.data.canonicalPath),e.data.canonicalPath=`local:${e.data.canonicalPath}`,e}r=new WeakMap,s.LocalLocation=class{constructor(e,t={}){a.__privateAdd.call(void 0,this,r,void 0),o.assertStruct.call(void 0,e.toString(),i.LocalSnapIdStruct,"Invalid Snap Id"),o.assert.call(void 0,void 0===t.fetchOptions,"Currently adding fetch options to local: is unsupported."),a.__privateSet.call(void 0,this,r,new(0,n.HttpLocation)(new URL(e.toString().slice(i.SnapIdPrefixes.local.length)),{...t,fetchOptions:{cache:"no-cache"}}))}async manifest(){return c(await a.__privateGet.call(void 0,this,r).manifest())}async fetch(e){return c(await a.__privateGet.call(void 0,this,r).fetch(e))}get shouldAlwaysReload(){return!0}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-LWBPKSU2.js"}],[2142,{"@metamask/snaps-utils":2227,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/snaps-utils"),n=e("@metamask/utils").createModuleLogger.call(void 0,r.snapsLogger,"snaps-controllers");s.log=n}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-NXZVKBSV.js"}],[2143,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OHMCPTOI.js"}],[2144,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-OIEUL55W.js"}],[2145,{"./chunk-LWBPKSU2.js":2141,"./chunk-RDBT3ZJQ.js":2146,"./chunk-XWDEGRM5.js":2150,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-LWBPKSU2.js"),n=e("./chunk-XWDEGRM5.js"),a=e("./chunk-RDBT3ZJQ.js"),i=e("@metamask/utils");s.detectSnapLocation=function(e,t){const s=t?.allowHttp??!1,o=t?.allowLocal??!1,c=new URL(e);switch(c.protocol){case"npm:":return new(0,n.NpmLocation)(c,t);case"local:":return i.assert.call(void 0,o,new TypeError("Fetching local snaps is disabled.")),new(0,r.LocalLocation)(c,t);case"http:":case"https:":return i.assert.call(void 0,s,new TypeError("Fetching snaps through http/https is disabled.")),new(0,a.HttpLocation)(c,t);default:throw new TypeError(`Unrecognized "${c.protocol}" snap location protocol.`)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-PT22IXNS.js"}],[2146,{"@metamask/snaps-utils":2227,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/snaps-utils"),n=e("@metamask/utils");s.HttpLocation=class{constructor(e,t={}){this.cache=new Map,n.assertStruct.call(void 0,e.toString(),r.HttpSnapIdStruct,"Invalid Snap Id: "),this.fetchFn=t.fetch??globalThis.fetch.bind(globalThis),this.fetchOptions=t.fetchOptions,this.url=e}async manifest(){if(this.validatedManifest)return this.validatedManifest.clone();const e=new URL(r.NpmSnapFileNames.Manifest,this.url).toString(),t=await this.fetchFn(e,this.fetchOptions);if(!t.ok)throw new Error(`Failed to fetch "${e}". Status code: ${t.status}.`);const s=await t.text(),n=r.parseJson.call(void 0,s),a=new(0,r.VirtualFile)({value:s,result:r.createSnapManifest.call(void 0,n),path:r.NpmSnapFileNames.Manifest,data:{canonicalPath:e}});return this.validatedManifest=a,this.manifest()}async fetch(e){const t=r.normalizeRelative.call(void 0,e),s=this.cache.get(t);if(void 0!==s){const{file:e,contents:t}=s,r=new Uint8Array(await t.arrayBuffer()),n=e.clone();return n.value=r,n}const a=this.toCanonical(t).toString(),i=await this.fetchFn(a,this.fetchOptions);if(!i.ok)throw new Error(`Failed to fetch "${a}". Status code: ${i.status}.`);const o=new(0,r.VirtualFile)({value:"",path:t,data:{canonicalPath:a}}),c=await i.blob();return n.assert.call(void 0,!this.cache.has(t),"Corrupted cache, multiple files with same path."),this.cache.set(t,{file:o,contents:c}),this.fetch(t)}get root(){return new URL(this.url)}toCanonical(e){return n.assert.call(void 0,!e.startsWith("/"),"Tried to parse absolute path."),new URL(e,this.url)}}}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-RDBT3ZJQ.js"}],[2147,{"./chunk-BOFPNIRX.js":2126,"./chunk-CDTGUNSA.js":2128,"./chunk-EXN2TFDJ.js":2132,"./chunk-NXZVKBSV.js":2142,"@metamask/json-rpc-engine":1484,"@metamask/json-rpc-middleware-stream":2189,"@metamask/object-multiplex":1777,"@metamask/rpc-errors":1884,"@metamask/snaps-utils":2227,"@metamask/utils":2739,nanoid:2263,"readable-stream":4734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m,p,f,g,v,_,k,y=e("./chunk-NXZVKBSV.js"),S=e("./chunk-CDTGUNSA.js"),w=e("./chunk-BOFPNIRX.js"),b=e("./chunk-EXN2TFDJ.js"),T=e("@metamask/json-rpc-engine"),E=e("@metamask/json-rpc-middleware-stream"),P=e("@metamask/object-multiplex"),j=(r=P)&&r.__esModule?r:{default:r},I=e("@metamask/rpc-errors"),C=e("@metamask/snaps-utils"),A=e("@metamask/utils"),x=e("nanoid"),R=e("readable-stream"),N="ExecutionService";function M(e,t){const s=new(0,j.default);return R.pipeline.call(void 0,e,s,e,(e=>{e&&(t?C.logError.call(void 0,`"${t}" stream failure.`,e):C.logError.call(void 0,e))})),s}n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,m=function(e){b.__privateGet.call(void 0,this,n).delete(e)},p=new WeakSet,f=function(e,t){b.__privateGet.call(void 0,this,n).set(e,(async({origin:s,handler:r,request:n})=>await this.command(t,{id:x.nanoid.call(void 0),jsonrpc:"2.0",method:"snapRpc",params:{origin:s,handler:r,request:n,target:e}})))},g=new WeakSet,v=function(e,t){b.__privateGet.call(void 0,this,a).set(e,t),b.__privateGet.call(void 0,this,i).set(t,e)},_=new WeakSet,k=function(e){const t=b.__privateGet.call(void 0,this,i).get(e);if(!t)throw new Error(`job: "${e}" has no mapped snap.`);b.__privateGet.call(void 0,this,i).delete(e),b.__privateGet.call(void 0,this,a).delete(t),b.__privateMethod.call(void 0,this,h,m).call(this,t)},s.AbstractExecutionService=class{constructor({setupSnapProvider:e,messenger:t,initTimeout:s=A.inMilliseconds.call(void 0,60,A.Duration.Second),pingTimeout:r=A.inMilliseconds.call(void 0,2,A.Duration.Second),terminationTimeout:m=A.inMilliseconds.call(void 0,1,A.Duration.Second),usePing:f=!0}){b.__privateAdd.call(void 0,this,h),b.__privateAdd.call(void 0,this,p),b.__privateAdd.call(void 0,this,g),b.__privateAdd.call(void 0,this,_),b.__privateAdd.call(void 0,this,n,void 0),b.__privateAdd.call(void 0,this,a,void 0),b.__privateAdd.call(void 0,this,i,void 0),b.__privateAdd.call(void 0,this,o,void 0),b.__privateAdd.call(void 0,this,c,void 0),b.__privateAdd.call(void 0,this,l,void 0),b.__privateAdd.call(void 0,this,u,void 0),b.__privateAdd.call(void 0,this,d,void 0),b.__privateSet.call(void 0,this,n,new Map),this.jobs=new Map,this.setupSnapProvider=e,b.__privateSet.call(void 0,this,a,new Map),b.__privateSet.call(void 0,this,i,new Map),b.__privateSet.call(void 0,this,o,t),b.__privateSet.call(void 0,this,c,s),b.__privateSet.call(void 0,this,l,r),b.__privateSet.call(void 0,this,u,m),b.__privateSet.call(void 0,this,d,f),this.registerMessageHandlers()}registerMessageHandlers(){b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:handleRpcRequest`,(async(e,t)=>this.handleRpcRequest(e,t))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:executeSnap`,(async e=>this.executeSnap(e))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:terminateSnap`,(async e=>this.terminateSnap(e))),b.__privateGet.call(void 0,this,o).registerActionHandler(`${N}:terminateAllSnaps`,(async()=>this.terminateAllSnaps()))}async terminate(e){const t=this.jobs.get(e);if(!t)throw new Error(`Job with id "${e}" not found.`);try{const t=await S.withTimeout.call(void 0,this.command(e,{jsonrpc:"2.0",method:"terminate",params:[],id:x.nanoid.call(void 0)}),b.__privateGet.call(void 0,this,u));t!==S.hasTimedOut&&"OK"===t||C.logError.call(void 0,`Job "${e}" failed to terminate gracefully.`,t)}catch{}Object.values(t.streams).forEach((e=>{try{!e.destroyed&&e.destroy(),e.removeAllListeners()}catch(e){C.logError.call(void 0,"Error while destroying stream",e)}})),this.terminateJob(t),this.jobs.delete(e),b.__privateMethod.call(void 0,this,_,k).call(this,e),y.log.call(void 0,`Job "${e}" terminated.`)}async initJob(e,t){const{streams:s,worker:r}=await this.initStreams(e,t),n=new(0,T.JsonRpcEngine),a=E.createStreamMiddleware.call(void 0);R.pipeline.call(void 0,a.stream,s.command,a.stream,(e=>{e&&C.logError.call(void 0,"Command stream failure.",e)})),n.push(a.middleware);const i={id:e,streams:s,rpcEngine:n,worker:r};return this.jobs.set(e,i),i}async initStreams(e,t){const s=await S.withTimeout.call(void 0,this.initEnvStream(e),t);if(s===S.hasTimedOut)throw this.terminateJob({id:e}),new Error("The Snaps execution environment failed to start.");const{worker:r,stream:n}=s,a=M(n,`Job: "${e}"`),c=a.createStream(C.SNAP_STREAM_NAMES.COMMAND),l=t=>{if(!A.isJsonRpcNotification.call(void 0,t))return;const s=b.__privateGet.call(void 0,this,i).get(e);"OutboundRequest"===t.method?b.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundRequest",s):"OutboundResponse"===t.method?b.__privateGet.call(void 0,this,o).publish("ExecutionService:outboundResponse",s):"UnhandledError"===t.method?A.isObject.call(void 0,t.params)&&t.params.error?(b.__privateGet.call(void 0,this,o).publish("ExecutionService:unhandledError",s,t.params.error),c.removeListener("data",l)):C.logError.call(void 0,new Error(`Received malformed "${t.method}" command stream notification.`)):C.logError.call(void 0,new Error(`Received unexpected command stream notification "${t.method}".`))};c.on("data",l);const u=a.createStream(C.SNAP_STREAM_NAMES.JSON_RPC);return{streams:{command:c,rpc:u,_connection:n},worker:r}}async terminateSnap(e){const t=b.__privateGet.call(void 0,this,a).get(e);t&&await this.terminate(t)}async terminateAllSnaps(){await Promise.all([...this.jobs.keys()].map((async e=>this.terminate(e)))),b.__privateGet.call(void 0,this,n).clear()}getRpcRequestHandler(e){return b.__privateGet.call(void 0,this,n).get(e)}async executeSnap({snapId:e,sourceCode:t,endowments:s}){if(b.__privateGet.call(void 0,this,a).has(e))throw new Error(`Snap "${e}" is already being executed.`);const r=x.nanoid.call(void 0),n=new(0,w.Timer)(b.__privateGet.call(void 0,this,c)),i=await this.initJob(r,n);if(b.__privateMethod.call(void 0,this,g,v).call(this,e,i.id),b.__privateGet.call(void 0,this,d)){if(await S.withTimeout.call(void 0,this.command(i.id,{jsonrpc:"2.0",method:"ping",id:x.nanoid.call(void 0)}),b.__privateGet.call(void 0,this,l))===S.hasTimedOut)throw new Error("The Snaps execution environment failed to start.")}const o=i.streams.rpc;this.setupSnapProvider(e,o);const u=n.remaining,h=await S.withTimeout.call(void 0,this.command(i.id,{jsonrpc:"2.0",method:"executeSnap",params:{snapId:e,sourceCode:t,endowments:s},id:x.nanoid.call(void 0)}),u);if(h===S.hasTimedOut)throw new Error(`${e} failed to start.`);return b.__privateMethod.call(void 0,this,p,f).call(this,e,i.id),h}async command(e,t){A.assertIsJsonRpcRequest.call(void 0,t);const s=this.jobs.get(e);if(!s)throw new Error(`Job with id "${e}" not found.`);y.log.call(void 0,"Parent: Sending Command",t);const r=await s.rpcEngine.handle(t);if(r.error)throw new(0,I.JsonRpcError)(r.error.code,r.error.message,r.error.data);return r.result}async handleRpcRequest(e,t){const s=this.getRpcRequestHandler(e);if(!s)throw new Error(`Snap execution service returned no RPC handler for running snap "${e}".`);return s(t)}},s.setupMultiplex=M}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-S775IABY.js"}],[2148,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-VNOCJWOK.js"}],[2149,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-WEY7ICES.js"}],[215,{"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){if((0,r.hasProperty)(e,"NftController")&&(0,r.isObject)(e.NftController)){const t=e.NftController;if((0,r.hasProperty)(t,"allNftContracts")&&(0,r.isObject)(t.allNftContracts)){const{allNftContracts:e}=t;Object.keys(e).every((t=>(0,r.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const s=e[t];if((0,r.isObject)(s)&&n(s))for(const e of Object.keys(s))(0,r.isStrictHexString)(e)||delete s[e]}))}if((0,r.hasProperty)(t,"allNfts")&&(0,r.isObject)(t.allNfts)){const{allNfts:e}=t;Object.keys(e).every((t=>(0,r.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const s=e[t];if((0,r.isObject)(s)&&n(s))for(const e of Object.keys(s))(0,r.isStrictHexString)(e)||delete s[e]}))}e.NftController=t}if((0,r.hasProperty)(e,"TokenListController")&&(0,r.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,r.hasProperty)(t,"tokensChainsCache")&&(0,r.isObject)(t.tokensChainsCache)&&n(t.tokensChainsCache))for(const e of Object.keys(t.tokensChainsCache))(0,r.isStrictHexString)(e)||delete t.tokensChainsCache[e]}if((0,r.hasProperty)(e,"TokensController")&&(0,r.isObject)(e.TokensController)){const t=e.TokensController;if((0,r.hasProperty)(t,"allTokens")&&(0,r.isObject)(t.allTokens)&&n(t.allTokens)){const{allTokens:e}=t;for(const s of Object.keys(e))(0,r.isStrictHexString)(s)||delete t.allTokens[s]}if((0,r.hasProperty)(t,"allIgnoredTokens")&&(0,r.isObject)(t.allIgnoredTokens)&&n(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const s of Object.keys(e))(0,r.isStrictHexString)(s)||delete t.allIgnoredTokens[s]}if((0,r.hasProperty)(t,"allDetectedTokens")&&(0,r.isObject)(t.allDetectedTokens)&&n(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const s of Object.keys(e))(0,r.isStrictHexString)(s)||delete t.allDetectedTokens[s]}e.TokensController=t}return e};var r=e("@metamask/utils");function n(e){return Object.keys(e).some((e=>(0,r.isStrictHexString)(e)))}}}},{package:"$root$",file:"app/scripts/migrations/077-supplements/077-supplement-for-088.ts"}],[2150,{"./chunk-EXN2TFDJ.js":2132,"@metamask/snaps-utils":2227,"@metamask/utils":2739,"browserify-zlib":3514,"concat-stream":2262,"get-npm-tarball-url":3895,"readable-stream":4734,"readable-web-to-node-stream":4735,"tar-stream":4832},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var n,a,i,o,c=e("./chunk-EXN2TFDJ.js"),l=e("@metamask/snaps-utils"),u=e("@metamask/utils"),d=e("browserify-zlib"),h=r(e("concat-stream")),m=r(e("get-npm-tarball-url")),p=e("readable-stream"),f=e("readable-web-to-node-stream"),g=e("tar-stream"),v=new URL("https://registry.npmjs.org"),_=class{constructor(e,t={}){c.__privateAdd.call(void 0,this,i),c.__privateAdd.call(void 0,this,n,void 0),c.__privateAdd.call(void 0,this,a,void 0);const s=t.allowCustomRegistries??!1,r=t.fetch??globalThis.fetch.bind(globalThis),o=t.versionRange??l.DEFAULT_REQUESTED_SNAP_VERSION,d=t.resolveVersion??(async e=>e);let h;u.assertStruct.call(void 0,e.toString(),l.NpmSnapIdStruct,"Invalid Snap Id: "),""===e.host&&""===e.port&&""===e.username&&""===e.password?h=v:(h="https://",e.username&&(h+=e.username,e.password&&(h+=`:${e.password}`),h+="@"),h+=e.host,h=new URL(h),u.assert.call(void 0,s,new TypeError(`Custom NPM registries are disabled, tried to use "${h.toString()}".`))),u.assert.call(void 0,"/"===h.pathname&&""===h.search&&""===h.hash),u.assert.call(void 0,""!==e.pathname&&"/"!==e.pathname,new TypeError("The package name in NPM location is empty."));let m=e.pathname;m.startsWith("/")&&(m=m.slice(1)),this.meta={requestedRange:o,registry:h,packageName:m,fetch:r,resolveVersion:d}}async manifest(){if(c.__privateGet.call(void 0,this,n))return c.__privateGet.call(void 0,this,n).clone();const e=await this.fetch("snap.manifest.json"),t=l.parseJson.call(void 0,e.toString());return e.result=l.createSnapManifest.call(void 0,t),c.__privateSet.call(void 0,this,n,e),this.manifest()}async fetch(e){const t=l.normalizeRelative.call(void 0,e);c.__privateGet.call(void 0,this,a)||(await c.__privateMethod.call(void 0,this,i,o).call(this),u.assert.call(void 0,void 0!==c.__privateGet.call(void 0,this,a)));const s=c.__privateGet.call(void 0,this,a).get(t);return u.assert.call(void 0,void 0!==s,new TypeError(`File "${e}" not found in package.`)),s.clone()}get packageName(){return this.meta.packageName}get version(){return u.assert.call(void 0,void 0!==this.meta.version,"Tried to access version without first fetching NPM package."),this.meta.version}get registry(){return this.meta.registry}get versionRange(){return this.meta.requestedRange}};n=new WeakMap,a=new WeakMap,i=new WeakSet,o=async function(){u.assert.call(void 0,void 0===c.__privateGet.call(void 0,this,a));const e=await this.meta.resolveVersion(this.meta.requestedRange),{tarballURL:t,targetVersion:s}=await async function(e,t,s,r){if(w(s)&&u.isValidSemVerVersion.call(void 0,t))return{tarballURL:m.default.call(void 0,e,t),targetVersion:t};const n=await y(e,s,r),a=Object.keys(n?.versions??{}).map((e=>(u.assertIsSemVerVersion.call(void 0,e),e))),i=l.getTargetVersion.call(void 0,a,t);if(null===i)throw new Error(`Failed to find a matching version in npm metadata for package "${e}" and requested semver range "${t}".`);const o=n?.versions?.[i]?.dist?.tarball;return{tarballURL:o,targetVersion:i}}(this.meta.packageName,e,this.meta.registry,this.meta.fetch);if(!l.isValidUrl.call(void 0,t)||!t.toString().endsWith(".tgz"))throw new Error(`Failed to find valid tarball URL in NPM metadata for package "${this.meta.packageName}".`);const r=new URL(t);r.hostname=this.meta.registry.hostname,r.protocol=this.meta.registry.protocol;const n=await this.fetchNpmTarball(r);c.__privateSet.call(void 0,this,a,n),this.meta.version=s};var k=262144e3;async function y(e,t,s){const r=await s(new URL(e,t).toString(),{headers:{accept:w(t)?"application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch NPM registry entry. Status code: ${r.status}.`);const n=await r.json();if(!u.isObject.call(void 0,n))throw new Error(`Failed to fetch package "${e}" metadata from npm.`);return n}function S(e,t){let s="npm://";return""!==e.username&&(s+=e.username,""!==e.password&&(s+=`:${e.password}`),s+="@"),`${s}${e.host}/${t}/`}function w(e){return e.toString()===v.toString()}var b=/^package\//u;function T(e){return"function"!=typeof e.getReader?e:new(0,f.ReadableWebToNodeStream)(e)}s.DEFAULT_NPM_REGISTRY=v,s.BaseNpmLocation=_,s.TARBALL_SIZE_SAFETY_LIMIT=k,s.NpmLocation=class extends _{async fetchNpmTarball(e){const t=await this.meta.fetch(e.toString());if(!t.ok||!t.body)throw new Error(`Failed to fetch tarball for package "${this.meta.packageName}".`);const s=t.headers.get("content-length");u.assert.call(void 0,s,"Snap tarball has invalid content-length");const r=parseInt(s,10);return u.assert.call(void 0,r<=k,"Snap tarball exceeds size limit"),new Promise(((e,s)=>{const r=new Map,n=function(e,t){u.assert.call(void 0,e.endsWith("/"),"Base needs to end with '/' for relative paths to be added as children instead of siblings."),u.assert.call(void 0,e.startsWith("npm:"),'Protocol mismatch, expected "npm:".');const s=g.extract.call(void 0);let r=0;return s.on("entry",((n,a,i)=>{const{name:o,type:c}=n;if("file"===c){const n=o.replace(b,"");return a.pipe(h.default.call(void 0,{encoding:"uint8array"},(a=>{try{r+=a.byteLength,u.assert.call(void 0,r<k,"Snap tarball exceeds limit of 262144000 bytes.");const s=new(0,l.VirtualFile)({value:a,path:n,data:{canonicalPath:new URL(n,e).toString()}});return u.assert.call(void 0,!t.has(n),"Malformed tarball, multiple files with the same path."),t.set(n,s),i()}catch(e){return s.destroy(e)}})))}return a.on("end",(()=>i())),a.resume()})),s}(S(this.meta.registry,this.meta.packageName),r),a=t.body;if("pipeThrough"in a&&"DecompressionStream"in globalThis){const t=new DecompressionStream("gzip"),i=a.pipeThrough(t);p.pipeline.call(void 0,T(i),n,(t=>{t?s(t):e(r)}))}else p.pipeline.call(void 0,T(a),d.createGunzip.call(void 0),n,(t=>{t?s(t):e(r)}))}))}},s.fetchNpmMetadata=y,s.getNpmCanonicalBasePath=S}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-XWDEGRM5.js"}],[2151,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});s.getRunnableSnaps=e=>e.filter((e=>e.enabled&&!e.blocked))}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-YYPUPKQY.js"}],[2152,{"./chunk-S775IABY.js":2147,"@metamask/post-message-stream":1850,"@metamask/snaps-utils":2227},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-S775IABY.js"),n=e("@metamask/post-message-stream"),a=e("@metamask/snaps-utils"),i=class extends r.AbstractExecutionService{constructor({iframeUrl:e,messenger:t,setupSnapProvider:s}){super({messenger:t,setupSnapProvider:s}),this.iframeUrl=e}terminateJob(e){document.getElementById(e.id)?.remove()}async initEnvStream(e){const t=await a.createWindow.call(void 0,this.iframeUrl.toString(),e);return{worker:t,stream:new(0,n.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"})}}};s.IframeExecutionService=i}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/chunk-ZRC46TUF.js"}],[2153,{"./chunk-4CA3O64H.js":2120,"./chunk-4URGXJP7.js":2121,"./chunk-6ERB63FH.js":2122,"./chunk-7Y6P5FRN.js":2123,"./chunk-AP7CJ6DA.js":2124,"./chunk-BO2ZDPWV.js":2125,"./chunk-BOFPNIRX.js":2126,"./chunk-BUHS4M6F.js":2127,"./chunk-CDTGUNSA.js":2128,"./chunk-CPUUURMT.js":2129,"./chunk-D74XJG2L.js":2130,"./chunk-E52MHHG4.js":2131,"./chunk-EXN2TFDJ.js":2132,"./chunk-G66GQJS6.js":2133,"./chunk-GRBWVPLF.js":2134,"./chunk-H7TB7I6Z.js":2135,"./chunk-HOY6NKQR.js":2136,"./chunk-HQ6HMINL.js":2137,"./chunk-JAUAKTUL.js":2138,"./chunk-JQ54YYLU.js":2139,"./chunk-KH72WRHR.js":2140,"./chunk-LWBPKSU2.js":2141,"./chunk-NXZVKBSV.js":2142,"./chunk-OHMCPTOI.js":2143,"./chunk-OIEUL55W.js":2144,"./chunk-PT22IXNS.js":2145,"./chunk-RDBT3ZJQ.js":2146,"./chunk-S775IABY.js":2147,"./chunk-VNOCJWOK.js":2148,"./chunk-WEY7ICES.js":2149,"./chunk-XWDEGRM5.js":2150,"./chunk-YYPUPKQY.js":2151,"./chunk-ZRC46TUF.js":2152},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-GRBWVPLF.js");e("./chunk-JAUAKTUL.js");var n=e("./chunk-E52MHHG4.js");e("./chunk-WEY7ICES.js");var a=e("./chunk-PT22IXNS.js"),i=e("./chunk-LWBPKSU2.js"),o=e("./chunk-XWDEGRM5.js");e("./chunk-G66GQJS6.js");var c=e("./chunk-CPUUURMT.js"),l=e("./chunk-4CA3O64H.js"),u=e("./chunk-RDBT3ZJQ.js");e("./chunk-AP7CJ6DA.js"),e("./chunk-JQ54YYLU.js");var d=e("./chunk-YYPUPKQY.js");e("./chunk-VNOCJWOK.js");var h=e("./chunk-BUHS4M6F.js");e("./chunk-H7TB7I6Z.js"),e("./chunk-4URGXJP7.js"),e("./chunk-OHMCPTOI.js"),e("./chunk-D74XJG2L.js");var m=e("./chunk-HQ6HMINL.js");e("./chunk-HOY6NKQR.js");var p=e("./chunk-ZRC46TUF.js"),f=e("./chunk-6ERB63FH.js");e("./chunk-KH72WRHR.js");var g=e("./chunk-S775IABY.js");e("./chunk-OIEUL55W.js");var v=e("./chunk-7Y6P5FRN.js");e("./chunk-BO2ZDPWV.js"),e("./chunk-NXZVKBSV.js");var _=e("./chunk-CDTGUNSA.js");e("./chunk-BOFPNIRX.js"),e("./chunk-EXN2TFDJ.js"),s.AbstractExecutionService=g.AbstractExecutionService,s.BaseNpmLocation=o.BaseNpmLocation,s.CronjobController=r.CronjobController,s.DAILY_TIMEOUT=r.DAILY_TIMEOUT,s.DEFAULT_NPM_REGISTRY=o.DEFAULT_NPM_REGISTRY,s.HttpLocation=u.HttpLocation,s.IframeExecutionService=p.IframeExecutionService,s.JsonSnapsRegistry=c.JsonSnapsRegistry,s.LocalLocation=i.LocalLocation,s.NpmLocation=o.NpmLocation,s.OffscreenExecutionService=f.OffscreenExecutionService,s.ProxyPostMessageStream=v.ProxyPostMessageStream,s.SNAP_APPROVAL_INSTALL=n.SNAP_APPROVAL_INSTALL,s.SNAP_APPROVAL_RESULT=n.SNAP_APPROVAL_RESULT,s.SNAP_APPROVAL_UPDATE=n.SNAP_APPROVAL_UPDATE,s.SnapController=n.SnapController,s.SnapInterfaceController=h.SnapInterfaceController,s.SnapsRegistryStatus=l.SnapsRegistryStatus,s.TARBALL_SIZE_SAFETY_LIMIT=o.TARBALL_SIZE_SAFETY_LIMIT,s.WebWorkerExecutionService=m.WebWorkerExecutionService,s.calculateConnectionsChange=_.calculateConnectionsChange,s.controllerName=n.controllerName,s.delay=_.delay,s.delayWithTimer=_.delayWithTimer,s.detectSnapLocation=a.detectSnapLocation,s.fetchNpmMetadata=o.fetchNpmMetadata,s.fetchSnap=_.fetchSnap,s.getNpmCanonicalBasePath=o.getNpmCanonicalBasePath,s.getRunnableSnaps=d.getRunnableSnaps,s.getSnapFiles=_.getSnapFiles,s.hasTimedOut=_.hasTimedOut,s.permissionsDiff=_.permissionsDiff,s.setDiff=_.setDiff,s.setupMultiplex=g.setupMultiplex,s.withTimeout=_.withTimeout}}},{package:"@metamask/snaps-controllers",file:"node_modules/@metamask/snaps-controllers/dist/index.js"}],[2154,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,s=!0){if(s){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const s=e[t];this.internalConfig[t]=s,this[t]=s}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},n=r;s.BaseControllerV1=r,s.BaseControllerV1_default=n}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2155,{"./chunk-UJFCPTF3.js":2157,"./chunk-Z4BLTVTB.js":2158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");r=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,s.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,r,new Map),c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,a,new Map),c.__privateAdd.call(void 0,this,i,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,r).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,r).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,r).delete(e)}clearActions(){c.__privateGet.call(void 0,this,r).clear()}call(e,...t){const s=c.__privateGet.call(void 0,this,r).get(e);if(!s)throw new Error(`A handler for ${e} has not been registered`);return s(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,a).set(e,t)}publish(e,...t){const s=c.__privateGet.call(void 0,this,n).get(e);if(s)for(const[e,r]of s.entries())try{if(r){const s=c.__privateGet.call(void 0,this,i).get(e),n=r(...t);n!==s&&(c.__privateGet.call(void 0,this,i).set(e,n),e(n,s))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,s){let r=c.__privateGet.call(void 0,this,n).get(e);if(r||(r=new Map,c.__privateGet.call(void 0,this,n).set(e,r)),r.set(t,s),s){const r=c.__privateGet.call(void 0,this,a).get(e);if(r){const e=s(...r());c.__privateGet.call(void 0,this,i).set(t,e)}}}unsubscribe(e,t){const s=c.__privateGet.call(void 0,this,n).get(e);if(!s||!s.has(t))throw new Error(`Subscription not found for event: ${e}`);s.get(t)&&c.__privateGet.call(void 0,this,i).delete(t),s.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,n).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,n).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:s}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:s})}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2156,{"./chunk-Z4BLTVTB.js":2158,immer:4126},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-Z4BLTVTB.js"),a=e("immer");a.enablePatches.call(void 0);function i(e,t,s){return Object.keys(e).reduce(((r,n)=>{try{const a=t[n];if(!a)throw new Error(`No metadata found for '${String(n)}'`);const i=a[s],o=e[n];return"function"==typeof i?r[n]=i(o):i&&(r[n]=o),r}catch(e){return setTimeout((()=>{throw e})),r}}),{})}r=new WeakMap,s.BaseController=class{constructor({messenger:e,metadata:t,name:s,state:i}){n.__privateAdd.call(void 0,this,r,void 0),this.messagingSystem=e,this.name=s,n.__privateSet.call(void 0,this,r,a.freeze.call(void 0,i,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${s}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${s}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return n.__privateGet.call(void 0,this,r)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,s,i]=a.produceWithPatches.call(void 0,n.__privateGet.call(void 0,this,r),e);return n.__privateSet.call(void 0,this,r,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,s),{nextState:t,patches:s,inversePatches:i}}applyPatches(e){const t=a.applyPatches.call(void 0,n.__privateGet.call(void 0,this,r),e);n.__privateSet.call(void 0,this,r,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},s.getAnonymizedState=function(e,t){return i(e,t,"anonymous")},s.getPersistentState=function(e,t){return i(e,t,"persist")}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2157,{"./chunk-Z4BLTVTB.js":2158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i,o,c,l,u,d,h,m=e("./chunk-Z4BLTVTB.js");r=new WeakMap,n=new WeakMap,a=new WeakMap,i=new WeakMap,o=new WeakSet,c=function(e){const t=m.__privateGet.call(void 0,this,i);return m.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},l=new WeakSet,u=function(e){const t=m.__privateGet.call(void 0,this,a);return m.__privateMethod.call(void 0,this,d,h).call(this,e)||null!==t&&t.includes(e)},d=new WeakSet,h=function(e){return e.startsWith(`${m.__privateGet.call(void 0,this,n)}:`)},s.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:s,allowedEvents:c}){m.__privateAdd.call(void 0,this,o),m.__privateAdd.call(void 0,this,l),m.__privateAdd.call(void 0,this,d),m.__privateAdd.call(void 0,this,r,void 0),m.__privateAdd.call(void 0,this,n,void 0),m.__privateAdd.call(void 0,this,a,void 0),m.__privateAdd.call(void 0,this,i,void 0),m.__privateSet.call(void 0,this,r,e),m.__privateSet.call(void 0,this,n,t),m.__privateSet.call(void 0,this,a,s),m.__privateSet.call(void 0,this,i,c)}registerActionHandler(e,t){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,r).registerActionHandler(e,t)}unregisterActionHandler(e){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,r).unregisterActionHandler(e)}call(e,...t){if(!m.__privateMethod.call(void 0,this,l,u).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return m.__privateGet.call(void 0,this,r).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,r).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,r).publish(e,...t)}subscribe(e,t,s){if(!m.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return s?m.__privateGet.call(void 0,this,r).subscribe(e,t,s):m.__privateGet.call(void 0,this,r).subscribe(e,t)}unsubscribe(e,t){if(!m.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);m.__privateGet.call(void 0,this,r).unsubscribe(e,t)}clearEventSubscriptions(e){if(!m.__privateMethod.call(void 0,this,d,h).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${m.__privateGet.call(void 0,this,n)}:'`);m.__privateGet.call(void 0,this,r).clearEventSubscriptions(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2158,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__privateGet=(e,t,s)=>(r(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,n)=>(r(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),s.__privateMethod=(e,t,s)=>(r(e,t,"access private method"),s)}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2159,{"./chunk-FTHCJ6HY.js":2154,"./chunk-G42723LG.js":2155,"./chunk-IURK6TKD.js":2156,"./chunk-UJFCPTF3.js":2157,"./chunk-Z4BLTVTB.js":2158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-FTHCJ6HY.js"),n=e("./chunk-IURK6TKD.js"),a=e("./chunk-G42723LG.js"),i=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),s.BaseController=n.BaseController,s.BaseControllerV1=r.BaseControllerV1,s.ControllerMessenger=a.ControllerMessenger,s.RestrictedControllerMessenger=i.RestrictedControllerMessenger,s.getAnonymizedState=n.getAnonymizedState,s.getPersistentState=n.getPersistentState}}},{package:"@metamask/snaps-controllers>@metamask/base-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/base-controller/dist/index.js"}],[216,{"./077-supplements/077-supplement-for-082":212,"./077-supplements/077-supplement-for-084":213,"./077-supplements/077-supplement-for-086":214,"./077-supplements/077-supplement-for-088":215,"@metamask/utils":2739,lodash:4322,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash"),n=u(e("loglevel")),a=e("@metamask/utils"),i=u(e("./077-supplements/077-supplement-for-082")),o=u(e("./077-supplements/077-supplement-for-084")),c=u(e("./077-supplements/077-supplement-for-086")),l=u(e("./077-supplements/077-supplement-for-088"));function u(e){return e&&e.__esModule?e:{default:e}}s.default={version:77,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=77;let s=function(e){if(!(0,a.hasProperty)(e,"TokenListController"))return n.default.warn("Skipping migration, TokenListController state is missing"),e;var t,s;if(!(0,a.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,a.hasProperty)(e.TokenListController,"tokensChainsCache"))return n.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;const{TokenListController:r}=e,{tokensChainsCache:i}=r;let o,c;for(const e in i){var l,u;if(o=i[e].data||{},c={},Array.isArray(o))for(const e of o)c[e.address]=e;else if((null===(l=Object.keys(o)[0])||void 0===l?void 0:l.toLowerCase())!==(null===(u=o[Object.keys(o)[0]])||void 0===u||null===(u=u.address)||void 0===u?void 0:u.toLowerCase()))for(const e in o)c[o[e].address]=o[e];i[e].data=Object.keys(c).length>0?c:o}return r.tokensChainsCache=i,{...e,TokenListController:{...r}}}(t.data);return s=(0,i.default)(s),s=(0,o.default)(s),s=(0,c.default)(s),s=(0,l.default)(s),t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/077.js"}],[2160,{"./chunk-PFNSOF67.js":2164,"@ethereumjs/util":461,"@metamask/ethjs-unit":1440,"@metamask/utils":2176,"bn.js":3472,buffer:3520,"eth-ens-namehash":3712,"fast-deep-equal":3842},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-PFNSOF67.js"),a=e("@ethereumjs/util"),i=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=r(e("bn.js")),l=r(e("eth-ens-namehash")),u=r(e("fast-deep-equal")),d=new Error("timeout"),h=["__proto__","constructor","prototype"];function m(e){return e?new(0,c.default)(o.remove0x.call(void 0,e),16):new(0,c.default)(0)}async function p(e,t){const s=await fetch(e,t);if(!s.ok)throw new Error(`Fetch failed with status '${s.status}' for request '${String(e)}'`);return s}async function f(e,t){const s=await p(e,t);return await s.json()}s.PROTOTYPE_POLLUTION_BLOCKLIST=h,s.isSafeDynamicKey=function(e){return"string"==typeof e&&!h.some((t=>e===t))},s.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=n.MAX_SAFE_CHAIN_ID},s.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},s.fractionBN=function(e,t,s){const r=new(0,c.default)(t),n=new(0,c.default)(s);return e.mul(r).div(n)},s.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,c.default)(0);const t=e.toString().split("."),s=t[0]||"0";let r=t[1]||"";if(!r)return i.toWei.call(void 0,s,"gwei");if(r.length<=9)return i.toWei.call(void 0,`${s}.${r}`,"gwei");const n=r.slice(9)[0];r=r.slice(0,9);let a=i.toWei.call(void 0,`${s}.${r}`,"gwei");return Number(n)>=5&&(a=a.add(new(0,c.default)(1))),a},s.weiHexToGweiDec=function(e){const t=new(0,c.default)(o.remove0x.call(void 0,e),16);return i.fromWei.call(void 0,t,"gwei")},s.getBuyURL=function(e="1",t,s=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${s}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},s.hexToBN=m,s.hexToText=function(e){try{const s=o.remove0x.call(void 0,e);return t.from(s,"hex").toString("utf8")}catch(t){return e}},s.fromHex=function(e){return c.default.isBN(e)?e:new(0,c.default)(m(e).toString(10))},s.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${c.default.isBN(e)?e.toString(16):new(0,c.default)(e.toString(),10).toString(16)}`},s.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},s.safelyExecuteWithTimeout=async function(e,t=!1,s=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(d)}),s)))])}catch(e){return void(t&&console.error(e))}},s.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?a.toChecksumAddress.call(void 0,t):t},s.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const s=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,s)&&a.isValidAddress.call(void 0,s)},s.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},s.successfulFetch=p,s.handleFetch=f,s.fetchWithErrorHandling=async function({url:e,options:t,timeout:s,errorCodesToCatch:r}){let n;try{n=s?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),s)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==d)throw e;console.error(e)}(e,r)}return n},s.timeoutFetch=async function(e,t,s=500){return Promise.race([p(e,t),new Promise(((e,t)=>setTimeout((()=>{t(d)}),s)))])},s.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=l.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},s.query=function(e,t,s=[]){return new Promise(((r,n)=>{const a=(e,t)=>{e?n(e):r(t)};t in e&&"function"==typeof e[t]?e[t](...s,a):e.sendAsync({method:t,params:s},a)}))},s.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,s.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isValidJson=function(e){try{return u.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-2CQ3YJMB.js"}],[2161,{"@metamask/utils":2176},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils"),n=r.createProjectLogger.call(void 0,"controller-utils");s.createModuleLogger=r.createModuleLogger,s.projectLogger=n}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[2162,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},n={...r,rpc:"rpc"};var a=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(a||{}),i={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});s.InfuraNetworkType=r,s.NetworkType=n,s.isNetworkType=function(e){return Object.values(n).includes(e)},s.isInfuraNetworkType=function(e){return Object.keys(r).includes(e)},s.BuiltInNetworkName=a,s.ChainId=i,s.NetworksTicker=o}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-F775U3C2.js"}],[2163,{"./chunk-DBJSLKNR.js":2161,"@metamask/utils":2176,"@spruceid/siwe-parser":3010,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-DBJSLKNR.js"),n=e("@metamask/utils"),a=e("@spruceid/siwe-parser"),i=r.createModuleLogger.call(void 0,r.projectLogger,"detect-siwe");function o(e){try{const r="string"!=typeof(s=e)?s:n.remove0x.call(void 0,s),a=t.from(r,"hex");return 32===a.length?e:a.toString("utf8")}catch(t){return i(t),e}var s}var c={"http:":"80","https:":"443"},l=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);s.parseDomainParts=l,s.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:s}=e;if(!t||!s?.parsedMessage?.domain)return!1;const r=new URL(t),n=l(s.parsedMessage.domain,r.protocol);return 0===n.hostname.localeCompare(r.hostname,void 0,{sensitivity:"accent"})&&(""!==n.port&&n.port!==r.port?""===r.port&&n.port===c[r.protocol]:""===n.username||n.username===r.username)}catch(e){return i(e),!1}},s.detectSIWE=e=>{try{const{data:t}=e,s=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,a.ParsedMessage)(s)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[2164,{"./chunk-F775U3C2.js":2162},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-F775U3C2.js"),n={[r.NetworkType.goerli]:{chainId:r.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${r.NetworkType.goerli}.etherscan.io`}},[r.NetworkType.sepolia]:{chainId:r.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${r.NetworkType.sepolia}.etherscan.io`}},[r.NetworkType.mainnet]:{chainId:r.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[r.NetworkType["linea-goerli"]]:{chainId:r.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[r.NetworkType["linea-sepolia"]]:{chainId:r.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[r.NetworkType["linea-mainnet"]]:{chainId:r.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[r.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},a=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SnapDialogDefault="snap_dialog",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(a||{}),i={[r.ChainId.goerli]:"goerli",[r.ChainId.sepolia]:"sepolia",[r.ChainId.mainnet]:"mainnet",[r.ChainId["linea-goerli"]]:"linea-goerli",[r.ChainId["linea-sepolia"]]:"linea-sepolia",[r.ChainId["linea-mainnet"]]:"linea-mainnet",[r.ChainId.aurora]:"aurora"};s.RPC="rpc",s.FALL_BACK_VS_CURRENCY="ETH",s.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",s.GANACHE_CHAIN_ID="0x539",s.MAX_SAFE_CHAIN_ID=0xfffffffffffec,s.ERC721="ERC721",s.ERC1155="ERC1155",s.ERC20="ERC20",s.ERC721_INTERFACE_ID="0x80ac58cd",s.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",s.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",s.ERC1155_INTERFACE_ID="0xd9b67a26",s.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",s.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",s.GWEI="gwei",s.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},s.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},s.BUILT_IN_NETWORKS=n,s.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",s.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",s.NFT_API_VERSION="1",s.NFT_API_TIMEOUT=15e3,s.ORIGIN_METAMASK="metamask",s.ApprovalType=a,s.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=i}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/chunk-PFNSOF67.js"}],[2165,{"./chunk-2CQ3YJMB.js":2160,"./chunk-DBJSLKNR.js":2161,"./chunk-F775U3C2.js":2162,"./chunk-M6G3ISXG.js":2163,"./chunk-PFNSOF67.js":2164},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var n=e("./chunk-2CQ3YJMB.js"),a=e("./chunk-PFNSOF67.js"),i=e("./chunk-F775U3C2.js");s.ASSET_TYPES=a.ASSET_TYPES,s.ApprovalType=a.ApprovalType,s.BNToHex=n.BNToHex,s.BUILT_IN_NETWORKS=a.BUILT_IN_NETWORKS,s.BuiltInNetworkName=i.BuiltInNetworkName,s.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=a.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,s.ChainId=i.ChainId,s.ERC1155=a.ERC1155,s.ERC1155_INTERFACE_ID=a.ERC1155_INTERFACE_ID,s.ERC1155_METADATA_URI_INTERFACE_ID=a.ERC1155_METADATA_URI_INTERFACE_ID,s.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=a.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,s.ERC20=a.ERC20,s.ERC721=a.ERC721,s.ERC721_ENUMERABLE_INTERFACE_ID=a.ERC721_ENUMERABLE_INTERFACE_ID,s.ERC721_INTERFACE_ID=a.ERC721_INTERFACE_ID,s.ERC721_METADATA_INTERFACE_ID=a.ERC721_METADATA_INTERFACE_ID,s.FALL_BACK_VS_CURRENCY=a.FALL_BACK_VS_CURRENCY,s.GANACHE_CHAIN_ID=a.GANACHE_CHAIN_ID,s.GWEI=a.GWEI,s.IPFS_DEFAULT_GATEWAY_URL=a.IPFS_DEFAULT_GATEWAY_URL,s.InfuraNetworkType=i.InfuraNetworkType,s.MAX_SAFE_CHAIN_ID=a.MAX_SAFE_CHAIN_ID,s.NFT_API_BASE_URL=a.NFT_API_BASE_URL,s.NFT_API_TIMEOUT=a.NFT_API_TIMEOUT,s.NFT_API_VERSION=a.NFT_API_VERSION,s.NetworkType=i.NetworkType,s.NetworksTicker=i.NetworksTicker,s.OPENSEA_PROXY_URL=a.OPENSEA_PROXY_URL,s.ORIGIN_METAMASK=a.ORIGIN_METAMASK,s.RPC=a.RPC,s.TESTNET_TICKER_SYMBOLS=a.TESTNET_TICKER_SYMBOLS,s.convertHexToDecimal=n.convertHexToDecimal,s.detectSIWE=r.detectSIWE,s.fetchWithErrorHandling=n.fetchWithErrorHandling,s.fractionBN=n.fractionBN,s.fromHex=n.fromHex,s.getBuyURL=n.getBuyURL,s.gweiDecToWEIBN=n.gweiDecToWEIBN,s.handleFetch=n.handleFetch,s.hexToBN=n.hexToBN,s.hexToText=n.hexToText,s.isInfuraNetworkType=i.isInfuraNetworkType,s.isNetworkType=i.isNetworkType,s.isNonEmptyArray=n.isNonEmptyArray,s.isPlainObject=n.isPlainObject,s.isSafeChainId=n.isSafeChainId,s.isSafeDynamicKey=n.isSafeDynamicKey,s.isSmartContractCode=n.isSmartContractCode,s.isValidHexAddress=n.isValidHexAddress,s.isValidJson=n.isValidJson,s.isValidSIWEOrigin=r.isValidSIWEOrigin,s.normalizeEnsName=n.normalizeEnsName,s.parseDomainParts=r.parseDomainParts,s.query=n.query,s.safelyExecute=n.safelyExecute,s.safelyExecuteWithTimeout=n.safelyExecuteWithTimeout,s.successfulFetch=n.successfulFetch,s.timeoutFetch=n.timeoutFetch,s.toChecksumHexAddress=n.toChecksumHexAddress,s.toHex=n.toHex,s.weiHexToGweiDec=n.weiHexToGweiDec}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/dist/index.js"}],[2166,{"./errors.cjs":2174,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const r=e("@metamask/superstruct"),n=e("./errors.cjs");function a(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=i,s.assert=function(e,t="Assertion failed.",s=i){if(!e){if(t instanceof Error)throw t;throw a(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=i){try{(0,r.assert)(e,t)}catch(e){throw a(o,`${s}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/assert.cjs"}],[2167,{"./assert.cjs":2166,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,a=t.characterSet??"base64";let i,o;return"base64"===a?i=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===a),i=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),(0,r.pattern)(e,o)}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/base64.cjs"}],[2168,{"./assert.cjs":2166,"./hex.cjs":2175,"@scure/base":2797,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const r=e("@scure/base"),n=e("./assert.cjs"),a=e("./hex.cjs"),i=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=t[e[r]];return(0,a.add0x)(s.join(""))}function m(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,a.assertIsHexString)(e);const t=(0,a.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,r=new Uint8Array(s.length/2);for(let e=0;e<r.length;e++){const t=s.charCodeAt(2*e),n=s.charCodeAt(2*e+1),a=t-(t<o?i:c),l=n-(n<o?i:c);r[e]=16*a+l}return r}function f(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function v(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):v(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=u,s.assertIsBytes=d,s.bytesToHex=h,s.bytesToBigInt=m,s.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){d(e);const t=m(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return d(e),r.base64.encode(e)},s.hexToBytes=p,s.bigIntToBytes=f,s.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return r.reverse()},s.numberToBytes=g,s.stringToBytes=v,s.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),r.base64.decode(e)},s.valueToBytes=_,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let r=0;r<e.length;r++){const n=_(e[r]);t[r]=n,s+=n.length}const r=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)r.set(t[e],s),s+=t[e].length;return r},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/bytes.cjs"}],[2169,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const r=e("@metamask/superstruct");function n(e){return(0,r.is)(e,s.CaipNamespaceStruct)}function a(e){return(0,r.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CaipChainIdStruct=(0,r.pattern)((0,r.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,r.pattern)((0,r.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,r.pattern)((0,r.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,r.pattern)((0,r.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,r.pattern)((0,r.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,r.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=n,s.isCaipReference=a,s.isCaipAccountId=function(e){return(0,r.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,r.is)(e,s.CaipAccountAddressStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/caip-types.cjs"}],[217,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,n.hasProperty)(e,"PhishingController")||!(0,n.isObject)(e.PhishingController))return e;const{PhishingController:t}=e;return delete t.phishing,delete t.lastFetched,e}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils");const a=s.version=78}}},{package:"$root$",file:"app/scripts/migrations/078.ts"}],[2170,{"./base64.cjs":2167,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const r=e("@metamask/superstruct"),n=e("./base64.cjs");s.ChecksumStruct=(0,r.size)((0,n.base64)((0,r.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/checksum.cjs"}],[2171,{"./assert.cjs":2166,"./bytes.cjs":2168,"./hex.cjs":2175,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./bytes.cjs"),i=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),i.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),l=(0,r.coerce)((0,r.bigint)(),o,BigInt),u=((0,r.union)([i.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([i.StrictHexStruct]),a.hexToBytes)),d=(0,r.coerce)(i.StrictHexStruct,(0,r.instance)(Uint8Array),a.bytesToHex);s.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[2172,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r,n,a=this&&this.__classPrivateFieldGet||function(e,t,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,s,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,s):n?n.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),i(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}get(e){return a(this,r,"f").get(e)}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return a(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return a(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),i(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return a(this,n,"f").entries()}forEach(e,t){return a(this,n,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}has(e){return a(this,n,"f").has(e)}keys(){return a(this,n,"f").keys()}values(){return a(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[2173,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2174,{"./misc.cjs":2180,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const r=e("pony-cause"),n=e("./misc.cjs");function a(e){return"object"==typeof e&&null!==e&&"code"in e}function i(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=a,s.isErrorWithMessage=i,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return i(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,n.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),a(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[2175,{"./assert.cjs":2166,"./bytes.cjs":2168,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const r=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),a=e("./assert.cjs"),i=e("./bytes.cjs");function o(e){return(0,r.is)(e,s.HexStruct)}function c(e){return(0,r.is)(e,s.StrictHexStruct)}function l(e){(0,a.assert)((0,r.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,i.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,a.assert)((0,r.is)(s,(0,r.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,r.is)(e,s.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,r.pattern)((0,r.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,a.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,a.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,r.is)(e,s.HexAddressStruct)||u(e)},s.getChecksumAddress=l,s.isValidChecksumAddress=u,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=d}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[2176,{"./assert.cjs":2166,"./base64.cjs":2167,"./bytes.cjs":2168,"./caip-types.cjs":2169,"./checksum.cjs":2170,"./coercers.cjs":2171,"./collections.cjs":2172,"./encryption-types.cjs":2173,"./errors.cjs":2174,"./hex.cjs":2175,"./json.cjs":2177,"./keyring.cjs":2178,"./logging.cjs":2179,"./misc.cjs":2180,"./number.cjs":2181,"./opaque.cjs":2182,"./promise.cjs":2183,"./time.cjs":2184,"./transaction-types.cjs":2185,"./versions.cjs":2186},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),n(e("./assert.cjs"),s),n(e("./base64.cjs"),s),n(e("./bytes.cjs"),s),n(e("./caip-types.cjs"),s),n(e("./checksum.cjs"),s),n(e("./coercers.cjs"),s),n(e("./collections.cjs"),s),n(e("./encryption-types.cjs"),s),n(e("./errors.cjs"),s),n(e("./hex.cjs"),s),n(e("./json.cjs"),s),n(e("./keyring.cjs"),s),n(e("./logging.cjs"),s),n(e("./misc.cjs"),s),n(e("./number.cjs"),s),n(e("./opaque.cjs"),s),n(e("./promise.cjs"),s),n(e("./time.cjs"),s),n(e("./transaction-types.cjs"),s),n(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/index.cjs"}],[2177,{"./assert.cjs":2166,"./misc.cjs":2180,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./misc.cjs");function i({path:e,branch:t}){const s=e[e.length-1];return(0,a.hasProperty)(t[t.length-2],s)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!i(s)||e.validator(t,s),refiner:(t,s)=>!i(s)||e.refiner(t,s)})}s.object=e=>(0,r.object)(e),s.exactOptional=o;function c(e){return(0,r.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,r.union)([(0,r.literal)(null),(0,r.boolean)(),(0,r.define)("finite number",(e=>(0,r.is)(e,(0,r.number)())&&Number.isFinite(e))),(0,r.string)(),(0,r.array)((0,r.lazy)((()=>s.UnsafeJsonStruct))),(0,r.record)((0,r.string)(),(0,r.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,r.coerce)(s.UnsafeJsonStruct,(0,r.any)(),(e=>((0,n.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,n.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,r.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(s.JsonStruct),stack:o((0,r.string)())}),s.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),s.JsonStruct),(0,r.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,r.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,r.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,r.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,r.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,r.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,r.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,r.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,r.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/json.cjs"}],[2178,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[2179,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const n=(0,r(e("debug")).default)("metamask");s.createProjectLogger=function(e){return n.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[218,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:79,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=79;const s=function(e){var t,s;(null==e||null===(t=e.AppStateController)||void 0===t?void 0:t.collectiblesDetectionNoticeDismissed)!==undefined&&delete e.AppStateController.collectiblesDetectionNoticeDismissed;(null==e||null===(s=e.metamask)||void 0===s?void 0:s.collectiblesDropdownState)!==undefined&&delete e.metamask.collectiblesDropdownState;return e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/079.js"}],[2180,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=r,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[2181,{"./assert.cjs":2166,"./hex.cjs":2175},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const r=e("./assert.cjs"),n=e("./hex.cjs");s.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/number.cjs"}],[2182,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[2183,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const r=new Promise(((e,r)=>{t=e,s=r}));return e&&r.catch((e=>{})),{promise:r,resolve:t,reject:s}}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[2184,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return r(e,"count"),e*t},s.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/time.cjs"}],[2185,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2186,{"./assert.cjs":2166,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const r=e("@metamask/superstruct"),n=e("semver"),a=e("./assert.cjs");s.VersionStruct=(0,r.refine)((0,r.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,r.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,r.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,n.gt)(e,t)},s.gtRange=function(e,t){return(0,n.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-controllers>@metamask/phishing-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[2187,{"@metamask/safe-event-emitter":1906,"readable-stream":4734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("@metamask/safe-event-emitter"),a=(r=n)&&r.__esModule?r:{default:r},i=e("readable-stream");s.createStreamMiddleware=function(e={}){const t={},s=new(0,i.Duplex)({objectMode:!0,read:()=>{},write:function(s,a,i){let o=null;try{!s.id?function(s){e?.retryOnMessage&&s.method===e.retryOnMessage&&Object.values(t).forEach((({req:e,retryCount:s=0})=>{if(!e.id)return;if(s>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${e.id}"`);const r=t[e.id];r&&(r.retryCount=s+1),n(e)}));r.emit("notification",s)}(s):function(e){const{id:s}=e;if(null===s)return;const r=t[s];if(!r)return void console.warn(`StreamMiddleware - Unknown response id "${s}"`);delete t[s],Object.assign(r.res,e),setTimeout(r.end)}(s)}catch(e){o=e}i(o)}}),r=new(0,a.default);return{events:r,middleware:(e,s,r,a)=>{t[e.id]={req:e,res:s,next:r,end:a},n(e)},stream:s};function n(e){s.push(e)}}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-3SFZPJR3.js"}],[2188,{"readable-stream":4734},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("readable-stream");s.createEngineStream=function(e){if(!e?.engine)throw new Error("Missing engine parameter!");const{engine:t}=e,s=new(0,r.Duplex)({objectMode:!0,read:()=>{},write:function(e,r,n){t.handle(e,((e,t)=>{s.push(t)})),n()}});return t.on&&t.on("notification",(e=>{s.push(e)})),s}}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-middleware-stream/dist/chunk-IDTAZSDC.js"}],[2189,{"./chunk-3SFZPJR3.js":2187,"./chunk-IDTAZSDC.js":2188},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-IDTAZSDC.js"),n=e("./chunk-3SFZPJR3.js");s.createEngineStream=r.createEngineStream,s.createStreamMiddleware=n.createStreamMiddleware}}},{package:"@metamask/snaps-controllers>@metamask/json-rpc-middleware-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/json-rpc-middleware-stream/dist/index.js"}],[219,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e("lodash");s.default={version:80,async migrate(e){const t=(0,r.cloneDeep)(e);t.meta.version=80;const s=function(e){var t;(null==e||null===(t=e.metamask)||void 0===t?void 0:t.showPortfolioTooltip)!==undefined&&delete e.metamask.showPortfolioTooltip;return e}(t.data);return t.data=s,t}}}}},{package:"$root$",file:"app/scripts/migrations/080.js"}],[2190,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-4CMD46B2.js"}],[2191,{"@metamask/superstruct":2618,"@metamask/utils":2251,"cron-parser":3618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/superstruct"),n=e("@metamask/utils"),a=e("cron-parser"),i=r.object.call(void 0,{jsonrpc:r.optional.call(void 0,n.JsonRpcVersionStruct),id:r.optional.call(void 0,n.JsonRpcIdStruct),method:r.string.call(void 0),params:r.optional.call(void 0,n.JsonRpcParamsStruct)}),o=r.refine.call(void 0,r.string.call(void 0),"CronExpression",(e=>{try{return a.parseExpression.call(void 0,e),!0}catch{return!1}}));var c=r.object.call(void 0,{expression:o,request:i});var l=r.array.call(void 0,c);s.CronjobRpcRequestStruct=i,s.CronExpressionStruct=o,s.parseCronExpression=function(e){const t=r.create.call(void 0,e,o);return a.parseExpression.call(void 0,t)},s.CronjobSpecificationStruct=c,s.isCronjobSpecification=function(e){try{return r.create.call(void 0,e,c),!0}catch{return!1}},s.CronjobSpecificationArrayStruct=l,s.isCronjobSpecificationArray=function(e){try{return r.create.call(void 0,e,l),!0}catch{return!1}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-4ZJOU3LR.js"}],[2192,{"./chunk-4ZJOU3LR.js":2191,"./chunk-LOJA2ZS4.js":2208,"./chunk-PZNIU23I.js":2215,"./chunk-RD6BN2TQ.js":2217,"./chunk-T2VA4YJE.js":2219,"./chunk-T3YY4JIJ.js":2221,"./chunk-VOPTAKVG.js":2223,"./chunk-ZT3KKTS2.js":2226,"@metamask/key-tree":1523,"@metamask/superstruct":2618,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-RD6BN2TQ.js"),n=e("./chunk-VOPTAKVG.js"),a=e("./chunk-PZNIU23I.js"),i=e("./chunk-LOJA2ZS4.js"),o=e("./chunk-T2VA4YJE.js"),c=e("./chunk-ZT3KKTS2.js"),l=e("./chunk-T3YY4JIJ.js"),u=e("./chunk-4ZJOU3LR.js"),d=e("@metamask/key-tree"),h=e("@metamask/superstruct"),m=e("@metamask/utils"),p=[c.SIP_6_MAGIC_VALUE,c.STATE_ENCRYPTION_MAGIC_VALUE],f=[60],g=f.map((e=>["m","44'",`${e}'`])),v=h.refine.call(void 0,h.array.call(void 0,h.string.call(void 0)),"BIP-32 path",(e=>0===e.length?"Path must be a non-empty BIP-32 derivation path array":"m"!==e[0]?'Path must start with "m".':e.length<3?"Paths must have a length of at least three.":e.slice(1).some((e=>!d.isValidBIP32PathSegment.call(void 0,e)))?"Path must be a valid BIP-32 derivation path array.":p.includes(e[1])?`The purpose "${e[1]}" is not allowed for entropy derivation.`:!g.some((t=>l.isEqual.call(void 0,e.slice(0,t.length),t)))||`The path "${e.join("/")}" is not allowed for entropy derivation.`)),_=e=>h.refine.call(void 0,e,"BIP-32 entropy",(e=>"ed25519"!==e.curve||!e.path.slice(1).some((e=>!e.endsWith("'")))||"Ed25519 does not support unhardened paths.")),k=h.enums.call(void 0,["ed25519","secp256k1","ed25519Bip32"]),y=_(h.type.call(void 0,{path:v,curve:k})),S=h.size.call(void 0,h.array.call(void 0,y),1,Infinity),w=h.refine.call(void 0,h.string.call(void 0),"SemVer range",(e=>!!m.isValidSemVerRange.call(void 0,e)||"Expected a valid SemVer range.")),b=h.refine.call(void 0,h.record.call(void 0,r.SnapIdStruct,h.object.call(void 0,{version:h.optional.call(void 0,w)})),"SnapIds",(e=>0!==Object.keys(e).length)),T=h.size.call(void 0,h.array.call(void 0,i.ChainIdStruct),1,Infinity),E=h.union.call(void 0,[h.object.call(void 0,{tlds:h.size.call(void 0,h.array.call(void 0,h.string.call(void 0)),1,Infinity)}),h.object.call(void 0,{schemes:h.size.call(void 0,h.array.call(void 0,h.string.call(void 0)),1,Infinity)}),h.object.call(void 0,{tlds:h.size.call(void 0,h.array.call(void 0,h.string.call(void 0)),1,Infinity),schemes:h.size.call(void 0,h.array.call(void 0,h.string.call(void 0)),1,Infinity)})]),P=m.inMilliseconds.call(void 0,5,m.Duration.Second),j=m.inMilliseconds.call(void 0,3,m.Duration.Minute),I=h.size.call(void 0,h.integer.call(void 0),P,j),C=h.object.call(void 0,{maxRequestTime:h.optional.call(void 0,I)}),A=h.object.call(void 0,{}),x=h.type.call(void 0,{"endowment:cronjob":h.optional.call(void 0,n.mergeStructs.call(void 0,C,h.object.call(void 0,{jobs:u.CronjobSpecificationArrayStruct}))),"endowment:ethereum-provider":h.optional.call(void 0,A),"endowment:keyring":h.optional.call(void 0,n.mergeStructs.call(void 0,C,o.KeyringOriginsStruct)),"endowment:lifecycle-hooks":h.optional.call(void 0,C),"endowment:name-lookup":h.optional.call(void 0,n.mergeStructs.call(void 0,C,h.object.call(void 0,{chains:h.optional.call(void 0,T),matchers:h.optional.call(void 0,E)}))),"endowment:network-access":h.optional.call(void 0,A),"endowment:page-home":h.optional.call(void 0,C),"endowment:rpc":h.optional.call(void 0,n.mergeStructs.call(void 0,C,o.RpcOriginsStruct)),"endowment:signature-insight":h.optional.call(void 0,n.mergeStructs.call(void 0,C,h.object.call(void 0,{allowSignatureOrigin:h.optional.call(void 0,h.boolean.call(void 0))}))),"endowment:transaction-insight":h.optional.call(void 0,n.mergeStructs.call(void 0,C,h.object.call(void 0,{allowTransactionOrigin:h.optional.call(void 0,h.boolean.call(void 0))}))),"endowment:webassembly":h.optional.call(void 0,A),snap_dialog:h.optional.call(void 0,A),snap_manageState:h.optional.call(void 0,A),snap_manageAccounts:h.optional.call(void 0,A),snap_notify:h.optional.call(void 0,A),snap_getBip32Entropy:h.optional.call(void 0,S),snap_getBip32PublicKey:h.optional.call(void 0,S),snap_getBip44Entropy:h.optional.call(void 0,h.size.call(void 0,h.array.call(void 0,h.object.call(void 0,{coinType:h.size.call(void 0,h.integer.call(void 0),0,2**32-1)})),1,Infinity)),snap_getEntropy:h.optional.call(void 0,A),snap_getLocale:h.optional.call(void 0,A),wallet_snap:h.optional.call(void 0,b)}),R=h.array.call(void 0,h.string.call(void 0)),N=h.record.call(void 0,h.intersection.call(void 0,[h.string.call(void 0),a.uri.call(void 0)]),h.object.call(void 0,{})),M=h.object.call(void 0,{version:m.VersionStruct,description:h.size.call(void 0,h.string.call(void 0),1,280),proposedName:h.size.call(void 0,h.string.call(void 0),1,214),repository:h.optional.call(void 0,h.object.call(void 0,{type:h.size.call(void 0,h.string.call(void 0),1,Infinity),url:h.size.call(void 0,h.string.call(void 0),1,Infinity)})),source:h.object.call(void 0,{shasum:m.ChecksumStruct,location:h.object.call(void 0,{npm:h.object.call(void 0,{filePath:h.size.call(void 0,h.string.call(void 0),1,Infinity),iconPath:h.optional.call(void 0,h.size.call(void 0,h.string.call(void 0),1,Infinity)),packageName:a.NameStruct,registry:h.union.call(void 0,[h.literal.call(void 0,"https://registry.npmjs.org"),h.literal.call(void 0,"https://registry.npmjs.org/")])})}),files:h.optional.call(void 0,R),locales:h.optional.call(void 0,R)}),initialConnections:h.optional.call(void 0,N),initialPermissions:x,manifestVersion:h.literal.call(void 0,"0.1"),$schema:h.optional.call(void 0,h.string.call(void 0))});s.FORBIDDEN_COIN_TYPES=f,s.Bip32PathStruct=v,s.bip32entropy=_,s.CurveStruct=k,s.Bip32EntropyStruct=y,s.SnapGetBip32EntropyPermissionsStruct=S,s.SemVerRangeStruct=w,s.SnapIdsStruct=b,s.ChainIdsStruct=T,s.LookupMatchersStruct=E,s.MINIMUM_REQUEST_TIMEOUT=P,s.MAXIMUM_REQUEST_TIMEOUT=j,s.MaxRequestTimeStruct=I,s.HandlerCaveatsStruct=C,s.EmptyObjectStruct=A,s.PermissionsStruct=x,s.SnapAuxilaryFilesStruct=R,s.InitialConnectionsStruct=N,s.SnapManifestStruct=M,s.isSnapManifest=function(e){return h.is.call(void 0,e,M)},s.assertIsSnapManifest=function(e){m.assertStruct.call(void 0,e,M,'"snap.manifest.json" is invalid')},s.createSnapManifest=function(e){return h.create.call(void 0,e,M)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-5I5WPAVD.js"}],[2193,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});s.MAX_FILE_SIZE=64e6}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-5WKQI22S.js"}],[2194,{"@metamask/snaps-sdk":2575,"@metamask/snaps-sdk/jsx":2579,"@metamask/snaps-sdk/jsx-runtime":2578,"@metamask/utils":2251,marked:4330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/snaps-sdk"),n=e("@metamask/snaps-sdk/jsx"),a=e("@metamask/utils"),i=e("marked"),o=e("@metamask/snaps-sdk/jsx-runtime"),c=5e4,l=["https:","mailto:"];function u(e){switch(e){case"primary":return"primary";case"secondary":return"destructive";default:return}}function d(e){return 1===e.length?e[0]:e}function h(e){return e.tokens&&e.tokens.length>0?d(e.tokens.flatMap(p)):e.href}function m(e){return d(e.flatMap(p))}function p(e){switch(e.type){case"link":return o.jsx.call(void 0,n.Link,{href:e.href,children:h(e)});case"text":return e.text;case"strong":return o.jsx.call(void 0,n.Bold,{children:m(e.tokens)});case"em":return o.jsx.call(void 0,n.Italic,{children:m(e.tokens)});default:return null}}function f(e){const t=i.lexer.call(void 0,e,{gfm:!1}),s=[];return i.walkTokens.call(void 0,t,(e=>{if("paragraph"===e.type){s.length>0&&s.push("\n\n");const{tokens:t}=e;s.push(...t.flatMap(p))}})),s.filter((e=>null!==e))}function g(e,t){try{const s=new URL(e);a.assert.call(void 0,l.includes(s.protocol),`Protocol must be one of: ${l.join(", ")}.`);const r="mailto:"===s.protocol?s.pathname.split("@")[1]:s.hostname;a.assert.call(void 0,!t(r),"The specified URL is not allowed.")}catch(e){throw new Error(`Invalid URL: ${e instanceof a.AssertionError?e.message:"Unable to parse URL."}`)}}function v(e){const{type:t}=e;switch(t){case r.NodeType.Panel:return e.children.reduce(((e,t)=>e+v(t)),0);case r.NodeType.Row:return v(e.value);case r.NodeType.Text:return e.value.length;default:return 0}}function _(e){return a.hasProperty.call(void 0,e.props,"children")}function k(e){return Boolean(e)&&!0!==e}function y(e){if(_(e)){if(Array.isArray(e.props.children))return e.props.children.filter(k).flat(Infinity);if(e.props.children)return[e.props.children]}return[]}function S(e,t,s=0){if(Array.isArray(e)){for(const r of e){const e=S(r,t,s);if(void 0!==e)return e}return}const r=t(e,s);if(void 0!==r)return r;if(a.hasProperty.call(void 0,e,"props")&&a.isPlainObject.call(void 0,e.props)&&a.hasProperty.call(void 0,e.props,"children")){const r=y(e);for(const e of r)if(a.isPlainObject.call(void 0,e)){const r=S(e,t,s+1);if(void 0!==r)return r}}}function w(e){return Object.entries(e).filter((([e])=>"children"!==e)).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>{return` ${e}=${s=t,"string"==typeof s?`"${s}"`:`{${JSON.stringify(s)}}`}`;var s})).join("")}s.getTextChildren=f,s.getJsxElementFromComponent=function(e){return function(e){const t=v(e);a.assert.call(void 0,t<=c,`The text in a Snap UI may not be larger than ${c/1e3} kB.`)}(e),function e(t){switch(t.type){case r.NodeType.Address:return o.jsx.call(void 0,n.Address,{address:t.value});case r.NodeType.Button:return o.jsx.call(void 0,n.Button,{name:t.name,variant:u(t.variant),type:t.buttonType,children:t.value});case r.NodeType.Copyable:return o.jsx.call(void 0,n.Copyable,{value:t.value,sensitive:t.sensitive});case r.NodeType.Divider:return o.jsx.call(void 0,n.Divider,{});case r.NodeType.Form:return o.jsx.call(void 0,n.Form,{name:t.name,children:d(t.children.map(e))});case r.NodeType.Heading:return o.jsx.call(void 0,n.Heading,{children:t.value});case r.NodeType.Image:return o.jsx.call(void 0,n.Image,{src:t.value});case r.NodeType.Input:return o.jsx.call(void 0,n.Field,{label:t.label,error:t.error,children:o.jsx.call(void 0,n.Input,{name:t.name,type:t.inputType,value:t.value,placeholder:t.placeholder})});case r.NodeType.Panel:return o.jsx.call(void 0,n.Box,{children:d(t.children.map(e))});case r.NodeType.Row:return o.jsx.call(void 0,n.Row,{label:t.label,variant:t.variant,children:e(t.value)});case r.NodeType.Spinner:return o.jsx.call(void 0,n.Spinner,{});case r.NodeType.Text:return o.jsx.call(void 0,n.Text,{children:d(f(t.value))});default:return a.assertExhaustive.call(void 0,t)}}(e)},s.validateTextLinks=function(e,t){const s=function(e){const t=i.lexer.call(void 0,e,{gfm:!1}),s=[];return i.walkTokens.call(void 0,t,(e=>{"link"===e.type&&s.push(e)})),s}(e);for(const e of s)g(e.href,t)},s.validateJsxLinks=function(e,t){S(e,(e=>{"Link"===e.type&&g(e.props.href,t)}))},s.getTotalTextLength=v,s.hasChildren=_,s.getJsxChildren=y,s.walkJsx=S,s.serialiseJsx=function e(t,s=0){if(Array.isArray(t))return t.map((t=>e(t,s))).join("");const r="  ".repeat(s);if("string"==typeof t)return`${r}${t}\n`;if(!t)return"";const{type:n,props:i}=t,o=s>0?"\n":"";if(a.hasProperty.call(void 0,i,"children")){const t=e(i.children,s+1);return`${r}<${n}${w(i)}>\n${t}${r}</${n}>${o}`}return`${r}<${n}${w(i)} />${o}`}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-6ATNGN44.js"}],[2195,{"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils");s.parseJson=function(e){return r.getSafeJson.call(void 0,JSON.parse(e))},s.getJsonSizeUnsafe=function(e){const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-7VJ2BOVU.js"}],[2196,{"./chunk-UAINMOUU.js":2222,"@metamask/utils":2251,"@noble/hashes/sha256":2778},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UAINMOUU.js"),n=e("@metamask/utils"),a=e("@noble/hashes/sha256");async function i(e){const t=r.getBytes.call(void 0,e);return"crypto"in globalThis&&"object"==typeof globalThis.crypto&&crypto.subtle?.digest?new Uint8Array(await crypto.subtle.digest("SHA-256",t)):a.sha256.call(void 0,t)}s.checksum=i,s.checksumFiles=async function(e){const t=await Promise.all([...e].sort(((e,t)=>(n.assert.call(void 0,e.path!==t.path,"Tried to sort files with non-unique paths."),e.path<t.path?-1:1))).map((async e=>i(e))));return i(n.concatBytes.call(void 0,t))}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-AMW2VJ3N.js"}],[2197,{"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils");s.normalizeRelative=function(e){return r.assert.call(void 0,!e.startsWith("/")),r.assert.call(void 0,-1===e.search(/:|\/\//u),`Path "${e}" potentially an URI instead of local relative`),e.startsWith("./")?e.slice(2):e}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-AOGVLPQZ.js"}],[2198,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e=>(e.PermittedDerivationPaths="permittedDerivationPaths",e.PermittedCoinTypes="permittedCoinTypes",e.SnapCronjob="snapCronjob",e.TransactionOrigin="transactionOrigin",e.SignatureOrigin="signatureOrigin",e.RpcOrigin="rpcOrigin",e.KeyringOrigin="keyringOrigin",e.SnapIds="snapIds",e.ChainIds="chainIds",e.LookupMatchers="lookupMatchers",e.MaxRequestTime="maxRequestTime",e))(r||{});s.SnapCaveatType=r}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-ASZWZ7JT.js"}],[2199,{"./chunk-7VJ2BOVU.js":2195,"@metamask/snaps-sdk":2575,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-7VJ2BOVU.js"),n=e("@metamask/snaps-sdk"),a=e("@metamask/superstruct"),i=["description","proposedName"],o=a.object.call(void 0,{locale:a.string.call(void 0),messages:a.record.call(void 0,a.string.call(void 0),a.object.call(void 0,{message:a.string.call(void 0),description:a.optional.call(void 0,a.string.call(void 0))}))});function c(e,t){const s=t.find((t=>t.locale===e));return s||t.find((e=>"en"===e.locale))}var l=/\{\{\s?([a-zA-Z0-9-_\s]+)\s?\}\}/gu;function u(e,t){const s=e.matchAll(l);return Array.from(s).reduce(((s,[r,n])=>{if(!t)throw new Error(`Failed to translate "${e}": No localization file found.`);const a=t.messages[n.trim()];if(!a)throw new Error(`Failed to translate "${e}": No translation found for "${n.trim()}" in "${t.locale}" file.`);return s.replace(r,a.message)}),e)}function d(e,t,s){const r=c(t,s);return i.reduce(((e,t)=>{const s=u(e[t],r);return{...e,[t]:s}}),e)}s.LOCALIZABLE_FIELDS=i,s.LocalizationFileStruct=o,s.getValidatedLocalizationFiles=function(e){for(const t of e)try{t.result=a.create.call(void 0,r.parseJson.call(void 0,t.toString()),o)}catch(e){if(e instanceof a.StructError)throw new Error(`Failed to validate localization file "${t.path}": ${e.message}.`);if(e instanceof SyntaxError)throw new Error(`Failed to parse localization file "${t.path}" as JSON.`);throw e}return e},s.getLocalizationFile=c,s.TRANSLATION_REGEX=l,s.translate=u,s.getLocalizedSnapManifest=d,s.validateSnapManifestLocalizations=function(e,t){try{t.filter((e=>"en"!==e.locale)).forEach((s=>{d(e,s.locale,t)})),d(e,"en",t)}catch(e){throw new Error(`Failed to localize Snap manifest: ${n.getErrorMessage.call(void 0,e)}`)}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-B5GNTDE2.js"}],[22,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.processOnChainNotification=function(e){return{...e,id:e.id,createdAt:new Date(e.created_at).toISOString(),isRead:!e.unread}}}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/processors/process-onchain-notifications.ts"}],[220,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);t.meta.version=a;const s=function(e){if(!(0,n.hasProperty)(e,"SnapController")||!(0,n.hasProperty)(e,"PermissionController")||!(0,n.isObject)(e.PermissionController))return e;const{PermissionController:t}=e,{subjects:s}=t;if(!(0,n.isObject)(s))return e;const a="wallet_snap_";for(const[t,i]of Object.entries(s)){if(!(0,n.isObject)(i)||!(0,n.isObject)(i.permissions))return e;let s,o=1;const{permissions:c}=i,l={...c};for(const[i,u]of Object.entries(c))if(i.startsWith(a)){if(!(0,n.isObject)(u)||!(0,n.hasProperty)(u,"id")||!(0,n.hasProperty)(u,"date"))return e;if((0,n.hasProperty)(l,"wallet_snap")||(l.wallet_snap={caveats:[{type:"snapIds",value:{}}],invoker:t,parentCapability:"wallet_snap"}),!(0,n.isObject)(l.wallet_snap))return e;if(!(0,r.isArray)(l.wallet_snap.caveats))return e;const c=i.slice(a.length),d=l.wallet_snap.caveats[0];if(!(0,n.isObject)(d))return e;if(!(0,n.hasProperty)(d,"type")||"snapIds"!==d.type||!(0,n.hasProperty)(d,"value")||!(0,n.isObject)(d.value))return e;if(d.value[c]={},"number"!=typeof u.date||"string"!=typeof u.id)return e;u.date>o&&(o=u.date,s=u.id),delete l[i]}l.wallet_snap&&(l.wallet_snap.date=o,l.wallet_snap.id=s,i.permissions=l)}return e}(t.data);return t.data=s,t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils");const a=s.version=81}}},{package:"$root$",file:"app/scripts/migrations/081.ts"}],[2200,{"./chunk-NUCLSR2G.js":2210,"@metamask/utils":2251,"@scure/base":2797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-NUCLSR2G.js"),n=e("@metamask/utils"),a=e("@scure/base");s.VirtualFile=class e{constructor(e){let t;t="string"==typeof e||e instanceof Uint8Array?{value:e}:e,this.value=t?.value??"",this.result=t?.result??void 0,this.data=t?.data??{},this.path=t?.path??"/"}get size(){return"string"==typeof this.value?this.value.length:this.value.byteLength}toString(e){if("string"==typeof this.value)return n.assert.call(void 0,void 0===e,"Tried to encode string."),this.value;if(this.value instanceof Uint8Array&&"hex"===e)return n.bytesToHex.call(void 0,this.value);if(this.value instanceof Uint8Array&&"base64"===e)return a.base64.encode(this.value);return new TextDecoder(e).decode(this.value)}clone(){const t=new e;return"string"==typeof this.value?t.value=this.value:t.value=this.value.slice(0),t.result=r.deepClone.call(void 0,this.result),t.data=r.deepClone.call(void 0,this.data),t.path=this.path,t}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-DEQUNIME.js"}],[2201,{"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils").createProjectLogger.call(void 0,"snaps");s.snapsLogger=r,s.logInfo=function(e,...t){console.log(e,...t)},s.logError=function(e,...t){console.error(e,...t)},s.logWarning=function(e,...t){console.warn(e,...t)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-E3BDBG6T.js"}],[2202,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-F6G67XQ4.js"}],[2203,{"./chunk-T3YY4JIJ.js":2221,"@metamask/slip44":1943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-T3YY4JIJ.js"),a=e("@metamask/slip44"),i=(r=a)&&r.__esModule?r:{default:r},o=[{path:["m","44'","0'"],curve:"ed25519",name:"Test BIP-32 Path (ed25519)"},{path:["m","44'","1'"],curve:"secp256k1",name:"Testnet"},{path:["m","44'","0'"],curve:"secp256k1",name:"Bitcoin Legacy"},{path:["m","49'","0'"],curve:"secp256k1",name:"Bitcoin Nested SegWit"},{path:["m","49'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Nested SegWit"},{path:["m","84'","0'"],curve:"secp256k1",name:"Bitcoin Native SegWit"},{path:["m","84'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Native SegWit"},{path:["m","44'","501'"],curve:"ed25519",name:"Solana"},{path:["m","44'","501'","0'","0'"],curve:"ed25519",name:"Solana"},{path:["m","44'","2'"],curve:"secp256k1",name:"Litecoin"},{path:["m","44'","3'"],curve:"secp256k1",name:"Dogecoin"},{path:["m","44'","60'"],curve:"secp256k1",name:"Ethereum"},{path:["m","44'","118'"],curve:"secp256k1",name:"Atom"},{path:["m","44'","145'"],curve:"secp256k1",name:"Bitcoin Cash"},{path:["m","44'","637'"],curve:"ed25519",name:"Aptos"},{path:["m","44'","714'"],curve:"secp256k1",name:"Binance (BNB)"},{path:["m","44'","784'"],curve:"ed25519",name:"Sui"},{path:["m","44'","931'"],curve:"secp256k1",name:"THORChain (RUNE)"},{path:["m","44'","330'"],curve:"secp256k1",name:"Terra (LUNA)"},{path:["m","44'","459'"],curve:"secp256k1",name:"Kava"},{path:["m","44'","529'"],curve:"secp256k1",name:"Secret Network"},{path:["m","44'","397'","0'"],curve:"ed25519",name:"NEAR Protocol"},{path:["m","44'","1'","0'"],curve:"ed25519",name:"Testnet"},{path:["m","44'","472'"],curve:"ed25519",name:"Arweave"},{path:["m","44'","12586'"],curve:"secp256k1",name:"Mina"},{path:["m","44'","242'"],curve:"ed25519",name:"Nimiq"},{path:["m","44'","1729'","0'","0'"],curve:"ed25519",name:"Tezos"},{path:["m","1789'","0'"],curve:"ed25519",name:"Vega"},{path:["m","1852'","1815'"],curve:"ed25519Bip32",name:"Cardano"},{path:["m","44'","508'","0'","0'","0'"],curve:"ed25519",name:"MultiversX"},{path:["m","44'","709'"],curve:"secp256k1",name:"Avail"}];function c(e){return"1"===String(e)?"Test Networks":i.default[e]?.name??null}s.SNAPS_DERIVATION_PATHS=o,s.getSnapDerivationPathName=function(e,t){const s=o.find((s=>s.curve===t&&n.isEqual.call(void 0,s.path,e)));if(s)return s.name;if("secp256k1"===t&&"m"===e[0]&&"44'"===e[1]&&e[2].endsWith("'")){return c(e[2].slice(0,-1))??null}return null},s.getSlip44ProtocolName=c}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-FBZ5SU7X.js"}],[2204,{"@metamask/superstruct":2618,"@metamask/utils":2251,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/superstruct"),n=e("@metamask/utils"),a=e("semver");s.DEFAULT_REQUESTED_SNAP_VERSION="*",s.getTargetVersion=function(e,t){const s=a.maxSatisfying.call(void 0,e,t);return s||a.maxSatisfying.call(void 0,e,t,{includePrerelease:!0})},s.resolveVersionRange=function(e){return void 0===e||"latest"===e?[void 0,"*"]:r.validate.call(void 0,e,n.VersionRangeStruct)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-I2SWLZ34.js"}],[2205,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.indent=function(e,t=2){return e.replace(/^/gmu," ".repeat(t))}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-IJX3CXOY.js"}],[2206,{"./chunk-PHUTP7NB.js":2212,"@metamask/rpc-errors":1884,"@metamask/snaps-sdk":2575,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n,a,i=e("./chunk-PHUTP7NB.js"),o=e("@metamask/rpc-errors"),c=e("@metamask/snaps-sdk"),l=e("@metamask/utils"),u=-31001,d="Wrapped Snap Error",h=class extends Error{constructor(e){const t=c.getErrorMessage.call(void 0,e);super(t),i.__privateAdd.call(void 0,this,r,void 0),i.__privateAdd.call(void 0,this,n,void 0),i.__privateAdd.call(void 0,this,a,void 0),i.__privateSet.call(void 0,this,r,e),i.__privateSet.call(void 0,this,n,t),i.__privateSet.call(void 0,this,a,c.getErrorStack.call(void 0,e))}get name(){return"WrappedSnapError"}get message(){return i.__privateGet.call(void 0,this,n)}get stack(){return i.__privateGet.call(void 0,this,a)}toJSON(){const e=m(i.__privateGet.call(void 0,this,r))?i.__privateGet.call(void 0,this,r).serialize():o.serializeCause.call(void 0,i.__privateGet.call(void 0,this,r));return{code:u,message:d,data:{cause:e}}}serialize(){return this.toJSON()}};function m(e){if(l.isObject.call(void 0,e)&&"serialize"in e&&"function"==typeof e.serialize){const t=e.serialize();return l.isJsonRpcError.call(void 0,t)&&p(t)}return!1}function p(e){return e.code===c.SNAP_ERROR_CODE&&e.message===c.SNAP_ERROR_MESSAGE}function f(e){return l.isJsonRpcError.call(void 0,e)&&e.code===u&&e.message===d}function g(e,t,s,r){const n=new(0,o.JsonRpcError)(e,t,r);return n.stack=s,n}r=new WeakMap,n=new WeakMap,a=new WeakMap,s.SNAP_ERROR_WRAPPER_CODE=u,s.SNAP_ERROR_WRAPPER_MESSAGE=d,s.WrappedSnapError=h,s.isSnapError=m,s.isSerializedSnapError=p,s.isWrappedSnapError=f,s.unwrapError=function(e){if(f(e)){if(l.isJsonRpcError.call(void 0,e.data.cause)){if(p(e.data.cause)){const{code:t,message:s,stack:r,data:n}=e.data.cause.data.cause;return[g(t,s,r,n),!0]}const{code:t,message:s,stack:r,data:n}=e.data.cause;return[g(t,s,r,n),!1]}return[g(o.errorCodes.rpc.internal,c.getErrorMessage.call(void 0,e.data.cause),c.getErrorStack.call(void 0,e.data.cause)),!1]}if(l.isJsonRpcError.call(void 0,e)){const{code:t,message:s,stack:r,data:n}=e;return[g(t,s,r,n),!1]}return[g(o.errorCodes.rpc.internal,c.getErrorMessage.call(void 0,e),c.getErrorStack.call(void 0,e)),!1]}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-K6BCBPXF.js"}],[2207,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e=>(e.OnRpcRequest="onRpcRequest",e.OnSignature="onSignature",e.OnTransaction="onTransaction",e.OnCronjob="onCronjob",e.OnInstall="onInstall",e.OnUpdate="onUpdate",e.OnNameLookup="onNameLookup",e.OnKeyringRequest="onKeyringRequest",e.OnHomePage="onHomePage",e.OnUserInput="onUserInput",e))(r||{}),n=Object.values(r);s.HandlerType=r,s.SNAP_EXPORT_NAMES=n}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-LEKZPKS2.js"}],[2208,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/superstruct"),n=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})$/u,a=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})):(?<accountAddress>[a-zA-Z0-9]{1,64})$/u,i=/^(?<accountAddress>[a-zA-Z0-9]{1,64})$/u;var o=r.size.call(void 0,r.string.call(void 0),1,40),c=r.define.call(void 0,"Chain ID",r.string.call(void 0).validator),l=r.pattern.call(void 0,c,n),u=r.pattern.call(void 0,r.string.call(void 0),a),d=r.array.call(void 0,u),h=r.pattern.call(void 0,r.string.call(void 0),i),m=r.object.call(void 0,{id:l,name:o}),p=r.object.call(void 0,{chains:r.array.call(void 0,m),methods:r.optional.call(void 0,r.array.call(void 0,o)),events:r.optional.call(void 0,r.array.call(void 0,o))}),f=r.pattern.call(void 0,r.string.call(void 0),/^[-a-z0-9]{3,8}$/u);s.CHAIN_ID_REGEX=n,s.ACCOUNT_ID_REGEX=a,s.ACCOUNT_ADDRESS_REGEX=i,s.parseChainId=function(e){const t=n.exec(e);if(!t?.groups)throw new Error("Invalid chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseAccountId=function(e){const t=a.exec(e);if(!t?.groups)throw new Error("Invalid account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.LimitedString=o,s.ChainIdStringStruct=c,s.ChainIdStruct=l,s.AccountIdStruct=u,s.AccountIdArrayStruct=d,s.AccountAddressStruct=h,s.ChainStruct=m,s.NamespaceStruct=p,s.NamespaceIdStruct=f,s.isNamespaceId=function(e){return r.is.call(void 0,e,f)},s.isChainId=function(e){return r.is.call(void 0,e,l)},s.isAccountId=function(e){return r.is.call(void 0,e,u)},s.isAccountIdArray=function(e){return r.is.call(void 0,e,d)},s.isNamespace=function(e){return r.is.call(void 0,e,p)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-LOJA2ZS4.js"}],[2209,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=Object.freeze(["atob","btoa","BigInt","console","crypto","Date","Math","setTimeout","clearTimeout","SubtleCrypto","TextDecoder","TextEncoder","URL","setInterval","clearInterval","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","DataView","ArrayBuffer","AbortController","AbortSignal"]);s.DEFAULT_ENDOWMENTS=r}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-N722KRZW.js"}],[221,{"@metamask/utils":2739,lodash:4322,loglevel:4328,uuid:4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=c,t.data=function(e){if(!(0,a.hasProperty)(e,"PreferencesController"))return o.default.warn("state.PreferencesController is undefined"),e;if(!(0,a.isObject)(e.PreferencesController)){var t,s;return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController)),e}if(!(0,a.hasProperty)(e,"NetworkController")||!(0,a.isObject)(e.NetworkController)){var r,n;return null===(r=global.sentry)||void 0===r||null===(n=r.captureException)||void 0===n||n.call(r,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,a.hasProperty)(e.PreferencesController,"frequentRpcListDetail")||!Array.isArray(e.PreferencesController.frequentRpcListDetail)){var c,l;if(!(e.NetworkController.networkConfigurations&&e.PreferencesController.frequentRpcListDetail===undefined))null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error("typeof state.PreferencesController.frequentRpcListDetail is "+typeof e.PreferencesController.frequentRpcListDetail));return e}if(!e.PreferencesController.frequentRpcListDetail.every(a.isObject)){var u,d;const t=e.PreferencesController.frequentRpcListDetail.find((e=>!(0,a.isObject)(e)));return null===(u=global.sentry)||void 0===u||null===(d=u.captureException)||void 0===d||d.call(u,new Error("state.PreferencesController.frequentRpcListDetail contains an element of type "+typeof t)),e}const{PreferencesController:h,NetworkController:m}=e,{frequentRpcListDetail:p}=h;if(!Array.isArray(p))return e;const f=p.reduce(((e,{rpcUrl:t,chainId:s,ticker:r,nickname:n,rpcPrefs:a})=>({...e,[(0,i.v4)()]:{rpcUrl:t,chainId:s,ticker:r,rpcPrefs:a,nickname:n}})),{});return delete h.frequentRpcListDetail,{...e,NetworkController:{...m,networkConfigurations:f},PreferencesController:{...h}}}(t.data),t},s.version=void 0;var r,n=e("lodash"),a=e("@metamask/utils"),i=e("uuid"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r};const c=s.version=82}}},{package:"$root$",file:"app/scripts/migrations/082.ts"}],[2210,{rfdc:4749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("rfdc"),a=((r=n)&&r.__esModule?r:{default:r}).default.call(void 0,{proto:!1,circles:!1});s.deepClone=a}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-NUCLSR2G.js"}],[2211,{"./chunk-UAINMOUU.js":2222,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-UAINMOUU.js"),n=e("@metamask/utils");s.encodeBase64=async function(e){const t=r.getBytes.call(void 0,e);return"FileReader"in globalThis?await new Promise(((e,s)=>{const r=Object.assign(new FileReader,{onload:()=>e(r.result.replace("data:application/octet-stream;base64,","")),onerror:()=>s(r.error)});r.readAsDataURL(new File([t],"",{type:"application/octet-stream"}))})):n.bytesToBase64.call(void 0,t)},s.decodeBase64=async function(e){const t=await fetch(`data:application/octet-stream;base64,${e}`);return new Uint8Array(await t.arrayBuffer())}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-OBN2WDFU.js"}],[2212,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__privateGet=(e,t,s)=>(r(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,n)=>(r(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s)}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-PHUTP7NB.js"}],[2213,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createWindow=async function(e,t,s=!0){return await new Promise(((r,n)=>{const a=document.createElement("iframe");a.setAttribute("id",t),a.setAttribute("data-testid","snaps-iframe"),s&&a.setAttribute("sandbox","allow-scripts"),a.setAttribute("src",e),document.body.appendChild(a),a.addEventListener("load",(()=>{a.contentWindow?r(a.contentWindow):n(new Error(`iframe.contentWindow not present on load for job "${t}".`))}))}))}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-PLBSSUVY.js"}],[2214,{"./chunk-5WKQI22S.js":2193,"./chunk-OBN2WDFU.js":2211,"@metamask/snaps-sdk":2575,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-OBN2WDFU.js"),n=e("./chunk-5WKQI22S.js"),a=e("@metamask/snaps-sdk"),i=e("@metamask/utils");s.encodeAuxiliaryFile=async function(e,t){if(t===a.AuxiliaryFileEncoding.Base64)return e;const s=await r.decodeBase64.call(void 0,e);return t===a.AuxiliaryFileEncoding.Utf8?i.bytesToString.call(void 0,s):i.bytesToHex.call(void 0,s)},s.validateAuxiliaryFiles=function(e){for(const t of e)i.assert.call(void 0,t.size<n.MAX_FILE_SIZE,"Static files required by the Snap must be smaller than 64 MB.")}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-PLNIERDY.js"}],[2215,{"@metamask/superstruct":2618,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/superstruct"),n=e("@metamask/utils"),a=(e=>(e.PackageJson="package.json",e.Manifest="snap.manifest.json",e))(a||{}),i=r.size.call(void 0,r.pattern.call(void 0,r.string.call(void 0),/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/u),1,214),o=r.type.call(void 0,{version:n.VersionStruct,name:i,main:r.optional.call(void 0,r.size.call(void 0,r.string.call(void 0),1,Infinity)),repository:r.optional.call(void 0,r.object.call(void 0,{type:r.size.call(void 0,r.string.call(void 0),1,Infinity),url:r.size.call(void 0,r.string.call(void 0),1,Infinity)}))});var c=(e=>(e.npm="npm:",e.local="local:",e))(c||{}),l=(e=>(e.NameMismatch='"name" field mismatch',e.VersionMismatch='"version" field mismatch',e.RepositoryMismatch='"repository" field mismatch',e.ShasumMismatch='"shasum" field mismatch',e))(l||{}),u=(e=>(e.JSON_RPC="jsonRpc",e.COMMAND="command",e))(u||{}),d=(e={})=>r.refine.call(void 0,r.union.call(void 0,[r.string.call(void 0),r.instance.call(void 0,URL)]),"uri",(t=>{try{const s=new URL(t),n=r.type.call(void 0,e);return r.assert.call(void 0,s,n),!0}catch{return`Expected URL, got "${t.toString()}".`}}));s.NpmSnapFileNames=a,s.NameStruct=i,s.NpmSnapPackageJsonStruct=o,s.isNpmSnapPackageJson=function(e){return r.is.call(void 0,e,o)},s.assertIsNpmSnapPackageJson=function(e){n.assertStruct.call(void 0,e,o,'"package.json" is invalid')},s.SnapIdPrefixes=c,s.SnapValidationFailureReason=l,s.SNAP_STREAM_NAMES=u,s.uri=d,s.isValidUrl=function(e,t={}){return r.is.call(void 0,e,d(t))},s.WALLET_SNAP_PERMISSION_KEY="wallet_snap"}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-PZNIU23I.js"}],[2216,{"@metamask/utils":2251,"fast-xml-parser":3852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/utils"),n=e("fast-xml-parser");function a(e){try{const t=e.trim();r.assert.call(void 0,t.length>0);const s=new(0,n.XMLParser)({ignoreAttributes:!1,parseAttributeValue:!0}).parse(t,!0);return r.assert.call(void 0,r.hasProperty.call(void 0,s,"svg")),r.isObject.call(void 0,s.svg)?s.svg:{}}catch{throw new Error("Snap icon must be a valid SVG.")}}s.parseSvg=a,s.isSvg=function(e){try{return a(e),!0}catch{return!1}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-QGCNQRIQ.js"}],[2217,{"./chunk-AMW2VJ3N.js":2196,"./chunk-PZNIU23I.js":2215,"@metamask/superstruct":2618,"@metamask/utils":2251,"@scure/base":2797,"fast-json-stable-stringify":3849,"validate-npm-package-name":4908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-PZNIU23I.js"),a=e("./chunk-AMW2VJ3N.js"),i=e("@metamask/superstruct"),o=e("@metamask/utils"),c=e("@scure/base"),l=r(e("fast-json-stable-stringify")),u=r(e("validate-npm-package-name")),d=(e=>(e.Installing="installing",e.Updating="updating",e.Running="running",e.Stopped="stopped",e.Crashed="crashed",e))(d||{}),h=(e=>(e.Start="START",e.Stop="STOP",e.Crash="CRASH",e.Update="UPDATE",e))(h||{}),m=class extends Error{constructor(e,t){super(e),this.reason=t}};function p(e){const t=e.clone();return delete t.result.source.shasum,t.value=l.default.call(void 0,t.result),t}async function f(e){const{manifest:t,sourceCode:s,svgIcon:r,auxiliaryFiles:n,localizationFiles:i}=e,o=[p(t),s,r,...n,...i].filter((e=>void 0!==e));return c.base64.encode(await a.checksumFiles.call(void 0,o))}var g=["localhost","127.0.0.1","[::1]"],v=i.pattern.call(void 0,i.string.call(void 0),/^[\x21-\x7E]*$/u),_=n.uri.call(void 0,{protocol:i.enums.call(void 0,["http:","https:"]),hostname:i.enums.call(void 0,g),hash:i.empty.call(void 0,i.string.call(void 0)),search:i.empty.call(void 0,i.string.call(void 0))}),k=i.refine.call(void 0,v,"local Snap Id",(e=>{if(!e.startsWith("local:"))return`Expected local snap ID, got "${e}".`;const[t]=i.validate.call(void 0,e.slice(6),_);return t??!0})),y=i.intersection.call(void 0,[v,n.uri.call(void 0,{protocol:i.literal.call(void 0,"npm:"),pathname:i.refine.call(void 0,i.string.call(void 0),"package name",(function*(e){const t=e.startsWith("/")?e.slice(1):e,{errors:s,validForNewPackages:r,warnings:n}=u.default.call(void 0,t);return r||(void 0===s?(o.assert.call(void 0,void 0!==n),yield*n):yield*s),!0})),search:i.empty.call(void 0,i.string.call(void 0)),hash:i.empty.call(void 0,i.string.call(void 0))})]),S=i.intersection.call(void 0,[v,n.uri.call(void 0,{protocol:i.enums.call(void 0,["http:","https:"]),search:i.empty.call(void 0,i.string.call(void 0)),hash:i.empty.call(void 0,i.string.call(void 0))})]),w=i.union.call(void 0,[y,k]);function b(e){const t=Object.values(n.SnapIdPrefixes).find((t=>e.startsWith(t)));if(void 0!==t)return t;throw new Error(`Invalid or no prefix found for "${e}"`)}s.PROPOSED_NAME_REGEX=/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u,s.SnapStatus=d,s.SnapStatusEvents=h,s.ProgrammaticallyFixableSnapError=m,s.getSnapChecksum=f,s.validateSnapShasum=async function(e,t="Invalid Snap manifest: manifest shasum does not match computed shasum."){if(e.manifest.result.source.shasum!==await f(e))throw new m(t,'"shasum" field mismatch')},s.LOCALHOST_HOSTNAMES=g,s.BaseSnapIdStruct=v,s.LocalSnapIdStruct=k,s.NpmSnapIdStruct=y,s.HttpSnapIdStruct=S,s.SnapIdStruct=w,s.getSnapPrefix=b,s.stripSnapPrefix=function(e){return e.replace(b(e),"")},s.assertIsValidSnapId=function(e){o.assertStruct.call(void 0,e,w,"Invalid snap ID")},s.isCaipChainId=function(e){return"string"==typeof e&&/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})$/u.test(e)},s.isSnapPermitted=function(e,t){return Boolean((e?.wallet_snap?.caveats?.find((e=>"snapIds"===e.type))??{}).value?.[t])},s.verifyRequestedSnapPermissions=function(e){o.assert.call(void 0,o.isObject.call(void 0,e),"Requested permissions must be an object.");const{wallet_snap:t}=e;o.assert.call(void 0,o.isObject.call(void 0,t),"wallet_snap is missing from the requested permissions.");const{caveats:s}=t;o.assert.call(void 0,Array.isArray(s)&&1===s.length,"wallet_snap must have a caveat property with a single-item array value.");const[r]=s;o.assert.call(void 0,o.isObject.call(void 0,r)&&"snapIds"===r.type&&o.isObject.call(void 0,r.value),"The requested permissions do not have a valid snapIds caveat.")}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-RD6BN2TQ.js"}],[2218,{"./chunk-5I5WPAVD.js":2192,"./chunk-B5GNTDE2.js":2199,"./chunk-RD6BN2TQ.js":2217,"./chunk-W7KRIAIX.js":2224},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-5I5WPAVD.js"),n=e("./chunk-RD6BN2TQ.js"),a=e("./chunk-B5GNTDE2.js"),i=e("./chunk-W7KRIAIX.js");s.validateFetchedSnap=async function(e){r.assertIsSnapManifest.call(void 0,e.manifest.result),await n.validateSnapShasum.call(void 0,e),a.validateSnapManifestLocalizations.call(void 0,e.manifest.result,e.localizationFiles.map((e=>e.result))),e.svgIcon&&i.assertIsSnapIcon.call(void 0,e.svgIcon)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-SB43G2RI.js"}],[2219,{"@metamask/permission-controller":2240,"@metamask/superstruct":2618,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/permission-controller"),n=e("@metamask/superstruct"),a=e("@metamask/utils"),i=n.array.call(void 0,n.refine.call(void 0,n.string.call(void 0),"Allowed origin",(e=>!(e.split("*").length-1>2)||'No more than two wildcards ("*") are allowed in an origin specifier.'))),o=n.refine.call(void 0,n.object.call(void 0,{dapps:n.optional.call(void 0,n.boolean.call(void 0)),snaps:n.optional.call(void 0,n.boolean.call(void 0)),allowedOrigins:n.optional.call(void 0,i)}),"RPC origins",(e=>!!Boolean(!0===e.snaps||!0===e.dapps||e.allowedOrigins&&e.allowedOrigins.length>0)||"Must specify at least one JSON-RPC origin."));var c=n.object.call(void 0,{allowedOrigins:n.optional.call(void 0,i)});function l(e,t){if("*"===e||e===t)return!0;const s=function(e){const t=e.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*");return RegExp(`${t}$`,"u")}(e);return s.test(t)}s.RpcOriginsStruct=o,s.assertIsRpcOrigins=function(e,t){a.assertStruct.call(void 0,e,o,"Invalid JSON-RPC origins",t)},s.KeyringOriginsStruct=c,s.assertIsKeyringOrigins=function(e,t){a.assertStruct.call(void 0,e,c,"Invalid keyring origins",t)},s.isOriginAllowed=function(e,t,s){return"metamask"===s||(!!e.allowedOrigins?.some((e=>l(e,s)))||(!(t!==r.SubjectType.Website||!e.dapps)||Boolean(t===r.SubjectType.Snap&&e.snaps)))},s.assertIsJsonRpcSuccess=function(e){if(!a.isJsonRpcSuccess.call(void 0,e)){if(a.isJsonRpcFailure.call(void 0,e))throw new Error(`JSON-RPC request failed: ${e.error.message}`);throw new Error("Invalid JSON-RPC response.")}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-T2VA4YJE.js"}],[222,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,n.isObject)(e.NetworkController)){var t,s;return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}const{NetworkController:r}=e;if(!(0,n.isObject)(r.networkConfigurations)){var a,i;return null===(a=global.sentry)||void 0===a||null===(i=a.captureException)||void 0===i||i.call(a,new Error("typeof NetworkController.networkConfigurations is "+typeof r.networkConfigurations)),e}const{networkConfigurations:o}=r,c={};for(const t of Object.keys(o)){const s=o[t];if(!(0,n.isObject)(s))return e;c[t]={...s,id:t}}return{...e,NetworkController:{...r,networkConfigurations:c}}}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils");const a=s.version=83}}},{package:"$root$",file:"app/scripts/migrations/083.ts"}],[2220,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-T3VM5YXY.js"}],[2221,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isEqual=function(e,t){return e.length===t.length&&e.every(((e,s)=>e===t[s]))}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-T3YY4JIJ.js"}],[2222,{"./chunk-DEQUNIME.js":2200,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-DEQUNIME.js"),n=e("@metamask/utils");s.getBytes=function(e){const t=e instanceof r.VirtualFile?e.value:e;return"string"==typeof t?n.stringToBytes.call(void 0,t):t}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-UAINMOUU.js"}],[2223,{"./chunk-IJX3CXOY.js":2205,"@metamask/snaps-sdk":2575,"@metamask/superstruct":2618,"@metamask/utils":2251,chalk:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-IJX3CXOY.js"),n=e("@metamask/snaps-sdk"),a=e("@metamask/superstruct"),i=e("@metamask/utils"),o=e("chalk");function c(e,t,s){return s?t(e):e}var l=class extends a.StructError{constructor(e,t,s,r,n,a=!0){super(r,n),this.name="SnapsStructError",this.message=`${t}.\n\n${g(e,[...n()],a)}${s?`\n\n${s}`:""}`}};function*u(e){for(const t of e)yield t}function d({struct:e,prefix:t,suffix:s="",error:r,colorize:n}){return new l(e,t,s,r,(()=>u(r.failures())),n)}function h(e,t){return t.reduce(((t,s)=>i.isObject.call(void 0,e.schema)&&e.schema[s]?e.schema[s]:t),e)}function m(e,t=!0){return Array.isArray(e.schema)?e.schema.map((({type:e})=>c(e,o.green,t))):null}function p(e,t=!0){return"never"===e.type||0===e.path.length?"":`At path: ${c(e.path.join("."),o.bold,t)}  `}function f(e,t,s=!0){const r=c(JSON.stringify(t.value),o.red,s),n=p(t,s);if("union"===t.type){const a=m(h(e,t.path),s);return a?`${n}Expected the value to be one of: ${a.join(", ")}, but received: ${r}.`:`${n}${t.message}.`}if("literal"===t.type){return`${n}${t.message.replace(/the literal `(.+)`,/u,`the value to be \`${c("$1",o.green,s)}\`,`).replace(/, but received: (.+)/u,`, but received: ${c("$1",o.red,s)}`)}.`}if("never"===t.type)return`Unknown key: ${c(t.path.join("."),o.bold,s)}, received: ${r}.`;if("size"===t.refinement){return`${n}${t.message.replace(/length between `(\d+)` and `(\d+)`/u,`length between ${c("$1",o.green,s)} and ${c("$2",o.green,s)},`).replace(/length of `(\d+)`/u,`length of ${c("$1",o.red,s)}`).replace(/a array/u,"an array")}.`}return`${n}Expected a value of type ${c(t.type,o.green,s)}, but received: ${r}.`}function g(e,t,s=!0){return t.map((t=>r.indent.call(void 0,` ${f(e,t,s)}`))).join("\n")}function v(e,t,s,r=!1){i.assert.call(void 0,t.schema,"Expected a struct with a schema. Make sure to use `union` from `@metamask/snaps-sdk`."),i.assert.call(void 0,t.schema.length>0,"Expected a non-empty array of structs.");const o=t.schema.map((e=>e.schema[s])),c=a.type.call(void 0,{[s]:n.union.call(void 0,o)}),[l]=a.validate.call(void 0,e,c,{coerce:r});if(l)throw new Error(f(c,l.failures()[0],!1));const u=e,d=t.schema.filter((e=>a.is.call(void 0,u[s],e.schema[s])));i.assert.call(void 0,d.length>0,"Expected a struct to match the value.");const h=d.map((e=>a.validate.call(void 0,u,e,{coerce:r}))),m=h.find((([e])=>!e));if(m)return m[1];i.assert.call(void 0,h[0][0],"Expected at least one error.");const p=h.reduce(((e,[t])=>(i.assert.call(void 0,t,"Expected an error."),t.failures().length<e.failures().length?t:e)),h[0][0]);throw new Error(f(t,p.failures()[0],!1))}s.named=function(e,t){return new(0,a.Struct)({...t,type:e})},s.SnapsStructError=l,s.arrayToGenerator=u,s.getError=d,s.createFromStruct=function(e,t,s,r=""){try{return a.create.call(void 0,e,t)}catch(e){if(e instanceof a.StructError)throw d({struct:t,prefix:s,suffix:r,error:e});throw e}},s.getStructFromPath=h,s.getUnionStructNames=m,s.getStructErrorPrefix=p,s.getStructFailureMessage=f,s.getStructErrorMessage=g,s.validateUnion=v,s.createUnion=function(e,t,s){return v(e,t,s,!0)},s.mergeStructs=function(...e){const t=a.assign.call(void 0,...e);return new(0,a.Struct)({...t,*refiner(t,s){for(const r of e)yield*r.refiner(t,s)}})}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-VOPTAKVG.js"}],[2224,{"./chunk-QGCNQRIQ.js":2216,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-QGCNQRIQ.js"),n=e("@metamask/utils"),a=1e5,i=`${Math.floor(100)}kb`;s.SVG_MAX_BYTE_SIZE=a,s.SVG_MAX_BYTE_SIZE_TEXT=i,s.assertIsSnapIcon=function(e){n.assert.call(void 0,e.path.endsWith(".svg"),'Expected snap icon to end in ".svg".');const t="string"==typeof e.value?n.stringToBytes.call(void 0,e.value).byteLength:e.value.byteLength;n.assert.call(void 0,t<=a,`The specified SVG icon exceeds the maximum size of ${i}.`),n.assert.call(void 0,r.isSvg.call(void 0,e.toString()),"Snap icon must be a valid SVG.")},s.getSvgDimensions=function(e){try{const t=r.parseSvg.call(void 0,e),s=t["@_height"],a=t["@_width"];if(s&&a)return{height:s,width:a};const i=t["@_viewBox"];if(i){const[e,t,s,r]=i.split(" ");if(s&&r){const e=parseInt(s,10),t=parseInt(r,10);return n.assert.call(void 0,Number.isInteger(e)&&e>0),n.assert.call(void 0,Number.isInteger(t)&&t>0),{width:e,height:t}}}}catch{throw new Error("Snap icon must be a valid SVG.")}return null}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-W7KRIAIX.js"}],[2225,{"@metamask/snaps-sdk":2575,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/snaps-sdk"),n=e("@metamask/superstruct"),a={onRpcRequest:{type:"onRpcRequest",required:!0,validator:e=>"function"==typeof e},onTransaction:{type:"onTransaction",required:!0,validator:e=>"function"==typeof e},onCronjob:{type:"onCronjob",required:!0,validator:e=>"function"==typeof e},onNameLookup:{type:"onNameLookup",required:!0,validator:e=>"function"==typeof e},onInstall:{type:"onInstall",required:!1,validator:e=>"function"==typeof e},onUpdate:{type:"onUpdate",required:!1,validator:e=>"function"==typeof e},onKeyringRequest:{type:"onKeyringRequest",required:!0,validator:e=>"function"==typeof e},onHomePage:{type:"onHomePage",required:!0,validator:e=>"function"==typeof e},onSignature:{type:"onSignature",required:!0,validator:e=>"function"==typeof e},onUserInput:{type:"onUserInput",required:!1,validator:e=>"function"==typeof e}},i=n.object.call(void 0,{severity:n.optional.call(void 0,n.literal.call(void 0,r.SeverityLevel.Critical))}),o=n.assign.call(void 0,i,n.object.call(void 0,{id:n.string.call(void 0)})),c=n.assign.call(void 0,i,n.object.call(void 0,{content:r.ComponentOrElementStruct})),l=n.nullable.call(void 0,n.union.call(void 0,[c,o])),u=l,d=n.object.call(void 0,{content:r.ComponentOrElementStruct}),h=n.object.call(void 0,{id:n.string.call(void 0)}),m=n.union.call(void 0,[d,h]),p=n.object.call(void 0,{protocol:n.string.call(void 0),resolvedDomain:n.string.call(void 0)}),f=n.object.call(void 0,{protocol:n.string.call(void 0),resolvedAddress:n.string.call(void 0),domainName:n.string.call(void 0)}),g=n.object.call(void 0,{resolvedDomains:n.size.call(void 0,n.array.call(void 0,p),1,Infinity)}),v=n.object.call(void 0,{resolvedAddresses:n.size.call(void 0,n.array.call(void 0,f),1,Infinity)}),_=n.nullable.call(void 0,n.union.call(void 0,[g,v]));s.SNAP_EXPORTS=a,s.OnTransactionSeverityResponseStruct=i,s.OnTransactionResponseWithIdStruct=o,s.OnTransactionResponseWithContentStruct=c,s.OnTransactionResponseStruct=l,s.OnSignatureResponseStruct=u,s.OnHomePageResponseWithContentStruct=d,s.OnHomePageResponseWithIdStruct=h,s.OnHomePageResponseStruct=m,s.AddressResolutionStruct=p,s.DomainResolutionStruct=f,s.AddressResolutionResponseStruct=g,s.DomainResolutionResponseStruct=v,s.OnNameLookupResponseStruct=_}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-X2GGUOMY.js"}],[2226,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});s.SIP_6_MAGIC_VALUE="1399742832'",s.STATE_ENCRYPTION_MAGIC_VALUE="572232532'"}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/chunk-ZT3KKTS2.js"}],[2227,{"./chunk-4CMD46B2.js":2190,"./chunk-4ZJOU3LR.js":2191,"./chunk-5I5WPAVD.js":2192,"./chunk-5WKQI22S.js":2193,"./chunk-6ATNGN44.js":2194,"./chunk-7VJ2BOVU.js":2195,"./chunk-AMW2VJ3N.js":2196,"./chunk-AOGVLPQZ.js":2197,"./chunk-ASZWZ7JT.js":2198,"./chunk-B5GNTDE2.js":2199,"./chunk-DEQUNIME.js":2200,"./chunk-E3BDBG6T.js":2201,"./chunk-F6G67XQ4.js":2202,"./chunk-FBZ5SU7X.js":2203,"./chunk-I2SWLZ34.js":2204,"./chunk-IJX3CXOY.js":2205,"./chunk-K6BCBPXF.js":2206,"./chunk-LEKZPKS2.js":2207,"./chunk-LOJA2ZS4.js":2208,"./chunk-N722KRZW.js":2209,"./chunk-NUCLSR2G.js":2210,"./chunk-OBN2WDFU.js":2211,"./chunk-PHUTP7NB.js":2212,"./chunk-PLBSSUVY.js":2213,"./chunk-PLNIERDY.js":2214,"./chunk-PZNIU23I.js":2215,"./chunk-QGCNQRIQ.js":2216,"./chunk-RD6BN2TQ.js":2217,"./chunk-SB43G2RI.js":2218,"./chunk-T2VA4YJE.js":2219,"./chunk-T3VM5YXY.js":2220,"./chunk-T3YY4JIJ.js":2221,"./chunk-UAINMOUU.js":2222,"./chunk-VOPTAKVG.js":2223,"./chunk-W7KRIAIX.js":2224,"./chunk-X2GGUOMY.js":2225,"./chunk-ZT3KKTS2.js":2226},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),e("./chunk-F6G67XQ4.js");var r=e("./chunk-6ATNGN44.js"),n=e("./chunk-SB43G2RI.js"),a=e("./chunk-I2SWLZ34.js");e("./chunk-4CMD46B2.js");var i=e("./chunk-5I5WPAVD.js"),o=e("./chunk-RD6BN2TQ.js"),c=e("./chunk-VOPTAKVG.js"),l=e("./chunk-IJX3CXOY.js"),u=e("./chunk-B5GNTDE2.js"),d=e("./chunk-AOGVLPQZ.js");e("./chunk-W7KRIAIX.js"),e("./chunk-QGCNQRIQ.js");var h=e("./chunk-E3BDBG6T.js"),m=e("./chunk-PZNIU23I.js"),p=e("./chunk-LOJA2ZS4.js"),f=e("./chunk-X2GGUOMY.js"),g=e("./chunk-PLBSSUVY.js"),v=e("./chunk-T2VA4YJE.js"),_=e("./chunk-FBZ5SU7X.js"),k=e("./chunk-ZT3KKTS2.js"),y=e("./chunk-K6BCBPXF.js"),S=e("./chunk-LEKZPKS2.js"),w=e("./chunk-N722KRZW.js");e("./chunk-T3VM5YXY.js");var b=e("./chunk-7VJ2BOVU.js"),T=e("./chunk-T3YY4JIJ.js"),E=e("./chunk-PLNIERDY.js"),P=e("./chunk-OBN2WDFU.js"),j=e("./chunk-ASZWZ7JT.js"),I=e("./chunk-AMW2VJ3N.js"),C=e("./chunk-UAINMOUU.js"),A=e("./chunk-DEQUNIME.js"),x=e("./chunk-NUCLSR2G.js"),R=e("./chunk-5WKQI22S.js"),N=e("./chunk-4ZJOU3LR.js");e("./chunk-PHUTP7NB.js"),s.ACCOUNT_ADDRESS_REGEX=p.ACCOUNT_ADDRESS_REGEX,s.ACCOUNT_ID_REGEX=p.ACCOUNT_ID_REGEX,s.AccountAddressStruct=p.AccountAddressStruct,s.AccountIdArrayStruct=p.AccountIdArrayStruct,s.AccountIdStruct=p.AccountIdStruct,s.AddressResolutionResponseStruct=f.AddressResolutionResponseStruct,s.AddressResolutionStruct=f.AddressResolutionStruct,s.BaseSnapIdStruct=o.BaseSnapIdStruct,s.Bip32EntropyStruct=i.Bip32EntropyStruct,s.Bip32PathStruct=i.Bip32PathStruct,s.CHAIN_ID_REGEX=p.CHAIN_ID_REGEX,s.ChainIdStringStruct=p.ChainIdStringStruct,s.ChainIdStruct=p.ChainIdStruct,s.ChainIdsStruct=i.ChainIdsStruct,s.ChainStruct=p.ChainStruct,s.CronExpressionStruct=N.CronExpressionStruct,s.CronjobRpcRequestStruct=N.CronjobRpcRequestStruct,s.CronjobSpecificationArrayStruct=N.CronjobSpecificationArrayStruct,s.CronjobSpecificationStruct=N.CronjobSpecificationStruct,s.CurveStruct=i.CurveStruct,s.DEFAULT_ENDOWMENTS=w.DEFAULT_ENDOWMENTS,s.DEFAULT_REQUESTED_SNAP_VERSION=a.DEFAULT_REQUESTED_SNAP_VERSION,s.DomainResolutionResponseStruct=f.DomainResolutionResponseStruct,s.DomainResolutionStruct=f.DomainResolutionStruct,s.EmptyObjectStruct=i.EmptyObjectStruct,s.FORBIDDEN_COIN_TYPES=i.FORBIDDEN_COIN_TYPES,s.HandlerCaveatsStruct=i.HandlerCaveatsStruct,s.HandlerType=S.HandlerType,s.HttpSnapIdStruct=o.HttpSnapIdStruct,s.InitialConnectionsStruct=i.InitialConnectionsStruct,s.KeyringOriginsStruct=v.KeyringOriginsStruct,s.LOCALHOST_HOSTNAMES=o.LOCALHOST_HOSTNAMES,s.LOCALIZABLE_FIELDS=u.LOCALIZABLE_FIELDS,s.LimitedString=p.LimitedString,s.LocalSnapIdStruct=o.LocalSnapIdStruct,s.LocalizationFileStruct=u.LocalizationFileStruct,s.LookupMatchersStruct=i.LookupMatchersStruct,s.MAXIMUM_REQUEST_TIMEOUT=i.MAXIMUM_REQUEST_TIMEOUT,s.MAX_FILE_SIZE=R.MAX_FILE_SIZE,s.MINIMUM_REQUEST_TIMEOUT=i.MINIMUM_REQUEST_TIMEOUT,s.MaxRequestTimeStruct=i.MaxRequestTimeStruct,s.NameStruct=m.NameStruct,s.NamespaceIdStruct=p.NamespaceIdStruct,s.NamespaceStruct=p.NamespaceStruct,s.NpmSnapFileNames=m.NpmSnapFileNames,s.NpmSnapIdStruct=o.NpmSnapIdStruct,s.NpmSnapPackageJsonStruct=m.NpmSnapPackageJsonStruct,s.OnHomePageResponseStruct=f.OnHomePageResponseStruct,s.OnHomePageResponseWithContentStruct=f.OnHomePageResponseWithContentStruct,s.OnHomePageResponseWithIdStruct=f.OnHomePageResponseWithIdStruct,s.OnNameLookupResponseStruct=f.OnNameLookupResponseStruct,s.OnSignatureResponseStruct=f.OnSignatureResponseStruct,s.OnTransactionResponseStruct=f.OnTransactionResponseStruct,s.OnTransactionResponseWithContentStruct=f.OnTransactionResponseWithContentStruct,s.OnTransactionResponseWithIdStruct=f.OnTransactionResponseWithIdStruct,s.OnTransactionSeverityResponseStruct=f.OnTransactionSeverityResponseStruct,s.PROPOSED_NAME_REGEX=o.PROPOSED_NAME_REGEX,s.PermissionsStruct=i.PermissionsStruct,s.ProgrammaticallyFixableSnapError=o.ProgrammaticallyFixableSnapError,s.RpcOriginsStruct=v.RpcOriginsStruct,s.SIP_6_MAGIC_VALUE=k.SIP_6_MAGIC_VALUE,s.SNAPS_DERIVATION_PATHS=_.SNAPS_DERIVATION_PATHS,s.SNAP_ERROR_WRAPPER_CODE=y.SNAP_ERROR_WRAPPER_CODE,s.SNAP_ERROR_WRAPPER_MESSAGE=y.SNAP_ERROR_WRAPPER_MESSAGE,s.SNAP_EXPORTS=f.SNAP_EXPORTS,s.SNAP_EXPORT_NAMES=S.SNAP_EXPORT_NAMES,s.SNAP_STREAM_NAMES=m.SNAP_STREAM_NAMES,s.STATE_ENCRYPTION_MAGIC_VALUE=k.STATE_ENCRYPTION_MAGIC_VALUE,s.SemVerRangeStruct=i.SemVerRangeStruct,s.SnapAuxilaryFilesStruct=i.SnapAuxilaryFilesStruct,s.SnapCaveatType=j.SnapCaveatType,s.SnapGetBip32EntropyPermissionsStruct=i.SnapGetBip32EntropyPermissionsStruct,s.SnapIdPrefixes=m.SnapIdPrefixes,s.SnapIdStruct=o.SnapIdStruct,s.SnapIdsStruct=i.SnapIdsStruct,s.SnapManifestStruct=i.SnapManifestStruct,s.SnapStatus=o.SnapStatus,s.SnapStatusEvents=o.SnapStatusEvents,s.SnapValidationFailureReason=m.SnapValidationFailureReason,s.SnapsStructError=c.SnapsStructError,s.TRANSLATION_REGEX=u.TRANSLATION_REGEX,s.VirtualFile=A.VirtualFile,s.WALLET_SNAP_PERMISSION_KEY=m.WALLET_SNAP_PERMISSION_KEY,s.WrappedSnapError=y.WrappedSnapError,s.arrayToGenerator=c.arrayToGenerator,s.assertIsJsonRpcSuccess=v.assertIsJsonRpcSuccess,s.assertIsKeyringOrigins=v.assertIsKeyringOrigins,s.assertIsNpmSnapPackageJson=m.assertIsNpmSnapPackageJson,s.assertIsRpcOrigins=v.assertIsRpcOrigins,s.assertIsSnapManifest=i.assertIsSnapManifest,s.assertIsValidSnapId=o.assertIsValidSnapId,s.bip32entropy=i.bip32entropy,s.checksum=I.checksum,s.checksumFiles=I.checksumFiles,s.createFromStruct=c.createFromStruct,s.createSnapManifest=i.createSnapManifest,s.createUnion=c.createUnion,s.createWindow=g.createWindow,s.decodeBase64=P.decodeBase64,s.deepClone=x.deepClone,s.encodeAuxiliaryFile=E.encodeAuxiliaryFile,s.encodeBase64=P.encodeBase64,s.getBytes=C.getBytes,s.getError=c.getError,s.getJsonSizeUnsafe=b.getJsonSizeUnsafe,s.getJsxChildren=r.getJsxChildren,s.getJsxElementFromComponent=r.getJsxElementFromComponent,s.getLocalizationFile=u.getLocalizationFile,s.getLocalizedSnapManifest=u.getLocalizedSnapManifest,s.getSlip44ProtocolName=_.getSlip44ProtocolName,s.getSnapChecksum=o.getSnapChecksum,s.getSnapDerivationPathName=_.getSnapDerivationPathName,s.getSnapPrefix=o.getSnapPrefix,s.getStructErrorMessage=c.getStructErrorMessage,s.getStructErrorPrefix=c.getStructErrorPrefix,s.getStructFailureMessage=c.getStructFailureMessage,s.getStructFromPath=c.getStructFromPath,s.getTargetVersion=a.getTargetVersion,s.getTextChildren=r.getTextChildren,s.getTotalTextLength=r.getTotalTextLength,s.getUnionStructNames=c.getUnionStructNames,s.getValidatedLocalizationFiles=u.getValidatedLocalizationFiles,s.hasChildren=r.hasChildren,s.indent=l.indent,s.isAccountId=p.isAccountId,s.isAccountIdArray=p.isAccountIdArray,s.isCaipChainId=o.isCaipChainId,s.isChainId=p.isChainId,s.isCronjobSpecification=N.isCronjobSpecification,s.isCronjobSpecificationArray=N.isCronjobSpecificationArray,s.isEqual=T.isEqual,s.isNamespace=p.isNamespace,s.isNamespaceId=p.isNamespaceId,s.isNpmSnapPackageJson=m.isNpmSnapPackageJson,s.isOriginAllowed=v.isOriginAllowed,s.isSerializedSnapError=y.isSerializedSnapError,s.isSnapError=y.isSnapError,s.isSnapManifest=i.isSnapManifest,s.isSnapPermitted=o.isSnapPermitted,s.isValidUrl=m.isValidUrl,s.isWrappedSnapError=y.isWrappedSnapError,s.logError=h.logError,s.logInfo=h.logInfo,s.logWarning=h.logWarning,s.mergeStructs=c.mergeStructs,s.named=c.named,s.normalizeRelative=d.normalizeRelative,s.parseAccountId=p.parseAccountId,s.parseChainId=p.parseChainId,s.parseCronExpression=N.parseCronExpression,s.parseJson=b.parseJson,s.resolveVersionRange=a.resolveVersionRange,s.serialiseJsx=r.serialiseJsx,s.snapsLogger=h.snapsLogger,s.stripSnapPrefix=o.stripSnapPrefix,s.translate=u.translate,s.unwrapError=y.unwrapError,s.uri=m.uri,s.validateAuxiliaryFiles=E.validateAuxiliaryFiles,s.validateFetchedSnap=n.validateFetchedSnap,s.validateJsxLinks=r.validateJsxLinks,s.validateSnapManifestLocalizations=u.validateSnapManifestLocalizations,s.validateSnapShasum=o.validateSnapShasum,s.validateTextLinks=r.validateTextLinks,s.validateUnion=c.validateUnion,s.verifyRequestedSnapPermissions=o.verifyRequestedSnapPermissions,s.walkJsx=r.walkJsx}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/dist/index.js"}],[2228,{"./chunk-FYADAA2G.js":2233,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-FYADAA2G.js"),n=e("@metamask/utils");function a(e){return n.hasProperty.call(void 0,e,"decorator")}s.isRestrictedMethodCaveatSpecification=a,s.decorateWithCaveats=function(e,t,s){const{caveats:n}=t;if(!n)return e;let i=async t=>e(t);for(const e of n){const t=s[e.type];if(!t)throw new(0,r.UnrecognizedCaveatTypeError)(e.type);if(!a(t))throw new(0,r.CaveatSpecificationMismatchError)(t,"RestrictedMethod");i=t.decorator(i,e)}return i}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-3YOPLPVY.js"}],[2229,{"./chunk-7A3VYLCK.js":2230,"./chunk-VBIZGGQL.js":2234,"./chunk-X4ZAW4QR.js":2237,"./chunk-Z2XKIXLS.js":2238},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-VBIZGGQL.js"),n=e("./chunk-7A3VYLCK.js"),a=e("./chunk-X4ZAW4QR.js"),i={};e("./chunk-Z2XKIXLS.js").__export.call(void 0,i,{handlers:()=>o});var o=[n.requestPermissionsHandler,r.getPermissionsHandler,a.revokePermissionsHandler];s.handlers=o,s.rpc_methods_exports=i}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-6PXDVUYM.js"}],[223,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,n.hasProperty)(e,"NetworkController")||!(0,n.isObject)(e.NetworkController)){var t,s;return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}if(!(0,n.hasProperty)(e.NetworkController,"network")){var r,a;if(e.NetworkController.networkId===undefined)null===(r=global.sentry)||void 0===r||null===(a=r.captureException)||void 0===a||a.call(r,new Error("typeof state.NetworkController.network is "+typeof e.NetworkController.network));return e}const i={...e.NetworkController};"loading"===i.network?(i.networkId=null,i.networkStatus="unknown"):(i.networkId=i.network,i.networkStatus="available");return delete i.network,{...e,NetworkController:i}}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils");const a=s.version=84}}},{package:"$root$",file:"app/scripts/migrations/084.ts"}],[2230,{"./chunk-FYADAA2G.js":2233,"@metamask/controller-utils":2165},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-FYADAA2G.js"),n=e("@metamask/controller-utils"),a={methodNames:["wallet_requestPermissions"],implementation:async function(e,t,s,a,{requestPermissionsForOrigin:i}){const{params:o}=e;if(!Array.isArray(o)||!n.isPlainObject.call(void 0,o[0]))return a(r.invalidParams.call(void 0,{data:{request:e}}));const[c]=o,[l]=await i(c);return t.result=Object.values(l),a()},hookNames:{requestPermissionsForOrigin:!0}};s.requestPermissionsHandler=a}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-7A3VYLCK.js"}],[2231,{"./chunk-3YOPLPVY.js":2228,"./chunk-F5TBMVWC.js":2232,"./chunk-FYADAA2G.js":2233,"./chunk-VQPP5PWS.js":2235,"./chunk-Z2XKIXLS.js":2238,"./chunk-ZH4MLSXX.js":2239,"@metamask/base-controller":2159,"@metamask/controller-utils":2165,"@metamask/rpc-errors":1884,"@metamask/utils":2251,"deep-freeze-strict":3667,immer:4126,nanoid:2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r,n=e("./chunk-3YOPLPVY.js"),a=e("./chunk-ZH4MLSXX.js"),i=e("./chunk-F5TBMVWC.js"),o=e("./chunk-FYADAA2G.js"),c=e("./chunk-VQPP5PWS.js"),l=e("./chunk-Z2XKIXLS.js"),u=e("@metamask/base-controller"),d=e("@metamask/controller-utils"),h=e("@metamask/rpc-errors"),m=e("@metamask/utils"),p=e("deep-freeze-strict"),f=(r=p)&&r.__esModule?r:{default:r},g=e("immer"),v=e("nanoid"),_="PermissionController";var k,y,S,w,b,T,E,P,j,I,C,A,x=(e=>(e[e.Noop=0]="Noop",e[e.UpdateValue=1]="UpdateValue",e[e.DeleteCaveat=2]="DeleteCaveat",e[e.RevokePermission=3]="RevokePermission",e))(x||{}),R=class extends u.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:s,unrestrictedMethods:r,messenger:n,state:a={}}=e;super({name:_,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:n,state:{subjects:{},...a}}),l.__privateAdd.call(void 0,this,k),l.__privateAdd.call(void 0,this,S),l.__privateAdd.call(void 0,this,b),l.__privateAdd.call(void 0,this,E),l.__privateAdd.call(void 0,this,j),l.__privateAdd.call(void 0,this,C),this._unrestrictedMethods=new Set(r),this._caveatSpecifications=f.default.call(void 0,{...t}),this.validatePermissionSpecifications(s,this._caveatSpecifications),this._permissionSpecifications=f.default.call(void 0,{...s}),this.registerMessageHandlers(),this.createPermissionMiddleware=i.getPermissionMiddlewareFactory.call(void 0,{executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:s,targetName:r,allowedCaveats:i}])=>{if(!s||!m.hasProperty.call(void 0,a.PermissionType,s))throw new Error(`Invalid permission type: "${s}"`);if(!e)throw new Error(`Invalid permission target name: "${e}"`);if(e!==r)throw new Error(`Invalid permission specification: target name "${e}" must match specification.targetName value "${r}".`);i&&i.forEach((e=>{if(!m.hasProperty.call(void 0,t,e))throw new(0,o.UnrecognizedCaveatTypeError)(e);const r=t[e],a=n.isRestrictedMethodCaveatSpecification.call(void 0,r);if("RestrictedMethod"===s&&!a||"Endowment"===s&&a)throw new(0,o.CaveatSpecificationMismatchError)(r,s)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${_}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${_}:getEndowments`,((e,t,s)=>this.getEndowments(e,t,s))),this.messagingSystem.registerActionHandler(`${_}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${_}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${_}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:grantPermissions`,this.grantPermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:grantPermissionsIncremental`,this.grantPermissionsIncremental.bind(this)),this.messagingSystem.registerActionHandler(`${_}:requestPermissions`,((e,t)=>this.requestPermissions(e,t))),this.messagingSystem.registerActionHandler(`${_}:requestPermissionsIncremental`,((e,t)=>this.requestPermissionsIncremental(e,t))),this.messagingSystem.registerActionHandler(`${_}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissionForAllSubjects`,(e=>this.revokePermissionForAllSubjects(e))),this.messagingSystem.registerActionHandler(`${_}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${_}:updateCaveat`,((e,t,s,r)=>{this.updateCaveat(e,t,s,r)}))}clearState(){this.update((e=>({subjects:{}})))}getTypedPermissionSpecification(e,t,s){const r="RestrictedMethod"===e?o.methodNotFound.call(void 0,t,s?{origin:s}:void 0):new(0,o.EndowmentPermissionDoesNotExistError)(t,s);if(!this.targetExists(t))throw r;const n=this.getPermissionSpecification(t);if(!a.hasSpecificationType.call(void 0,n,e))throw r;return n}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification("RestrictedMethod",e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){return this.state.subjects[e]?.permissions[t]}getPermissions(e){return this.state.subjects[e]?.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new(0,o.UnrecognizedSubjectError)(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((s=>{if(!m.hasProperty.call(void 0,t.subjects,s))throw new(0,o.UnrecognizedSubjectError)(s);e[s].forEach((e=>{const{permissions:r}=t.subjects[s];if(!m.hasProperty.call(void 0,r,e))throw new(0,o.PermissionDoesNotExistError)(s,e);this.deletePermission(t.subjects,s,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([s,r])=>{const{permissions:n}=r;m.hasProperty.call(void 0,n,e)&&this.deletePermission(t.subjects,s,e)}))}))}deletePermission(e,t,s){const{permissions:r}=e[t];Object.keys(r).length>1?delete r[s]:delete e[t]}hasCaveat(e,t,s){return Boolean(this.getCaveat(e,t,s))}getCaveat(e,t,s){const r=this.getPermission(e,t);if(!r)throw new(0,o.PermissionDoesNotExistError)(e,t);return a.findCaveat.call(void 0,r,s)}addCaveat(e,t,s,r){if(this.hasCaveat(e,t,s))throw new(0,o.CaveatAlreadyExistsError)(e,t,s);this.setCaveat(e,t,s,r)}updateCaveat(e,t,s,r){if(!this.hasCaveat(e,t,s))throw new(0,o.CaveatDoesNotExistError)(e,t,s);this.setCaveat(e,t,s,r)}setCaveat(e,t,s,r){this.update((n=>{const a=n.subjects[e];if(!a)throw new(0,o.UnrecognizedSubjectError)(e);const i=a.permissions[t];if(!i)throw new(0,o.PermissionDoesNotExistError)(e,t);const c={type:s,value:r};if(this.validateCaveat(c,e,t),i.caveats){const e=i.caveats.findIndex((e=>e.type===c.type));-1===e?i.caveats.push(c):i.caveats.splice(e,1,c)}else i.caveats=[c];this.validateModifiedPermission(i,e)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((s=>{Object.values(s.subjects).forEach((r=>{Object.values(r.permissions).forEach((n=>{const{caveats:a}=n,i=a?.find((({type:t})=>t===e));if(!i)return;const o=t(i.value),{operation:c}=o;switch(c){case 0:break;case 1:i.value=o.value,this.validateCaveat(i,r.origin,n.parentCapability);break;case 2:this.deleteCaveat(n,e,r.origin);break;case 3:this.deletePermission(s.subjects,r.origin,n.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${c}"`)}}))}))}))}removeCaveat(e,t,s){this.update((r=>{const n=r.subjects[e]?.permissions[t];if(!n)throw new(0,o.PermissionDoesNotExistError)(e,t);if(!n.caveats)throw new(0,o.CaveatDoesNotExistError)(e,t,s);this.deleteCaveat(n,s,e)}))}deleteCaveat(e,t,s){if(!e.caveats)throw new(0,o.CaveatDoesNotExistError)(s,e.parentCapability,t);const r=e.caveats.findIndex((e=>e.type===t));if(-1===r)throw new(0,o.CaveatDoesNotExistError)(s,e.parentCapability,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(r,1),this.validateModifiedPermission(e,s)}validateModifiedPermission(e,t){if(!this.targetExists(e.parentCapability))throw new Error(`Fatal: Existing permission target "${e.parentCapability}" has no specification.`);this.validatePermission(this.getPermissionSpecification(e.parentCapability),e,t)}targetExists(e){return m.hasProperty.call(void 0,this._permissionSpecifications,e)}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:s=!0,subject:r}){return l.__privateMethod.call(void 0,this,S,w).call(this,{approvedPermissions:e,subject:r,mergePermissions:!1,preserveExistingPermissions:s,requestData:t})}grantPermissionsIncremental({approvedPermissions:e,requestData:t,subject:s}){return l.__privateMethod.call(void 0,this,S,w).call(this,{approvedPermissions:e,subject:s,mergePermissions:!0,preserveExistingPermissions:!0,requestData:t})}validatePermission(e,t,s,{invokePermissionValidator:r,performCaveatValidation:n}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:a,validator:i,targetName:c}=e;if(e.subjectTypes?.length&&e.subjectTypes.length>0){const t=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",s);if(!t||null===t.subjectType||!e.subjectTypes.includes(t.subjectType))throw"RestrictedMethod"===e.permissionType?o.methodNotFound.call(void 0,c,{origin:s}):new(0,o.EndowmentPermissionDoesNotExistError)(c,s)}if(m.hasProperty.call(void 0,t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new(0,o.InvalidCaveatsPropertyError)(s,c,e);const r=new Set;e?.forEach((e=>{if(n&&this.validateCaveat(e,s,c),!a?.includes(e.type))throw new(0,o.ForbiddenCaveatError)(e.type,s,c);if(r.has(e.type))throw new(0,o.DuplicateCaveatError)(e.type,s,c);r.add(e.type)}))}r&&i&&i(t,s,c)}setValidatedPermissions(e,t){this.update((s=>{s.subjects[e]||(s.subjects[e]={origin:e,permissions:{}}),s.subjects[e].permissions=g.castDraft.call(void 0,t)}))}constructCaveats(e,t,s){const r=s?.map((s=>{this.validateCaveat(s,e,t);const{type:r,value:n}=s;return{type:r,value:n}}));return r&&d.isNonEmptyArray.call(void 0,r)?r:void 0}validateCaveat(e,t,s){if(!d.isPlainObject.call(void 0,e))throw new(0,o.InvalidCaveatError)(e,t,s);if(2!==Object.keys(e).length)throw new(0,o.InvalidCaveatFieldsError)(e,t,s);if("string"!=typeof e.type)throw new(0,o.InvalidCaveatTypeError)(e,t,s);const r=this.getCaveatSpecification(e.type);if(!r)throw new(0,o.UnrecognizedCaveatTypeError)(e.type,t,s);if(!m.hasProperty.call(void 0,e,"value")||void 0===e.value)throw new(0,o.CaveatMissingValueError)(e,t,s);if(!d.isValidJson.call(void 0,e.value))throw new(0,o.CaveatInvalidJsonError)(e,t,s);r.validator?.(e,t,s)}async requestPermissions(e,t,s={}){const{origin:r}=e,{id:n=v.nanoid.call(void 0),preserveExistingPermissions:a=!0}=s;this.validateRequestedPermissions(r,t);const i={...s.metadata,id:n,origin:r},o={metadata:i,permissions:t},c=await this.requestUserApproval(o);return await l.__privateMethod.call(void 0,this,C,A).call(this,{subject:e,metadata:i,preserveExistingPermissions:a,approvedRequest:c})}async requestPermissionsIncremental(e,t,s={}){const{origin:r}=e,{id:n=v.nanoid.call(void 0)}=s;this.validateRequestedPermissions(r,t);const a=this.getPermissions(r)??{},[i,c]=l.__privateMethod.call(void 0,this,b,T).call(this,a,t);if(void 0===i||void 0===c)return[];try{this.validateRequestedPermissions(r,i)}catch(e){if(e instanceof Error)throw new(0,o.InvalidMergedPermissionsError)(r,e,c);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}const u={...s.metadata,id:n,origin:r},d={metadata:u,permissions:i,diff:{currentPermissions:a,permissionDiffMap:c}},h=await this.requestUserApproval(d);return await l.__privateMethod.call(void 0,this,C,A).call(this,{subject:e,metadata:u,preserveExistingPermissions:!1,approvedRequest:h})}validateRequestedPermissions(e,t){if(!d.isPlainObject.call(void 0,t))throw o.invalidParams.call(void 0,{message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const s of Object.keys(t)){const r=t[s];if(!this.targetExists(s))throw o.methodNotFound.call(void 0,s,{origin:e,requestedPermissions:t});if(!d.isPlainObject.call(void 0,r)||void 0!==r.parentCapability&&s!==r.parentCapability)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(s),r,e,{invokePermissionValidator:!1,performCaveatValidation:!0})}}async requestUserApproval(e){const{origin:t,id:s}=e.metadata,r=await this.messagingSystem.call("ApprovalController:addRequest",{id:s,origin:t,requestData:e,type:"wallet_requestPermissions"},!0);return this.validateApprovedPermissions(r,{id:s,origin:t}),r}getSideEffects(e){return Object.keys(e).reduce(((e,t)=>{if(this.targetExists(t)){const s=this.getPermissionSpecification(t);s.sideEffect&&(e.permittedHandlers[t]=s.sideEffect.onPermitted,s.sideEffect.onFailure&&(e.failureHandlers[t]=s.sideEffect.onFailure))}return e}),{permittedHandlers:{},failureHandlers:{}})}async executeSideEffects(e,t){const{permittedHandlers:s,failureHandlers:r}=e,n={requestData:t,messagingSystem:this.messagingSystem},a=await Promise.allSettled(Object.values(s).map((e=>e(n)))),i=a.filter((e=>"rejected"===e.status));if(i.length>0){const e=Object.values(r);if(e.length>0)try{await Promise.all(e.map((e=>e(n))))}catch(e){throw o.internalError.call(void 0,"Unexpected error in side-effects",{error:e})}const t=i.map((e=>e.reason));throw t.forEach((e=>{console.error(e)})),t.length>1?o.internalError.call(void 0,"Multiple errors occurred during side-effects execution",{errors:t}):t[0]}return a.map((({value:e})=>e))}validateApprovedPermissions(e,t){const{id:s,origin:r}=t;if(!d.isPlainObject.call(void 0,e)||!d.isPlainObject.call(void 0,e.metadata))throw o.internalError.call(void 0,`Approved permissions request for subject "${r}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:n,origin:a},permissions:i}=e;if(n!==s)throw o.internalError.call(void 0,`Approved permissions request for subject "${r}" mutated its id.`,{originalId:s,mutatedId:n});if(a!==r)throw o.internalError.call(void 0,`Approved permissions request for subject "${r}" mutated its origin.`,{originalOrigin:r,mutatedOrigin:a});try{this.validateRequestedPermissions(r,i)}catch(e){if(e instanceof Error)throw o.internalError.call(void 0,`Invalid approved permissions request: ${e.message}`,e instanceof h.JsonRpcError?e.data:void 0);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}}async acceptPermissionsRequest(e){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new(0,o.PermissionsRequestNotFoundError)(t);if(0!==Object.keys(e.permissions).length)try{await this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,o.invalidParams.call(void 0,{message:"Must request at least one permission."}))}async rejectPermissionsRequest(e){if(!this.hasApprovalRequest({id:e}))throw new(0,o.PermissionsRequestNotFoundError)(e);this._rejectPermissionsRequest(e,o.userRejectedRequest.call(void 0))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}async getEndowments(e,t,s){if(!this.hasPermission(e,t))throw o.unauthorized.call(void 0,{data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification("Endowment",t,e).endowmentGetter({origin:e,requestData:s})}async executeRestrictedMethod(e,t,s){const r=this.getRestrictedMethod(t,e),n=await this._executeRestrictedMethod(r,{origin:e},t,s);if(void 0===n)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return n}_executeRestrictedMethod(e,t,s,r=[]){const{origin:a}=t,i=this.getPermission(a,s);if(!i)throw o.unauthorized.call(void 0,{data:{origin:a,method:s}});return n.decorateWithCaveats.call(void 0,e,i,this._caveatSpecifications)({method:s,params:r,context:{origin:a}})}};k=new WeakSet,y=function(e){const{merger:t}=this.getCaveatSpecification(e);if(void 0===t)throw new(0,o.CaveatMergerDoesNotExistError)(e);return t},S=new WeakSet,w=function({approvedPermissions:e,subject:t,mergePermissions:s,preserveExistingPermissions:r,requestData:n}){const{origin:i}=t;if(!i||"string"!=typeof i)throw new(0,o.InvalidSubjectIdentifierError)(i);const c=r?{...this.getPermissions(i)}:{};for(const[t,r]of Object.entries(e)){if(!this.targetExists(t))throw o.methodNotFound.call(void 0,t);if(void 0!==r.parentCapability&&t!==r.parentCapability)throw new(0,o.InvalidApprovedPermissionError)(i,t,r);const e=t,u=this.getPermissionSpecification(e),d={caveats:this.constructCaveats(i,e,r.caveats),invoker:i,target:e};let h,m=!0;u.factory?h=u.factory(d,n):(h=a.constructPermission.call(void 0,d),m=!1),s&&(h=l.__privateMethod.call(void 0,this,E,P).call(this,c[e],h)[0]),this.validatePermission(u,h,i,{invokePermissionValidator:!0,performCaveatValidation:m}),c[e]=h}return this.setValidatedPermissions(i,c),c},b=new WeakSet,T=function(e,t){const s={},r=g.produce.call(void 0,e,(e=>{const r=e;Object.entries(t).forEach((([e,t])=>{const n=r[e],[a,i]=l.__privateMethod.call(void 0,this,E,P).call(this,n??{},t);(void 0===n||Object.keys(i).length>0)&&(r[e]=a,s[e]=i)}))}));return 0===Object.keys(s).length?[]:[r,s]},E=new WeakSet,P=function(e,t){const{caveatPairs:s,leftUniqueCaveats:r,rightUniqueCaveats:n}=c.collectUniqueAndPairedCaveats.call(void 0,e,t),[a,i]=s.reduce((([e,t],[s,r])=>{const[n,a]=l.__privateMethod.call(void 0,this,j,I).call(this,s,r);return void 0!==n&&void 0!==a?(e.push(n),t[n.type]=a):e.push(s),[e,t]}),[[],{}]),o=[...a,...r,...n.map((e=>{const[t,s]=l.__privateMethod.call(void 0,this,j,I).call(this,void 0,e);return i[t.type]=s,t}))];return[{...e,...t,...o.length>0?{caveats:o}:{}},i]},j=new WeakSet,I=function(e,t){if(void 0!==e&&e.type!==t.type)throw new(0,o.CaveatMergeTypeMismatchError)(e.type,t.type);const s=l.__privateMethod.call(void 0,this,k,y).call(this,t.type);if(void 0===e)return[{...t},t.value];const[r,n]=s(e.value,t.value);return void 0!==r&&void 0!==n?[{type:t.type,value:r},n]:[]},C=new WeakSet,A=async function({subject:e,metadata:t,preserveExistingPermissions:s,approvedRequest:r}){const{permissions:n,...a}=r,i={...t},o=this.getSideEffects(n);if(Object.values(o.permittedHandlers).length>0){const e=await this.executeSideEffects(o,r);i.data=Object.keys(o.permittedHandlers).reduce(((t,s,r)=>({[s]:e[r],...t})),{})}return[this.grantPermissions({subject:e,approvedPermissions:n,preserveExistingPermissions:s,requestData:a}),i]},s.CaveatMutatorOperation=x,s.PermissionController=R}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-B6PDRQ7N.js"}],[2232,{"./chunk-FYADAA2G.js":2233,"@metamask/json-rpc-engine":1484},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-FYADAA2G.js"),n=e("@metamask/json-rpc-engine");s.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:s}){return function(a){const{origin:i}=a;if("string"!=typeof i||!i)throw new Error('The subject "origin" must be a non-empty string.');return n.createAsyncMiddleware.call(void 0,(async(n,o,c)=>{const{method:l,params:u}=n;if(s(l))return c();const d=t(l,i),h=await e(d,a,l,u);void 0!==h?o.result=h:o.error=r.internalError.call(void 0,`Request for method "${n.method}" returned undefined result.`,{request:n})}))}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-F5TBMVWC.js"}],[2233,{"@metamask/rpc-errors":1884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/rpc-errors");var n=class extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}},a=class extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}},i=class extends Error{constructor(e){super(`Caveat value merger does not exist for type: "${e}"`)}},o=class extends Error{constructor(e,t,s){super(`Invalid merged permissions for subject "${e}":\n${t.message}`),this.cause=t,this.data={diff:s}}},c=class extends Error{constructor(e,t,s){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:s}}},l=class extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}},u=class extends Error{constructor(e,t){super(`${t?`Subject "${t}"`:"Unknown subject"} has no permission for "${e}".`),t&&(this.data={origin:t})}},d=class extends Error{constructor(e,t,s){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},void 0!==t&&(this.data.origin=t),void 0!==s&&(this.data.target=s)}},h=class extends Error{constructor(e,t,s){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:s}}},m=class extends Error{constructor(e,t,s){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${s}".`)}},p=class extends Error{constructor(e,t,s){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${s}".`)}},f=class extends r.JsonRpcError{constructor(e,t,s){super(r.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:s}}},g=class extends Error{constructor(e,t,s){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:s}}},v=class extends Error{constructor(e,t,s){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:s}}},_=class extends Error{constructor(e,t,s){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:s}}},k=class extends Error{constructor(e,t,s){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:s}}},y=class extends Error{constructor(e,t,s){super(`Permissions for target "${s}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:s}}},S=class extends Error{constructor(e,t,s){super(`Permissions for target "${s}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:s}}},w=class extends Error{constructor(e,t){super(`Cannot merge caveats of different types: "${e}" and "${t}".`),this.data={leftCaveatType:e,rightCaveatType:t}}},b=class extends Error{constructor(e,t){super(`Caveat specification uses a mismatched type. Expected caveats for ${t}`),this.data={caveatSpec:e,permissionType:t}}},T=class extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}};s.unauthorized=function(e){return r.providerErrors.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},s.methodNotFound=function(e,t){const s={message:`The method "${e}" does not exist / is not available.`};return void 0!==t&&(s.data=t),r.rpcErrors.methodNotFound(s)},s.invalidParams=function(e){return r.rpcErrors.invalidParams({data:e.data,message:e.message})},s.userRejectedRequest=function(e){return r.providerErrors.userRejectedRequest({data:e})},s.internalError=function(e,t){return r.rpcErrors.internal({message:e,data:t})},s.InvalidSubjectIdentifierError=n,s.UnrecognizedSubjectError=a,s.CaveatMergerDoesNotExistError=i,s.InvalidMergedPermissionsError=o,s.InvalidApprovedPermissionError=c,s.PermissionDoesNotExistError=l,s.EndowmentPermissionDoesNotExistError=u,s.UnrecognizedCaveatTypeError=d,s.InvalidCaveatsPropertyError=h,s.CaveatDoesNotExistError=m,s.CaveatAlreadyExistsError=p,s.InvalidCaveatError=f,s.InvalidCaveatTypeError=g,s.CaveatMissingValueError=v,s.CaveatInvalidJsonError=_,s.InvalidCaveatFieldsError=k,s.ForbiddenCaveatError=y,s.DuplicateCaveatError=S,s.CaveatMergeTypeMismatchError=w,s.CaveatSpecificationMismatchError=b,s.PermissionsRequestNotFoundError=T}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-FYADAA2G.js"}],[2234,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r={methodNames:["wallet_getPermissions"],implementation:async function(e,t,s,r,{getPermissionsForOrigin:n}){return t.result=Object.values(n()||{}),r()},hookNames:{getPermissionsForOrigin:!0}};s.getPermissionsHandler=r}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-VBIZGGQL.js"}],[2235,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=(e=>(e.RequestPermissions="wallet_requestPermissions",e.GetPermissions="wallet_getPermissions",e.RevokePermissions="wallet_revokePermissions",e))(r||{});s.MethodNames=r,s.collectUniqueAndPairedCaveats=function(e,t){const s=e?.caveats?.slice()??[],r=t.caveats?.slice()??[],n=[],a=[];return s.forEach((e=>{const t=r.findIndex((t=>t.type===e.type));-1===t?n.push(e):(a.push([e,r[t]]),r.splice(t,1))})),{caveatPairs:a,leftUniqueCaveats:n,rightUniqueCaveats:[...r]}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-VQPP5PWS.js"}],[2236,{"@metamask/base-controller":2159},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("@metamask/base-controller"),n=(e=>(e.Extension="extension",e.Internal="internal",e.Unknown="unknown",e.Website="website",e.Snap="snap",e))(n||{}),a={subjectMetadata:{persist:!0,anonymous:!1}},i={subjectMetadata:{}},o=class e extends r.BaseController{constructor({messenger:t,subjectCacheLimit:s,state:r={}}){if(!Number.isInteger(s)||s<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${s}"`);const n=e=>t.call("PermissionController:hasPermissions",e);super({name:"SubjectMetadataController",metadata:a,messenger:t,state:{...e.getTrimmedState(r,n)}}),this.subjectHasPermissions=n,this.subjectCacheLimit=s,this.subjectsWithoutPermissionsEncounteredSinceStartup=new Set,this.messagingSystem.registerActionHandler(`${this.name}:getSubjectMetadata`,this.getSubjectMetadata.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:addSubjectMetadata`,this.addSubjectMetadata.bind(this))}clearState(){this.subjectsWithoutPermissionsEncounteredSinceStartup.clear(),this.update((e=>({...i})))}addSubjectMetadata(e){const{origin:t}=e,s={...e,extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null,subjectType:e.subjectType||null};let r=null;if(this.subjectsWithoutPermissionsEncounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEncounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEncounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(r=e)}this.subjectsWithoutPermissionsEncounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=s,"string"==typeof r&&delete e.subjectMetadata[r]}))}getSubjectMetadata(e){return this.state.subjectMetadata[e]}trimMetadataState(){this.update((t=>e.getTrimmedState(t,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:s={}}=e;return{subjectMetadata:Object.keys(s).reduce(((e,r)=>(t(r)&&(e[r]=s[r]),e)),{})}}};s.SubjectType=n,s.SubjectMetadataController=o}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-VSDHL2GQ.js"}],[2237,{"./chunk-FYADAA2G.js":2233,"@metamask/utils":2251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-FYADAA2G.js"),n=e("@metamask/utils"),a={methodNames:["wallet_revokePermissions"],implementation:async function(e,t,s,a,{revokePermissionsForOrigin:i}){const{params:o}=e,c=o?.[0];if(!c)return a(r.invalidParams.call(void 0,{data:{request:e}}));const l=Object.keys(c);if(!n.isNonEmptyArray.call(void 0,l))return a(r.invalidParams.call(void 0,{data:{request:e}}));return i(l),t.result=null,a()},hookNames:{revokePermissionsForOrigin:!0}};s.revokePermissionsHandler=a}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-X4ZAW4QR.js"}],[2238,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=Object.defineProperty;s.__export=(e,t)=>{for(var s in t)r(e,s,{get:t[s],enumerable:!0})},s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateMethod=(e,t,s)=>(((e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)})(e,t,"access private method"),s)}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-Z2XKIXLS.js"}],[2239,{nanoid:2263},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("nanoid");var n=(e=>(e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment",e))(n||{});s.constructPermission=function(e){const{caveats:t=null,invoker:s,target:n}=e;return{id:r.nanoid.call(void 0),parentCapability:n,invoker:s,caveats:t,date:(new Date).getTime()}},s.findCaveat=function(e,t){return e.caveats?.find((e=>e.type===t))},s.PermissionType=n,s.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/chunk-ZH4MLSXX.js"}],[224,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,n.isObject)(e.NetworkController)){var t,s;return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController)),e}return delete e.NetworkController.previousProviderStore,e}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils");const a=s.version=85}}},{package:"$root$",file:"app/scripts/migrations/085.ts"}],[2240,{"./chunk-3YOPLPVY.js":2228,"./chunk-6PXDVUYM.js":2229,"./chunk-7A3VYLCK.js":2230,"./chunk-B6PDRQ7N.js":2231,"./chunk-F5TBMVWC.js":2232,"./chunk-FYADAA2G.js":2233,"./chunk-VBIZGGQL.js":2234,"./chunk-VQPP5PWS.js":2235,"./chunk-VSDHL2GQ.js":2236,"./chunk-X4ZAW4QR.js":2237,"./chunk-Z2XKIXLS.js":2238,"./chunk-ZH4MLSXX.js":2239},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-6PXDVUYM.js");e("./chunk-VBIZGGQL.js"),e("./chunk-7A3VYLCK.js"),e("./chunk-X4ZAW4QR.js");var n=e("./chunk-B6PDRQ7N.js"),a=e("./chunk-3YOPLPVY.js"),i=e("./chunk-ZH4MLSXX.js"),o=e("./chunk-VSDHL2GQ.js");e("./chunk-F5TBMVWC.js");var c=e("./chunk-FYADAA2G.js"),l=e("./chunk-VQPP5PWS.js");e("./chunk-Z2XKIXLS.js"),s.CaveatAlreadyExistsError=c.CaveatAlreadyExistsError,s.CaveatDoesNotExistError=c.CaveatDoesNotExistError,s.CaveatInvalidJsonError=c.CaveatInvalidJsonError,s.CaveatMergeTypeMismatchError=c.CaveatMergeTypeMismatchError,s.CaveatMergerDoesNotExistError=c.CaveatMergerDoesNotExistError,s.CaveatMissingValueError=c.CaveatMissingValueError,s.CaveatMutatorOperation=n.CaveatMutatorOperation,s.CaveatSpecificationMismatchError=c.CaveatSpecificationMismatchError,s.DuplicateCaveatError=c.DuplicateCaveatError,s.EndowmentPermissionDoesNotExistError=c.EndowmentPermissionDoesNotExistError,s.ForbiddenCaveatError=c.ForbiddenCaveatError,s.InvalidApprovedPermissionError=c.InvalidApprovedPermissionError,s.InvalidCaveatError=c.InvalidCaveatError,s.InvalidCaveatFieldsError=c.InvalidCaveatFieldsError,s.InvalidCaveatTypeError=c.InvalidCaveatTypeError,s.InvalidCaveatsPropertyError=c.InvalidCaveatsPropertyError,s.InvalidMergedPermissionsError=c.InvalidMergedPermissionsError,s.InvalidSubjectIdentifierError=c.InvalidSubjectIdentifierError,s.MethodNames=l.MethodNames,s.PermissionController=n.PermissionController,s.PermissionDoesNotExistError=c.PermissionDoesNotExistError,s.PermissionType=i.PermissionType,s.PermissionsRequestNotFoundError=c.PermissionsRequestNotFoundError,s.SubjectMetadataController=o.SubjectMetadataController,s.SubjectType=o.SubjectType,s.UnrecognizedCaveatTypeError=c.UnrecognizedCaveatTypeError,s.UnrecognizedSubjectError=c.UnrecognizedSubjectError,s.constructPermission=i.constructPermission,s.decorateWithCaveats=a.decorateWithCaveats,s.findCaveat=i.findCaveat,s.hasSpecificationType=i.hasSpecificationType,s.internalError=c.internalError,s.invalidParams=c.invalidParams,s.isRestrictedMethodCaveatSpecification=a.isRestrictedMethodCaveatSpecification,s.methodNotFound=c.methodNotFound,s.permissionRpcMethods=r.rpc_methods_exports,s.unauthorized=c.unauthorized,s.userRejectedRequest=c.userRejectedRequest}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/permission-controller/dist/index.js"}],[2241,{"./errors.cjs":2249,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const r=e("@metamask/superstruct"),n=e("./errors.cjs");function a(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=i,s.assert=function(e,t="Assertion failed.",s=i){if(!e){if(t instanceof Error)throw t;throw a(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=i){try{(0,r.assert)(e,t)}catch(e){throw a(o,`${s}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/assert.cjs"}],[2242,{"./assert.cjs":2241,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,a=t.characterSet??"base64";let i,o;return"base64"===a?i=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===a),i=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),(0,r.pattern)(e,o)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/base64.cjs"}],[2243,{"./assert.cjs":2241,"./hex.cjs":2250,"@scure/base":2797,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const r=e("@scure/base"),n=e("./assert.cjs"),a=e("./hex.cjs"),i=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=t[e[r]];return(0,a.add0x)(s.join(""))}function m(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,a.assertIsHexString)(e);const t=(0,a.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,r=new Uint8Array(s.length/2);for(let e=0;e<r.length;e++){const t=s.charCodeAt(2*e),n=s.charCodeAt(2*e+1),a=t-(t<o?i:c),l=n-(n<o?i:c);r[e]=16*a+l}return r}function f(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function v(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):v(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=u,s.assertIsBytes=d,s.bytesToHex=h,s.bytesToBigInt=m,s.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){d(e);const t=m(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return d(e),r.base64.encode(e)},s.hexToBytes=p,s.bigIntToBytes=f,s.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return r.reverse()},s.numberToBytes=g,s.stringToBytes=v,s.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),r.base64.decode(e)},s.valueToBytes=_,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let r=0;r<e.length;r++){const n=_(e[r]);t[r]=n,s+=n.length}const r=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)r.set(t[e],s),s+=t[e].length;return r},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/bytes.cjs"}],[2244,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const r=e("@metamask/superstruct");function n(e){return(0,r.is)(e,s.CaipNamespaceStruct)}function a(e){return(0,r.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CaipChainIdStruct=(0,r.pattern)((0,r.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,r.pattern)((0,r.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,r.pattern)((0,r.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,r.pattern)((0,r.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,r.pattern)((0,r.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,r.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=n,s.isCaipReference=a,s.isCaipAccountId=function(e){return(0,r.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,r.is)(e,s.CaipAccountAddressStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2245,{"./base64.cjs":2242,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const r=e("@metamask/superstruct"),n=e("./base64.cjs");s.ChecksumStruct=(0,r.size)((0,n.base64)((0,r.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/checksum.cjs"}],[2246,{"./assert.cjs":2241,"./bytes.cjs":2243,"./hex.cjs":2250,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./bytes.cjs"),i=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),i.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),l=(0,r.coerce)((0,r.bigint)(),o,BigInt),u=((0,r.union)([i.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([i.StrictHexStruct]),a.hexToBytes)),d=(0,r.coerce)(i.StrictHexStruct,(0,r.instance)(Uint8Array),a.bytesToHex);s.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[2247,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r,n,a=this&&this.__classPrivateFieldGet||function(e,t,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,s,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,s):n?n.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),i(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}get(e){return a(this,r,"f").get(e)}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return a(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return a(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),i(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return a(this,n,"f").entries()}forEach(e,t){return a(this,n,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}has(e){return a(this,n,"f").has(e)}keys(){return a(this,n,"f").keys()}values(){return a(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[2248,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2249,{"./misc.cjs":2255,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const r=e("pony-cause"),n=e("./misc.cjs");function a(e){return"object"==typeof e&&null!==e&&"code"in e}function i(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=a,s.isErrorWithMessage=i,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return i(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,n.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),a(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[225,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"provider")){const t=e.NetworkController;return t.providerConfig=t.provider,delete t.provider,{...e,NetworkController:t}}var t,s;if((0,r.isObject)(e.NetworkController)){if(!(0,r.hasProperty)(e.NetworkController,"provider")){var n,a;if(e.NetworkController.providerConfig===undefined)null===(n=global.sentry)||void 0===n||null===(a=n.captureException)||void 0===a||a.call(n,new Error("typeof state.NetworkController.provider is "+typeof e.NetworkController.provider))}}else null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},s.version=void 0;var r=e("@metamask/utils"),n=e("lodash");const a=s.version=86}}},{package:"$root$",file:"app/scripts/migrations/086.ts"}],[2250,{"./assert.cjs":2241,"./bytes.cjs":2243,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const r=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),a=e("./assert.cjs"),i=e("./bytes.cjs");function o(e){return(0,r.is)(e,s.HexStruct)}function c(e){return(0,r.is)(e,s.StrictHexStruct)}function l(e){(0,a.assert)((0,r.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,i.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,a.assert)((0,r.is)(s,(0,r.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,r.is)(e,s.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,r.pattern)((0,r.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,a.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,a.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,r.is)(e,s.HexAddressStruct)||u(e)},s.getChecksumAddress=l,s.isValidChecksumAddress=u,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=d}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[2251,{"./assert.cjs":2241,"./base64.cjs":2242,"./bytes.cjs":2243,"./caip-types.cjs":2244,"./checksum.cjs":2245,"./coercers.cjs":2246,"./collections.cjs":2247,"./encryption-types.cjs":2248,"./errors.cjs":2249,"./hex.cjs":2250,"./json.cjs":2252,"./keyring.cjs":2253,"./logging.cjs":2254,"./misc.cjs":2255,"./number.cjs":2256,"./opaque.cjs":2257,"./promise.cjs":2258,"./time.cjs":2259,"./transaction-types.cjs":2260,"./versions.cjs":2261},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),n(e("./assert.cjs"),s),n(e("./base64.cjs"),s),n(e("./bytes.cjs"),s),n(e("./caip-types.cjs"),s),n(e("./checksum.cjs"),s),n(e("./coercers.cjs"),s),n(e("./collections.cjs"),s),n(e("./encryption-types.cjs"),s),n(e("./errors.cjs"),s),n(e("./hex.cjs"),s),n(e("./json.cjs"),s),n(e("./keyring.cjs"),s),n(e("./logging.cjs"),s),n(e("./misc.cjs"),s),n(e("./number.cjs"),s),n(e("./opaque.cjs"),s),n(e("./promise.cjs"),s),n(e("./time.cjs"),s),n(e("./transaction-types.cjs"),s),n(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/index.cjs"}],[2252,{"./assert.cjs":2241,"./misc.cjs":2255,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./misc.cjs");function i({path:e,branch:t}){const s=e[e.length-1];return(0,a.hasProperty)(t[t.length-2],s)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!i(s)||e.validator(t,s),refiner:(t,s)=>!i(s)||e.refiner(t,s)})}s.object=e=>(0,r.object)(e),s.exactOptional=o;function c(e){return(0,r.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,r.union)([(0,r.literal)(null),(0,r.boolean)(),(0,r.define)("finite number",(e=>(0,r.is)(e,(0,r.number)())&&Number.isFinite(e))),(0,r.string)(),(0,r.array)((0,r.lazy)((()=>s.UnsafeJsonStruct))),(0,r.record)((0,r.string)(),(0,r.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,r.coerce)(s.UnsafeJsonStruct,(0,r.any)(),(e=>((0,n.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,n.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,r.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(s.JsonStruct),stack:o((0,r.string)())}),s.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),s.JsonStruct),(0,r.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,r.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,r.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,r.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,r.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,r.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,r.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,r.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,r.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/json.cjs"}],[2253,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[2254,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const n=(0,r(e("debug")).default)("metamask");s.createProjectLogger=function(e){return n.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[2255,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=r,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[2256,{"./assert.cjs":2241,"./hex.cjs":2250},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const r=e("./assert.cjs"),n=e("./hex.cjs");s.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/number.cjs"}],[2257,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[2258,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const r=new Promise(((e,r)=>{t=e,s=r}));return e&&r.catch((e=>{})),{promise:r,resolve:t,reject:s}}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[2259,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return r(e,"count"),e*t},s.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/time.cjs"}],[226,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if(!(0,r.isObject)(e.TokensController)){var t,s;return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.TokensController is "+typeof e.TokensController)),e}return delete e.TokensController.suggestedAssets,e}(t.data),t},s.version=void 0;var r=e("@metamask/utils"),n=e("lodash");const a=s.version=87}}},{package:"$root$",file:"app/scripts/migrations/087.ts"}],[2260,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2261,{"./assert.cjs":2241,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const r=e("@metamask/superstruct"),n=e("semver"),a=e("./assert.cjs");s.VersionStruct=(0,r.refine)((0,r.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,r.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,r.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,n.gt)(e,t)},s.gtRange=function(e,t){return(0,n.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-controllers>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-controllers/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[2262,{buffer:3520,"buffer-from":3525,inherits:4127,"readable-stream":4734,typedarray:4850},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(s){(function(){var r=e("readable-stream").Writable,n=e("inherits"),a=e("buffer-from");if("undefined"==typeof Uint8Array)var i=e("typedarray").Uint8Array;else i=Uint8Array;function o(e,t){if(!(this instanceof o))return new o(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var s=e.encoding,n=!1;s?"u8"!==(s=String(s).toLowerCase())&&"uint8"!==s||(s="uint8array"):n=!0,r.call(this,{objectMode:!0}),this.encoding=s,this.shouldInferEncoding=n,t&&this.on("finish",(function(){t(this.getBody())})),this.body=[]}t.exports=o,n(o,r),o.prototype._write=function(e,t,s){this.body.push(e),s()},o.prototype.inferEncoding=function(e){var t=e===undefined?this.body[0]:e;return s.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},o.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?function(e){for(var t=[],s=0;s<e.length;s++)t.push.apply(t,e[s]);return t}(this.body):"string"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"string"==typeof n||s.isBuffer(n)?t.push(n):c(n)?t.push(a(n)):t.push(a(String(n)))}t=s.isBuffer(e[0])?(t=s.concat(t)).toString("utf8"):t.join("");return t}(this.body):"buffer"===this.encoding?function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];s.isBuffer(n)?t.push(n):c(n)?t.push(a(n)):t.push(a(String(n)))}return s.concat(t)}(this.body):"uint8array"===this.encoding?function(e){for(var t=0,s=0;s<e.length;s++)"string"==typeof e[s]&&(e[s]=a(e[s])),t+=e[s].length;for(var r=new i(t),n=(s=0,0);s<e.length;s++)for(var o=e[s],c=0;c<o.length;c++)r[n++]=o[c];return r}(this.body):this.body):[]};Array.isArray;function c(e){return"string"==typeof e||(t=e,/Array\]$/.test(Object.prototype.toString.call(t)))||e&&"function"==typeof e.subarray;var t}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-controllers>concat-stream",file:"node_modules/@metamask/snaps-controllers/node_modules/concat-stream/index.js"}],[2263,{"./url-alphabet/index.cjs":2264},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){let{urlAlphabet:r}=e("./url-alphabet/index.cjs"),n=e=>crypto.getRandomValues(new Uint8Array(e)),a=(e,t,s)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,n=-~(1.6*r*t/e.length);return(a=t)=>{let i="";for(;;){let t=s(n),o=n;for(;o--;)if(i+=e[t[o]&r]||"",i.length===a)return i}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>a(e,t,n),customRandom:a,urlAlphabet:r,random:n}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/index.browser.cjs"}],[2264,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-controllers>nanoid",file:"node_modules/@metamask/snaps-controllers/node_modules/nanoid/url-alphabet/index.cjs"}],[227,{"@metamask/utils":2739,"ethereumjs-util":3776,lodash:4322,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,i.cloneDeep)(e);return t.meta.version=c,function(e){if((0,n.hasProperty)(e,"NftController")&&(0,n.isObject)(e.NftController)){const c=e.NftController;if((0,n.hasProperty)(c,"allNftContracts")&&(0,n.isObject)(c.allNftContracts)){const{allNftContracts:e}=c;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const s=e[t];if((0,n.isObject)(s)){for(const e of Object.keys(s))"undefined"!==e&&e!==undefined&&"null"!==e||delete s[e];e[t]=(0,i.mapKeys)(s,((e,t)=>l(t)))}}))}else if((0,n.hasProperty)(c,"allNftContracts")){var t,s;null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NftController.allNftContracts is "+typeof c.allNftContracts))}else o.default.warn("typeof state.NftController.allNftContracts is "+typeof c.allNftContracts);if((0,n.hasProperty)(c,"allNfts")&&(0,n.isObject)(c.allNfts)){const{allNfts:e}=c;Object.keys(e).every((t=>(0,n.isObject)(e[t])))&&Object.keys(e).forEach((t=>{const s=e[t];if((0,n.isObject)(s)){for(const e of Object.keys(s))"undefined"!==e&&e!==undefined&&"null"!==e||delete s[e];e[t]=(0,i.mapKeys)(s,((e,t)=>l(t)))}}))}else if((0,n.hasProperty)(c,"allNfts")){var r,a;null===(r=global.sentry)||void 0===r||null===(a=r.captureException)||void 0===a||a.call(r,new Error("typeof state.NftController.allNfts is "+typeof c.allNfts))}else o.default.warn("typeof state.NftController.allNfts is "+typeof c.allNfts);e.NftController=c}else if((0,n.hasProperty)(e,"NftController")){var c,u;null===(c=global.sentry)||void 0===c||null===(u=c.captureException)||void 0===u||u.call(c,new Error("typeof state.NftController is "+typeof e.NftController))}else o.default.warn("typeof state.NftController is undefined");if((0,n.hasProperty)(e,"TokenListController")&&(0,n.isObject)(e.TokenListController)){const t=e.TokenListController;if((0,n.hasProperty)(t,"tokensChainsCache")&&(0,n.isObject)(t.tokensChainsCache)){for(const e of Object.keys(t.tokensChainsCache))"undefined"!==e&&e!==undefined&&"null"!==e||delete t.tokensChainsCache[e];t.tokensChainsCache=(0,i.mapKeys)(t.tokensChainsCache,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"tokensChainsCache")){var d,h;null===(d=global.sentry)||void 0===d||null===(h=d.captureException)||void 0===h||h.call(d,new Error("typeof state.TokenListController.tokensChainsCache is "+typeof e.TokenListController.tokensChainsCache))}else o.default.warn("typeof state.TokenListController.tokensChainsCache is undefined")}else o.default.warn("typeof state.TokenListController is "+typeof e.TokenListController);if((0,n.hasProperty)(e,"TokensController")&&(0,n.isObject)(e.TokensController)){const t=e.TokensController;if((0,n.hasProperty)(t,"allTokens")&&(0,n.isObject)(t.allTokens)){const{allTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allTokens=(0,i.mapKeys)(e,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"allTokens")){var m,p;null===(m=global.sentry)||void 0===m||null===(p=m.captureException)||void 0===p||p.call(m,new Error("typeof state.TokensController.allTokens is "+typeof t.allTokens))}else o.default.warn("typeof state.TokensController.allTokens is "+typeof t.allTokens);if((0,n.hasProperty)(t,"allIgnoredTokens")&&(0,n.isObject)(t.allIgnoredTokens)){const{allIgnoredTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allIgnoredTokens=(0,i.mapKeys)(e,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"allIgnoredTokens")){var f,g;null===(f=global.sentry)||void 0===f||null===(g=f.captureException)||void 0===g||g.call(f,new Error("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens))}else o.default.warn("typeof state.TokensController.allIgnoredTokens is "+typeof t.allIgnoredTokens);if((0,n.hasProperty)(t,"allDetectedTokens")&&(0,n.isObject)(t.allDetectedTokens)){const{allDetectedTokens:e}=t;for(const t of Object.keys(e))"undefined"!==t&&t!==undefined&&"null"!==t||delete e[t];t.allDetectedTokens=(0,i.mapKeys)(e,((e,t)=>l(t)))}else if((0,n.hasProperty)(t,"allDetectedTokens")){var v,_;null===(v=global.sentry)||void 0===v||null===(_=v.captureException)||void 0===_||_.call(v,new Error("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens))}else o.default.warn("typeof state.TokensController.allDetectedTokens is "+typeof t.allDetectedTokens);e.TokensController=t}else{var k,y;null===(k=global.sentry)||void 0===k||null===(y=k.captureException)||void 0===y||y.call(k,new Error("typeof state.TokensController is "+typeof e.TokensController))}}(t.data),t},s.version=void 0;var r,n=e("@metamask/utils"),a=e("ethereumjs-util"),i=e("lodash"),o=(r=e("loglevel"))&&r.__esModule?r:{default:r};const c=s.version=88;function l(e){if("string"==typeof e&&(0,n.isStrictHexString)(e))return e;return`0x${a.BN.isBN(e)?e.toString(16):new a.BN(e.toString(),10).toString(16)}`}}}},{package:"$root$",file:"app/scripts/migrations/088.ts"}],[228,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"providerConfig")&&(0,r.isObject)(e.NetworkController.providerConfig)){const{networkConfigurations:t,providerConfig:s}=e.NetworkController;if(!(0,r.isObject)(t))return e;if(s.id)return e;let n;for(const a of Object.keys(t)){const i=t[a];if(!(0,r.isObject)(i))return e;if(i.rpcUrl===s.rpcUrl){n=i.id;break}}return n?(e.NetworkController.providerConfig={...s,id:n},{...e,NetworkController:e.NetworkController}):e}var t,s;if((0,r.isObject)(e.NetworkController)){if(!(0,r.isObject)(e.NetworkController.providerConfig)){var n,a;null===(n=global.sentry)||void 0===n||null===(a=n.captureException)||void 0===a||a.call(n,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},s.version=void 0;var r=e("@metamask/utils"),n=e("lodash");const a=s.version=89}}},{package:"$root$",file:"app/scripts/migrations/089.ts"}],[229,{"@metamask/utils":2739,lodash:4322,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,a.hasProperty)(e,"PhishingController"))return i.default.warn("typeof state.PhishingController is undefined"),e;if(!(0,a.isObject)(e.PhishingController)){var t,s;return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController)),e}if(!(0,a.hasProperty)(e.PhishingController,"listState"))return i.default.warn("typeof state.PhishingController.listState is "+typeof e.PhishingController),e;return delete e.PhishingController.listState,e}(t.data),t},s.version=void 0;var r,n=e("lodash"),a=e("@metamask/utils"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r};const o=s.version=90}}},{package:"$root$",file:"app/scripts/migrations/090.ts"}],[23,{"../constants/notification-schema":18,"../processors/process-feature-announcement":20,"@contentful/rich-text-html-renderer":374,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.FEATURE_ANNOUNCEMENT_URL=s.FEATURE_ANNOUNCEMENT_API=void 0,s.getFeatureAnnouncementNotifications=async function(){return(await async function(){const e=await async function(e,t=1,s=1e3){let r=null;for(let n=0;n<t;n++)try{const t=await fetch(e);if(!t.ok)throw new Error(`Fetch failed with status: ${t.status}`);return await t.json()}catch(e){e instanceof Error&&(r=e),n<t-1&&await new Promise((e=>setTimeout(e,s)))}return a.default.error(`Error fetching from Contentful after ${t} retries: ${r}`),null}(l);if(!e)return[];const t=t=>{var s,r;const n=(null==e||null===(s=e.includes)||void 0===s||null===(s=s.Entry)||void 0===s?void 0:s.find((e=>{var s;return(null==e||null===(s=e.sys)||void 0===s?void 0:s.id)===t})))||(null==e||null===(r=e.includes)||void 0===r||null===(r=r.Asset)||void 0===r?void 0:r.find((e=>{var s;return(null==e||null===(s=e.sys)||void 0===s?void 0:s.id)===t})));return n?null==n?void 0:n.fields:null},s=((null==e?void 0:e.items)??[]).map((e=>{var s;const{fields:r}=e,a=r.image?t(r.image.sys.id):undefined,i=r.extensionLink?t(r.extensionLink.sys.id):undefined;return{type:o.TRIGGER_TYPES.FEATURES_ANNOUNCEMENT,createdAt:new Date(e.sys.createdAt).toString(),data:{id:r.id,category:r.category,title:r.title,longDescription:(0,n.documentToHtmlString)(r.longDescription),shortDescription:r.shortDescription,image:{title:null==a?void 0:a.title,description:null==a?void 0:a.description,url:(null==a||null===(s=a.file)||void 0===s?void 0:s.url)??""},extensionLink:i&&{extensionLinkText:null==i?void 0:i.extensionLinkText,extensionLinkRoute:null==i?void 0:i.extensionLinkRoute}}}}));return s}()).map((e=>(0,i.processFeatureAnnouncement)(e)));return[]};var r,n=e("@contentful/rich-text-html-renderer"),a=(r=e("loglevel"))&&r.__esModule?r:{default:r},i=e("../processors/process-feature-announcement"),o=e("../constants/notification-schema");const c=s.FEATURE_ANNOUNCEMENT_API="https://cdn.contentful.com/spaces/jdkgyfmyd9sw/environments/master/entries",l=s.FEATURE_ANNOUNCEMENT_URL=`${c}?access_token=mAYNB_k65snv4AXW4o8ksZN8BwWDQF9702HKV7yBDZI&content_type=productAnnouncement&include=10&fields.clients=extension`}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/services/feature-announcements.ts"}],[230,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"networkConfigurations")&&(0,r.isObject)(e.NetworkController.networkConfigurations)){const{networkConfigurations:t}=e.NetworkController;for(const[e,s]of Object.entries(t))(0,r.isObject)(s)&&(s.chainId||delete t[e]);return e.NetworkController={...e.NetworkController,networkConfigurations:t},{...e,NetworkController:e.NetworkController}}var t,s;if((0,r.isObject)(e.NetworkController)){if(!(0,r.isObject)(e.NetworkController.networkConfigurations)){var n,a;null===(n=global.sentry)||void 0===n||null===(a=n.captureException)||void 0===a||a.call(n,new Error("typeof state.NetworkController.networkConfigurations is "+typeof e.NetworkController.networkConfigurations))}}else null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},s.version=void 0;var r=e("@metamask/utils"),n=e("lodash");const a=s.version=91}}},{package:"$root$",file:"app/scripts/migrations/091.ts"}],[231,{"@metamask/utils":2739,lodash:4322,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if(!(0,a.hasProperty)(e,"TokenListController"))return i.default.warn("Skipping migration, TokenListController state is missing"),e;var t,s;if(!(0,a.isObject)(e.TokenListController))return null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.TokenListController is "+typeof e.TokenListController)),e;if(!(0,a.hasProperty)(e.TokenListController,"tokensChainsCache"))return i.default.warn("Skipping migration, TokenListController.tokensChainsCache state is missing"),e;e.TokenListController.tokensChainsCache===undefined&&delete e.TokenListController.tokensChainsCache;return e}(t.data),t},s.version=void 0;var r,n=e("lodash"),a=e("@metamask/utils"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r};const o=s.version=92.1}}},{package:"$root$",file:"app/scripts/migrations/092.1.ts"}],[232,{"@metamask/utils":2739,"@sentry/browser":2853,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=i,t.data=function(e){return function(e){const t=["networkId","networkStatus","providerConfig","networkDetails","networkConfigurations"];if(!(0,r.hasProperty)(e,"NetworkController")||!(0,a.isObject)(e.NetworkController))return(0,n.captureException)(`Migration ${i}: Invalid NetworkController state: ${typeof e.NetworkController}`),e;const s=e.NetworkController,o=(0,a.pick)(s,t);return{...e,NetworkController:o}}(e)}(t.data),t},s.version=void 0;var r=e("@metamask/utils"),n=e("@sentry/browser"),a=e("lodash");const i=s.version=92.2}}},{package:"$root$",file:"app/scripts/migrations/092.2.ts"}],[233,{"@metamask/utils":2739,lodash:4322,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,a.cloneDeep)(e);return t.meta.version=o,function(e){!function(e){if((0,n.isNullOrUndefined)(e.PreferencesController))return void i.default.warn(`Migration #${o}: preferences controller null or undefined, skipping migration`);if((0,n.hasProperty)(e,"AppStateController")&&(0,n.isObject)(e.AppStateController)&&(0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)){var t;const s=null===(t=e.PreferencesController)||void 0===t?void 0:t.advancedGasFee,r=(0,n.isObject)(s)&&c(s);e.AppStateController.hadAdvancedGasFeesSetPriorToMigration92_3=r,(null===e.PreferencesController.advancedGasFee||(0,n.isObject)(e.PreferencesController.advancedGasFee)&&c(e.PreferencesController.advancedGasFee))&&(e.PreferencesController.advancedGasFee={})}else if(!1===(0,n.isObject)(e.AppStateController)){var s,r;null===(s=global.sentry)||void 0===s||null===(r=s.captureException)||void 0===r||r.call(s,new Error("typeof state.AppStateController is "+typeof e.AppStateController))}else if(!1===(0,n.isObject)(e.PreferencesController)){var a,l;null===(a=global.sentry)||void 0===a||null===(l=a.captureException)||void 0===l||l.call(a,new Error("typeof state.PreferencesController is "+typeof e.PreferencesController))}}(e)}(t.data),t},s.version=void 0;var r,n=e("@metamask/utils"),a=e("lodash"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r};const o=s.version=92.3;function c(e){const t=Object.keys(e);return!(!t.includes("maxBaseFee")&&!t.includes("priorityFee"))}}}},{package:"$root$",file:"app/scripts/migrations/092.3.ts"}],[234,{"@metamask/utils":2739,lodash:4322,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,a.hasProperty)(e,"PhishingController")&&(0,a.isObject)(e.PhishingController))delete e.PhishingController.stalelistLastFetched,delete e.PhishingController.hotlistLastFetched;else if((0,a.hasProperty)(e,"PhishingController")){var t,s;null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.PhishingController is "+typeof e.PhishingController))}else i.default.warn("typeof state.PhishingController is undefined");return e}(t.data),t},s.version=void 0;var r,n=e("lodash"),a=e("@metamask/utils"),i=(r=e("loglevel"))&&r.__esModule?r:{default:r};const o=s.version=92}}},{package:"$root$",file:"app/scripts/migrations/092.ts"}],[235,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)){const{providerConfig:t}=e.NetworkController;return t.ticker?e:(e.NetworkController.providerConfig={ticker:"ETH",...t},{...e,NetworkController:e.NetworkController})}var t,s;if((0,n.isObject)(e.NetworkController)){if((0,n.isObject)(e.NetworkController)&&!(0,n.isObject)(e.NetworkController.providerConfig)){var r,a;null===(r=global.sentry)||void 0===r||null===(a=r.captureException)||void 0===a||a.call(r,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}}else null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils");const a=s.version=93}}},{package:"$root$",file:"app/scripts/migrations/093.ts"}],[236,{"@metamask/controller-utils":1245,"@metamask/network-controller":1706,"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=o,t.data=function(e){if((0,n.hasProperty)(e,"NetworkController")&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.NetworkController,"providerConfig")&&(0,n.isObject)(e.NetworkController.providerConfig)&&((0,n.hasProperty)(e.NetworkController.providerConfig,"id")||(0,n.hasProperty)(e.NetworkController.providerConfig,"type")&&e.NetworkController.providerConfig.type!==i.NetworkType.rpc)){const t=e.NetworkController.providerConfig.id||e.NetworkController.providerConfig.type;if(!t||"string"!=typeof t)return e;const s={[t]:{EIPS:{},status:a.NetworkStatus.Unknown}};if((0,n.hasProperty)(e.NetworkController,"networkDetails")&&(0,n.isObject)(e.NetworkController.networkDetails)){const{networkDetails:r}=e.NetworkController;r.EIPS&&(0,n.isObject)(r.EIPS)&&(s[t].EIPS={...r.EIPS}),delete e.NetworkController.networkDetails}return(0,n.hasProperty)(e.NetworkController,"networkStatus")&&"string"==typeof e.NetworkController.networkStatus&&(s[t].status=e.NetworkController.networkStatus,delete e.NetworkController.networkStatus),{...e,NetworkController:{...e.NetworkController,networksMetadata:s,selectedNetworkClientId:t}}}var t,s;if((0,n.isObject)(e.NetworkController)){if((0,n.isObject)(e.NetworkController)&&!(0,n.isObject)(e.NetworkController.providerConfig)){var r,o;null===(r=global.sentry)||void 0===r||null===(o=r.captureException)||void 0===o||o.call(r,new Error("typeof state.NetworkController.providerConfig is "+typeof e.NetworkController.providerConfig))}else if((0,n.isObject)(e.NetworkController)&&(0,n.isObject)(e.NetworkController.providerConfig)){var c,l;null===(c=global.sentry)||void 0===c||null===(l=c.captureException)||void 0===l||l.call(c,new Error(`typeof state.NetworkController.providerConfig.id is ${typeof e.NetworkController.providerConfig.id} and state.NetworkController.providerConfig.type is ${e.NetworkController.providerConfig.type}`))}}else null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController));return e}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils"),a=e("@metamask/network-controller"),i=e("@metamask/controller-utils");const o=s.version=94}}},{package:"$root$",file:"app/scripts/migrations/094.ts"}],[237,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=n,function(e){(function(e){var t,s;const r=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(r).length)return;const n=(null===(s=e.TransactionController)||void 0===s?void 0:s.transactions)||{},a=Object.values(r).reduce(((e,t)=>(e[t.id]=t,e)),n);e.TransactionController={...e.TransactionController||{},transactions:a}})(e),function(e){var t;const s=(null===(t=e.IncomingTransactionsController)||void 0===t?void 0:t.incomingTransactions)||{};if(0===Object.keys(s).length)return;const r={};for(const e of Object.values(s)){if(!e.blockNumber||!e.chainId||!e.txParams.to)continue;const t=parseInt(e.blockNumber,10),s=`${e.chainId}#${e.txParams.to.toLowerCase()}`,n=r[s]||-1;r[s]=Math.max(n,t)}e.TransactionController={...e.TransactionController,lastFetchedBlockNumbers:r}}(e),function(e){delete e.IncomingTransactionsController}(e)}(t.data),t},s.version=void 0;var r=e("lodash");const n=s.version=95}}},{package:"$root$",file:"app/scripts/migrations/095.ts"}],[238,{"../../../shared/constants/network":4977,"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=i,function(e){if(!((0,n.hasProperty)(e,"PreferencesController")&&(0,n.isObject)(e.PreferencesController)&&(0,n.isObject)(e.NetworkController)&&(0,n.hasProperty)(e.PreferencesController,"featureFlags")&&(0,n.hasProperty)(e.NetworkController,"networkConfigurations")))return e;const{PreferencesController:t,NetworkController:s}=e,{featureFlags:i}=t,{showIncomingTransactions:o}=i,{networkConfigurations:c}=s,l=Object.values(c).map((e=>e.chainId)),u=[a.CHAIN_IDS.MAINNET,a.CHAIN_IDS.LINEA_MAINNET],d=[a.CHAIN_IDS.GOERLI,a.CHAIN_IDS.SEPOLIA,a.CHAIN_IDS.LINEA_GOERLI],h=[...u,...l,...d],m=(0,r.fromPairs)((0,r.map)(h,(e=>[e,o])));(null==i?void 0:i.showIncomingTransactions)!==undefined&&delete i.showIncomingTransactions;e.PreferencesController.incomingTransactionsPreferences=m}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("@metamask/utils"),a=e("../../../shared/constants/network");const i=s.version=96}}},{package:"$root$",file:"app/scripts/migrations/096.ts"}],[239,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},s=(null==t?void 0:t.transactions)||{};if((0,r.isEmpty)(s))return;const n=Object.keys(s).reduce(((e,t)=>{const r=s[t];return null!=r&&r.nonceDetails&&delete r.nonceDetails,{...e,[t]:r}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},s.version=void 0;var r=e("lodash");const n=s.version=97}}},{package:"$root$",file:"app/scripts/migrations/097.ts"}],[2398,{"./verify":2399,"@metamask/superstruct":2618,"@metamask/utils":2410},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),s.SnapsRegistryDatabaseStruct=s.BlockedSnapStruct=s.BlockReasonStruct=s.VerifiedSnapStruct=s.ImagePathStruct=s.AdditionalSourceCodeStruct=s.SupportStruct=s.AuditStruct=s.AuthorStruct=void 0;const a=e("@metamask/superstruct"),i=e("@metamask/utils"),o=(0,a.refine)((0,a.string)(),"Npm ID",(e=>e.startsWith("npm:"))),c=(0,a.object)({checksum:i.ChecksumStruct});s.AuthorStruct=(0,a.object)({name:(0,a.string)(),website:(0,a.string)()}),s.AuditStruct=(0,a.object)({auditor:(0,a.string)(),report:(0,a.string)()}),s.SupportStruct=(0,a.object)({knowledgeBase:(0,a.optional)((0,a.string)()),faq:(0,a.optional)((0,a.string)()),contact:(0,a.optional)((0,a.string)()),keyRecovery:(0,a.optional)((0,a.string)())}),s.AdditionalSourceCodeStruct=(0,a.object)({name:(0,a.string)(),url:(0,a.string)()}),s.ImagePathStruct=(0,a.pattern)((0,a.string)(),/\.\/images\/.*\/\d+\.(?:png|jpe?g)$/u),s.VerifiedSnapStruct=(0,a.object)({id:o,metadata:(0,a.object)({name:(0,a.string)(),type:(0,a.optional)((0,a.enums)(["account"])),author:(0,a.optional)(s.AuthorStruct),website:(0,a.optional)((0,a.string)()),onboard:(0,a.optional)((0,a.boolean)()),summary:(0,a.optional)((0,a.string)()),description:(0,a.optional)((0,a.string)()),audits:(0,a.optional)((0,a.array)(s.AuditStruct)),category:(0,a.optional)((0,a.enums)(["interoperability","notifications","transaction insights","account management"])),tags:(0,a.optional)((0,a.array)((0,a.string)())),support:(0,a.optional)(s.SupportStruct),sourceCode:(0,a.optional)((0,a.string)()),hidden:(0,a.optional)((0,a.boolean)()),privateCode:(0,a.optional)((0,a.boolean)()),privacyPolicy:(0,a.optional)((0,a.string)()),termsOfUse:(0,a.optional)((0,a.string)()),additionalSourceCode:(0,a.optional)((0,a.array)(s.AdditionalSourceCodeStruct)),screenshots:(0,a.optional)((0,a.size)((0,a.array)(s.ImagePathStruct),3,3))}),versions:(0,a.record)(i.VersionStruct,c)}),s.BlockReasonStruct=(0,a.object)({explanation:(0,a.optional)((0,a.string)()),url:(0,a.optional)((0,a.string)())}),s.BlockedSnapStruct=(0,a.union)([(0,a.object)({id:o,versionRange:i.VersionRangeStruct,reason:(0,a.optional)(s.BlockReasonStruct)}),(0,a.object)({checksum:i.ChecksumStruct,reason:(0,a.optional)(s.BlockReasonStruct)})]),s.SnapsRegistryDatabaseStruct=(0,a.object)({verifiedSnaps:(0,a.record)(o,s.VerifiedSnapStruct),blockedSnaps:(0,a.array)(s.BlockedSnapStruct)}),n(e("./verify"),s)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/index.js"}],[2399,{"@metamask/superstruct":2618,"@metamask/utils":2410,"@noble/curves/secp256k1":2769,"@noble/hashes/sha256":2778},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.verify=s.SignatureStruct=void 0;const r=e("@metamask/superstruct"),n=e("@metamask/utils"),a=e("@noble/curves/secp256k1"),i=e("@noble/hashes/sha256");s.SignatureStruct=(0,r.object)({signature:n.StrictHexStruct,curve:(0,r.literal)("secp256k1"),format:(0,r.literal)("DER")}),s.verify=function({registry:e,signature:t,publicKey:r}){(0,n.assertStruct)(t,s.SignatureStruct,"Invalid signature object");const o=(0,n.hexToBytes)(r);return a.secp256k1.verify((0,n.remove0x)(t.signature),(0,i.sha256)((0,n.stringToBytes)(e)),o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry",file:"node_modules/@metamask/snaps-registry/dist/verify.js"}],[24,{"../../user-storage/encryption":47,"../utils/utils":25,loglevel:4328},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.TRIGGER_API_BATCH_ENDPOINT=s.TRIGGER_API=s.NOTIFICATION_API_MARK_ALL_AS_READ_ENDPOINT=s.NOTIFICATION_API_LIST_ENDPOINT_PAGE_QUERY=s.NOTIFICATION_API_LIST_ENDPOINT=s.NOTIFICATION_API=void 0,s.createOnChainTriggers=async function(e,t,s,r){const o=r.map((e=>({id:e.id,token:(0,i.createSHA256Hash)(e.id+t),config:{kind:e.kind,chain_id:Number(e.chainId),address:e.address}})));if(0===o.length)return;const c=await(0,a.makeApiCall)(s,l,"POST",o);if(!c.ok){const e=await c.json().catch((()=>undefined));throw n.default.error("Error creating triggers:",e),new Error("OnChain Notifications - unable to create triggers")}for(const t of o)(0,a.toggleUserStorageTriggerStatus)(e,t.config.address,String(t.config.chain_id),t.id,!0)},s.deleteOnChainTriggers=async function(e,t,s,r){const o=r.map((e=>({id:e,token:(0,i.createSHA256Hash)(e+t)})));try{if(!(await(0,a.makeApiCall)(s,l,"DELETE",o)).ok)throw new Error(`Failed to delete on-chain notifications for uuids ${r.join(", ")}`);for(const t of r)for(const s in e)if(Object.hasOwn(e,s))for(const r in e[s]){var c;null!=e&&null!==(c=e[s])&&void 0!==c&&null!==(c=c[r])&&void 0!==c&&c[t]&&delete e[s][r][t]}const t=(e={})=>0===Object.keys(e).length;for(const s in e)if(Object.hasOwn(e,s)){for(const r in e[s]){var u;t(null==e||null===(u=e[s])||void 0===u?void 0:u[r])&&delete e[s][r]}t(null==e?void 0:e[s])&&delete e[s]}}catch(e){throw n.default.error(`Error deleting on-chain notifications for uuids ${r.join(", ")}:`,e),e}return e},s.getOnChainNotifications=async function(e,t){const s=(0,a.traverseUserStorageTriggers)(e,{mapTrigger:e=>e.enabled?e.id:undefined});if(0===s.length)return[];const r=[];for(let e=1;e<=2;e++)try{const n=await(0,a.makeApiCall)(t,d(e),"POST",{trigger_ids:s}),i=await n.json(),o=i.map((e=>{var t;return null!==(t=e.data)&&void 0!==t&&t.kind?{...e,type:e.data.kind}:undefined})).filter((e=>Boolean(e)));if(r.push(...o),i.length<100){e=3;break}}catch(e){n.default.error(`Error fetching on-chain notifications for trigger IDs ${s.join(", ")}:`,e)}return r},s.markNotificationsAsRead=async function(e,t){if(0===t.length)return;try{const s=await(0,a.makeApiCall)(e,h,"POST",{ids:t});if(200!==s.status){const e=await s.json().catch((()=>undefined));throw new Error(`Error marking notifications as read: ${null==e?void 0:e.message}`)}}catch(e){throw n.default.error("Error marking notifications as read:",e),e}};var r,n=(r=e("loglevel"))&&r.__esModule?r:{default:r},a=e("../utils/utils"),i=e("../../user-storage/encryption");const o=s.TRIGGER_API="https://trigger.api.cx.metamask.io",c=s.NOTIFICATION_API="https://notification.api.cx.metamask.io",l=s.TRIGGER_API_BATCH_ENDPOINT=`${o}/api/v1/triggers/batch`,u=s.NOTIFICATION_API_LIST_ENDPOINT=`${c}/api/v1/notifications`,d=e=>`${u}?page=${e}&per_page=100`;s.NOTIFICATION_API_LIST_ENDPOINT_PAGE_QUERY=d;const h=s.NOTIFICATION_API_MARK_ALL_AS_READ_ENDPOINT=`${c}/api/v1/notifications/mark-as-read`}}},{package:"$root$",file:"app/scripts/controllers/metamask-notifications/services/onchain-notifications.ts"}],[240,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},s=(null==t?void 0:t.transactions)||{};if((0,r.isEmpty)(s))return;const n=Object.keys(s).reduce(((e,t)=>{const r=s[t];return r.verifiedOnBlockchain=Boolean(r.txReceipt),{...e,[t]:r}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},s.version=void 0;var r=e("lodash");const n=s.version=98}}},{package:"$root$",file:"app/scripts/migrations/098.ts"}],[2400,{"./errors.cjs":2408,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const r=e("@metamask/superstruct"),n=e("./errors.cjs");function a(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class i extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=i,s.assert=function(e,t="Assertion failed.",s=i){if(!e){if(t instanceof Error)throw t;throw a(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=i){try{(0,r.assert)(e,t)}catch(e){throw a(o,`${s}: ${function(e){return(0,n.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/assert.cjs"}],[2401,{"./assert.cjs":2400,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,a=t.characterSet??"base64";let i,o;return"base64"===a?i=String.raw`[A-Za-z0-9+\/]`:((0,n.assert)("base64url"===a),i=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${i}{4})*(?:${i}{3}=|${i}{2}==)?$`,"u"):new RegExp(`^(?:${i}{4})*(?:${i}{2,3}|${i}{3}=|${i}{2}==)?$`,"u"),(0,r.pattern)(e,o)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/base64.cjs"}],[2402,{"./assert.cjs":2400,"./hex.cjs":2409,"@scure/base":2797,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const r=e("@scure/base"),n=e("./assert.cjs"),a=e("./hex.cjs"),i=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,n.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=t[e[r]];return(0,a.add0x)(s.join(""))}function m(e){d(e);const t=h(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,a.assertIsHexString)(e);const t=(0,a.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,r=new Uint8Array(s.length/2);for(let e=0;e<r.length;e++){const t=s.charCodeAt(2*e),n=s.charCodeAt(2*e+1),a=t-(t<o?i:c),l=n-(n<o?i:c);r[e]=16*a+l}return r}function f(e){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function v(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function _(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):v(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=u,s.assertIsBytes=d,s.bytesToHex=h,s.bytesToBigInt=m,s.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){d(e);const t=m(e);return(0,n.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return d(e),r.base64.encode(e)},s.hexToBytes=p,s.bigIntToBytes=f,s.signedBigIntToBytes=function(e,t){(0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)("number"==typeof t,"Byte length must be a number."),(0,n.assert)(t>0,"Byte length must be greater than 0."),(0,n.assert)(function(e,t){(0,n.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return r.reverse()},s.numberToBytes=g,s.stringToBytes=v,s.base64ToBytes=function(e){return(0,n.assert)("string"==typeof e,"Value must be a string."),r.base64.decode(e)},s.valueToBytes=_,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let r=0;r<e.length;r++){const n=_(e[r]);t[r]=n,s+=n.length}const r=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)r.set(t[e],s),s+=t[e].length;return r},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/bytes.cjs"}],[2403,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const r=e("@metamask/superstruct");function n(e){return(0,r.is)(e,s.CaipNamespaceStruct)}function a(e){return(0,r.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CaipChainIdStruct=(0,r.pattern)((0,r.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,r.pattern)((0,r.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,r.pattern)((0,r.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,r.pattern)((0,r.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,r.pattern)((0,r.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,r.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=n,s.isCaipReference=a,s.isCaipAccountId=function(e){return(0,r.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,r.is)(e,s.CaipAccountAddressStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!n(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2404,{"./base64.cjs":2401,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const r=e("@metamask/superstruct"),n=e("./base64.cjs");s.ChecksumStruct=(0,r.size)((0,n.base64)((0,r.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/checksum.cjs"}],[2405,{"./assert.cjs":2400,"./bytes.cjs":2402,"./hex.cjs":2409,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./bytes.cjs"),i=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),i.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),l=(0,r.coerce)((0,r.bigint)(),o,BigInt),u=((0,r.union)([i.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([i.StrictHexStruct]),a.hexToBytes)),d=(0,r.coerce)(i.StrictHexStruct,(0,r.instance)(Uint8Array),a.bytesToHex);s.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,n.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/coercers.cjs"}],[2406,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r,n,a=this&&this.__classPrivateFieldGet||function(e,t,s,r){if("a"===s&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)},i=this&&this.__classPrivateFieldSet||function(e,t,s,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,s):n?n.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),i(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}get(e){return a(this,r,"f").get(e)}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return a(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return a(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),i(this,n,new Set(e),"f"),Object.freeze(this)}entries(){return a(this,n,"f").entries()}forEach(e,t){return a(this,n,"f").forEach(((s,r,n)=>e.call(t,s,r,this)))}has(e){return a(this,n,"f").has(e)}keys(){return a(this,n,"f").keys()}values(){return a(this,n,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/collections.cjs"}],[2407,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2408,{"./misc.cjs":2414,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const r=e("pony-cause"),n=e("./misc.cjs");function a(e){return"object"==typeof e&&null!==e&&"code"in e}function i(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=a,s.isErrorWithMessage=i,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return i(e)&&"string"==typeof e.message?e.message:(0,n.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,n.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),a(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/errors.cjs"}],[2409,{"./assert.cjs":2400,"./bytes.cjs":2402,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const r=e("@metamask/superstruct"),n=e("@noble/hashes/sha3"),a=e("./assert.cjs"),i=e("./bytes.cjs");function o(e){return(0,r.is)(e,s.HexStruct)}function c(e){return(0,r.is)(e,s.StrictHexStruct)}function l(e){(0,a.assert)((0,r.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,i.bytesToHex)((0,n.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,a.assert)((0,r.is)(s,(0,r.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function u(e){return!!(0,r.is)(e,s.HexChecksumAddressStruct)&&l(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,r.pattern)((0,r.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,a.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,a.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,r.is)(e,s.HexAddressStruct)||u(e)},s.getChecksumAddress=l,s.isValidChecksumAddress=u,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=d}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/hex.cjs"}],[241,{lodash:4322,uuid:4893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=a,function(e){const t=(null==e?void 0:e.TransactionController)||{},s=(null==t?void 0:t.transactions)||{};if((0,r.isEmpty)(s))return;const a=Object.keys(s).reduce(((e,t)=>{const a=(0,r.cloneDeep)(s[t]),i=(0,n.v1)();return a.id=i,{...e,[i]:a}}),{});e.TransactionController={...t,transactions:a}}(t.data),t},s.version=void 0;var r=e("lodash"),n=e("uuid");const a=s.version=99}}},{package:"$root$",file:"app/scripts/migrations/099.ts"}],[2410,{"./assert.cjs":2400,"./base64.cjs":2401,"./bytes.cjs":2402,"./caip-types.cjs":2403,"./checksum.cjs":2404,"./coercers.cjs":2405,"./collections.cjs":2406,"./encryption-types.cjs":2407,"./errors.cjs":2408,"./hex.cjs":2409,"./json.cjs":2411,"./keyring.cjs":2412,"./logging.cjs":2413,"./misc.cjs":2414,"./number.cjs":2415,"./opaque.cjs":2416,"./promise.cjs":2417,"./time.cjs":2418,"./transaction-types.cjs":2419,"./versions.cjs":2420},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__createBinding||(Object.create?function(e,t,s,r){r===undefined&&(r=s);var n=Object.getOwnPropertyDescriptor(t,s);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,n)}:function(e,t,s,r){r===undefined&&(r=s),e[r]=t[s]}),n=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||r(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),n(e("./assert.cjs"),s),n(e("./base64.cjs"),s),n(e("./bytes.cjs"),s),n(e("./caip-types.cjs"),s),n(e("./checksum.cjs"),s),n(e("./coercers.cjs"),s),n(e("./collections.cjs"),s),n(e("./encryption-types.cjs"),s),n(e("./errors.cjs"),s),n(e("./hex.cjs"),s),n(e("./json.cjs"),s),n(e("./keyring.cjs"),s),n(e("./logging.cjs"),s),n(e("./misc.cjs"),s),n(e("./number.cjs"),s),n(e("./opaque.cjs"),s),n(e("./promise.cjs"),s),n(e("./time.cjs"),s),n(e("./transaction-types.cjs"),s),n(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/index.cjs"}],[2411,{"./assert.cjs":2400,"./misc.cjs":2414,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const r=e("@metamask/superstruct"),n=e("./assert.cjs"),a=e("./misc.cjs");function i({path:e,branch:t}){const s=e[e.length-1];return(0,a.hasProperty)(t[t.length-2],s)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!i(s)||e.validator(t,s),refiner:(t,s)=>!i(s)||e.refiner(t,s)})}s.object=e=>(0,r.object)(e),s.exactOptional=o;function c(e){return(0,r.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,r.union)([(0,r.literal)(null),(0,r.boolean)(),(0,r.define)("finite number",(e=>(0,r.is)(e,(0,r.number)())&&Number.isFinite(e))),(0,r.string)(),(0,r.array)((0,r.lazy)((()=>s.UnsafeJsonStruct))),(0,r.record)((0,r.string)(),(0,r.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,r.coerce)(s.UnsafeJsonStruct,(0,r.any)(),(e=>((0,n.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,n.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,r.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(s.JsonStruct),stack:o((0,r.string)())}),s.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),s.JsonStruct),(0,r.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,r.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,r.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,n.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,r.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,n.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,r.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,r.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,r.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,n.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,r.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,n.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,r.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,n.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,r.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,n.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/json.cjs"}],[2412,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/keyring.cjs"}],[2413,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const n=(0,r(e("debug")).default)("metamask");s.createProjectLogger=function(e){return n.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/logging.cjs"}],[2414,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=r,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/misc.cjs"}],[2415,{"./assert.cjs":2400,"./hex.cjs":2409},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const r=e("./assert.cjs"),n=e("./hex.cjs");s.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,n.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,n.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,n.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,n.assertIsHexString)(e),BigInt((0,n.add0x)(e)))}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/number.cjs"}],[2416,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/opaque.cjs"}],[2417,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const r=new Promise(((e,r)=>{t=e,s=r}));return e&&r.catch((e=>{})),{promise:r,resolve:t,reject:s}}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/promise.cjs"}],[2418,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return r(e,"count"),e*t},s.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/time.cjs"}],[2419,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[242,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=n,function(e){var t,s;const n=(null==e||null===(t=e.AddressBookController)||void 0===t?void 0:t.addressBook)??{},a=(null==e||null===(s=e.NameController)||void 0===s||null===(s=s.names)||void 0===s?void 0:s.ethereumAddress)??{};if((0,r.isEmpty)(Object.keys(n)))return;for(const e of Object.keys(n)){const t=n[e];for(const s of Object.keys(t)){var i,o;const r=t[s],n=s.toLowerCase(),c=a[n]??{};null!==(i=(c[e]??{}).name)&&void 0!==i&&i.length||null===(o=r.name)||void 0===o||!o.length||null==n||!n.length||(a[n]=c,c[e]={name:r.name,sourceId:r.isEns?"ens":null,proposedNames:{}})}}e.NameController={...e.NameController,names:{ethereumAddress:a}}}(t.data),t},s.version=void 0;var r=e("lodash");const n=s.version=100}}},{package:"$root$",file:"app/scripts/migrations/100.ts"}],[2420,{"./assert.cjs":2400,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const r=e("@metamask/superstruct"),n=e("semver"),a=e("./assert.cjs");s.VersionStruct=(0,r.refine)((0,r.string)(),"Version",(e=>null!==(0,n.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",(e=>null!==(0,n.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,r.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,r.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,n.gt)(e,t)},s.gtRange=function(e,t){return(0,n.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,n.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-utils>@metamask/snaps-registry>@metamask/utils",file:"node_modules/@metamask/snaps-registry/node_modules/@metamask/utils/dist/versions.cjs"}],[243,{"@metamask/utils":2739,lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,n.cloneDeep)(e);return t.meta.version=a,function(e){if((0,r.hasProperty)(e,"NetworkController")&&(0,r.isObject)(e.NetworkController)&&(0,r.hasProperty)(e.NetworkController,"networkId")){const t=e.NetworkController;return delete t.networkId,{...e,NetworkController:t}}var t,s;(0,r.isObject)(e.NetworkController)||null===(t=global.sentry)||void 0===t||null===(s=t.captureException)||void 0===s||s.call(t,new Error("typeof state.NetworkController is "+typeof e.NetworkController))}(t.data),t},s.version=void 0;var r=e("@metamask/utils"),n=e("lodash");const a=s.version=101}}},{package:"$root$",file:"app/scripts/migrations/101.ts"}],[244,{lodash:4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.migrate=async function(e){const t=(0,r.cloneDeep)(e);return t.meta.version=n,function(e){const t=(null==e?void 0:e.TransactionController)||{},s=(null==t?void 0:t.transactions)||{};if((0,r.isEmpty)(s))return;const n=Object.keys(s).reduce(((e,t)=>{const n=(0,r.cloneDeep)(s[t]);return null!=n&&n.err&&(n.error=n.err,delete n.err),{...e,[t]:n}}),{});e.TransactionController={...t,transactions:n}}(t.data),t},s.version=void 0;var r=e("lodash");const n=s.version=102}}},{package:"$root$",file:"app/scripts/migrations/102.ts"}]],[],{});