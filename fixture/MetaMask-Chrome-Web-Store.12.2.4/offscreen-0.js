LavaPack.loadBundle([[2265,{"./chunk-EXN2TFDJ.js":2266,"@metamask/post-message-stream":1850,"@metamask/snaps-execution-environments/package.json":2397,"@metamask/snaps-utils":2373,"@metamask/utils":2739},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r,i,a,o,c,u,l,m,d=e("./chunk-EXN2TFDJ.js"),p=e("@metamask/post-message-stream"),h=e("@metamask/snaps-execution-environments/package.json"),f=(n=h)&&n.__esModule?n:{default:n},g=e("@metamask/snaps-utils"),v=e("@metamask/utils"),k=`https://execution.metamask.io/iframe/${f.default.version}/index.html`;r=new WeakMap,i=new WeakMap,a=new WeakSet,o=function(e){const{jobId:t,data:s}=e;this.jobs[t]?"terminateJob"!==s.method?this.jobs[t].stream.write(s):d.__privateMethod.call(void 0,this,l,m).call(this,t):d.__privateMethod.call(void 0,this,c,u).call(this,t).then((()=>{d.__privateMethod.call(void 0,this,a,o).call(this,e)})).catch((e=>{g.logError.call(void 0,"[Worker] Error initializing job:",e)}))},c=new WeakSet,u=async function(e){const t=await g.createWindow.call(void 0,d.__privateGet.call(void 0,this,i),e),s=new(0,p.WindowPostMessageStream)({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"});return s.on("data",(t=>{d.__privateGet.call(void 0,this,r).write({data:t,jobId:e})})),this.jobs[e]={id:e,window:t,stream:s},this.jobs[e]},l=new WeakSet,m=function(e){v.assert.call(void 0,this.jobs[e],`Job "${e}" not found.`);const t=document.getElementById(e);v.assert.call(void 0,t,`Iframe with ID "${e}" not found.`),t.remove(),this.jobs[e].stream.destroy(),delete this.jobs[e]};var S=class e{constructor(e,t){d.__privateAdd.call(void 0,this,a),d.__privateAdd.call(void 0,this,c),d.__privateAdd.call(void 0,this,l),d.__privateAdd.call(void 0,this,r,void 0),d.__privateAdd.call(void 0,this,i,void 0),this.jobs={},d.__privateSet.call(void 0,this,r,e),d.__privateGet.call(void 0,this,r).on("data",d.__privateMethod.call(void 0,this,a,o).bind(this)),d.__privateSet.call(void 0,this,i,t)}static initialize(t,s=k){return new e(t,s)}};s.ProxySnapExecutor=S}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/chunk-3JCT4MWT.js"}],[2266,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=(t=>void 0!==e?e:"undefined"!=typeof Proxy?new Proxy(t,{get:(t,s)=>(void 0!==e?e:t)[s]}):t)((function(t){if(void 0!==e)return e.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')})),r=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__require=n,s.__privateGet=(e,t,s)=>(r(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,n)=>(r(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),s.__privateMethod=(e,t,s)=>(r(e,t,"access private method"),s)}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/chunk-EXN2TFDJ.js"}],[2267,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/chunk-MCXWFCGV.js"}],[2268,{"./chunk-3JCT4MWT.js":2265,"./chunk-EXN2TFDJ.js":2266,"./chunk-MCXWFCGV.js":2267},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),e("./chunk-MCXWFCGV.js");var n=e("./chunk-3JCT4MWT.js");e("./chunk-EXN2TFDJ.js"),s.ProxySnapExecutor=n.ProxySnapExecutor}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/index.js"}],[2269,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=class{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,s=!0){if(s){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e of Object.keys(this.internalConfig)){const t=this.internalConfig[e];void 0!==t&&(this[e]=t)}}else for(const t of Object.keys(e))if(void 0!==this.internalConfig[t]){const s=e[t];this.internalConfig[t]=s,this[t]=s}}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}},r=n;s.BaseControllerV1=n,s.BaseControllerV1_default=r}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/base-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/base-controller/dist/chunk-FTHCJ6HY.js"}],[2270,{"./chunk-UJFCPTF3.js":2272,"./chunk-Z4BLTVTB.js":2273},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r,i,a,o=e("./chunk-UJFCPTF3.js"),c=e("./chunk-Z4BLTVTB.js");n=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap,s.ControllerMessenger=class{constructor(){c.__privateAdd.call(void 0,this,n,new Map),c.__privateAdd.call(void 0,this,r,new Map),c.__privateAdd.call(void 0,this,i,new Map),c.__privateAdd.call(void 0,this,a,new Map)}registerActionHandler(e,t){if(c.__privateGet.call(void 0,this,n).has(e))throw new Error(`A handler for ${e} has already been registered`);c.__privateGet.call(void 0,this,n).set(e,t)}unregisterActionHandler(e){c.__privateGet.call(void 0,this,n).delete(e)}clearActions(){c.__privateGet.call(void 0,this,n).clear()}call(e,...t){const s=c.__privateGet.call(void 0,this,n).get(e);if(!s)throw new Error(`A handler for ${e} has not been registered`);return s(...t)}registerInitialEventPayload({eventType:e,getPayload:t}){c.__privateGet.call(void 0,this,i).set(e,t)}publish(e,...t){const s=c.__privateGet.call(void 0,this,r).get(e);if(s)for(const[e,n]of s.entries())try{if(n){const s=c.__privateGet.call(void 0,this,a).get(e),r=n(...t);r!==s&&(c.__privateGet.call(void 0,this,a).set(e,r),e(r,s))}else e(...t)}catch(e){setTimeout((()=>{throw e}))}}subscribe(e,t,s){let n=c.__privateGet.call(void 0,this,r).get(e);if(n||(n=new Map,c.__privateGet.call(void 0,this,r).set(e,n)),n.set(t,s),s){const n=c.__privateGet.call(void 0,this,i).get(e);if(n){const e=s(...n());c.__privateGet.call(void 0,this,a).set(t,e)}}}unsubscribe(e,t){const s=c.__privateGet.call(void 0,this,r).get(e);if(!s||!s.has(t))throw new Error(`Subscription not found for event: ${e}`);s.get(t)&&c.__privateGet.call(void 0,this,a).delete(t),s.delete(t)}clearEventSubscriptions(e){c.__privateGet.call(void 0,this,r).delete(e)}clearSubscriptions(){c.__privateGet.call(void 0,this,r).clear()}getRestricted({name:e,allowedActions:t,allowedEvents:s}){return new(0,o.RestrictedControllerMessenger)({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:s})}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/base-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/base-controller/dist/chunk-G42723LG.js"}],[2271,{"./chunk-Z4BLTVTB.js":2273,immer:4126},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r=e("./chunk-Z4BLTVTB.js"),i=e("immer");i.enablePatches.call(void 0);function a(e,t,s){return Object.keys(e).reduce(((n,r)=>{try{const i=t[r];if(!i)throw new Error(`No metadata found for '${String(r)}'`);const a=i[s],o=e[r];return"function"==typeof a?n[r]=a(o):a&&(n[r]=o),n}catch(e){return setTimeout((()=>{throw e})),n}}),{})}n=new WeakMap,s.BaseController=class{constructor({messenger:e,metadata:t,name:s,state:a}){r.__privateAdd.call(void 0,this,n,void 0),this.messagingSystem=e,this.name=s,r.__privateSet.call(void 0,this,n,i.freeze.call(void 0,a,!0)),this.metadata=t,this.messagingSystem.registerActionHandler(`${s}:getState`,(()=>this.state)),this.messagingSystem.registerInitialEventPayload({eventType:`${s}:stateChange`,getPayload:()=>[this.state,[]]})}get state(){return r.__privateGet.call(void 0,this,n)}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,s,a]=i.produceWithPatches.call(void 0,r.__privateGet.call(void 0,this,n),e);return r.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,s),{nextState:t,patches:s,inversePatches:a}}applyPatches(e){const t=i.applyPatches.call(void 0,r.__privateGet.call(void 0,this,n),e);r.__privateSet.call(void 0,this,n,t),this.messagingSystem.publish(`${this.name}:stateChange`,t,e)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},s.getAnonymizedState=function(e,t){return a(e,t,"anonymous")},s.getPersistentState=function(e,t){return a(e,t,"persist")}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/base-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/base-controller/dist/chunk-IURK6TKD.js"}],[2272,{"./chunk-Z4BLTVTB.js":2273},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r,i,a,o,c,u,l,m,d,p=e("./chunk-Z4BLTVTB.js");n=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,c=function(e){const t=p.__privateGet.call(void 0,this,a);return p.__privateMethod.call(void 0,this,m,d).call(this,e)||null!==t&&t.includes(e)},u=new WeakSet,l=function(e){const t=p.__privateGet.call(void 0,this,i);return p.__privateMethod.call(void 0,this,m,d).call(this,e)||null!==t&&t.includes(e)},m=new WeakSet,d=function(e){return e.startsWith(`${p.__privateGet.call(void 0,this,r)}:`)},s.RestrictedControllerMessenger=class{constructor({controllerMessenger:e,name:t,allowedActions:s,allowedEvents:c}){p.__privateAdd.call(void 0,this,o),p.__privateAdd.call(void 0,this,u),p.__privateAdd.call(void 0,this,m),p.__privateAdd.call(void 0,this,n,void 0),p.__privateAdd.call(void 0,this,r,void 0),p.__privateAdd.call(void 0,this,i,void 0),p.__privateAdd.call(void 0,this,a,void 0),p.__privateSet.call(void 0,this,n,e),p.__privateSet.call(void 0,this,r,t),p.__privateSet.call(void 0,this,i,s),p.__privateSet.call(void 0,this,a,c)}registerActionHandler(e,t){if(!p.__privateMethod.call(void 0,this,m,d).call(this,e))throw new Error(`Only allowed registering action handlers prefixed by '${p.__privateGet.call(void 0,this,r)}:'`);p.__privateGet.call(void 0,this,n).registerActionHandler(e,t)}unregisterActionHandler(e){if(!p.__privateMethod.call(void 0,this,m,d).call(this,e))throw new Error(`Only allowed unregistering action handlers prefixed by '${p.__privateGet.call(void 0,this,r)}:'`);p.__privateGet.call(void 0,this,n).unregisterActionHandler(e)}call(e,...t){if(!p.__privateMethod.call(void 0,this,u,l).call(this,e))throw new Error(`Action missing from allow list: ${e}`);return p.__privateGet.call(void 0,this,n).call(e,...t)}registerInitialEventPayload({eventType:e,getPayload:t}){if(!p.__privateMethod.call(void 0,this,m,d).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,r)}:'`);p.__privateGet.call(void 0,this,n).registerInitialEventPayload({eventType:e,getPayload:t})}publish(e,...t){if(!p.__privateMethod.call(void 0,this,m,d).call(this,e))throw new Error(`Only allowed publishing events prefixed by '${p.__privateGet.call(void 0,this,r)}:'`);p.__privateGet.call(void 0,this,n).publish(e,...t)}subscribe(e,t,s){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);return s?p.__privateGet.call(void 0,this,n).subscribe(e,t,s):p.__privateGet.call(void 0,this,n).subscribe(e,t)}unsubscribe(e,t){if(!p.__privateMethod.call(void 0,this,o,c).call(this,e))throw new Error(`Event missing from allow list: ${e}`);p.__privateGet.call(void 0,this,n).unsubscribe(e,t)}clearEventSubscriptions(e){if(!p.__privateMethod.call(void 0,this,m,d).call(this,e))throw new Error(`Only allowed clearing events prefixed by '${p.__privateGet.call(void 0,this,r)}:'`);p.__privateGet.call(void 0,this,n).clearEventSubscriptions(e)}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/base-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/base-controller/dist/chunk-UJFCPTF3.js"}],[2273,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__privateGet=(e,t,s)=>(n(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,r)=>(n(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),s.__privateMethod=(e,t,s)=>(n(e,t,"access private method"),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/base-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/base-controller/dist/chunk-Z4BLTVTB.js"}],[2274,{"./chunk-FTHCJ6HY.js":2269,"./chunk-G42723LG.js":2270,"./chunk-IURK6TKD.js":2271,"./chunk-UJFCPTF3.js":2272,"./chunk-Z4BLTVTB.js":2273},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-FTHCJ6HY.js"),r=e("./chunk-IURK6TKD.js"),i=e("./chunk-G42723LG.js"),a=e("./chunk-UJFCPTF3.js");e("./chunk-Z4BLTVTB.js"),s.BaseController=r.BaseController,s.BaseControllerV1=n.BaseControllerV1,s.ControllerMessenger=i.ControllerMessenger,s.RestrictedControllerMessenger=a.RestrictedControllerMessenger,s.getAnonymizedState=r.getAnonymizedState,s.getPersistentState=r.getPersistentState}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/base-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/base-controller/dist/index.js"}],[2275,{"./chunk-PFNSOF67.js":2279,"@ethereumjs/util":461,"@metamask/ethjs-unit":1440,"@metamask/utils":2291,"bn.js":3472,buffer:3520,"eth-ens-namehash":3712,"fast-deep-equal":3842},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-PFNSOF67.js"),i=e("@ethereumjs/util"),a=e("@metamask/ethjs-unit"),o=e("@metamask/utils"),c=n(e("bn.js")),u=n(e("eth-ens-namehash")),l=n(e("fast-deep-equal")),m=new Error("timeout"),d=["__proto__","constructor","prototype"];function p(e){return e?new(0,c.default)(o.remove0x.call(void 0,e),16):new(0,c.default)(0)}async function h(e,t){const s=await fetch(e,t);if(!s.ok)throw new Error(`Fetch failed with status '${s.status}' for request '${String(e)}'`);return s}async function f(e,t){const s=await h(e,t);return await s.json()}s.PROTOTYPE_POLLUTION_BLOCKLIST=d,s.isSafeDynamicKey=function(e){return"string"==typeof e&&!d.some((t=>e===t))},s.isSafeChainId=function(e){if(!o.isHexString.call(void 0,e))return!1;const t=Number.parseInt(e,o.isStrictHexString.call(void 0,e)?16:10);return Number.isSafeInteger(t)&&t>0&&t<=r.MAX_SAFE_CHAIN_ID},s.BNToHex=function(e){return o.add0x.call(void 0,e.toString(16))},s.fractionBN=function(e,t,s){const n=new(0,c.default)(t),r=new(0,c.default)(s);return e.mul(n).div(r)},s.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new(0,c.default)(0);const t=e.toString().split("."),s=t[0]||"0";let n=t[1]||"";if(!n)return a.toWei.call(void 0,s,"gwei");if(n.length<=9)return a.toWei.call(void 0,`${s}.${n}`,"gwei");const r=n.slice(9)[0];n=n.slice(0,9);let i=a.toWei.call(void 0,`${s}.${n}`,"gwei");return Number(r)>=5&&(i=i.add(new(0,c.default)(1))),i},s.weiHexToGweiDec=function(e){const t=new(0,c.default)(o.remove0x.call(void 0,e),16);return a.fromWei.call(void 0,t,"gwei")},s.getBuyURL=function(e="1",t,s=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${s}&address=${t}&crypto_currency=ETH`;case"5":return"https://goerli-faucet.slock.it/";case"11155111":return"https://sepoliafaucet.net/";default:return}},s.hexToBN=p,s.hexToText=function(e){try{const s=o.remove0x.call(void 0,e);return t.from(s,"hex").toString("utf8")}catch(t){return e}},s.fromHex=function(e){return c.default.isBN(e)?e:new(0,c.default)(p(e).toString(10))},s.toHex=function(e){return"string"==typeof e&&o.isStrictHexString.call(void 0,e)?e:`0x${c.default.isBN(e)?e.toString(16):new(0,c.default)(e.toString(),10).toString(16)}`},s.safelyExecute=async function(e,t=!1){try{return await e()}catch(e){return void(t&&console.error(e))}},s.safelyExecuteWithTimeout=async function(e,t=!1,s=500){try{return await Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(m)}),s)))])}catch(e){return void(t&&console.error(e))}},s.toChecksumHexAddress=function(e){if("string"!=typeof e)return e;const t=o.add0x.call(void 0,e);return o.isHexString.call(void 0,t)?i.toChecksumAddress.call(void 0,t):t},s.isValidHexAddress=function(e,{allowNonPrefixed:t=!0}={}){const s=t?o.add0x.call(void 0,e):e;return!!o.isStrictHexString.call(void 0,s)&&i.isValidAddress.call(void 0,s)},s.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},s.successfulFetch=h,s.handleFetch=f,s.fetchWithErrorHandling=async function({url:e,options:t,timeout:s,errorCodesToCatch:n}){let r;try{r=s?Promise.race([await f(e,t),new Promise(((e,t)=>setTimeout((()=>{t(m)}),s)))]):await f(e,t)}catch(e){!function(e,t=[]){if(!e)return;if(!(e instanceof Error))throw e;if(!t.some((t=>e.message.includes(`Fetch failed with status '${t}'`)))&&!e.message.includes("Failed to fetch")&&e!==m)throw e;console.error(e)}(e,n)}return r},s.timeoutFetch=async function(e,t,s=500){return Promise.race([h(e,t),new Promise(((e,t)=>setTimeout((()=>{t(m)}),s)))])},s.normalizeEnsName=function(e){if("."===e)return e;if(e&&"string"==typeof e)try{const t=u.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},s.query=function(e,t,s=[]){return new Promise(((n,r)=>{const i=(e,t)=>{e?r(e):n(t)};t in e&&"function"==typeof e[t]?e[t](...s,i):e.sendAsync({method:t,params:s},i)}))},s.convertHexToDecimal=(e="0x0")=>o.isStrictHexString.call(void 0,e)?parseInt(e,16):Number(e)?Number(e):0,s.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)},s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isValidJson=function(e){try{return l.default.call(void 0,e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/dist/chunk-2CQ3YJMB.js"}],[2276,{"@metamask/utils":2291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/utils"),r=n.createProjectLogger.call(void 0,"controller-utils");s.createModuleLogger=n.createModuleLogger,s.projectLogger=r}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/dist/chunk-DBJSLKNR.js"}],[2277,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n={mainnet:"mainnet",goerli:"goerli",sepolia:"sepolia","linea-goerli":"linea-goerli","linea-sepolia":"linea-sepolia","linea-mainnet":"linea-mainnet"},r={...n,rpc:"rpc"};var i=(e=>(e.Mainnet="mainnet",e.Goerli="goerli",e.Sepolia="sepolia",e.LineaGoerli="linea-goerli",e.LineaSepolia="linea-sepolia",e.LineaMainnet="linea-mainnet",e.Aurora="aurora",e))(i||{}),a={mainnet:"0x1",goerli:"0x5",sepolia:"0xaa36a7",aurora:"0x4e454152","linea-goerli":"0xe704","linea-sepolia":"0xe705","linea-mainnet":"0xe708"},o=(e=>(e.mainnet="ETH",e.goerli="GoerliETH",e.sepolia="SepoliaETH",e["linea-goerli"]="LineaETH",e["linea-sepolia"]="LineaETH",e["linea-mainnet"]="ETH",e.rpc="",e))(o||{});s.InfuraNetworkType=n,s.NetworkType=r,s.isNetworkType=function(e){return Object.values(r).includes(e)},s.isInfuraNetworkType=function(e){return Object.keys(n).includes(e)},s.BuiltInNetworkName=i,s.ChainId=a,s.NetworksTicker=o}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/dist/chunk-F775U3C2.js"}],[2278,{"./chunk-DBJSLKNR.js":2276,"@metamask/utils":2291,"@spruceid/siwe-parser":3010,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-DBJSLKNR.js"),r=e("@metamask/utils"),i=e("@spruceid/siwe-parser"),a=n.createModuleLogger.call(void 0,n.projectLogger,"detect-siwe");function o(e){try{const n="string"!=typeof(s=e)?s:r.remove0x.call(void 0,s),i=t.from(n,"hex");return 32===i.length?e:i.toString("utf8")}catch(t){return a(t),e}var s}var c={"http:":"80","https:":"443"},u=(e,t)=>e.match(/^[^/:]*:\/\//u)?new URL(e):new URL(`${t}//${e}`);s.parseDomainParts=u,s.isValidSIWEOrigin=e=>{try{const{origin:t,siwe:s}=e;if(!t||!s?.parsedMessage?.domain)return!1;const n=new URL(t),r=u(s.parsedMessage.domain,n.protocol);return 0===r.hostname.localeCompare(n.hostname,void 0,{sensitivity:"accent"})&&(""!==r.port&&r.port!==n.port?""===n.port&&r.port===c[n.protocol]:""===r.username||r.username===n.username)}catch(e){return a(e),!1}},s.detectSIWE=e=>{try{const{data:t}=e,s=o(t);return{isSIWEMessage:!0,parsedMessage:new(0,i.ParsedMessage)(s)}}catch(e){return{isSIWEMessage:!1,parsedMessage:null}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/dist/chunk-M6G3ISXG.js"}],[2279,{"./chunk-F775U3C2.js":2277},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-F775U3C2.js"),r={[n.NetworkType.goerli]:{chainId:n.ChainId.goerli,ticker:"GoerliETH",rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.goerli}.etherscan.io`}},[n.NetworkType.sepolia]:{chainId:n.ChainId.sepolia,ticker:"SepoliaETH",rpcPrefs:{blockExplorerUrl:`https://${n.NetworkType.sepolia}.etherscan.io`}},[n.NetworkType.mainnet]:{chainId:n.ChainId.mainnet,ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://etherscan.io"}},[n.NetworkType["linea-goerli"]]:{chainId:n.ChainId["linea-goerli"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://goerli.lineascan.build"}},[n.NetworkType["linea-sepolia"]]:{chainId:n.ChainId["linea-sepolia"],ticker:"LineaETH",rpcPrefs:{blockExplorerUrl:"https://sepolia.lineascan.build"}},[n.NetworkType["linea-mainnet"]]:{chainId:n.ChainId["linea-mainnet"],ticker:"ETH",rpcPrefs:{blockExplorerUrl:"https://lineascan.build"}},[n.NetworkType.rpc]:{chainId:void 0,blockExplorerUrl:void 0,ticker:void 0,rpcPrefs:void 0}},i=(e=>(e.AddEthereumChain="wallet_addEthereumChain",e.ConnectAccounts="connect_accounts",e.EthDecrypt="eth_decrypt",e.EthGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.EthSignTypedData="eth_signTypedData",e.PersonalSign="personal_sign",e.ResultError="result_error",e.ResultSuccess="result_success",e.SnapDialogAlert="snap_dialog:alert",e.SnapDialogConfirmation="snap_dialog:confirmation",e.SnapDialogPrompt="snap_dialog:prompt",e.SnapDialogDefault="snap_dialog",e.SwitchEthereumChain="wallet_switchEthereumChain",e.Transaction="transaction",e.Unlock="unlock",e.WalletConnect="wallet_connect",e.WalletRequestPermissions="wallet_requestPermissions",e.WatchAsset="wallet_watchAsset",e))(i||{}),a={[n.ChainId.goerli]:"goerli",[n.ChainId.sepolia]:"sepolia",[n.ChainId.mainnet]:"mainnet",[n.ChainId["linea-goerli"]]:"linea-goerli",[n.ChainId["linea-sepolia"]]:"linea-sepolia",[n.ChainId["linea-mainnet"]]:"linea-mainnet",[n.ChainId.aurora]:"aurora"};s.RPC="rpc",s.FALL_BACK_VS_CURRENCY="ETH",s.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",s.GANACHE_CHAIN_ID="0x539",s.MAX_SAFE_CHAIN_ID=0xfffffffffffec,s.ERC721="ERC721",s.ERC1155="ERC1155",s.ERC20="ERC20",s.ERC721_INTERFACE_ID="0x80ac58cd",s.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",s.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",s.ERC1155_INTERFACE_ID="0xd9b67a26",s.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",s.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",s.GWEI="gwei",s.ASSET_TYPES={NATIVE:"NATIVE",TOKEN:"TOKEN",NFT:"NFT",UNKNOWN:"UNKNOWN"},s.TESTNET_TICKER_SYMBOLS={GOERLI:"GoerliETH",SEPOLIA:"SepoliaETH",LINEA_GOERLI:"LineaETH",LINEA_SEPOLIA:"LineaETH"},s.BUILT_IN_NETWORKS=r,s.OPENSEA_PROXY_URL="https://proxy.api.cx.metamask.io/opensea/v1/api/v2",s.NFT_API_BASE_URL="https://nft.api.cx.metamask.io",s.NFT_API_VERSION="1",s.NFT_API_TIMEOUT=15e3,s.ORIGIN_METAMASK="metamask",s.ApprovalType=i,s.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=a}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/dist/chunk-PFNSOF67.js"}],[2280,{"./chunk-2CQ3YJMB.js":2275,"./chunk-DBJSLKNR.js":2276,"./chunk-F775U3C2.js":2277,"./chunk-M6G3ISXG.js":2278,"./chunk-PFNSOF67.js":2279},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-M6G3ISXG.js");e("./chunk-DBJSLKNR.js");var r=e("./chunk-2CQ3YJMB.js"),i=e("./chunk-PFNSOF67.js"),a=e("./chunk-F775U3C2.js");s.ASSET_TYPES=i.ASSET_TYPES,s.ApprovalType=i.ApprovalType,s.BNToHex=r.BNToHex,s.BUILT_IN_NETWORKS=i.BUILT_IN_NETWORKS,s.BuiltInNetworkName=a.BuiltInNetworkName,s.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP=i.CHAIN_ID_TO_ETHERS_NETWORK_NAME_MAP,s.ChainId=a.ChainId,s.ERC1155=i.ERC1155,s.ERC1155_INTERFACE_ID=i.ERC1155_INTERFACE_ID,s.ERC1155_METADATA_URI_INTERFACE_ID=i.ERC1155_METADATA_URI_INTERFACE_ID,s.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=i.ERC1155_TOKEN_RECEIVER_INTERFACE_ID,s.ERC20=i.ERC20,s.ERC721=i.ERC721,s.ERC721_ENUMERABLE_INTERFACE_ID=i.ERC721_ENUMERABLE_INTERFACE_ID,s.ERC721_INTERFACE_ID=i.ERC721_INTERFACE_ID,s.ERC721_METADATA_INTERFACE_ID=i.ERC721_METADATA_INTERFACE_ID,s.FALL_BACK_VS_CURRENCY=i.FALL_BACK_VS_CURRENCY,s.GANACHE_CHAIN_ID=i.GANACHE_CHAIN_ID,s.GWEI=i.GWEI,s.IPFS_DEFAULT_GATEWAY_URL=i.IPFS_DEFAULT_GATEWAY_URL,s.InfuraNetworkType=a.InfuraNetworkType,s.MAX_SAFE_CHAIN_ID=i.MAX_SAFE_CHAIN_ID,s.NFT_API_BASE_URL=i.NFT_API_BASE_URL,s.NFT_API_TIMEOUT=i.NFT_API_TIMEOUT,s.NFT_API_VERSION=i.NFT_API_VERSION,s.NetworkType=a.NetworkType,s.NetworksTicker=a.NetworksTicker,s.OPENSEA_PROXY_URL=i.OPENSEA_PROXY_URL,s.ORIGIN_METAMASK=i.ORIGIN_METAMASK,s.RPC=i.RPC,s.TESTNET_TICKER_SYMBOLS=i.TESTNET_TICKER_SYMBOLS,s.convertHexToDecimal=r.convertHexToDecimal,s.detectSIWE=n.detectSIWE,s.fetchWithErrorHandling=r.fetchWithErrorHandling,s.fractionBN=r.fractionBN,s.fromHex=r.fromHex,s.getBuyURL=r.getBuyURL,s.gweiDecToWEIBN=r.gweiDecToWEIBN,s.handleFetch=r.handleFetch,s.hexToBN=r.hexToBN,s.hexToText=r.hexToText,s.isInfuraNetworkType=a.isInfuraNetworkType,s.isNetworkType=a.isNetworkType,s.isNonEmptyArray=r.isNonEmptyArray,s.isPlainObject=r.isPlainObject,s.isSafeChainId=r.isSafeChainId,s.isSafeDynamicKey=r.isSafeDynamicKey,s.isSmartContractCode=r.isSmartContractCode,s.isValidHexAddress=r.isValidHexAddress,s.isValidJson=r.isValidJson,s.isValidSIWEOrigin=n.isValidSIWEOrigin,s.normalizeEnsName=r.normalizeEnsName,s.parseDomainParts=n.parseDomainParts,s.query=r.query,s.safelyExecute=r.safelyExecute,s.safelyExecuteWithTimeout=r.safelyExecuteWithTimeout,s.successfulFetch=r.successfulFetch,s.timeoutFetch=r.timeoutFetch,s.toChecksumHexAddress=r.toChecksumHexAddress,s.toHex=r.toHex,s.weiHexToGweiDec=r.weiHexToGweiDec}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/dist/index.js"}],[2281,{"./errors.cjs":2289,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const n=e("@metamask/superstruct"),r=e("./errors.cjs");function i(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=a,s.assert=function(e,t="Assertion failed.",s=a){if(!e){if(t instanceof Error)throw t;throw i(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${s}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/assert.cjs"}],[2282,{"./assert.cjs":2281,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/base64.cjs"}],[2283,{"./assert.cjs":2281,"./hex.cjs":2290,"@scure/base":2797,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const n=e("@scure/base"),r=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function m(e){(0,r.assert)(l(e),"Value must be a Uint8Array.")}function d(e){if(m(e),0===e.length)return"0x";const t=u(),s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=t[e[n]];return(0,i.add0x)(s.join(""))}function p(e){m(e);const t=d(e);return BigInt(t)}function h(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,n=new Uint8Array(s.length/2);for(let e=0;e<n.length;e++){const t=s.charCodeAt(2*e),r=s.charCodeAt(2*e+1),i=t-(t<o?a:c),u=r-(r<o?a:c);n[e]=16*i+u}return n}function f(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return h(e.toString(16))}function g(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return h(e.toString(16))}function v(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function k(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?h(e):v(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=l,s.assertIsBytes=m,s.bytesToHex=d,s.bytesToBigInt=p,s.bytesToSignedBigInt=function(e){m(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){m(e);const t=p(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return m(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return m(e),n.base64.encode(e)},s.hexToBytes=h,s.bigIntToBytes=f,s.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return n.reverse()},s.numberToBytes=g,s.stringToBytes=v,s.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},s.valueToBytes=k,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let n=0;n<e.length;n++){const r=k(e[n]);t[n]=r,s+=r.length}const n=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)n.set(t[e],s),s+=t[e].length;return n},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/bytes.cjs"}],[2284,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function r(e){return(0,n.is)(e,s.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,n.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=r,s.isCaipReference=i,s.isCaipAccountId=function(e){return(0,n.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,n.is)(e,s.CaipAccountAddressStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!r(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2285,{"./base64.cjs":2282,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),r=e("./base64.cjs");s.ChecksumStruct=(0,n.size)((0,r.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/checksum.cjs"}],[2286,{"./assert.cjs":2281,"./bytes.cjs":2283,"./hex.cjs":2290,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),m=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);s.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,m)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[2287,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[2288,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2289,{"./misc.cjs":2295,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const n=e("pony-cause"),r=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=i,s.isErrorWithMessage=a,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,r.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[2290,{"./assert.cjs":2281,"./bytes.cjs":2283,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const n=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,s.HexStruct)}function c(e){return(0,n.is)(e,s.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=m(e.toLowerCase()),o=m((0,a.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,i.assert)((0,n.is)(s,(0,n.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,s.HexChecksumAddressStruct)&&u(e)===e}function m(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,n.is)(e,s.HexAddressStruct)||l(e)},s.getChecksumAddress=u,s.isValidChecksumAddress=l,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=m}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[2291,{"./assert.cjs":2281,"./base64.cjs":2282,"./bytes.cjs":2283,"./caip-types.cjs":2284,"./checksum.cjs":2285,"./coercers.cjs":2286,"./collections.cjs":2287,"./encryption-types.cjs":2288,"./errors.cjs":2289,"./hex.cjs":2290,"./json.cjs":2292,"./keyring.cjs":2293,"./logging.cjs":2294,"./misc.cjs":2295,"./number.cjs":2296,"./opaque.cjs":2297,"./promise.cjs":2298,"./time.cjs":2299,"./transaction-types.cjs":2300,"./versions.cjs":2301},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./assert.cjs"),s),r(e("./base64.cjs"),s),r(e("./bytes.cjs"),s),r(e("./caip-types.cjs"),s),r(e("./checksum.cjs"),s),r(e("./coercers.cjs"),s),r(e("./collections.cjs"),s),r(e("./encryption-types.cjs"),s),r(e("./errors.cjs"),s),r(e("./hex.cjs"),s),r(e("./json.cjs"),s),r(e("./keyring.cjs"),s),r(e("./logging.cjs"),s),r(e("./misc.cjs"),s),r(e("./number.cjs"),s),r(e("./opaque.cjs"),s),r(e("./promise.cjs"),s),r(e("./time.cjs"),s),r(e("./transaction-types.cjs"),s),r(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/index.cjs"}],[2292,{"./assert.cjs":2281,"./misc.cjs":2295,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const s=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],s)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!a(s)||e.validator(t,s),refiner:(t,s)=>!a(s)||e.refiner(t,s)})}s.object=e=>(0,n.object)(e),s.exactOptional=o;function c(e){return(0,n.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>s.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,n.coerce)(s.UnsafeJsonStruct,(0,n.any)(),(e=>((0,r.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,r.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,n.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(s.JsonStruct),stack:o((0,n.string)())}),s.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),s.JsonStruct),(0,n.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,n.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,n.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,n.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,n.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,n.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,n.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,n.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,n.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/json.cjs"}],[2293,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[2294,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const r=(0,n(e("debug")).default)("metamask");s.createProjectLogger=function(e){return r.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[2295,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=n,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[2296,{"./assert.cjs":2281,"./hex.cjs":2290},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const n=e("./assert.cjs"),r=e("./hex.cjs");s.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/number.cjs"}],[2297,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[2298,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const n=new Promise(((e,n)=>{t=e,s=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:s}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[2299,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return n(e,"count"),e*t},s.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/time.cjs"}],[2300,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2301,{"./assert.cjs":2281,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const n=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");s.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,n.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,n.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,r.gt)(e,t)},s.gtRange=function(e,t){return(0,r.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/controller-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/controller-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[2302,{"./chunk-FYADAA2G.js":2307,"@metamask/utils":2325},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-FYADAA2G.js"),r=e("@metamask/utils");function i(e){return r.hasProperty.call(void 0,e,"decorator")}s.isRestrictedMethodCaveatSpecification=i,s.decorateWithCaveats=function(e,t,s){const{caveats:r}=t;if(!r)return e;let a=async t=>e(t);for(const e of r){const t=s[e.type];if(!t)throw new(0,n.UnrecognizedCaveatTypeError)(e.type);if(!i(t))throw new(0,n.CaveatSpecificationMismatchError)(t,"RestrictedMethod");a=t.decorator(a,e)}return a}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-3YOPLPVY.js"}],[2303,{"./chunk-7A3VYLCK.js":2304,"./chunk-VBIZGGQL.js":2308,"./chunk-X4ZAW4QR.js":2311,"./chunk-Z2XKIXLS.js":2312},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-VBIZGGQL.js"),r=e("./chunk-7A3VYLCK.js"),i=e("./chunk-X4ZAW4QR.js"),a={};e("./chunk-Z2XKIXLS.js").__export.call(void 0,a,{handlers:()=>o});var o=[r.requestPermissionsHandler,n.getPermissionsHandler,i.revokePermissionsHandler];s.handlers=o,s.rpc_methods_exports=a}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-6PXDVUYM.js"}],[2304,{"./chunk-FYADAA2G.js":2307,"@metamask/controller-utils":2280},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-FYADAA2G.js"),r=e("@metamask/controller-utils"),i={methodNames:["wallet_requestPermissions"],implementation:async function(e,t,s,i,{requestPermissionsForOrigin:a}){const{params:o}=e;if(!Array.isArray(o)||!r.isPlainObject.call(void 0,o[0]))return i(n.invalidParams.call(void 0,{data:{request:e}}));const[c]=o,[u]=await a(c);return t.result=Object.values(u),i()},hookNames:{requestPermissionsForOrigin:!0}};s.requestPermissionsHandler=i}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-7A3VYLCK.js"}],[2305,{"./chunk-3YOPLPVY.js":2302,"./chunk-F5TBMVWC.js":2306,"./chunk-FYADAA2G.js":2307,"./chunk-VQPP5PWS.js":2309,"./chunk-Z2XKIXLS.js":2312,"./chunk-ZH4MLSXX.js":2313,"@metamask/base-controller":2274,"@metamask/controller-utils":2280,"@metamask/rpc-errors":1884,"@metamask/utils":2325,"deep-freeze-strict":3667,immer:4126,nanoid:2395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r=e("./chunk-3YOPLPVY.js"),i=e("./chunk-ZH4MLSXX.js"),a=e("./chunk-F5TBMVWC.js"),o=e("./chunk-FYADAA2G.js"),c=e("./chunk-VQPP5PWS.js"),u=e("./chunk-Z2XKIXLS.js"),l=e("@metamask/base-controller"),m=e("@metamask/controller-utils"),d=e("@metamask/rpc-errors"),p=e("@metamask/utils"),h=e("deep-freeze-strict"),f=(n=h)&&n.__esModule?n:{default:n},g=e("immer"),v=e("nanoid"),k="PermissionController";var S,_,y,b,E,j,w,I,T,R,C,A,x=(e=>(e[e.Noop=0]="Noop",e[e.UpdateValue=1]="UpdateValue",e[e.DeleteCaveat=2]="DeleteCaveat",e[e.RevokePermission=3]="RevokePermission",e))(x||{}),P=class extends l.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:s,unrestrictedMethods:n,messenger:r,state:i={}}=e;super({name:k,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:r,state:{subjects:{},...i}}),u.__privateAdd.call(void 0,this,S),u.__privateAdd.call(void 0,this,y),u.__privateAdd.call(void 0,this,E),u.__privateAdd.call(void 0,this,w),u.__privateAdd.call(void 0,this,T),u.__privateAdd.call(void 0,this,C),this._unrestrictedMethods=new Set(n),this._caveatSpecifications=f.default.call(void 0,{...t}),this.validatePermissionSpecifications(s,this._caveatSpecifications),this._permissionSpecifications=f.default.call(void 0,{...s}),this.registerMessageHandlers(),this.createPermissionMiddleware=a.getPermissionMiddlewareFactory.call(void 0,{executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:s,targetName:n,allowedCaveats:a}])=>{if(!s||!p.hasProperty.call(void 0,i.PermissionType,s))throw new Error(`Invalid permission type: "${s}"`);if(!e)throw new Error(`Invalid permission target name: "${e}"`);if(e!==n)throw new Error(`Invalid permission specification: target name "${e}" must match specification.targetName value "${n}".`);a&&a.forEach((e=>{if(!p.hasProperty.call(void 0,t,e))throw new(0,o.UnrecognizedCaveatTypeError)(e);const n=t[e],i=r.isRestrictedMethodCaveatSpecification.call(void 0,n);if("RestrictedMethod"===s&&!i||"Endowment"===s&&i)throw new(0,o.CaveatSpecificationMismatchError)(n,s)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${k}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${k}:getEndowments`,((e,t,s)=>this.getEndowments(e,t,s))),this.messagingSystem.registerActionHandler(`${k}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${k}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${k}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${k}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${k}:grantPermissions`,this.grantPermissions.bind(this)),this.messagingSystem.registerActionHandler(`${k}:grantPermissionsIncremental`,this.grantPermissionsIncremental.bind(this)),this.messagingSystem.registerActionHandler(`${k}:requestPermissions`,((e,t)=>this.requestPermissions(e,t))),this.messagingSystem.registerActionHandler(`${k}:requestPermissionsIncremental`,((e,t)=>this.requestPermissionsIncremental(e,t))),this.messagingSystem.registerActionHandler(`${k}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${k}:revokePermissionForAllSubjects`,(e=>this.revokePermissionForAllSubjects(e))),this.messagingSystem.registerActionHandler(`${k}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${k}:updateCaveat`,((e,t,s,n)=>{this.updateCaveat(e,t,s,n)}))}clearState(){this.update((e=>({subjects:{}})))}getTypedPermissionSpecification(e,t,s){const n="RestrictedMethod"===e?o.methodNotFound.call(void 0,t,s?{origin:s}:void 0):new(0,o.EndowmentPermissionDoesNotExistError)(t,s);if(!this.targetExists(t))throw n;const r=this.getPermissionSpecification(t);if(!i.hasSpecificationType.call(void 0,r,e))throw n;return r}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification("RestrictedMethod",e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){return this.state.subjects[e]?.permissions[t]}getPermissions(e){return this.state.subjects[e]?.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new(0,o.UnrecognizedSubjectError)(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((s=>{if(!p.hasProperty.call(void 0,t.subjects,s))throw new(0,o.UnrecognizedSubjectError)(s);e[s].forEach((e=>{const{permissions:n}=t.subjects[s];if(!p.hasProperty.call(void 0,n,e))throw new(0,o.PermissionDoesNotExistError)(s,e);this.deletePermission(t.subjects,s,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([s,n])=>{const{permissions:r}=n;p.hasProperty.call(void 0,r,e)&&this.deletePermission(t.subjects,s,e)}))}))}deletePermission(e,t,s){const{permissions:n}=e[t];Object.keys(n).length>1?delete n[s]:delete e[t]}hasCaveat(e,t,s){return Boolean(this.getCaveat(e,t,s))}getCaveat(e,t,s){const n=this.getPermission(e,t);if(!n)throw new(0,o.PermissionDoesNotExistError)(e,t);return i.findCaveat.call(void 0,n,s)}addCaveat(e,t,s,n){if(this.hasCaveat(e,t,s))throw new(0,o.CaveatAlreadyExistsError)(e,t,s);this.setCaveat(e,t,s,n)}updateCaveat(e,t,s,n){if(!this.hasCaveat(e,t,s))throw new(0,o.CaveatDoesNotExistError)(e,t,s);this.setCaveat(e,t,s,n)}setCaveat(e,t,s,n){this.update((r=>{const i=r.subjects[e];if(!i)throw new(0,o.UnrecognizedSubjectError)(e);const a=i.permissions[t];if(!a)throw new(0,o.PermissionDoesNotExistError)(e,t);const c={type:s,value:n};if(this.validateCaveat(c,e,t),a.caveats){const e=a.caveats.findIndex((e=>e.type===c.type));-1===e?a.caveats.push(c):a.caveats.splice(e,1,c)}else a.caveats=[c];this.validateModifiedPermission(a,e)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((s=>{Object.values(s.subjects).forEach((n=>{Object.values(n.permissions).forEach((r=>{const{caveats:i}=r,a=i?.find((({type:t})=>t===e));if(!a)return;const o=t(a.value),{operation:c}=o;switch(c){case 0:break;case 1:a.value=o.value,this.validateCaveat(a,n.origin,r.parentCapability);break;case 2:this.deleteCaveat(r,e,n.origin);break;case 3:this.deletePermission(s.subjects,n.origin,r.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${c}"`)}}))}))}))}removeCaveat(e,t,s){this.update((n=>{const r=n.subjects[e]?.permissions[t];if(!r)throw new(0,o.PermissionDoesNotExistError)(e,t);if(!r.caveats)throw new(0,o.CaveatDoesNotExistError)(e,t,s);this.deleteCaveat(r,s,e)}))}deleteCaveat(e,t,s){if(!e.caveats)throw new(0,o.CaveatDoesNotExistError)(s,e.parentCapability,t);const n=e.caveats.findIndex((e=>e.type===t));if(-1===n)throw new(0,o.CaveatDoesNotExistError)(s,e.parentCapability,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(n,1),this.validateModifiedPermission(e,s)}validateModifiedPermission(e,t){if(!this.targetExists(e.parentCapability))throw new Error(`Fatal: Existing permission target "${e.parentCapability}" has no specification.`);this.validatePermission(this.getPermissionSpecification(e.parentCapability),e,t)}targetExists(e){return p.hasProperty.call(void 0,this._permissionSpecifications,e)}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:s=!0,subject:n}){return u.__privateMethod.call(void 0,this,y,b).call(this,{approvedPermissions:e,subject:n,mergePermissions:!1,preserveExistingPermissions:s,requestData:t})}grantPermissionsIncremental({approvedPermissions:e,requestData:t,subject:s}){return u.__privateMethod.call(void 0,this,y,b).call(this,{approvedPermissions:e,subject:s,mergePermissions:!0,preserveExistingPermissions:!0,requestData:t})}validatePermission(e,t,s,{invokePermissionValidator:n,performCaveatValidation:r}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:i,validator:a,targetName:c}=e;if(e.subjectTypes?.length&&e.subjectTypes.length>0){const t=this.messagingSystem.call("SubjectMetadataController:getSubjectMetadata",s);if(!t||null===t.subjectType||!e.subjectTypes.includes(t.subjectType))throw"RestrictedMethod"===e.permissionType?o.methodNotFound.call(void 0,c,{origin:s}):new(0,o.EndowmentPermissionDoesNotExistError)(c,s)}if(p.hasProperty.call(void 0,t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new(0,o.InvalidCaveatsPropertyError)(s,c,e);const n=new Set;e?.forEach((e=>{if(r&&this.validateCaveat(e,s,c),!i?.includes(e.type))throw new(0,o.ForbiddenCaveatError)(e.type,s,c);if(n.has(e.type))throw new(0,o.DuplicateCaveatError)(e.type,s,c);n.add(e.type)}))}n&&a&&a(t,s,c)}setValidatedPermissions(e,t){this.update((s=>{s.subjects[e]||(s.subjects[e]={origin:e,permissions:{}}),s.subjects[e].permissions=g.castDraft.call(void 0,t)}))}constructCaveats(e,t,s){const n=s?.map((s=>{this.validateCaveat(s,e,t);const{type:n,value:r}=s;return{type:n,value:r}}));return n&&m.isNonEmptyArray.call(void 0,n)?n:void 0}validateCaveat(e,t,s){if(!m.isPlainObject.call(void 0,e))throw new(0,o.InvalidCaveatError)(e,t,s);if(2!==Object.keys(e).length)throw new(0,o.InvalidCaveatFieldsError)(e,t,s);if("string"!=typeof e.type)throw new(0,o.InvalidCaveatTypeError)(e,t,s);const n=this.getCaveatSpecification(e.type);if(!n)throw new(0,o.UnrecognizedCaveatTypeError)(e.type,t,s);if(!p.hasProperty.call(void 0,e,"value")||void 0===e.value)throw new(0,o.CaveatMissingValueError)(e,t,s);if(!m.isValidJson.call(void 0,e.value))throw new(0,o.CaveatInvalidJsonError)(e,t,s);n.validator?.(e,t,s)}async requestPermissions(e,t,s={}){const{origin:n}=e,{id:r=v.nanoid.call(void 0),preserveExistingPermissions:i=!0}=s;this.validateRequestedPermissions(n,t);const a={...s.metadata,id:r,origin:n},o={metadata:a,permissions:t},c=await this.requestUserApproval(o);return await u.__privateMethod.call(void 0,this,C,A).call(this,{subject:e,metadata:a,preserveExistingPermissions:i,approvedRequest:c})}async requestPermissionsIncremental(e,t,s={}){const{origin:n}=e,{id:r=v.nanoid.call(void 0)}=s;this.validateRequestedPermissions(n,t);const i=this.getPermissions(n)??{},[a,c]=u.__privateMethod.call(void 0,this,E,j).call(this,i,t);if(void 0===a||void 0===c)return[];try{this.validateRequestedPermissions(n,a)}catch(e){if(e instanceof Error)throw new(0,o.InvalidMergedPermissionsError)(n,e,c);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}const l={...s.metadata,id:r,origin:n},m={metadata:l,permissions:a,diff:{currentPermissions:i,permissionDiffMap:c}},d=await this.requestUserApproval(m);return await u.__privateMethod.call(void 0,this,C,A).call(this,{subject:e,metadata:l,preserveExistingPermissions:!1,approvedRequest:d})}validateRequestedPermissions(e,t){if(!m.isPlainObject.call(void 0,t))throw o.invalidParams.call(void 0,{message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const s of Object.keys(t)){const n=t[s];if(!this.targetExists(s))throw o.methodNotFound.call(void 0,s,{origin:e,requestedPermissions:t});if(!m.isPlainObject.call(void 0,n)||void 0!==n.parentCapability&&s!==n.parentCapability)throw o.invalidParams.call(void 0,{message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(s),n,e,{invokePermissionValidator:!1,performCaveatValidation:!0})}}async requestUserApproval(e){const{origin:t,id:s}=e.metadata,n=await this.messagingSystem.call("ApprovalController:addRequest",{id:s,origin:t,requestData:e,type:"wallet_requestPermissions"},!0);return this.validateApprovedPermissions(n,{id:s,origin:t}),n}getSideEffects(e){return Object.keys(e).reduce(((e,t)=>{if(this.targetExists(t)){const s=this.getPermissionSpecification(t);s.sideEffect&&(e.permittedHandlers[t]=s.sideEffect.onPermitted,s.sideEffect.onFailure&&(e.failureHandlers[t]=s.sideEffect.onFailure))}return e}),{permittedHandlers:{},failureHandlers:{}})}async executeSideEffects(e,t){const{permittedHandlers:s,failureHandlers:n}=e,r={requestData:t,messagingSystem:this.messagingSystem},i=await Promise.allSettled(Object.values(s).map((e=>e(r)))),a=i.filter((e=>"rejected"===e.status));if(a.length>0){const e=Object.values(n);if(e.length>0)try{await Promise.all(e.map((e=>e(r))))}catch(e){throw o.internalError.call(void 0,"Unexpected error in side-effects",{error:e})}const t=a.map((e=>e.reason));throw t.forEach((e=>{console.error(e)})),t.length>1?o.internalError.call(void 0,"Multiple errors occurred during side-effects execution",{errors:t}):t[0]}return i.map((({value:e})=>e))}validateApprovedPermissions(e,t){const{id:s,origin:n}=t;if(!m.isPlainObject.call(void 0,e)||!m.isPlainObject.call(void 0,e.metadata))throw o.internalError.call(void 0,`Approved permissions request for subject "${n}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:r,origin:i},permissions:a}=e;if(r!==s)throw o.internalError.call(void 0,`Approved permissions request for subject "${n}" mutated its id.`,{originalId:s,mutatedId:r});if(i!==n)throw o.internalError.call(void 0,`Approved permissions request for subject "${n}" mutated its origin.`,{originalOrigin:n,mutatedOrigin:i});try{this.validateRequestedPermissions(n,a)}catch(e){if(e instanceof Error)throw o.internalError.call(void 0,`Invalid approved permissions request: ${e.message}`,e instanceof d.JsonRpcError?e.data:void 0);throw o.internalError.call(void 0,"Unrecognized error type",{error:e})}}async acceptPermissionsRequest(e){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new(0,o.PermissionsRequestNotFoundError)(t);if(0!==Object.keys(e.permissions).length)try{await this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,o.invalidParams.call(void 0,{message:"Must request at least one permission."}))}async rejectPermissionsRequest(e){if(!this.hasApprovalRequest({id:e}))throw new(0,o.PermissionsRequestNotFoundError)(e);this._rejectPermissionsRequest(e,o.userRejectedRequest.call(void 0))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}async getEndowments(e,t,s){if(!this.hasPermission(e,t))throw o.unauthorized.call(void 0,{data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification("Endowment",t,e).endowmentGetter({origin:e,requestData:s})}async executeRestrictedMethod(e,t,s){const n=this.getRestrictedMethod(t,e),r=await this._executeRestrictedMethod(n,{origin:e},t,s);if(void 0===r)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return r}_executeRestrictedMethod(e,t,s,n=[]){const{origin:i}=t,a=this.getPermission(i,s);if(!a)throw o.unauthorized.call(void 0,{data:{origin:i,method:s}});return r.decorateWithCaveats.call(void 0,e,a,this._caveatSpecifications)({method:s,params:n,context:{origin:i}})}};S=new WeakSet,_=function(e){const{merger:t}=this.getCaveatSpecification(e);if(void 0===t)throw new(0,o.CaveatMergerDoesNotExistError)(e);return t},y=new WeakSet,b=function({approvedPermissions:e,subject:t,mergePermissions:s,preserveExistingPermissions:n,requestData:r}){const{origin:a}=t;if(!a||"string"!=typeof a)throw new(0,o.InvalidSubjectIdentifierError)(a);const c=n?{...this.getPermissions(a)}:{};for(const[t,n]of Object.entries(e)){if(!this.targetExists(t))throw o.methodNotFound.call(void 0,t);if(void 0!==n.parentCapability&&t!==n.parentCapability)throw new(0,o.InvalidApprovedPermissionError)(a,t,n);const e=t,l=this.getPermissionSpecification(e),m={caveats:this.constructCaveats(a,e,n.caveats),invoker:a,target:e};let d,p=!0;l.factory?d=l.factory(m,r):(d=i.constructPermission.call(void 0,m),p=!1),s&&(d=u.__privateMethod.call(void 0,this,w,I).call(this,c[e],d)[0]),this.validatePermission(l,d,a,{invokePermissionValidator:!0,performCaveatValidation:p}),c[e]=d}return this.setValidatedPermissions(a,c),c},E=new WeakSet,j=function(e,t){const s={},n=g.produce.call(void 0,e,(e=>{const n=e;Object.entries(t).forEach((([e,t])=>{const r=n[e],[i,a]=u.__privateMethod.call(void 0,this,w,I).call(this,r??{},t);(void 0===r||Object.keys(a).length>0)&&(n[e]=i,s[e]=a)}))}));return 0===Object.keys(s).length?[]:[n,s]},w=new WeakSet,I=function(e,t){const{caveatPairs:s,leftUniqueCaveats:n,rightUniqueCaveats:r}=c.collectUniqueAndPairedCaveats.call(void 0,e,t),[i,a]=s.reduce((([e,t],[s,n])=>{const[r,i]=u.__privateMethod.call(void 0,this,T,R).call(this,s,n);return void 0!==r&&void 0!==i?(e.push(r),t[r.type]=i):e.push(s),[e,t]}),[[],{}]),o=[...i,...n,...r.map((e=>{const[t,s]=u.__privateMethod.call(void 0,this,T,R).call(this,void 0,e);return a[t.type]=s,t}))];return[{...e,...t,...o.length>0?{caveats:o}:{}},a]},T=new WeakSet,R=function(e,t){if(void 0!==e&&e.type!==t.type)throw new(0,o.CaveatMergeTypeMismatchError)(e.type,t.type);const s=u.__privateMethod.call(void 0,this,S,_).call(this,t.type);if(void 0===e)return[{...t},t.value];const[n,r]=s(e.value,t.value);return void 0!==n&&void 0!==r?[{type:t.type,value:n},r]:[]},C=new WeakSet,A=async function({subject:e,metadata:t,preserveExistingPermissions:s,approvedRequest:n}){const{permissions:r,...i}=n,a={...t},o=this.getSideEffects(r);if(Object.values(o.permittedHandlers).length>0){const e=await this.executeSideEffects(o,n);a.data=Object.keys(o.permittedHandlers).reduce(((t,s,n)=>({[s]:e[n],...t})),{})}return[this.grantPermissions({subject:e,approvedPermissions:r,preserveExistingPermissions:s,requestData:i}),a]},s.CaveatMutatorOperation=x,s.PermissionController=P}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-B6PDRQ7N.js"}],[2306,{"./chunk-FYADAA2G.js":2307,"@metamask/json-rpc-engine":1484},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-FYADAA2G.js"),r=e("@metamask/json-rpc-engine");s.getPermissionMiddlewareFactory=function({executeRestrictedMethod:e,getRestrictedMethod:t,isUnrestrictedMethod:s}){return function(i){const{origin:a}=i;if("string"!=typeof a||!a)throw new Error('The subject "origin" must be a non-empty string.');return r.createAsyncMiddleware.call(void 0,(async(r,o,c)=>{const{method:u,params:l}=r;if(s(u))return c();const m=t(u,a),d=await e(m,i,u,l);void 0!==d?o.result=d:o.error=n.internalError.call(void 0,`Request for method "${r.method}" returned undefined result.`,{request:r})}))}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-F5TBMVWC.js"}],[2307,{"@metamask/rpc-errors":1884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/rpc-errors");var r=class extends Error{constructor(e){super(`Invalid subject identifier: "${"string"==typeof e?e:typeof e}"`)}},i=class extends Error{constructor(e){super(`Unrecognized subject: "${e}" has no permissions.`)}},a=class extends Error{constructor(e){super(`Caveat value merger does not exist for type: "${e}"`)}},o=class extends Error{constructor(e,t,s){super(`Invalid merged permissions for subject "${e}":\n${t.message}`),this.cause=t,this.data={diff:s}}},c=class extends Error{constructor(e,t,s){super(`Invalid approved permission for origin "${e}" and target "${t}".`),this.data={origin:e,target:t,approvedPermission:s}}},u=class extends Error{constructor(e,t){super(`Subject "${e}" has no permission for "${t}".`)}},l=class extends Error{constructor(e,t){super(`${t?`Subject "${t}"`:"Unknown subject"} has no permission for "${e}".`),t&&(this.data={origin:t})}},m=class extends Error{constructor(e,t,s){super(`Unrecognized caveat type: "${e}"`),this.data={caveatType:e},void 0!==t&&(this.data.origin=t),void 0!==s&&(this.data.target=s)}},d=class extends Error{constructor(e,t,s){super(`The "caveats" property of permission for "${t}" of subject "${e}" is invalid. It must be a non-empty array if specified.`),this.data={origin:e,target:t,caveatsProperty:s}}},p=class extends Error{constructor(e,t,s){super(`Permission for "${t}" of subject "${e}" has no caveat of type "${s}".`)}},h=class extends Error{constructor(e,t,s){super(`Permission for "${t}" of subject "${e}" already has a caveat of type "${s}".`)}},f=class extends n.JsonRpcError{constructor(e,t,s){super(n.errorCodes.rpc.invalidParams,"Invalid caveat. Caveats must be plain objects.",{receivedCaveat:e}),this.data={origin:t,target:s}}},g=class extends Error{constructor(e,t,s){super(`Caveat types must be strings. Received: "${typeof e.type}"`),this.data={caveat:e,origin:t,target:s}}},v=class extends Error{constructor(e,t,s){super('Caveat is missing "value" field.'),this.data={caveat:e,origin:t,target:s}}},k=class extends Error{constructor(e,t,s){super('Caveat "value" is invalid JSON.'),this.data={caveat:e,origin:t,target:s}}},S=class extends Error{constructor(e,t,s){super(`Caveat has unexpected number of fields: "${Object.keys(e).length}"`),this.data={caveat:e,origin:t,target:s}}},_=class extends Error{constructor(e,t,s){super(`Permissions for target "${s}" may not have caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:s}}},y=class extends Error{constructor(e,t,s){super(`Permissions for target "${s}" contains multiple caveats of type "${e}".`),this.data={caveatType:e,origin:t,target:s}}},b=class extends Error{constructor(e,t){super(`Cannot merge caveats of different types: "${e}" and "${t}".`),this.data={leftCaveatType:e,rightCaveatType:t}}},E=class extends Error{constructor(e,t){super(`Caveat specification uses a mismatched type. Expected caveats for ${t}`),this.data={caveatSpec:e,permissionType:t}}},j=class extends Error{constructor(e){super(`Permissions request with id "${e}" not found.`)}};s.unauthorized=function(e){return n.providerErrors.unauthorized({message:"Unauthorized to perform action. Try requesting the required permission(s) first. For more information, see: https://docs.metamask.io/guide/rpc-api.html#permissions",data:e.data})},s.methodNotFound=function(e,t){const s={message:`The method "${e}" does not exist / is not available.`};return void 0!==t&&(s.data=t),n.rpcErrors.methodNotFound(s)},s.invalidParams=function(e){return n.rpcErrors.invalidParams({data:e.data,message:e.message})},s.userRejectedRequest=function(e){return n.providerErrors.userRejectedRequest({data:e})},s.internalError=function(e,t){return n.rpcErrors.internal({message:e,data:t})},s.InvalidSubjectIdentifierError=r,s.UnrecognizedSubjectError=i,s.CaveatMergerDoesNotExistError=a,s.InvalidMergedPermissionsError=o,s.InvalidApprovedPermissionError=c,s.PermissionDoesNotExistError=u,s.EndowmentPermissionDoesNotExistError=l,s.UnrecognizedCaveatTypeError=m,s.InvalidCaveatsPropertyError=d,s.CaveatDoesNotExistError=p,s.CaveatAlreadyExistsError=h,s.InvalidCaveatError=f,s.InvalidCaveatTypeError=g,s.CaveatMissingValueError=v,s.CaveatInvalidJsonError=k,s.InvalidCaveatFieldsError=S,s.ForbiddenCaveatError=_,s.DuplicateCaveatError=y,s.CaveatMergeTypeMismatchError=b,s.CaveatSpecificationMismatchError=E,s.PermissionsRequestNotFoundError=j}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-FYADAA2G.js"}],[2308,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n={methodNames:["wallet_getPermissions"],implementation:async function(e,t,s,n,{getPermissionsForOrigin:r}){return t.result=Object.values(r()||{}),n()},hookNames:{getPermissionsForOrigin:!0}};s.getPermissionsHandler=n}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-VBIZGGQL.js"}],[2309,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=(e=>(e.RequestPermissions="wallet_requestPermissions",e.GetPermissions="wallet_getPermissions",e.RevokePermissions="wallet_revokePermissions",e))(n||{});s.MethodNames=n,s.collectUniqueAndPairedCaveats=function(e,t){const s=e?.caveats?.slice()??[],n=t.caveats?.slice()??[],r=[],i=[];return s.forEach((e=>{const t=n.findIndex((t=>t.type===e.type));-1===t?r.push(e):(i.push([e,n[t]]),n.splice(t,1))})),{caveatPairs:i,leftUniqueCaveats:r,rightUniqueCaveats:[...n]}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-VQPP5PWS.js"}],[2310,{"@metamask/base-controller":2274},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/base-controller"),r=(e=>(e.Extension="extension",e.Internal="internal",e.Unknown="unknown",e.Website="website",e.Snap="snap",e))(r||{}),i={subjectMetadata:{persist:!0,anonymous:!1}},a={subjectMetadata:{}},o=class e extends n.BaseController{constructor({messenger:t,subjectCacheLimit:s,state:n={}}){if(!Number.isInteger(s)||s<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${s}"`);const r=e=>t.call("PermissionController:hasPermissions",e);super({name:"SubjectMetadataController",metadata:i,messenger:t,state:{...e.getTrimmedState(n,r)}}),this.subjectHasPermissions=r,this.subjectCacheLimit=s,this.subjectsWithoutPermissionsEncounteredSinceStartup=new Set,this.messagingSystem.registerActionHandler(`${this.name}:getSubjectMetadata`,this.getSubjectMetadata.bind(this)),this.messagingSystem.registerActionHandler(`${this.name}:addSubjectMetadata`,this.addSubjectMetadata.bind(this))}clearState(){this.subjectsWithoutPermissionsEncounteredSinceStartup.clear(),this.update((e=>({...a})))}addSubjectMetadata(e){const{origin:t}=e,s={...e,extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null,subjectType:e.subjectType||null};let n=null;if(this.subjectsWithoutPermissionsEncounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEncounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEncounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(n=e)}this.subjectsWithoutPermissionsEncounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=s,"string"==typeof n&&delete e.subjectMetadata[n]}))}getSubjectMetadata(e){return this.state.subjectMetadata[e]}trimMetadataState(){this.update((t=>e.getTrimmedState(t,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:s={}}=e;return{subjectMetadata:Object.keys(s).reduce(((e,n)=>(t(n)&&(e[n]=s[n]),e)),{})}}};s.SubjectType=r,s.SubjectMetadataController=o}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-VSDHL2GQ.js"}],[2311,{"./chunk-FYADAA2G.js":2307,"@metamask/utils":2325},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-FYADAA2G.js"),r=e("@metamask/utils"),i={methodNames:["wallet_revokePermissions"],implementation:async function(e,t,s,i,{revokePermissionsForOrigin:a}){const{params:o}=e,c=o?.[0];if(!c)return i(n.invalidParams.call(void 0,{data:{request:e}}));const u=Object.keys(c);if(!r.isNonEmptyArray.call(void 0,u))return i(n.invalidParams.call(void 0,{data:{request:e}}));return a(u),t.result=null,i()},hookNames:{revokePermissionsForOrigin:!0}};s.revokePermissionsHandler=i}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-X4ZAW4QR.js"}],[2312,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=Object.defineProperty;s.__export=(e,t)=>{for(var s in t)n(e,s,{get:t[s],enumerable:!0})},s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateMethod=(e,t,s)=>(((e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)})(e,t,"access private method"),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-Z2XKIXLS.js"}],[2313,{nanoid:2395},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("nanoid");var r=(e=>(e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment",e))(r||{});s.constructPermission=function(e){const{caveats:t=null,invoker:s,target:r}=e;return{id:n.nanoid.call(void 0),parentCapability:r,invoker:s,caveats:t,date:(new Date).getTime()}},s.findCaveat=function(e,t){return e.caveats?.find((e=>e.type===t))},s.PermissionType=r,s.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/chunk-ZH4MLSXX.js"}],[2314,{"./chunk-3YOPLPVY.js":2302,"./chunk-6PXDVUYM.js":2303,"./chunk-7A3VYLCK.js":2304,"./chunk-B6PDRQ7N.js":2305,"./chunk-F5TBMVWC.js":2306,"./chunk-FYADAA2G.js":2307,"./chunk-VBIZGGQL.js":2308,"./chunk-VQPP5PWS.js":2309,"./chunk-VSDHL2GQ.js":2310,"./chunk-X4ZAW4QR.js":2311,"./chunk-Z2XKIXLS.js":2312,"./chunk-ZH4MLSXX.js":2313},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-6PXDVUYM.js");e("./chunk-VBIZGGQL.js"),e("./chunk-7A3VYLCK.js"),e("./chunk-X4ZAW4QR.js");var r=e("./chunk-B6PDRQ7N.js"),i=e("./chunk-3YOPLPVY.js"),a=e("./chunk-ZH4MLSXX.js"),o=e("./chunk-VSDHL2GQ.js");e("./chunk-F5TBMVWC.js");var c=e("./chunk-FYADAA2G.js"),u=e("./chunk-VQPP5PWS.js");e("./chunk-Z2XKIXLS.js"),s.CaveatAlreadyExistsError=c.CaveatAlreadyExistsError,s.CaveatDoesNotExistError=c.CaveatDoesNotExistError,s.CaveatInvalidJsonError=c.CaveatInvalidJsonError,s.CaveatMergeTypeMismatchError=c.CaveatMergeTypeMismatchError,s.CaveatMergerDoesNotExistError=c.CaveatMergerDoesNotExistError,s.CaveatMissingValueError=c.CaveatMissingValueError,s.CaveatMutatorOperation=r.CaveatMutatorOperation,s.CaveatSpecificationMismatchError=c.CaveatSpecificationMismatchError,s.DuplicateCaveatError=c.DuplicateCaveatError,s.EndowmentPermissionDoesNotExistError=c.EndowmentPermissionDoesNotExistError,s.ForbiddenCaveatError=c.ForbiddenCaveatError,s.InvalidApprovedPermissionError=c.InvalidApprovedPermissionError,s.InvalidCaveatError=c.InvalidCaveatError,s.InvalidCaveatFieldsError=c.InvalidCaveatFieldsError,s.InvalidCaveatTypeError=c.InvalidCaveatTypeError,s.InvalidCaveatsPropertyError=c.InvalidCaveatsPropertyError,s.InvalidMergedPermissionsError=c.InvalidMergedPermissionsError,s.InvalidSubjectIdentifierError=c.InvalidSubjectIdentifierError,s.MethodNames=u.MethodNames,s.PermissionController=r.PermissionController,s.PermissionDoesNotExistError=c.PermissionDoesNotExistError,s.PermissionType=a.PermissionType,s.PermissionsRequestNotFoundError=c.PermissionsRequestNotFoundError,s.SubjectMetadataController=o.SubjectMetadataController,s.SubjectType=o.SubjectType,s.UnrecognizedCaveatTypeError=c.UnrecognizedCaveatTypeError,s.UnrecognizedSubjectError=c.UnrecognizedSubjectError,s.constructPermission=a.constructPermission,s.decorateWithCaveats=i.decorateWithCaveats,s.findCaveat=a.findCaveat,s.hasSpecificationType=a.hasSpecificationType,s.internalError=c.internalError,s.invalidParams=c.invalidParams,s.isRestrictedMethodCaveatSpecification=i.isRestrictedMethodCaveatSpecification,s.methodNotFound=c.methodNotFound,s.permissionRpcMethods=n.rpc_methods_exports,s.unauthorized=c.unauthorized,s.userRejectedRequest=c.userRejectedRequest}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/dist/index.js"}],[2315,{"./errors.cjs":2323,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const n=e("@metamask/superstruct"),r=e("./errors.cjs");function i(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=a,s.assert=function(e,t="Assertion failed.",s=a){if(!e){if(t instanceof Error)throw t;throw i(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${s}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/assert.cjs"}],[2316,{"./assert.cjs":2315,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/base64.cjs"}],[2317,{"./assert.cjs":2315,"./hex.cjs":2324,"@scure/base":2797,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const n=e("@scure/base"),r=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function m(e){(0,r.assert)(l(e),"Value must be a Uint8Array.")}function d(e){if(m(e),0===e.length)return"0x";const t=u(),s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=t[e[n]];return(0,i.add0x)(s.join(""))}function p(e){m(e);const t=d(e);return BigInt(t)}function h(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,n=new Uint8Array(s.length/2);for(let e=0;e<n.length;e++){const t=s.charCodeAt(2*e),r=s.charCodeAt(2*e+1),i=t-(t<o?a:c),u=r-(r<o?a:c);n[e]=16*i+u}return n}function f(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return h(e.toString(16))}function g(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return h(e.toString(16))}function v(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function k(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?h(e):v(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=l,s.assertIsBytes=m,s.bytesToHex=d,s.bytesToBigInt=p,s.bytesToSignedBigInt=function(e){m(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){m(e);const t=p(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return m(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return m(e),n.base64.encode(e)},s.hexToBytes=h,s.bigIntToBytes=f,s.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return n.reverse()},s.numberToBytes=g,s.stringToBytes=v,s.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},s.valueToBytes=k,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let n=0;n<e.length;n++){const r=k(e[n]);t[n]=r,s+=r.length}const n=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)n.set(t[e],s),s+=t[e].length;return n},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/bytes.cjs"}],[2318,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function r(e){return(0,n.is)(e,s.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,n.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=r,s.isCaipReference=i,s.isCaipAccountId=function(e){return(0,n.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,n.is)(e,s.CaipAccountAddressStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!r(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2319,{"./base64.cjs":2316,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),r=e("./base64.cjs");s.ChecksumStruct=(0,n.size)((0,r.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/checksum.cjs"}],[2320,{"./assert.cjs":2315,"./bytes.cjs":2317,"./hex.cjs":2324,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),m=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);s.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,m)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/coercers.cjs"}],[2321,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/collections.cjs"}],[2322,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2323,{"./misc.cjs":2329,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const n=e("pony-cause"),r=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=i,s.isErrorWithMessage=a,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,r.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/errors.cjs"}],[2324,{"./assert.cjs":2315,"./bytes.cjs":2317,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const n=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,s.HexStruct)}function c(e){return(0,n.is)(e,s.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=m(e.toLowerCase()),o=m((0,a.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,i.assert)((0,n.is)(s,(0,n.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,s.HexChecksumAddressStruct)&&u(e)===e}function m(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,n.is)(e,s.HexAddressStruct)||l(e)},s.getChecksumAddress=u,s.isValidChecksumAddress=l,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=m}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/hex.cjs"}],[2325,{"./assert.cjs":2315,"./base64.cjs":2316,"./bytes.cjs":2317,"./caip-types.cjs":2318,"./checksum.cjs":2319,"./coercers.cjs":2320,"./collections.cjs":2321,"./encryption-types.cjs":2322,"./errors.cjs":2323,"./hex.cjs":2324,"./json.cjs":2326,"./keyring.cjs":2327,"./logging.cjs":2328,"./misc.cjs":2329,"./number.cjs":2330,"./opaque.cjs":2331,"./promise.cjs":2332,"./time.cjs":2333,"./transaction-types.cjs":2334,"./versions.cjs":2335},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./assert.cjs"),s),r(e("./base64.cjs"),s),r(e("./bytes.cjs"),s),r(e("./caip-types.cjs"),s),r(e("./checksum.cjs"),s),r(e("./coercers.cjs"),s),r(e("./collections.cjs"),s),r(e("./encryption-types.cjs"),s),r(e("./errors.cjs"),s),r(e("./hex.cjs"),s),r(e("./json.cjs"),s),r(e("./keyring.cjs"),s),r(e("./logging.cjs"),s),r(e("./misc.cjs"),s),r(e("./number.cjs"),s),r(e("./opaque.cjs"),s),r(e("./promise.cjs"),s),r(e("./time.cjs"),s),r(e("./transaction-types.cjs"),s),r(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/index.cjs"}],[2326,{"./assert.cjs":2315,"./misc.cjs":2329,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const s=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],s)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!a(s)||e.validator(t,s),refiner:(t,s)=>!a(s)||e.refiner(t,s)})}s.object=e=>(0,n.object)(e),s.exactOptional=o;function c(e){return(0,n.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>s.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,n.coerce)(s.UnsafeJsonStruct,(0,n.any)(),(e=>((0,r.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,r.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,n.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(s.JsonStruct),stack:o((0,n.string)())}),s.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),s.JsonStruct),(0,n.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,n.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,n.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,n.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,n.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,n.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,n.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,n.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,n.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/json.cjs"}],[2327,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/keyring.cjs"}],[2328,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const r=(0,n(e("debug")).default)("metamask");s.createProjectLogger=function(e){return r.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/logging.cjs"}],[2329,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=n,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/misc.cjs"}],[2330,{"./assert.cjs":2315,"./hex.cjs":2324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const n=e("./assert.cjs"),r=e("./hex.cjs");s.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/number.cjs"}],[2331,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/opaque.cjs"}],[2332,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const n=new Promise(((e,n)=>{t=e,s=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:s}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/promise.cjs"}],[2333,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return n(e,"count"),e*t},s.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/time.cjs"}],[2334,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2335,{"./assert.cjs":2315,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const n=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");s.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,n.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,n.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,r.gt)(e,t)},s.gtRange=function(e,t){return(0,r.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/permission-controller>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/permission-controller/node_modules/@metamask/utils/dist/versions.cjs"}],[2336,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-4CMD46B2.js"}],[2337,{"@metamask/superstruct":2618,"@metamask/utils":2384,"cron-parser":3618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/superstruct"),r=e("@metamask/utils"),i=e("cron-parser"),a=n.object.call(void 0,{jsonrpc:n.optional.call(void 0,r.JsonRpcVersionStruct),id:n.optional.call(void 0,r.JsonRpcIdStruct),method:n.string.call(void 0),params:n.optional.call(void 0,r.JsonRpcParamsStruct)}),o=n.refine.call(void 0,n.string.call(void 0),"CronExpression",(e=>{try{return i.parseExpression.call(void 0,e),!0}catch{return!1}}));var c=n.object.call(void 0,{expression:o,request:a});var u=n.array.call(void 0,c);s.CronjobRpcRequestStruct=a,s.CronExpressionStruct=o,s.parseCronExpression=function(e){const t=n.create.call(void 0,e,o);return i.parseExpression.call(void 0,t)},s.CronjobSpecificationStruct=c,s.isCronjobSpecification=function(e){try{return n.create.call(void 0,e,c),!0}catch{return!1}},s.CronjobSpecificationArrayStruct=u,s.isCronjobSpecificationArray=function(e){try{return n.create.call(void 0,e,u),!0}catch{return!1}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-4ZJOU3LR.js"}],[2338,{"./chunk-4ZJOU3LR.js":2337,"./chunk-LOJA2ZS4.js":2354,"./chunk-PZNIU23I.js":2361,"./chunk-RD6BN2TQ.js":2363,"./chunk-T2VA4YJE.js":2365,"./chunk-T3YY4JIJ.js":2367,"./chunk-VOPTAKVG.js":2369,"./chunk-ZT3KKTS2.js":2372,"@metamask/key-tree":1523,"@metamask/superstruct":2618,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-RD6BN2TQ.js"),r=e("./chunk-VOPTAKVG.js"),i=e("./chunk-PZNIU23I.js"),a=e("./chunk-LOJA2ZS4.js"),o=e("./chunk-T2VA4YJE.js"),c=e("./chunk-ZT3KKTS2.js"),u=e("./chunk-T3YY4JIJ.js"),l=e("./chunk-4ZJOU3LR.js"),m=e("@metamask/key-tree"),d=e("@metamask/superstruct"),p=e("@metamask/utils"),h=[c.SIP_6_MAGIC_VALUE,c.STATE_ENCRYPTION_MAGIC_VALUE],f=[60],g=f.map((e=>["m","44'",`${e}'`])),v=d.refine.call(void 0,d.array.call(void 0,d.string.call(void 0)),"BIP-32 path",(e=>0===e.length?"Path must be a non-empty BIP-32 derivation path array":"m"!==e[0]?'Path must start with "m".':e.length<3?"Paths must have a length of at least three.":e.slice(1).some((e=>!m.isValidBIP32PathSegment.call(void 0,e)))?"Path must be a valid BIP-32 derivation path array.":h.includes(e[1])?`The purpose "${e[1]}" is not allowed for entropy derivation.`:!g.some((t=>u.isEqual.call(void 0,e.slice(0,t.length),t)))||`The path "${e.join("/")}" is not allowed for entropy derivation.`)),k=e=>d.refine.call(void 0,e,"BIP-32 entropy",(e=>"ed25519"!==e.curve||!e.path.slice(1).some((e=>!e.endsWith("'")))||"Ed25519 does not support unhardened paths.")),S=d.enums.call(void 0,["ed25519","secp256k1","ed25519Bip32"]),_=k(d.type.call(void 0,{path:v,curve:S})),y=d.size.call(void 0,d.array.call(void 0,_),1,Infinity),b=d.refine.call(void 0,d.string.call(void 0),"SemVer range",(e=>!!p.isValidSemVerRange.call(void 0,e)||"Expected a valid SemVer range.")),E=d.refine.call(void 0,d.record.call(void 0,n.SnapIdStruct,d.object.call(void 0,{version:d.optional.call(void 0,b)})),"SnapIds",(e=>0!==Object.keys(e).length)),j=d.size.call(void 0,d.array.call(void 0,a.ChainIdStruct),1,Infinity),w=d.union.call(void 0,[d.object.call(void 0,{tlds:d.size.call(void 0,d.array.call(void 0,d.string.call(void 0)),1,Infinity)}),d.object.call(void 0,{schemes:d.size.call(void 0,d.array.call(void 0,d.string.call(void 0)),1,Infinity)}),d.object.call(void 0,{tlds:d.size.call(void 0,d.array.call(void 0,d.string.call(void 0)),1,Infinity),schemes:d.size.call(void 0,d.array.call(void 0,d.string.call(void 0)),1,Infinity)})]),I=p.inMilliseconds.call(void 0,5,p.Duration.Second),T=p.inMilliseconds.call(void 0,3,p.Duration.Minute),R=d.size.call(void 0,d.integer.call(void 0),I,T),C=d.object.call(void 0,{maxRequestTime:d.optional.call(void 0,R)}),A=d.object.call(void 0,{}),x=d.type.call(void 0,{"endowment:cronjob":d.optional.call(void 0,r.mergeStructs.call(void 0,C,d.object.call(void 0,{jobs:l.CronjobSpecificationArrayStruct}))),"endowment:ethereum-provider":d.optional.call(void 0,A),"endowment:keyring":d.optional.call(void 0,r.mergeStructs.call(void 0,C,o.KeyringOriginsStruct)),"endowment:lifecycle-hooks":d.optional.call(void 0,C),"endowment:name-lookup":d.optional.call(void 0,r.mergeStructs.call(void 0,C,d.object.call(void 0,{chains:d.optional.call(void 0,j),matchers:d.optional.call(void 0,w)}))),"endowment:network-access":d.optional.call(void 0,A),"endowment:page-home":d.optional.call(void 0,C),"endowment:rpc":d.optional.call(void 0,r.mergeStructs.call(void 0,C,o.RpcOriginsStruct)),"endowment:signature-insight":d.optional.call(void 0,r.mergeStructs.call(void 0,C,d.object.call(void 0,{allowSignatureOrigin:d.optional.call(void 0,d.boolean.call(void 0))}))),"endowment:transaction-insight":d.optional.call(void 0,r.mergeStructs.call(void 0,C,d.object.call(void 0,{allowTransactionOrigin:d.optional.call(void 0,d.boolean.call(void 0))}))),"endowment:webassembly":d.optional.call(void 0,A),snap_dialog:d.optional.call(void 0,A),snap_manageState:d.optional.call(void 0,A),snap_manageAccounts:d.optional.call(void 0,A),snap_notify:d.optional.call(void 0,A),snap_getBip32Entropy:d.optional.call(void 0,y),snap_getBip32PublicKey:d.optional.call(void 0,y),snap_getBip44Entropy:d.optional.call(void 0,d.size.call(void 0,d.array.call(void 0,d.object.call(void 0,{coinType:d.size.call(void 0,d.integer.call(void 0),0,2**32-1)})),1,Infinity)),snap_getEntropy:d.optional.call(void 0,A),snap_getLocale:d.optional.call(void 0,A),wallet_snap:d.optional.call(void 0,E)}),P=d.array.call(void 0,d.string.call(void 0)),N=d.record.call(void 0,d.intersection.call(void 0,[d.string.call(void 0),i.uri.call(void 0)]),d.object.call(void 0,{})),O=d.object.call(void 0,{version:p.VersionStruct,description:d.size.call(void 0,d.string.call(void 0),1,280),proposedName:d.size.call(void 0,d.string.call(void 0),1,214),repository:d.optional.call(void 0,d.object.call(void 0,{type:d.size.call(void 0,d.string.call(void 0),1,Infinity),url:d.size.call(void 0,d.string.call(void 0),1,Infinity)})),source:d.object.call(void 0,{shasum:p.ChecksumStruct,location:d.object.call(void 0,{npm:d.object.call(void 0,{filePath:d.size.call(void 0,d.string.call(void 0),1,Infinity),iconPath:d.optional.call(void 0,d.size.call(void 0,d.string.call(void 0),1,Infinity)),packageName:i.NameStruct,registry:d.union.call(void 0,[d.literal.call(void 0,"https://registry.npmjs.org"),d.literal.call(void 0,"https://registry.npmjs.org/")])})}),files:d.optional.call(void 0,P),locales:d.optional.call(void 0,P)}),initialConnections:d.optional.call(void 0,N),initialPermissions:x,manifestVersion:d.literal.call(void 0,"0.1"),$schema:d.optional.call(void 0,d.string.call(void 0))});s.FORBIDDEN_COIN_TYPES=f,s.Bip32PathStruct=v,s.bip32entropy=k,s.CurveStruct=S,s.Bip32EntropyStruct=_,s.SnapGetBip32EntropyPermissionsStruct=y,s.SemVerRangeStruct=b,s.SnapIdsStruct=E,s.ChainIdsStruct=j,s.LookupMatchersStruct=w,s.MINIMUM_REQUEST_TIMEOUT=I,s.MAXIMUM_REQUEST_TIMEOUT=T,s.MaxRequestTimeStruct=R,s.HandlerCaveatsStruct=C,s.EmptyObjectStruct=A,s.PermissionsStruct=x,s.SnapAuxilaryFilesStruct=P,s.InitialConnectionsStruct=N,s.SnapManifestStruct=O,s.isSnapManifest=function(e){return d.is.call(void 0,e,O)},s.assertIsSnapManifest=function(e){p.assertStruct.call(void 0,e,O,'"snap.manifest.json" is invalid')},s.createSnapManifest=function(e){return d.create.call(void 0,e,O)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-5I5WPAVD.js"}],[2339,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});s.MAX_FILE_SIZE=64e6}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-5WKQI22S.js"}],[2340,{"@metamask/snaps-sdk":2575,"@metamask/snaps-sdk/jsx":2579,"@metamask/snaps-sdk/jsx-runtime":2578,"@metamask/utils":2384,marked:4330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/snaps-sdk"),r=e("@metamask/snaps-sdk/jsx"),i=e("@metamask/utils"),a=e("marked"),o=e("@metamask/snaps-sdk/jsx-runtime"),c=5e4,u=["https:","mailto:"];function l(e){switch(e){case"primary":return"primary";case"secondary":return"destructive";default:return}}function m(e){return 1===e.length?e[0]:e}function d(e){return e.tokens&&e.tokens.length>0?m(e.tokens.flatMap(h)):e.href}function p(e){return m(e.flatMap(h))}function h(e){switch(e.type){case"link":return o.jsx.call(void 0,r.Link,{href:e.href,children:d(e)});case"text":return e.text;case"strong":return o.jsx.call(void 0,r.Bold,{children:p(e.tokens)});case"em":return o.jsx.call(void 0,r.Italic,{children:p(e.tokens)});default:return null}}function f(e){const t=a.lexer.call(void 0,e,{gfm:!1}),s=[];return a.walkTokens.call(void 0,t,(e=>{if("paragraph"===e.type){s.length>0&&s.push("\n\n");const{tokens:t}=e;s.push(...t.flatMap(h))}})),s.filter((e=>null!==e))}function g(e,t){try{const s=new URL(e);i.assert.call(void 0,u.includes(s.protocol),`Protocol must be one of: ${u.join(", ")}.`);const n="mailto:"===s.protocol?s.pathname.split("@")[1]:s.hostname;i.assert.call(void 0,!t(n),"The specified URL is not allowed.")}catch(e){throw new Error(`Invalid URL: ${e instanceof i.AssertionError?e.message:"Unable to parse URL."}`)}}function v(e){const{type:t}=e;switch(t){case n.NodeType.Panel:return e.children.reduce(((e,t)=>e+v(t)),0);case n.NodeType.Row:return v(e.value);case n.NodeType.Text:return e.value.length;default:return 0}}function k(e){return i.hasProperty.call(void 0,e.props,"children")}function S(e){return Boolean(e)&&!0!==e}function _(e){if(k(e)){if(Array.isArray(e.props.children))return e.props.children.filter(S).flat(Infinity);if(e.props.children)return[e.props.children]}return[]}function y(e,t,s=0){if(Array.isArray(e)){for(const n of e){const e=y(n,t,s);if(void 0!==e)return e}return}const n=t(e,s);if(void 0!==n)return n;if(i.hasProperty.call(void 0,e,"props")&&i.isPlainObject.call(void 0,e.props)&&i.hasProperty.call(void 0,e.props,"children")){const n=_(e);for(const e of n)if(i.isPlainObject.call(void 0,e)){const n=y(e,t,s+1);if(void 0!==n)return n}}}function b(e){return Object.entries(e).filter((([e])=>"children"!==e)).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>{return` ${e}=${s=t,"string"==typeof s?`"${s}"`:`{${JSON.stringify(s)}}`}`;var s})).join("")}s.getTextChildren=f,s.getJsxElementFromComponent=function(e){return function(e){const t=v(e);i.assert.call(void 0,t<=c,`The text in a Snap UI may not be larger than ${c/1e3} kB.`)}(e),function e(t){switch(t.type){case n.NodeType.Address:return o.jsx.call(void 0,r.Address,{address:t.value});case n.NodeType.Button:return o.jsx.call(void 0,r.Button,{name:t.name,variant:l(t.variant),type:t.buttonType,children:t.value});case n.NodeType.Copyable:return o.jsx.call(void 0,r.Copyable,{value:t.value,sensitive:t.sensitive});case n.NodeType.Divider:return o.jsx.call(void 0,r.Divider,{});case n.NodeType.Form:return o.jsx.call(void 0,r.Form,{name:t.name,children:m(t.children.map(e))});case n.NodeType.Heading:return o.jsx.call(void 0,r.Heading,{children:t.value});case n.NodeType.Image:return o.jsx.call(void 0,r.Image,{src:t.value});case n.NodeType.Input:return o.jsx.call(void 0,r.Field,{label:t.label,error:t.error,children:o.jsx.call(void 0,r.Input,{name:t.name,type:t.inputType,value:t.value,placeholder:t.placeholder})});case n.NodeType.Panel:return o.jsx.call(void 0,r.Box,{children:m(t.children.map(e))});case n.NodeType.Row:return o.jsx.call(void 0,r.Row,{label:t.label,variant:t.variant,children:e(t.value)});case n.NodeType.Spinner:return o.jsx.call(void 0,r.Spinner,{});case n.NodeType.Text:return o.jsx.call(void 0,r.Text,{children:m(f(t.value))});default:return i.assertExhaustive.call(void 0,t)}}(e)},s.validateTextLinks=function(e,t){const s=function(e){const t=a.lexer.call(void 0,e,{gfm:!1}),s=[];return a.walkTokens.call(void 0,t,(e=>{"link"===e.type&&s.push(e)})),s}(e);for(const e of s)g(e.href,t)},s.validateJsxLinks=function(e,t){y(e,(e=>{"Link"===e.type&&g(e.props.href,t)}))},s.getTotalTextLength=v,s.hasChildren=k,s.getJsxChildren=_,s.walkJsx=y,s.serialiseJsx=function e(t,s=0){if(Array.isArray(t))return t.map((t=>e(t,s))).join("");const n="  ".repeat(s);if("string"==typeof t)return`${n}${t}\n`;if(!t)return"";const{type:r,props:a}=t,o=s>0?"\n":"";if(i.hasProperty.call(void 0,a,"children")){const t=e(a.children,s+1);return`${n}<${r}${b(a)}>\n${t}${n}</${r}>${o}`}return`${n}<${r}${b(a)} />${o}`}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-6ATNGN44.js"}],[2341,{"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/utils");s.parseJson=function(e){return n.getSafeJson.call(void 0,JSON.parse(e))},s.getJsonSizeUnsafe=function(e){const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-7VJ2BOVU.js"}],[2342,{"./chunk-UAINMOUU.js":2368,"@metamask/utils":2384,"@noble/hashes/sha256":2778},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-UAINMOUU.js"),r=e("@metamask/utils"),i=e("@noble/hashes/sha256");async function a(e){const t=n.getBytes.call(void 0,e);return"crypto"in globalThis&&"object"==typeof globalThis.crypto&&crypto.subtle?.digest?new Uint8Array(await crypto.subtle.digest("SHA-256",t)):i.sha256.call(void 0,t)}s.checksum=a,s.checksumFiles=async function(e){const t=await Promise.all([...e].sort(((e,t)=>(r.assert.call(void 0,e.path!==t.path,"Tried to sort files with non-unique paths."),e.path<t.path?-1:1))).map((async e=>a(e))));return a(r.concatBytes.call(void 0,t))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-AMW2VJ3N.js"}],[2343,{"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/utils");s.normalizeRelative=function(e){return n.assert.call(void 0,!e.startsWith("/")),n.assert.call(void 0,-1===e.search(/:|\/\//u),`Path "${e}" potentially an URI instead of local relative`),e.startsWith("./")?e.slice(2):e}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-AOGVLPQZ.js"}],[2344,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=(e=>(e.PermittedDerivationPaths="permittedDerivationPaths",e.PermittedCoinTypes="permittedCoinTypes",e.SnapCronjob="snapCronjob",e.TransactionOrigin="transactionOrigin",e.SignatureOrigin="signatureOrigin",e.RpcOrigin="rpcOrigin",e.KeyringOrigin="keyringOrigin",e.SnapIds="snapIds",e.ChainIds="chainIds",e.LookupMatchers="lookupMatchers",e.MaxRequestTime="maxRequestTime",e))(n||{});s.SnapCaveatType=n}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-ASZWZ7JT.js"}],[2345,{"./chunk-7VJ2BOVU.js":2341,"@metamask/snaps-sdk":2575,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-7VJ2BOVU.js"),r=e("@metamask/snaps-sdk"),i=e("@metamask/superstruct"),a=["description","proposedName"],o=i.object.call(void 0,{locale:i.string.call(void 0),messages:i.record.call(void 0,i.string.call(void 0),i.object.call(void 0,{message:i.string.call(void 0),description:i.optional.call(void 0,i.string.call(void 0))}))});function c(e,t){const s=t.find((t=>t.locale===e));return s||t.find((e=>"en"===e.locale))}var u=/\{\{\s?([a-zA-Z0-9-_\s]+)\s?\}\}/gu;function l(e,t){const s=e.matchAll(u);return Array.from(s).reduce(((s,[n,r])=>{if(!t)throw new Error(`Failed to translate "${e}": No localization file found.`);const i=t.messages[r.trim()];if(!i)throw new Error(`Failed to translate "${e}": No translation found for "${r.trim()}" in "${t.locale}" file.`);return s.replace(n,i.message)}),e)}function m(e,t,s){const n=c(t,s);return a.reduce(((e,t)=>{const s=l(e[t],n);return{...e,[t]:s}}),e)}s.LOCALIZABLE_FIELDS=a,s.LocalizationFileStruct=o,s.getValidatedLocalizationFiles=function(e){for(const t of e)try{t.result=i.create.call(void 0,n.parseJson.call(void 0,t.toString()),o)}catch(e){if(e instanceof i.StructError)throw new Error(`Failed to validate localization file "${t.path}": ${e.message}.`);if(e instanceof SyntaxError)throw new Error(`Failed to parse localization file "${t.path}" as JSON.`);throw e}return e},s.getLocalizationFile=c,s.TRANSLATION_REGEX=u,s.translate=l,s.getLocalizedSnapManifest=m,s.validateSnapManifestLocalizations=function(e,t){try{t.filter((e=>"en"!==e.locale)).forEach((s=>{m(e,s.locale,t)})),m(e,"en",t)}catch(e){throw new Error(`Failed to localize Snap manifest: ${r.getErrorMessage.call(void 0,e)}`)}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-B5GNTDE2.js"}],[2346,{"./chunk-NUCLSR2G.js":2356,"@metamask/utils":2384,"@scure/base":2797},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-NUCLSR2G.js"),r=e("@metamask/utils"),i=e("@scure/base");s.VirtualFile=class e{constructor(e){let t;t="string"==typeof e||e instanceof Uint8Array?{value:e}:e,this.value=t?.value??"",this.result=t?.result??void 0,this.data=t?.data??{},this.path=t?.path??"/"}get size(){return"string"==typeof this.value?this.value.length:this.value.byteLength}toString(e){if("string"==typeof this.value)return r.assert.call(void 0,void 0===e,"Tried to encode string."),this.value;if(this.value instanceof Uint8Array&&"hex"===e)return r.bytesToHex.call(void 0,this.value);if(this.value instanceof Uint8Array&&"base64"===e)return i.base64.encode(this.value);return new TextDecoder(e).decode(this.value)}clone(){const t=new e;return"string"==typeof this.value?t.value=this.value:t.value=this.value.slice(0),t.result=n.deepClone.call(void 0,this.result),t.data=n.deepClone.call(void 0,this.data),t.path=this.path,t}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-DEQUNIME.js"}],[2347,{"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/utils").createProjectLogger.call(void 0,"snaps");s.snapsLogger=n,s.logInfo=function(e,...t){console.log(e,...t)},s.logError=function(e,...t){console.error(e,...t)},s.logWarning=function(e,...t){console.warn(e,...t)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-E3BDBG6T.js"}],[2348,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-F6G67XQ4.js"}],[2349,{"./chunk-T3YY4JIJ.js":2367,"@metamask/slip44":1943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r=e("./chunk-T3YY4JIJ.js"),i=e("@metamask/slip44"),a=(n=i)&&n.__esModule?n:{default:n},o=[{path:["m","44'","0'"],curve:"ed25519",name:"Test BIP-32 Path (ed25519)"},{path:["m","44'","1'"],curve:"secp256k1",name:"Testnet"},{path:["m","44'","0'"],curve:"secp256k1",name:"Bitcoin Legacy"},{path:["m","49'","0'"],curve:"secp256k1",name:"Bitcoin Nested SegWit"},{path:["m","49'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Nested SegWit"},{path:["m","84'","0'"],curve:"secp256k1",name:"Bitcoin Native SegWit"},{path:["m","84'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Native SegWit"},{path:["m","44'","501'"],curve:"ed25519",name:"Solana"},{path:["m","44'","501'","0'","0'"],curve:"ed25519",name:"Solana"},{path:["m","44'","2'"],curve:"secp256k1",name:"Litecoin"},{path:["m","44'","3'"],curve:"secp256k1",name:"Dogecoin"},{path:["m","44'","60'"],curve:"secp256k1",name:"Ethereum"},{path:["m","44'","118'"],curve:"secp256k1",name:"Atom"},{path:["m","44'","145'"],curve:"secp256k1",name:"Bitcoin Cash"},{path:["m","44'","637'"],curve:"ed25519",name:"Aptos"},{path:["m","44'","714'"],curve:"secp256k1",name:"Binance (BNB)"},{path:["m","44'","784'"],curve:"ed25519",name:"Sui"},{path:["m","44'","931'"],curve:"secp256k1",name:"THORChain (RUNE)"},{path:["m","44'","330'"],curve:"secp256k1",name:"Terra (LUNA)"},{path:["m","44'","459'"],curve:"secp256k1",name:"Kava"},{path:["m","44'","529'"],curve:"secp256k1",name:"Secret Network"},{path:["m","44'","397'","0'"],curve:"ed25519",name:"NEAR Protocol"},{path:["m","44'","1'","0'"],curve:"ed25519",name:"Testnet"},{path:["m","44'","472'"],curve:"ed25519",name:"Arweave"},{path:["m","44'","12586'"],curve:"secp256k1",name:"Mina"},{path:["m","44'","242'"],curve:"ed25519",name:"Nimiq"},{path:["m","44'","1729'","0'","0'"],curve:"ed25519",name:"Tezos"},{path:["m","1789'","0'"],curve:"ed25519",name:"Vega"},{path:["m","1852'","1815'"],curve:"ed25519Bip32",name:"Cardano"},{path:["m","44'","508'","0'","0'","0'"],curve:"ed25519",name:"MultiversX"},{path:["m","44'","709'"],curve:"secp256k1",name:"Avail"}];function c(e){return"1"===String(e)?"Test Networks":a.default[e]?.name??null}s.SNAPS_DERIVATION_PATHS=o,s.getSnapDerivationPathName=function(e,t){const s=o.find((s=>s.curve===t&&r.isEqual.call(void 0,s.path,e)));if(s)return s.name;if("secp256k1"===t&&"m"===e[0]&&"44'"===e[1]&&e[2].endsWith("'")){return c(e[2].slice(0,-1))??null}return null},s.getSlip44ProtocolName=c}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-FBZ5SU7X.js"}],[2350,{"@metamask/superstruct":2618,"@metamask/utils":2384,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/superstruct"),r=e("@metamask/utils"),i=e("semver");s.DEFAULT_REQUESTED_SNAP_VERSION="*",s.getTargetVersion=function(e,t){const s=i.maxSatisfying.call(void 0,e,t);return s||i.maxSatisfying.call(void 0,e,t,{includePrerelease:!0})},s.resolveVersionRange=function(e){return void 0===e||"latest"===e?[void 0,"*"]:n.validate.call(void 0,e,r.VersionRangeStruct)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-I2SWLZ34.js"}],[2351,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.indent=function(e,t=2){return e.replace(/^/gmu," ".repeat(t))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-IJX3CXOY.js"}],[2352,{"./chunk-PHUTP7NB.js":2358,"@metamask/rpc-errors":1884,"@metamask/snaps-sdk":2575,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r,i,a=e("./chunk-PHUTP7NB.js"),o=e("@metamask/rpc-errors"),c=e("@metamask/snaps-sdk"),u=e("@metamask/utils"),l=-31001,m="Wrapped Snap Error",d=class extends Error{constructor(e){const t=c.getErrorMessage.call(void 0,e);super(t),a.__privateAdd.call(void 0,this,n,void 0),a.__privateAdd.call(void 0,this,r,void 0),a.__privateAdd.call(void 0,this,i,void 0),a.__privateSet.call(void 0,this,n,e),a.__privateSet.call(void 0,this,r,t),a.__privateSet.call(void 0,this,i,c.getErrorStack.call(void 0,e))}get name(){return"WrappedSnapError"}get message(){return a.__privateGet.call(void 0,this,r)}get stack(){return a.__privateGet.call(void 0,this,i)}toJSON(){const e=p(a.__privateGet.call(void 0,this,n))?a.__privateGet.call(void 0,this,n).serialize():o.serializeCause.call(void 0,a.__privateGet.call(void 0,this,n));return{code:l,message:m,data:{cause:e}}}serialize(){return this.toJSON()}};function p(e){if(u.isObject.call(void 0,e)&&"serialize"in e&&"function"==typeof e.serialize){const t=e.serialize();return u.isJsonRpcError.call(void 0,t)&&h(t)}return!1}function h(e){return e.code===c.SNAP_ERROR_CODE&&e.message===c.SNAP_ERROR_MESSAGE}function f(e){return u.isJsonRpcError.call(void 0,e)&&e.code===l&&e.message===m}function g(e,t,s,n){const r=new(0,o.JsonRpcError)(e,t,n);return r.stack=s,r}n=new WeakMap,r=new WeakMap,i=new WeakMap,s.SNAP_ERROR_WRAPPER_CODE=l,s.SNAP_ERROR_WRAPPER_MESSAGE=m,s.WrappedSnapError=d,s.isSnapError=p,s.isSerializedSnapError=h,s.isWrappedSnapError=f,s.unwrapError=function(e){if(f(e)){if(u.isJsonRpcError.call(void 0,e.data.cause)){if(h(e.data.cause)){const{code:t,message:s,stack:n,data:r}=e.data.cause.data.cause;return[g(t,s,n,r),!0]}const{code:t,message:s,stack:n,data:r}=e.data.cause;return[g(t,s,n,r),!1]}return[g(o.errorCodes.rpc.internal,c.getErrorMessage.call(void 0,e.data.cause),c.getErrorStack.call(void 0,e.data.cause)),!1]}if(u.isJsonRpcError.call(void 0,e)){const{code:t,message:s,stack:n,data:r}=e;return[g(t,s,n,r),!1]}return[g(o.errorCodes.rpc.internal,c.getErrorMessage.call(void 0,e),c.getErrorStack.call(void 0,e)),!1]}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-K6BCBPXF.js"}],[2353,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=(e=>(e.OnRpcRequest="onRpcRequest",e.OnSignature="onSignature",e.OnTransaction="onTransaction",e.OnCronjob="onCronjob",e.OnInstall="onInstall",e.OnUpdate="onUpdate",e.OnNameLookup="onNameLookup",e.OnKeyringRequest="onKeyringRequest",e.OnHomePage="onHomePage",e.OnUserInput="onUserInput",e))(n||{}),r=Object.values(n);s.HandlerType=n,s.SNAP_EXPORT_NAMES=r}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-LEKZPKS2.js"}],[2354,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/superstruct"),r=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})$/u,i=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})):(?<accountAddress>[a-zA-Z0-9]{1,64})$/u,a=/^(?<accountAddress>[a-zA-Z0-9]{1,64})$/u;var o=n.size.call(void 0,n.string.call(void 0),1,40),c=n.define.call(void 0,"Chain ID",n.string.call(void 0).validator),u=n.pattern.call(void 0,c,r),l=n.pattern.call(void 0,n.string.call(void 0),i),m=n.array.call(void 0,l),d=n.pattern.call(void 0,n.string.call(void 0),a),p=n.object.call(void 0,{id:u,name:o}),h=n.object.call(void 0,{chains:n.array.call(void 0,p),methods:n.optional.call(void 0,n.array.call(void 0,o)),events:n.optional.call(void 0,n.array.call(void 0,o))}),f=n.pattern.call(void 0,n.string.call(void 0),/^[-a-z0-9]{3,8}$/u);s.CHAIN_ID_REGEX=r,s.ACCOUNT_ID_REGEX=i,s.ACCOUNT_ADDRESS_REGEX=a,s.parseChainId=function(e){const t=r.exec(e);if(!t?.groups)throw new Error("Invalid chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseAccountId=function(e){const t=i.exec(e);if(!t?.groups)throw new Error("Invalid account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.LimitedString=o,s.ChainIdStringStruct=c,s.ChainIdStruct=u,s.AccountIdStruct=l,s.AccountIdArrayStruct=m,s.AccountAddressStruct=d,s.ChainStruct=p,s.NamespaceStruct=h,s.NamespaceIdStruct=f,s.isNamespaceId=function(e){return n.is.call(void 0,e,f)},s.isChainId=function(e){return n.is.call(void 0,e,u)},s.isAccountId=function(e){return n.is.call(void 0,e,l)},s.isAccountIdArray=function(e){return n.is.call(void 0,e,m)},s.isNamespace=function(e){return n.is.call(void 0,e,h)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-LOJA2ZS4.js"}],[2355,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=Object.freeze(["atob","btoa","BigInt","console","crypto","Date","Math","setTimeout","clearTimeout","SubtleCrypto","TextDecoder","TextEncoder","URL","setInterval","clearInterval","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","DataView","ArrayBuffer","AbortController","AbortSignal"]);s.DEFAULT_ENDOWMENTS=n}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-N722KRZW.js"}],[2356,{rfdc:4749},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n,r=e("rfdc"),i=((n=r)&&n.__esModule?n:{default:n}).default.call(void 0,{proto:!1,circles:!1});s.deepClone=i}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-NUCLSR2G.js"}],[2357,{"./chunk-UAINMOUU.js":2368,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-UAINMOUU.js"),r=e("@metamask/utils");s.encodeBase64=async function(e){const t=n.getBytes.call(void 0,e);return"FileReader"in globalThis?await new Promise(((e,s)=>{const n=Object.assign(new FileReader,{onload:()=>e(n.result.replace("data:application/octet-stream;base64,","")),onerror:()=>s(n.error)});n.readAsDataURL(new File([t],"",{type:"application/octet-stream"}))})):r.bytesToBase64.call(void 0,t)},s.decodeBase64=async function(e){const t=await fetch(`data:application/octet-stream;base64,${e}`);return new Uint8Array(await t.arrayBuffer())}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-OBN2WDFU.js"}],[2358,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};s.__privateGet=(e,t,s)=>(n(e,t,"read from private field"),s?s.call(e):t.get(e)),s.__privateAdd=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},s.__privateSet=(e,t,s,r)=>(n(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-PHUTP7NB.js"}],[2359,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createWindow=async function(e,t,s=!0){return await new Promise(((n,r)=>{const i=document.createElement("iframe");i.setAttribute("id",t),i.setAttribute("data-testid","snaps-iframe"),s&&i.setAttribute("sandbox","allow-scripts"),i.setAttribute("src",e),document.body.appendChild(i),i.addEventListener("load",(()=>{i.contentWindow?n(i.contentWindow):r(new Error(`iframe.contentWindow not present on load for job "${t}".`))}))}))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-PLBSSUVY.js"}],[2360,{"./chunk-5WKQI22S.js":2339,"./chunk-OBN2WDFU.js":2357,"@metamask/snaps-sdk":2575,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-OBN2WDFU.js"),r=e("./chunk-5WKQI22S.js"),i=e("@metamask/snaps-sdk"),a=e("@metamask/utils");s.encodeAuxiliaryFile=async function(e,t){if(t===i.AuxiliaryFileEncoding.Base64)return e;const s=await n.decodeBase64.call(void 0,e);return t===i.AuxiliaryFileEncoding.Utf8?a.bytesToString.call(void 0,s):a.bytesToHex.call(void 0,s)},s.validateAuxiliaryFiles=function(e){for(const t of e)a.assert.call(void 0,t.size<r.MAX_FILE_SIZE,"Static files required by the Snap must be smaller than 64 MB.")}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-PLNIERDY.js"}],[2361,{"@metamask/superstruct":2618,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/superstruct"),r=e("@metamask/utils"),i=(e=>(e.PackageJson="package.json",e.Manifest="snap.manifest.json",e))(i||{}),a=n.size.call(void 0,n.pattern.call(void 0,n.string.call(void 0),/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/u),1,214),o=n.type.call(void 0,{version:r.VersionStruct,name:a,main:n.optional.call(void 0,n.size.call(void 0,n.string.call(void 0),1,Infinity)),repository:n.optional.call(void 0,n.object.call(void 0,{type:n.size.call(void 0,n.string.call(void 0),1,Infinity),url:n.size.call(void 0,n.string.call(void 0),1,Infinity)}))});var c=(e=>(e.npm="npm:",e.local="local:",e))(c||{}),u=(e=>(e.NameMismatch='"name" field mismatch',e.VersionMismatch='"version" field mismatch',e.RepositoryMismatch='"repository" field mismatch',e.ShasumMismatch='"shasum" field mismatch',e))(u||{}),l=(e=>(e.JSON_RPC="jsonRpc",e.COMMAND="command",e))(l||{}),m=(e={})=>n.refine.call(void 0,n.union.call(void 0,[n.string.call(void 0),n.instance.call(void 0,URL)]),"uri",(t=>{try{const s=new URL(t),r=n.type.call(void 0,e);return n.assert.call(void 0,s,r),!0}catch{return`Expected URL, got "${t.toString()}".`}}));s.NpmSnapFileNames=i,s.NameStruct=a,s.NpmSnapPackageJsonStruct=o,s.isNpmSnapPackageJson=function(e){return n.is.call(void 0,e,o)},s.assertIsNpmSnapPackageJson=function(e){r.assertStruct.call(void 0,e,o,'"package.json" is invalid')},s.SnapIdPrefixes=c,s.SnapValidationFailureReason=u,s.SNAP_STREAM_NAMES=l,s.uri=m,s.isValidUrl=function(e,t={}){return n.is.call(void 0,e,m(t))},s.WALLET_SNAP_PERMISSION_KEY="wallet_snap"}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-PZNIU23I.js"}],[2362,{"@metamask/utils":2384,"fast-xml-parser":3852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/utils"),r=e("fast-xml-parser");function i(e){try{const t=e.trim();n.assert.call(void 0,t.length>0);const s=new(0,r.XMLParser)({ignoreAttributes:!1,parseAttributeValue:!0}).parse(t,!0);return n.assert.call(void 0,n.hasProperty.call(void 0,s,"svg")),n.isObject.call(void 0,s.svg)?s.svg:{}}catch{throw new Error("Snap icon must be a valid SVG.")}}s.parseSvg=i,s.isSvg=function(e){try{return i(e),!0}catch{return!1}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-QGCNQRIQ.js"}],[2363,{"./chunk-AMW2VJ3N.js":2342,"./chunk-PZNIU23I.js":2361,"@metamask/superstruct":2618,"@metamask/utils":2384,"@scure/base":2797,"fast-json-stable-stringify":3849,"validate-npm-package-name":4908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0});var r=e("./chunk-PZNIU23I.js"),i=e("./chunk-AMW2VJ3N.js"),a=e("@metamask/superstruct"),o=e("@metamask/utils"),c=e("@scure/base"),u=n(e("fast-json-stable-stringify")),l=n(e("validate-npm-package-name")),m=(e=>(e.Installing="installing",e.Updating="updating",e.Running="running",e.Stopped="stopped",e.Crashed="crashed",e))(m||{}),d=(e=>(e.Start="START",e.Stop="STOP",e.Crash="CRASH",e.Update="UPDATE",e))(d||{}),p=class extends Error{constructor(e,t){super(e),this.reason=t}};function h(e){const t=e.clone();return delete t.result.source.shasum,t.value=u.default.call(void 0,t.result),t}async function f(e){const{manifest:t,sourceCode:s,svgIcon:n,auxiliaryFiles:r,localizationFiles:a}=e,o=[h(t),s,n,...r,...a].filter((e=>void 0!==e));return c.base64.encode(await i.checksumFiles.call(void 0,o))}var g=["localhost","127.0.0.1","[::1]"],v=a.pattern.call(void 0,a.string.call(void 0),/^[\x21-\x7E]*$/u),k=r.uri.call(void 0,{protocol:a.enums.call(void 0,["http:","https:"]),hostname:a.enums.call(void 0,g),hash:a.empty.call(void 0,a.string.call(void 0)),search:a.empty.call(void 0,a.string.call(void 0))}),S=a.refine.call(void 0,v,"local Snap Id",(e=>{if(!e.startsWith("local:"))return`Expected local snap ID, got "${e}".`;const[t]=a.validate.call(void 0,e.slice(6),k);return t??!0})),_=a.intersection.call(void 0,[v,r.uri.call(void 0,{protocol:a.literal.call(void 0,"npm:"),pathname:a.refine.call(void 0,a.string.call(void 0),"package name",(function*(e){const t=e.startsWith("/")?e.slice(1):e,{errors:s,validForNewPackages:n,warnings:r}=l.default.call(void 0,t);return n||(void 0===s?(o.assert.call(void 0,void 0!==r),yield*r):yield*s),!0})),search:a.empty.call(void 0,a.string.call(void 0)),hash:a.empty.call(void 0,a.string.call(void 0))})]),y=a.intersection.call(void 0,[v,r.uri.call(void 0,{protocol:a.enums.call(void 0,["http:","https:"]),search:a.empty.call(void 0,a.string.call(void 0)),hash:a.empty.call(void 0,a.string.call(void 0))})]),b=a.union.call(void 0,[_,S]);function E(e){const t=Object.values(r.SnapIdPrefixes).find((t=>e.startsWith(t)));if(void 0!==t)return t;throw new Error(`Invalid or no prefix found for "${e}"`)}s.PROPOSED_NAME_REGEX=/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u,s.SnapStatus=m,s.SnapStatusEvents=d,s.ProgrammaticallyFixableSnapError=p,s.getSnapChecksum=f,s.validateSnapShasum=async function(e,t="Invalid Snap manifest: manifest shasum does not match computed shasum."){if(e.manifest.result.source.shasum!==await f(e))throw new p(t,'"shasum" field mismatch')},s.LOCALHOST_HOSTNAMES=g,s.BaseSnapIdStruct=v,s.LocalSnapIdStruct=S,s.NpmSnapIdStruct=_,s.HttpSnapIdStruct=y,s.SnapIdStruct=b,s.getSnapPrefix=E,s.stripSnapPrefix=function(e){return e.replace(E(e),"")},s.assertIsValidSnapId=function(e){o.assertStruct.call(void 0,e,b,"Invalid snap ID")},s.isCaipChainId=function(e){return"string"==typeof e&&/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-a-zA-Z0-9]{1,32})$/u.test(e)},s.isSnapPermitted=function(e,t){return Boolean((e?.wallet_snap?.caveats?.find((e=>"snapIds"===e.type))??{}).value?.[t])},s.verifyRequestedSnapPermissions=function(e){o.assert.call(void 0,o.isObject.call(void 0,e),"Requested permissions must be an object.");const{wallet_snap:t}=e;o.assert.call(void 0,o.isObject.call(void 0,t),"wallet_snap is missing from the requested permissions.");const{caveats:s}=t;o.assert.call(void 0,Array.isArray(s)&&1===s.length,"wallet_snap must have a caveat property with a single-item array value.");const[n]=s;o.assert.call(void 0,o.isObject.call(void 0,n)&&"snapIds"===n.type&&o.isObject.call(void 0,n.value),"The requested permissions do not have a valid snapIds caveat.")}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-RD6BN2TQ.js"}],[2364,{"./chunk-5I5WPAVD.js":2338,"./chunk-B5GNTDE2.js":2345,"./chunk-RD6BN2TQ.js":2363,"./chunk-W7KRIAIX.js":2370},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-5I5WPAVD.js"),r=e("./chunk-RD6BN2TQ.js"),i=e("./chunk-B5GNTDE2.js"),a=e("./chunk-W7KRIAIX.js");s.validateFetchedSnap=async function(e){n.assertIsSnapManifest.call(void 0,e.manifest.result),await r.validateSnapShasum.call(void 0,e),i.validateSnapManifestLocalizations.call(void 0,e.manifest.result,e.localizationFiles.map((e=>e.result))),e.svgIcon&&a.assertIsSnapIcon.call(void 0,e.svgIcon)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-SB43G2RI.js"}],[2365,{"@metamask/permission-controller":2314,"@metamask/superstruct":2618,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/permission-controller"),r=e("@metamask/superstruct"),i=e("@metamask/utils"),a=r.array.call(void 0,r.refine.call(void 0,r.string.call(void 0),"Allowed origin",(e=>!(e.split("*").length-1>2)||'No more than two wildcards ("*") are allowed in an origin specifier.'))),o=r.refine.call(void 0,r.object.call(void 0,{dapps:r.optional.call(void 0,r.boolean.call(void 0)),snaps:r.optional.call(void 0,r.boolean.call(void 0)),allowedOrigins:r.optional.call(void 0,a)}),"RPC origins",(e=>!!Boolean(!0===e.snaps||!0===e.dapps||e.allowedOrigins&&e.allowedOrigins.length>0)||"Must specify at least one JSON-RPC origin."));var c=r.object.call(void 0,{allowedOrigins:r.optional.call(void 0,a)});function u(e,t){if("*"===e||e===t)return!0;const s=function(e){const t=e.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*");return RegExp(`${t}$`,"u")}(e);return s.test(t)}s.RpcOriginsStruct=o,s.assertIsRpcOrigins=function(e,t){i.assertStruct.call(void 0,e,o,"Invalid JSON-RPC origins",t)},s.KeyringOriginsStruct=c,s.assertIsKeyringOrigins=function(e,t){i.assertStruct.call(void 0,e,c,"Invalid keyring origins",t)},s.isOriginAllowed=function(e,t,s){return"metamask"===s||(!!e.allowedOrigins?.some((e=>u(e,s)))||(!(t!==n.SubjectType.Website||!e.dapps)||Boolean(t===n.SubjectType.Snap&&e.snaps)))},s.assertIsJsonRpcSuccess=function(e){if(!i.isJsonRpcSuccess.call(void 0,e)){if(i.isJsonRpcFailure.call(void 0,e))throw new Error(`JSON-RPC request failed: ${e.error.message}`);throw new Error("Invalid JSON-RPC response.")}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-T2VA4YJE.js"}],[2366,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-T3VM5YXY.js"}],[2367,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.isEqual=function(e,t){return e.length===t.length&&e.every(((e,s)=>e===t[s]))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-T3YY4JIJ.js"}],[2368,{"./chunk-DEQUNIME.js":2346,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-DEQUNIME.js"),r=e("@metamask/utils");s.getBytes=function(e){const t=e instanceof n.VirtualFile?e.value:e;return"string"==typeof t?r.stringToBytes.call(void 0,t):t}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-UAINMOUU.js"}],[2369,{"./chunk-IJX3CXOY.js":2351,"@metamask/snaps-sdk":2575,"@metamask/superstruct":2618,"@metamask/utils":2384,chalk:3535},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-IJX3CXOY.js"),r=e("@metamask/snaps-sdk"),i=e("@metamask/superstruct"),a=e("@metamask/utils"),o=e("chalk");function c(e,t,s){return s?t(e):e}var u=class extends i.StructError{constructor(e,t,s,n,r,i=!0){super(n,r),this.name="SnapsStructError",this.message=`${t}.\n\n${g(e,[...r()],i)}${s?`\n\n${s}`:""}`}};function*l(e){for(const t of e)yield t}function m({struct:e,prefix:t,suffix:s="",error:n,colorize:r}){return new u(e,t,s,n,(()=>l(n.failures())),r)}function d(e,t){return t.reduce(((t,s)=>a.isObject.call(void 0,e.schema)&&e.schema[s]?e.schema[s]:t),e)}function p(e,t=!0){return Array.isArray(e.schema)?e.schema.map((({type:e})=>c(e,o.green,t))):null}function h(e,t=!0){return"never"===e.type||0===e.path.length?"":`At path: ${c(e.path.join("."),o.bold,t)}  `}function f(e,t,s=!0){const n=c(JSON.stringify(t.value),o.red,s),r=h(t,s);if("union"===t.type){const i=p(d(e,t.path),s);return i?`${r}Expected the value to be one of: ${i.join(", ")}, but received: ${n}.`:`${r}${t.message}.`}if("literal"===t.type){return`${r}${t.message.replace(/the literal `(.+)`,/u,`the value to be \`${c("$1",o.green,s)}\`,`).replace(/, but received: (.+)/u,`, but received: ${c("$1",o.red,s)}`)}.`}if("never"===t.type)return`Unknown key: ${c(t.path.join("."),o.bold,s)}, received: ${n}.`;if("size"===t.refinement){return`${r}${t.message.replace(/length between `(\d+)` and `(\d+)`/u,`length between ${c("$1",o.green,s)} and ${c("$2",o.green,s)},`).replace(/length of `(\d+)`/u,`length of ${c("$1",o.red,s)}`).replace(/a array/u,"an array")}.`}return`${r}Expected a value of type ${c(t.type,o.green,s)}, but received: ${n}.`}function g(e,t,s=!0){return t.map((t=>n.indent.call(void 0,` ${f(e,t,s)}`))).join("\n")}function v(e,t,s,n=!1){a.assert.call(void 0,t.schema,"Expected a struct with a schema. Make sure to use `union` from `@metamask/snaps-sdk`."),a.assert.call(void 0,t.schema.length>0,"Expected a non-empty array of structs.");const o=t.schema.map((e=>e.schema[s])),c=i.type.call(void 0,{[s]:r.union.call(void 0,o)}),[u]=i.validate.call(void 0,e,c,{coerce:n});if(u)throw new Error(f(c,u.failures()[0],!1));const l=e,m=t.schema.filter((e=>i.is.call(void 0,l[s],e.schema[s])));a.assert.call(void 0,m.length>0,"Expected a struct to match the value.");const d=m.map((e=>i.validate.call(void 0,l,e,{coerce:n}))),p=d.find((([e])=>!e));if(p)return p[1];a.assert.call(void 0,d[0][0],"Expected at least one error.");const h=d.reduce(((e,[t])=>(a.assert.call(void 0,t,"Expected an error."),t.failures().length<e.failures().length?t:e)),d[0][0]);throw new Error(f(t,h.failures()[0],!1))}s.named=function(e,t){return new(0,i.Struct)({...t,type:e})},s.SnapsStructError=u,s.arrayToGenerator=l,s.getError=m,s.createFromStruct=function(e,t,s,n=""){try{return i.create.call(void 0,e,t)}catch(e){if(e instanceof i.StructError)throw m({struct:t,prefix:s,suffix:n,error:e});throw e}},s.getStructFromPath=d,s.getUnionStructNames=p,s.getStructErrorPrefix=h,s.getStructFailureMessage=f,s.getStructErrorMessage=g,s.validateUnion=v,s.createUnion=function(e,t,s){return v(e,t,s,!0)},s.mergeStructs=function(...e){const t=i.assign.call(void 0,...e);return new(0,i.Struct)({...t,*refiner(t,s){for(const n of e)yield*n.refiner(t,s)}})}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-VOPTAKVG.js"}],[2370,{"./chunk-QGCNQRIQ.js":2362,"@metamask/utils":2384},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./chunk-QGCNQRIQ.js"),r=e("@metamask/utils"),i=1e5,a=`${Math.floor(100)}kb`;s.SVG_MAX_BYTE_SIZE=i,s.SVG_MAX_BYTE_SIZE_TEXT=a,s.assertIsSnapIcon=function(e){r.assert.call(void 0,e.path.endsWith(".svg"),'Expected snap icon to end in ".svg".');const t="string"==typeof e.value?r.stringToBytes.call(void 0,e.value).byteLength:e.value.byteLength;r.assert.call(void 0,t<=i,`The specified SVG icon exceeds the maximum size of ${a}.`),r.assert.call(void 0,n.isSvg.call(void 0,e.toString()),"Snap icon must be a valid SVG.")},s.getSvgDimensions=function(e){try{const t=n.parseSvg.call(void 0,e),s=t["@_height"],i=t["@_width"];if(s&&i)return{height:s,width:i};const a=t["@_viewBox"];if(a){const[e,t,s,n]=a.split(" ");if(s&&n){const e=parseInt(s,10),t=parseInt(n,10);return r.assert.call(void 0,Number.isInteger(e)&&e>0),r.assert.call(void 0,Number.isInteger(t)&&t>0),{width:e,height:t}}}}catch{throw new Error("Snap icon must be a valid SVG.")}return null}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-W7KRIAIX.js"}],[2371,{"@metamask/snaps-sdk":2575,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("@metamask/snaps-sdk"),r=e("@metamask/superstruct"),i={onRpcRequest:{type:"onRpcRequest",required:!0,validator:e=>"function"==typeof e},onTransaction:{type:"onTransaction",required:!0,validator:e=>"function"==typeof e},onCronjob:{type:"onCronjob",required:!0,validator:e=>"function"==typeof e},onNameLookup:{type:"onNameLookup",required:!0,validator:e=>"function"==typeof e},onInstall:{type:"onInstall",required:!1,validator:e=>"function"==typeof e},onUpdate:{type:"onUpdate",required:!1,validator:e=>"function"==typeof e},onKeyringRequest:{type:"onKeyringRequest",required:!0,validator:e=>"function"==typeof e},onHomePage:{type:"onHomePage",required:!0,validator:e=>"function"==typeof e},onSignature:{type:"onSignature",required:!0,validator:e=>"function"==typeof e},onUserInput:{type:"onUserInput",required:!1,validator:e=>"function"==typeof e}},a=r.object.call(void 0,{severity:r.optional.call(void 0,r.literal.call(void 0,n.SeverityLevel.Critical))}),o=r.assign.call(void 0,a,r.object.call(void 0,{id:r.string.call(void 0)})),c=r.assign.call(void 0,a,r.object.call(void 0,{content:n.ComponentOrElementStruct})),u=r.nullable.call(void 0,r.union.call(void 0,[c,o])),l=u,m=r.object.call(void 0,{content:n.ComponentOrElementStruct}),d=r.object.call(void 0,{id:r.string.call(void 0)}),p=r.union.call(void 0,[m,d]),h=r.object.call(void 0,{protocol:r.string.call(void 0),resolvedDomain:r.string.call(void 0)}),f=r.object.call(void 0,{protocol:r.string.call(void 0),resolvedAddress:r.string.call(void 0),domainName:r.string.call(void 0)}),g=r.object.call(void 0,{resolvedDomains:r.size.call(void 0,r.array.call(void 0,h),1,Infinity)}),v=r.object.call(void 0,{resolvedAddresses:r.size.call(void 0,r.array.call(void 0,f),1,Infinity)}),k=r.nullable.call(void 0,r.union.call(void 0,[g,v]));s.SNAP_EXPORTS=i,s.OnTransactionSeverityResponseStruct=a,s.OnTransactionResponseWithIdStruct=o,s.OnTransactionResponseWithContentStruct=c,s.OnTransactionResponseStruct=u,s.OnSignatureResponseStruct=l,s.OnHomePageResponseWithContentStruct=m,s.OnHomePageResponseWithIdStruct=d,s.OnHomePageResponseStruct=p,s.AddressResolutionStruct=h,s.DomainResolutionStruct=f,s.AddressResolutionResponseStruct=g,s.DomainResolutionResponseStruct=v,s.OnNameLookupResponseStruct=k}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-X2GGUOMY.js"}],[2372,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});s.SIP_6_MAGIC_VALUE="1399742832'",s.STATE_ENCRYPTION_MAGIC_VALUE="572232532'"}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/chunk-ZT3KKTS2.js"}],[2373,{"./chunk-4CMD46B2.js":2336,"./chunk-4ZJOU3LR.js":2337,"./chunk-5I5WPAVD.js":2338,"./chunk-5WKQI22S.js":2339,"./chunk-6ATNGN44.js":2340,"./chunk-7VJ2BOVU.js":2341,"./chunk-AMW2VJ3N.js":2342,"./chunk-AOGVLPQZ.js":2343,"./chunk-ASZWZ7JT.js":2344,"./chunk-B5GNTDE2.js":2345,"./chunk-DEQUNIME.js":2346,"./chunk-E3BDBG6T.js":2347,"./chunk-F6G67XQ4.js":2348,"./chunk-FBZ5SU7X.js":2349,"./chunk-I2SWLZ34.js":2350,"./chunk-IJX3CXOY.js":2351,"./chunk-K6BCBPXF.js":2352,"./chunk-LEKZPKS2.js":2353,"./chunk-LOJA2ZS4.js":2354,"./chunk-N722KRZW.js":2355,"./chunk-NUCLSR2G.js":2356,"./chunk-OBN2WDFU.js":2357,"./chunk-PHUTP7NB.js":2358,"./chunk-PLBSSUVY.js":2359,"./chunk-PLNIERDY.js":2360,"./chunk-PZNIU23I.js":2361,"./chunk-QGCNQRIQ.js":2362,"./chunk-RD6BN2TQ.js":2363,"./chunk-SB43G2RI.js":2364,"./chunk-T2VA4YJE.js":2365,"./chunk-T3VM5YXY.js":2366,"./chunk-T3YY4JIJ.js":2367,"./chunk-UAINMOUU.js":2368,"./chunk-VOPTAKVG.js":2369,"./chunk-W7KRIAIX.js":2370,"./chunk-X2GGUOMY.js":2371,"./chunk-ZT3KKTS2.js":2372},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),e("./chunk-F6G67XQ4.js");var n=e("./chunk-6ATNGN44.js"),r=e("./chunk-SB43G2RI.js"),i=e("./chunk-I2SWLZ34.js");e("./chunk-4CMD46B2.js");var a=e("./chunk-5I5WPAVD.js"),o=e("./chunk-RD6BN2TQ.js"),c=e("./chunk-VOPTAKVG.js"),u=e("./chunk-IJX3CXOY.js"),l=e("./chunk-B5GNTDE2.js"),m=e("./chunk-AOGVLPQZ.js");e("./chunk-W7KRIAIX.js"),e("./chunk-QGCNQRIQ.js");var d=e("./chunk-E3BDBG6T.js"),p=e("./chunk-PZNIU23I.js"),h=e("./chunk-LOJA2ZS4.js"),f=e("./chunk-X2GGUOMY.js"),g=e("./chunk-PLBSSUVY.js"),v=e("./chunk-T2VA4YJE.js"),k=e("./chunk-FBZ5SU7X.js"),S=e("./chunk-ZT3KKTS2.js"),_=e("./chunk-K6BCBPXF.js"),y=e("./chunk-LEKZPKS2.js"),b=e("./chunk-N722KRZW.js");e("./chunk-T3VM5YXY.js");var E=e("./chunk-7VJ2BOVU.js"),j=e("./chunk-T3YY4JIJ.js"),w=e("./chunk-PLNIERDY.js"),I=e("./chunk-OBN2WDFU.js"),T=e("./chunk-ASZWZ7JT.js"),R=e("./chunk-AMW2VJ3N.js"),C=e("./chunk-UAINMOUU.js"),A=e("./chunk-DEQUNIME.js"),x=e("./chunk-NUCLSR2G.js"),P=e("./chunk-5WKQI22S.js"),N=e("./chunk-4ZJOU3LR.js");e("./chunk-PHUTP7NB.js"),s.ACCOUNT_ADDRESS_REGEX=h.ACCOUNT_ADDRESS_REGEX,s.ACCOUNT_ID_REGEX=h.ACCOUNT_ID_REGEX,s.AccountAddressStruct=h.AccountAddressStruct,s.AccountIdArrayStruct=h.AccountIdArrayStruct,s.AccountIdStruct=h.AccountIdStruct,s.AddressResolutionResponseStruct=f.AddressResolutionResponseStruct,s.AddressResolutionStruct=f.AddressResolutionStruct,s.BaseSnapIdStruct=o.BaseSnapIdStruct,s.Bip32EntropyStruct=a.Bip32EntropyStruct,s.Bip32PathStruct=a.Bip32PathStruct,s.CHAIN_ID_REGEX=h.CHAIN_ID_REGEX,s.ChainIdStringStruct=h.ChainIdStringStruct,s.ChainIdStruct=h.ChainIdStruct,s.ChainIdsStruct=a.ChainIdsStruct,s.ChainStruct=h.ChainStruct,s.CronExpressionStruct=N.CronExpressionStruct,s.CronjobRpcRequestStruct=N.CronjobRpcRequestStruct,s.CronjobSpecificationArrayStruct=N.CronjobSpecificationArrayStruct,s.CronjobSpecificationStruct=N.CronjobSpecificationStruct,s.CurveStruct=a.CurveStruct,s.DEFAULT_ENDOWMENTS=b.DEFAULT_ENDOWMENTS,s.DEFAULT_REQUESTED_SNAP_VERSION=i.DEFAULT_REQUESTED_SNAP_VERSION,s.DomainResolutionResponseStruct=f.DomainResolutionResponseStruct,s.DomainResolutionStruct=f.DomainResolutionStruct,s.EmptyObjectStruct=a.EmptyObjectStruct,s.FORBIDDEN_COIN_TYPES=a.FORBIDDEN_COIN_TYPES,s.HandlerCaveatsStruct=a.HandlerCaveatsStruct,s.HandlerType=y.HandlerType,s.HttpSnapIdStruct=o.HttpSnapIdStruct,s.InitialConnectionsStruct=a.InitialConnectionsStruct,s.KeyringOriginsStruct=v.KeyringOriginsStruct,s.LOCALHOST_HOSTNAMES=o.LOCALHOST_HOSTNAMES,s.LOCALIZABLE_FIELDS=l.LOCALIZABLE_FIELDS,s.LimitedString=h.LimitedString,s.LocalSnapIdStruct=o.LocalSnapIdStruct,s.LocalizationFileStruct=l.LocalizationFileStruct,s.LookupMatchersStruct=a.LookupMatchersStruct,s.MAXIMUM_REQUEST_TIMEOUT=a.MAXIMUM_REQUEST_TIMEOUT,s.MAX_FILE_SIZE=P.MAX_FILE_SIZE,s.MINIMUM_REQUEST_TIMEOUT=a.MINIMUM_REQUEST_TIMEOUT,s.MaxRequestTimeStruct=a.MaxRequestTimeStruct,s.NameStruct=p.NameStruct,s.NamespaceIdStruct=h.NamespaceIdStruct,s.NamespaceStruct=h.NamespaceStruct,s.NpmSnapFileNames=p.NpmSnapFileNames,s.NpmSnapIdStruct=o.NpmSnapIdStruct,s.NpmSnapPackageJsonStruct=p.NpmSnapPackageJsonStruct,s.OnHomePageResponseStruct=f.OnHomePageResponseStruct,s.OnHomePageResponseWithContentStruct=f.OnHomePageResponseWithContentStruct,s.OnHomePageResponseWithIdStruct=f.OnHomePageResponseWithIdStruct,s.OnNameLookupResponseStruct=f.OnNameLookupResponseStruct,s.OnSignatureResponseStruct=f.OnSignatureResponseStruct,s.OnTransactionResponseStruct=f.OnTransactionResponseStruct,s.OnTransactionResponseWithContentStruct=f.OnTransactionResponseWithContentStruct,s.OnTransactionResponseWithIdStruct=f.OnTransactionResponseWithIdStruct,s.OnTransactionSeverityResponseStruct=f.OnTransactionSeverityResponseStruct,s.PROPOSED_NAME_REGEX=o.PROPOSED_NAME_REGEX,s.PermissionsStruct=a.PermissionsStruct,s.ProgrammaticallyFixableSnapError=o.ProgrammaticallyFixableSnapError,s.RpcOriginsStruct=v.RpcOriginsStruct,s.SIP_6_MAGIC_VALUE=S.SIP_6_MAGIC_VALUE,s.SNAPS_DERIVATION_PATHS=k.SNAPS_DERIVATION_PATHS,s.SNAP_ERROR_WRAPPER_CODE=_.SNAP_ERROR_WRAPPER_CODE,s.SNAP_ERROR_WRAPPER_MESSAGE=_.SNAP_ERROR_WRAPPER_MESSAGE,s.SNAP_EXPORTS=f.SNAP_EXPORTS,s.SNAP_EXPORT_NAMES=y.SNAP_EXPORT_NAMES,s.SNAP_STREAM_NAMES=p.SNAP_STREAM_NAMES,s.STATE_ENCRYPTION_MAGIC_VALUE=S.STATE_ENCRYPTION_MAGIC_VALUE,s.SemVerRangeStruct=a.SemVerRangeStruct,s.SnapAuxilaryFilesStruct=a.SnapAuxilaryFilesStruct,s.SnapCaveatType=T.SnapCaveatType,s.SnapGetBip32EntropyPermissionsStruct=a.SnapGetBip32EntropyPermissionsStruct,s.SnapIdPrefixes=p.SnapIdPrefixes,s.SnapIdStruct=o.SnapIdStruct,s.SnapIdsStruct=a.SnapIdsStruct,s.SnapManifestStruct=a.SnapManifestStruct,s.SnapStatus=o.SnapStatus,s.SnapStatusEvents=o.SnapStatusEvents,s.SnapValidationFailureReason=p.SnapValidationFailureReason,s.SnapsStructError=c.SnapsStructError,s.TRANSLATION_REGEX=l.TRANSLATION_REGEX,s.VirtualFile=A.VirtualFile,s.WALLET_SNAP_PERMISSION_KEY=p.WALLET_SNAP_PERMISSION_KEY,s.WrappedSnapError=_.WrappedSnapError,s.arrayToGenerator=c.arrayToGenerator,s.assertIsJsonRpcSuccess=v.assertIsJsonRpcSuccess,s.assertIsKeyringOrigins=v.assertIsKeyringOrigins,s.assertIsNpmSnapPackageJson=p.assertIsNpmSnapPackageJson,s.assertIsRpcOrigins=v.assertIsRpcOrigins,s.assertIsSnapManifest=a.assertIsSnapManifest,s.assertIsValidSnapId=o.assertIsValidSnapId,s.bip32entropy=a.bip32entropy,s.checksum=R.checksum,s.checksumFiles=R.checksumFiles,s.createFromStruct=c.createFromStruct,s.createSnapManifest=a.createSnapManifest,s.createUnion=c.createUnion,s.createWindow=g.createWindow,s.decodeBase64=I.decodeBase64,s.deepClone=x.deepClone,s.encodeAuxiliaryFile=w.encodeAuxiliaryFile,s.encodeBase64=I.encodeBase64,s.getBytes=C.getBytes,s.getError=c.getError,s.getJsonSizeUnsafe=E.getJsonSizeUnsafe,s.getJsxChildren=n.getJsxChildren,s.getJsxElementFromComponent=n.getJsxElementFromComponent,s.getLocalizationFile=l.getLocalizationFile,s.getLocalizedSnapManifest=l.getLocalizedSnapManifest,s.getSlip44ProtocolName=k.getSlip44ProtocolName,s.getSnapChecksum=o.getSnapChecksum,s.getSnapDerivationPathName=k.getSnapDerivationPathName,s.getSnapPrefix=o.getSnapPrefix,s.getStructErrorMessage=c.getStructErrorMessage,s.getStructErrorPrefix=c.getStructErrorPrefix,s.getStructFailureMessage=c.getStructFailureMessage,s.getStructFromPath=c.getStructFromPath,s.getTargetVersion=i.getTargetVersion,s.getTextChildren=n.getTextChildren,s.getTotalTextLength=n.getTotalTextLength,s.getUnionStructNames=c.getUnionStructNames,s.getValidatedLocalizationFiles=l.getValidatedLocalizationFiles,s.hasChildren=n.hasChildren,s.indent=u.indent,s.isAccountId=h.isAccountId,s.isAccountIdArray=h.isAccountIdArray,s.isCaipChainId=o.isCaipChainId,s.isChainId=h.isChainId,s.isCronjobSpecification=N.isCronjobSpecification,s.isCronjobSpecificationArray=N.isCronjobSpecificationArray,s.isEqual=j.isEqual,s.isNamespace=h.isNamespace,s.isNamespaceId=h.isNamespaceId,s.isNpmSnapPackageJson=p.isNpmSnapPackageJson,s.isOriginAllowed=v.isOriginAllowed,s.isSerializedSnapError=_.isSerializedSnapError,s.isSnapError=_.isSnapError,s.isSnapManifest=a.isSnapManifest,s.isSnapPermitted=o.isSnapPermitted,s.isValidUrl=p.isValidUrl,s.isWrappedSnapError=_.isWrappedSnapError,s.logError=d.logError,s.logInfo=d.logInfo,s.logWarning=d.logWarning,s.mergeStructs=c.mergeStructs,s.named=c.named,s.normalizeRelative=m.normalizeRelative,s.parseAccountId=h.parseAccountId,s.parseChainId=h.parseChainId,s.parseCronExpression=N.parseCronExpression,s.parseJson=E.parseJson,s.resolveVersionRange=i.resolveVersionRange,s.serialiseJsx=n.serialiseJsx,s.snapsLogger=d.snapsLogger,s.stripSnapPrefix=o.stripSnapPrefix,s.translate=l.translate,s.unwrapError=_.unwrapError,s.uri=p.uri,s.validateAuxiliaryFiles=w.validateAuxiliaryFiles,s.validateFetchedSnap=r.validateFetchedSnap,s.validateJsxLinks=n.validateJsxLinks,s.validateSnapManifestLocalizations=l.validateSnapManifestLocalizations,s.validateSnapShasum=o.validateSnapShasum,s.validateTextLinks=n.validateTextLinks,s.validateUnion=c.validateUnion,s.verifyRequestedSnapPermissions=o.verifyRequestedSnapPermissions,s.walkJsx=n.walkJsx}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/dist/index.js"}],[2374,{"./errors.cjs":2382,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const n=e("@metamask/superstruct"),r=e("./errors.cjs");function i(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=a,s.assert=function(e,t="Assertion failed.",s=a){if(!e){if(t instanceof Error)throw t;throw i(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${s}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/assert.cjs"}],[2375,{"./assert.cjs":2374,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/base64.cjs"}],[2376,{"./assert.cjs":2374,"./hex.cjs":2383,"@scure/base":2797,buffer:3520},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const n=e("@scure/base"),r=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function m(e){(0,r.assert)(l(e),"Value must be a Uint8Array.")}function d(e){if(m(e),0===e.length)return"0x";const t=u(),s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=t[e[n]];return(0,i.add0x)(s.join(""))}function p(e){m(e);const t=d(e);return BigInt(t)}function h(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,n=new Uint8Array(s.length/2);for(let e=0;e<n.length;e++){const t=s.charCodeAt(2*e),r=s.charCodeAt(2*e+1),i=t-(t<o?a:c),u=r-(r<o?a:c);n[e]=16*i+u}return n}function f(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return h(e.toString(16))}function g(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return h(e.toString(16))}function v(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function k(e){if("bigint"==typeof e)return f(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?h(e):v(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=l,s.assertIsBytes=m,s.bytesToHex=d,s.bytesToBigInt=p,s.bytesToSignedBigInt=function(e){m(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){m(e);const t=p(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return m(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return m(e),n.base64.encode(e)},s.hexToBytes=h,s.bigIntToBytes=f,s.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return n.reverse()},s.numberToBytes=g,s.stringToBytes=v,s.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},s.valueToBytes=k,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let n=0;n<e.length;n++){const r=k(e[n]);t[n]=r,s+=r.length}const n=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)n.set(t[e],s),s+=t[e].length;return n},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/bytes.cjs"}],[2377,{"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipChainId=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct");function r(e){return(0,n.is)(e,s.CaipNamespaceStruct)}function i(e){return(0,n.is)(e,s.CaipReferenceStruct)}s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CaipChainIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,n.pattern)((0,n.string)(),s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,n.pattern)((0,n.string)(),s.CAIP_ACCOUNT_ADDRESS_REGEX),function(e){e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,n.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=r,s.isCaipReference=i,s.isCaipAccountId=function(e){return(0,n.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=function(e){return(0,n.is)(e,s.CaipAccountAddressStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!r(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2378,{"./base64.cjs":2375,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),r=e("./base64.cjs");s.ChecksumStruct=(0,n.size)((0,r.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/checksum.cjs"}],[2379,{"./assert.cjs":2374,"./bytes.cjs":2376,"./hex.cjs":2383,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),m=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);s.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,m)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/coercers.cjs"}],[2380,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/collections.cjs"}],[2381,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2382,{"./misc.cjs":2388,"pony-cause":4459},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const n=e("pony-cause"),r=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=i,s.isErrorWithMessage=a,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,r.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/errors.cjs"}],[2383,{"./assert.cjs":2374,"./bytes.cjs":2376,"@metamask/superstruct":2618,"@noble/hashes/sha3":2779},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const n=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,s.HexStruct)}function c(e){return(0,n.is)(e,s.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=m(e.toLowerCase()),o=m((0,a.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,i.assert)((0,n.is)(s,(0,n.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,s.HexChecksumAddressStruct)&&u(e)===e}function m(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,n.is)(e,s.HexAddressStruct)||l(e)},s.getChecksumAddress=u,s.isValidChecksumAddress=l,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=m}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/hex.cjs"}],[2384,{"./assert.cjs":2374,"./base64.cjs":2375,"./bytes.cjs":2376,"./caip-types.cjs":2377,"./checksum.cjs":2378,"./coercers.cjs":2379,"./collections.cjs":2380,"./encryption-types.cjs":2381,"./errors.cjs":2382,"./hex.cjs":2383,"./json.cjs":2385,"./keyring.cjs":2386,"./logging.cjs":2387,"./misc.cjs":2388,"./number.cjs":2389,"./opaque.cjs":2390,"./promise.cjs":2391,"./time.cjs":2392,"./transaction-types.cjs":2393,"./versions.cjs":2394},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./assert.cjs"),s),r(e("./base64.cjs"),s),r(e("./bytes.cjs"),s),r(e("./caip-types.cjs"),s),r(e("./checksum.cjs"),s),r(e("./coercers.cjs"),s),r(e("./collections.cjs"),s),r(e("./encryption-types.cjs"),s),r(e("./errors.cjs"),s),r(e("./hex.cjs"),s),r(e("./json.cjs"),s),r(e("./keyring.cjs"),s),r(e("./logging.cjs"),s),r(e("./misc.cjs"),s),r(e("./number.cjs"),s),r(e("./opaque.cjs"),s),r(e("./promise.cjs"),s),r(e("./time.cjs"),s),r(e("./transaction-types.cjs"),s),r(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/index.cjs"}],[2385,{"./assert.cjs":2374,"./misc.cjs":2388,"@metamask/superstruct":2618},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const s=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],s)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!a(s)||e.validator(t,s),refiner:(t,s)=>!a(s)||e.refiner(t,s)})}s.object=e=>(0,n.object)(e),s.exactOptional=o;function c(e){return(0,n.create)(e,s.JsonStruct)}s.UnsafeJsonStruct=(0,n.union)([(0,n.literal)(null),(0,n.boolean)(),(0,n.define)("finite number",(e=>(0,n.is)(e,(0,n.number)())&&Number.isFinite(e))),(0,n.string)(),(0,n.array)((0,n.lazy)((()=>s.UnsafeJsonStruct))),(0,n.record)((0,n.string)(),(0,n.lazy)((()=>s.UnsafeJsonStruct)))]),s.JsonStruct=(0,n.coerce)(s.UnsafeJsonStruct,(0,n.any)(),(e=>((0,r.assertStruct)(e,s.UnsafeJsonStruct),JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t)))))),s.isValidJson=function(e){try{return c(e),!0}catch{return!1}},s.getSafeJson=c,s.getJsonSize=function(e){(0,r.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,n.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(s.JsonStruct),stack:o((0,n.string)())}),s.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),s.JsonStruct),(0,n.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,n.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,n.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,n.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,n.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,n.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,n.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,n.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,n.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/json.cjs"}],[2386,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/keyring.cjs"}],[2387,{debug:3665},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const r=(0,n(e("debug")).default)("metamask");s.createProjectLogger=function(e){return r.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/logging.cjs"}],[2388,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=n,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/misc.cjs"}],[2389,{"./assert.cjs":2374,"./hex.cjs":2383},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const n=e("./assert.cjs"),r=e("./hex.cjs");s.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/number.cjs"}],[2390,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/opaque.cjs"}],[2391,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const n=new Promise(((e,n)=>{t=e,s=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:s}}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/promise.cjs"}],[2392,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return n(e,"count"),e*t},s.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/time.cjs"}],[2393,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2394,{"./assert.cjs":2374,"@metamask/superstruct":2618,semver:4785},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const n=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");s.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,n.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,n.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,r.gt)(e,t)},s.gtRange=function(e,t){return(0,r.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-execution-environments>@metamask/snaps-utils>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/snaps-utils/node_modules/@metamask/utils/dist/versions.cjs"}],[2395,{"./url-alphabet/index.cjs":2396},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){let{urlAlphabet:n}=e("./url-alphabet/index.cjs"),r=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,s)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*n*t/e.length);return(i=t)=>{let a="";for(;;){let t=s(r),o=r;for(;o--;)if(a+=e[t[o]&n]||"",a.length===i)return a}}};t.exports={nanoid:(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),""),customAlphabet:(e,t=21)=>i(e,t,r),customRandom:i,urlAlphabet:n,random:r}}}},{package:"@metamask/snaps-execution-environments>nanoid",file:"node_modules/@metamask/snaps-execution-environments/node_modules/nanoid/index.browser.cjs"}],[2396,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={urlAlphabet:"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}}},{package:"@metamask/snaps-execution-environments>nanoid",file:"node_modules/@metamask/snaps-execution-environments/node_modules/nanoid/url-alphabet/index.cjs"}],[2397,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={name:"@metamask/snaps-execution-environments",version:"6.5.0",description:"Snap sandbox environments for executing SES javascript",repository:{type:"git",url:"https://github.com/MetaMask/snaps.git"},sideEffects:!1,exports:{".":{import:"./dist/index.mjs",require:"./dist/index.js",types:"./dist/types/index.d.ts"},"./dist/browserify/node-process/bundle.js":{default:"./dist/browserify/node-process/bundle.js"},"./dist/browserify/node-thread/bundle.js":{default:"./dist/browserify/node-thread/bundle.js"},"./package.json":"./package.json"},main:"./dist/index.js",module:"./dist/index.mjs",types:"./dist/types/index.d.ts",files:["dist"],scripts:{test:"rimraf coverage && jest && yarn test:browser && yarn posttest",posttest:"ts-node scripts/coverage.ts && rimraf coverage/jest coverage/wdio","test:browser":"wdio run wdio.config.js","test:ci":"yarn test","test:watch":"jest --watch","lint:eslint":"eslint . --cache --ext js,ts,jsx,tsx","lint:misc":'prettier --no-error-on-unmatched-pattern --loglevel warn "**/*.json" "**/*.md" "**/*.html" "!CHANGELOG.md" --ignore-path ./.prettierignore',"lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:changelog":"../../scripts/validate-changelog.sh @metamask/snaps-execution-environments",lint:"yarn lint:eslint && yarn lint:misc --check && yarn lint:changelog && yarn lint:dependencies",clean:"rimraf '*.tsbuildinfo' 'dist' 'src/__GENERATED__/' 'coverage/*' '__test__/*'",build:"tsup --clean && yarn build:types && yarn build:lavamoat","build:types":"tsc --project tsconfig.build.json","build:lavamoat":"lavamoat scripts/build.js --policy lavamoat/build-system/policy.json  --policyOverride lavamoat/build-system/policy-override.json","build:lavamoat:policy":"yarn build:lavamoat --writeAutoPolicy && node scripts/build.js --writeAutoPolicy","auto-changelog-init":"auto-changelog init","publish:preview":"yarn npm publish --tag preview","lint:ci":"yarn lint",start:"node scripts/start.js","lint:dependencies":"depcheck","build:ci":"tsup --clean"},dependencies:{"@metamask/json-rpc-engine":"^9.0.0","@metamask/object-multiplex":"^2.0.0","@metamask/post-message-stream":"^8.1.0","@metamask/providers":"^17.0.0","@metamask/rpc-errors":"^6.2.1","@metamask/snaps-sdk":"^6.0.0","@metamask/snaps-utils":"^7.7.0","@metamask/utils":"^8.3.0",nanoid:"^3.1.31","readable-stream":"^3.6.2",superstruct:"^1.0.3"},devDependencies:{"@babel/core":"^7.23.2","@babel/preset-env":"^7.23.2","@babel/preset-typescript":"^7.23.2","@esbuild-plugins/node-globals-polyfill":"^0.2.3","@esbuild-plugins/node-modules-polyfill":"^0.2.2","@lavamoat/allow-scripts":"^3.0.4","@lavamoat/lavapack":"^6.1.1","@lavamoat/lavatube":"^1.0.0","@metamask/auto-changelog":"^3.4.4","@metamask/eslint-config":"^12.1.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@swc/core":"1.3.78","@swc/jest":"^0.2.26","@types/express":"^4.17.17","@types/jest":"^27.5.1","@types/node":"18.14.2","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^5.42.1","@wdio/browser-runner":"^8.19.0","@wdio/cli":"^8.19.0","@wdio/globals":"^8.19.0","@wdio/mocha-framework":"^8.19.0","@wdio/spec-reporter":"^8.19.0","@wdio/static-server-service":"^8.19.0","babel-plugin-tsconfig-paths-module-resolver":"^1.0.4",babelify:"^10.0.0",browserify:"^17.0.0",deepmerge:"^4.2.2",depcheck:"^1.4.7",esbuild:"^0.18.10",eslint:"^8.27.0","eslint-config-prettier":"^8.5.0","eslint-plugin-import":"^2.26.0","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^39.6.2","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","expect-webdriverio":"^4.4.1","istanbul-lib-coverage":"^3.2.0","istanbul-lib-report":"^3.0.0","istanbul-reports":"^3.1.5",jest:"^29.0.2","jest-environment-node":"^29.5.0","jest-fetch-mock":"^3.0.3",lavamoat:"^8.0.4","lavamoat-browserify":"^17.0.5",prettier:"^2.7.1","prettier-plugin-packagejson":"^2.2.11",rimraf:"^4.1.2","serve-handler":"^6.1.5",ses:"^1.1.0",terser:"^5.17.7","ts-node":"^10.9.1",tsup:"^8.0.1",typescript:"~4.8.4",vite:"^4.3.9","vite-tsconfig-paths":"^4.0.5","wdio-chromedriver-service":"^8.1.1","wdio-geckodriver-service":"^5.0.2",webdriverio:"^8.19.0",yargs:"^17.7.1"},engines:{node:"^18.16 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"}}}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/package.json"}],[4955,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function n(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(s!==undefined){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(s,"__esModule",{value:!0}),s.CallbackProcessor=void 0;s.CallbackProcessor=class{constructor(){n(this,"currentMessageId",0),n(this,"messageCallbacks",new Map)}registerCallback(e){return this.currentMessageId+=1,this.messageCallbacks.set(this.currentMessageId,e),this.currentMessageId}processCallback(e){if(this.messageCallbacks.has(e.messageId)){const t=this.messageCallbacks.get(e.messageId);if(t)return this.messageCallbacks.delete(e.messageId),t(e)}return null}}}}},{package:"$root$",file:"offscreen/scripts/callback-processor.ts"}],[4956,{"../../shared/constants/offscreen-communication":4979},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){chrome.runtime.onMessage.addListener(((e,t,s)=>{if(e.target===n.OffscreenCommunicationTarget.latticeOffscreen)return async function(e){const t=window.open(e);if(!t)throw new Error("Failed to open Lattice connector.");return t}(e.params.url).then((e=>{const t=setInterval((()=>{e.closed&&(clearInterval(t),s({error:new Error("Lattice connector closed.")}))}),500);window.addEventListener("message",(r=>{if(r.origin===n.KnownOrigins.lattice||r.source!==e)try{clearInterval(t);const e=JSON.parse(r.data);e.deviceID&&e.password||s({error:new Error("Invalid credentials returned from Lattice.")}),s({result:e})}catch(e){s({error:e})}}),!1)})),!0}))};var n=e("../../shared/constants/offscreen-communication")}}},{package:"$root$",file:"offscreen/scripts/lattice.ts"}],[4957,{"../../shared/constants/offscreen-communication":4979,"./callback-processor":4955},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){const e=document.createElement("iframe");e.src="https://metamask.github.io/eth-ledger-bridge-keyring",e.allow="hid",document.body.appendChild(e),window.addEventListener("message",(({origin:t,data:s,source:r})=>{if(t===n.KnownOrigins.ledger&&r===(null==e?void 0:e.contentWindow)&&s){if(s.action===a)return void chrome.runtime.sendMessage({action:n.OffscreenCommunicationEvents.ledgerDeviceConnect,payload:s.payload.connected});o.processCallback(s)}})),chrome.runtime.onMessage.addListener(((t,s,r)=>{var a;if(t.target!==n.OffscreenCommunicationTarget.ledgerOffscreen)return;if(null==e||!e.contentWindow){return void r({success:!1,payload:{error:new Error("Ledger iframe not present")}})}const c=o.registerCallback(r),u={...t,target:i,messageId:c};return null==e||null===(a=e.contentWindow)||void 0===a||a.postMessage(u,n.KnownOrigins.ledger),!0}))};var n=e("../../shared/constants/offscreen-communication"),r=e("./callback-processor");const i="LEDGER-IFRAME",a="ledger-connection-event",o=new r.CallbackProcessor}}},{package:"$root$",file:"offscreen/scripts/ledger.ts"}],[4959,{"../../shared/constants/offscreen-communication":4979,"@trezor/connect-web":3024},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){chrome.runtime.onMessage.addListener(((e,t,s)=>{if(e.target===r.OffscreenCommunicationTarget.trezorOffscreen){switch(e.action){case r.TrezorAction.init:n.default.on(n.DEVICE_EVENT,(e=>{var t;e.type===n.DEVICE.CONNECT&&null!==(t=e.payload.features)&&void 0!==t&&t.model&&chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.extension,event:r.OffscreenCommunicationEvents.trezorDeviceConnect,payload:e.payload.features.model})})),n.default.init({...e.params,env:"web"}).then((()=>{s()}));break;case r.TrezorAction.dispose:n.default.dispose(),s();break;case r.TrezorAction.getPublicKey:n.default.getPublicKey(e.params).then((e=>{s(e)}));break;case r.TrezorAction.signTransaction:n.default.ethereumSignTransaction(e.params).then((e=>{s(e)}));break;case r.TrezorAction.signMessage:n.default.ethereumSignMessage(e.params).then((e=>{s(e)}));break;case r.TrezorAction.signTypedData:n.default.ethereumSignTypedData(e.params).then((e=>{s(e)}));break;default:s({success:!1,payload:{error:"Trezor action not supported"}})}return!0}}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=i(t);if(s&&s.has(e))return s.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}(e("@trezor/connect-web")),r=e("../../shared/constants/offscreen-communication");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(i=function(e){return e?s:t})(e)}}}},{package:"$root$",file:"offscreen/scripts/trezor.ts"}],[4958,{"../../shared/constants/offscreen-communication":4979,"./lattice":4956,"./ledger":4957,"./trezor":4959,"@metamask/post-message-stream":1850,"@metamask/snaps-execution-environments":2268},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=e("@metamask/post-message-stream"),r=e("@metamask/snaps-execution-environments"),i=e("../../shared/constants/offscreen-communication"),a=u(e("./ledger")),o=u(e("./trezor")),c=u(e("./lattice"));function u(e){return e&&e.__esModule?e:{default:e}}(0,a.default)(),(0,o.default)(),(0,c.default)();const l=new n.BrowserRuntimePostMessageStream({name:"child",target:"parent"});r.ProxySnapExecutor.initialize(l,"./snaps/index.html"),chrome.runtime.sendMessage({target:i.OffscreenCommunicationTarget.extensionMain,isBooted:!0})}}},{package:"$root$",file:"offscreen/scripts/offscreen.ts"}]],[4958],{});